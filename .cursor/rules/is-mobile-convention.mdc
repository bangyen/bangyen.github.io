---
description: Convention for using useMobile() vs MobileProvider/useMobileContext in React components
globs: src/**/*.tsx,src/**/*.ts
alwaysApply: false
---

# `isMobile` Convention

## When to call `useMobile()` internally

**Leaf components** that only need responsive behaviour for their own
rendering should call `useMobile()` (or `useMobile('sm')`) directly.
This keeps their API simpler and avoids threading a prop that the parent
doesn't otherwise need.

Examples: `Info`, `SlantInfo`, `GhostCanvas`, `Example`.

## When to use `MobileProvider` + `useMobileContext()`

**Coordinating parents** whose children need the same breakpoint flags
should wrap their subtree with `<MobileProvider>` and let children read
from context via `useMobileContext()`.  This avoids redundant
`useMediaQuery` subscriptions, keeps siblings in sync within the same
render frame, and eliminates prop-threading.

The context exposes `{ sm, md }` flags (both `boolean`).

Examples: `ResearchDemo` wraps its content in `<MobileProvider>`;
`ResearchHeader` and `ResearchChart` consume via `useMobileContext()`.

## Rule of thumb

- One consumer in the subtree -> call `useMobile()` internally.
- Two or more siblings need the value -> wrap with `<MobileProvider>`,
  children read via `useMobileContext()`.
- Never mix: if a `MobileProvider` is present, children must NOT also
  call `useMobile()` for the same breakpoint.
