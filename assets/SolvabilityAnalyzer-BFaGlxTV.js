import{j as e,r as b}from"./vendor_react-CiGj4Onb.js";import{b as i}from"./ResearchDemo-CIpFSwon.js";import{B as t,d as n,T as y,I as S,j,e as g,F as T,P as A,z as v,A as R}from"./vendor_mui_core-Cb6gYFA4.js";import{Q as E,f as C}from"./vendor_mui_icons-88WVDz42.js";import{T as a,a as r,S as p}from"./index-CB166san.js";import{u as L}from"./useWorker-CagANEAU.js";import"./GlassCard-ZVr2Az-J.js";import"./vendor_recharts-C7iXNUB1.js";import"./PageLayout-D4KkK3P1.js";const k=({n:o,loading:l,onNChange:s,onAnalyze:x,onCancel:d})=>e.jsxs(e.Fragment,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(n,{variant:"h6",sx:{color:r.text.primary,fontWeight:a.fontWeight.bold},children:"Solvability Analyzer"}),e.jsx(y,{title:"Analyze the solvability and kernel properties for a square n x n grid.",children:e.jsx(S,{size:"small",sx:{ml:1,color:r.text.secondary},"aria-label":"Solvability analyzer documentation",children:e.jsx(E,{fontSize:"small"})})})]}),e.jsx(t,{sx:{mb:3},children:e.jsx(j,{fullWidth:!0,label:"Grid Size (n)",variant:"outlined",value:o,onChange:c=>{s(c.target.value)},size:"small",sx:{input:{color:r.text.primary}}})}),l?e.jsx(g,{fullWidth:!0,variant:"outlined",onClick:d,startIcon:e.jsx(C,{}),sx:{color:r.text.secondary,borderColor:r.border.subtle,height:i.LAYOUT.BUTTON_HEIGHT,"&:hover":{backgroundColor:i.GLASS.SLIGHT,borderColor:r.text.secondary}},children:"Cancel Analysis"}):e.jsx(g,{fullWidth:!0,variant:"contained",onClick:x,sx:{backgroundColor:r.primary.main,border:"1px solid transparent",height:i.LAYOUT.BUTTON_HEIGHT,"&:hover":{backgroundColor:r.primary.dark}},children:"Analyze Solvability"})]}),O=({nullity:o,solvablePercent:l})=>e.jsx(t,{sx:{p:2.25,pb:0},children:e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,pb:1.5,borderBottom:`1px solid ${i.BORDER.SUBTLE}`},children:[e.jsx(n,{variant:"caption",sx:{color:r.primary.main,fontWeight:a.fontWeight.bold,textTransform:"uppercase",letterSpacing:1},children:"Subspace Analysis"}),e.jsxs(n,{sx:{color:o===0?r.data.green:r.text.primary,fontFamily:"monospace",fontWeight:a.fontWeight.bold,fontSize:i.LAYOUT.FONT_SIZE_SM},children:[l,"% Solvable"]})]})}),I=({quietPatterns:o})=>o.length===0?null:e.jsxs(t,{sx:{minWidth:0,mb:1.5},children:[e.jsx(n,{variant:"caption",sx:{color:r.primary.main,fontWeight:a.fontWeight.bold,display:"block",mb:.5,textTransform:"uppercase",letterSpacing:1,fontSize:i.LAYOUT.FONT_SIZE_XS},children:"Quiet Patterns (Kernel)"}),e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:1,pr:1},children:o.map(l=>e.jsx(t,{sx:{fontFamily:"monospace",fontSize:i.LAYOUT.FONT_SIZE_XS,px:1.25,py:.5,backgroundColor:i.GLASS.DARK,borderRadius:p.borderRadius.xs,color:r.primary.main,letterSpacing:1,border:`1px solid ${i.BORDER.VERY_SUBTLE}`,wordBreak:"break-all"},children:l},l))})]}),U=({imageMapping:o,isFullSubspace:l})=>o.length===0?null:e.jsxs(t,{sx:{minWidth:0,flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(n,{variant:"caption",sx:{color:r.primary.main,fontWeight:a.fontWeight.bold,display:"block",mb:.5,textTransform:"uppercase",letterSpacing:1,fontSize:i.LAYOUT.FONT_SIZE_XS},children:l?"Chasing Table":"Image Basis"}),e.jsxs(t,{sx:{display:"flex",px:1,mb:.5},children:[e.jsx(n,{variant:"caption",sx:{flex:1,color:r.text.secondary,fontSize:"0.55rem",fontWeight:a.fontWeight.bold,letterSpacing:.5},children:"BOTTOM RESIDUAL"}),e.jsx(t,{sx:{width:25}}),e.jsx(n,{variant:"caption",sx:{flex:1,color:r.text.secondary,fontSize:"0.55rem",fontWeight:a.fontWeight.bold,letterSpacing:.5,textAlign:"right"},children:"TOP CORRECTION"})]}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:.5,pr:1},children:[o.map(s=>e.jsxs(t,{sx:{fontFamily:"monospace",fontSize:i.LAYOUT.FONT_SIZE_XS,p:1,px:1.25,backgroundColor:i.GLASS.DARK,borderRadius:i.LAYOUT.CARD_RADIUS,color:r.text.primary,border:`1px solid ${i.BORDER.VERY_SUBTLE}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{component:"span",sx:{color:r.data.green,flex:1,wordBreak:"break-all"},children:s.state}),e.jsx(t,{component:"span",sx:{color:r.text.secondary,mx:1},children:"\u2192"}),e.jsx(t,{component:"span",sx:{color:r.primary.main,flex:1,textAlign:"right",wordBreak:"break-all"},children:s.toggle})]},s.state)),!l&&e.jsx(t,{sx:{p:1,textAlign:"center"},children:e.jsx(n,{variant:"caption",sx:{color:r.text.secondary,fontStyle:"italic",fontSize:"0.6rem"},children:"... and other reachable combinations"})})]})]}),W=({result:o})=>e.jsx(T,{in:!0,children:e.jsxs(A,{elevation:0,sx:{height:"100%",backgroundColor:i.GLASS.TRANSPARENT,borderRadius:p.borderRadius.md,border:`1px solid ${v(o.nullity===0?r.data.green:r.primary.main,.2)}`,borderLeft:`4px solid ${o.nullity===0?r.data.green:r.primary.main}`,position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx(O,{nullity:o.nullity,solvablePercent:o.solvablePercent}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2.5,flexGrow:1,minHeight:0,overflowY:"auto",p:2.25,pt:0,"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:i.GLASS.MEDIUM,borderRadius:p.borderRadius.xs}},children:[e.jsx(I,{quietPatterns:o.quietPatterns}),e.jsx(U,{imageMapping:o.imageMapping,isFullSubspace:o.isFullSubspace})]}),o.quietPatterns.length===0&&e.jsx(t,{sx:{p:1.5,px:2.25,backgroundColor:i.GREEN.BG_SUBTLE,borderTop:`1px solid ${i.GREEN.BORDER_SUBTLE}`,display:"flex",alignItems:"center"},children:e.jsx(n,{sx:{color:r.data.green,fontFamily:"monospace",fontSize:i.LAYOUT.FONT_SIZE_SM,fontWeight:a.fontWeight.bold,textTransform:"uppercase"},children:"fully solvable (Nullity = 0)"})})]})}),z=()=>{const[o,l]=b.useState("5"),s=b.useCallback(()=>new Worker(new URL("/assets/solvability.worker-CnW1T9vi.js",import.meta.url),{type:"module"}),[]),{result:x,loading:d,error:c,run:f,terminate:u,setError:h}=L(s);return e.jsxs(t,{children:[e.jsx(k,{n:o,loading:d,onNChange:l,onAnalyze:()=>{const m=parseInt(o,10);isNaN(m)||m<1?h("Please enter a valid positive integer."):m>100?h("Grid size n > 100 is too computationally intensive."):f({n:m})},onCancel:()=>{u()}}),c&&e.jsx(R,{severity:"error",sx:{mb:2,mt:2},children:c}),e.jsxs(t,{sx:{height:i.LAYOUT.RESULT_CARD_HEIGHT,mt:3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[d&&e.jsxs(t,{sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,border:`1px dashed ${r.border.subtle}`,borderRadius:p.borderRadius.md,backgroundColor:i.GLASS.VERY_SUBTLE},children:[e.jsx(t,{sx:{width:40,height:40,borderRadius:"50%",border:`2px solid ${r.primary.main}22`,borderTopColor:r.primary.main,...i.ANIMATIONS.SPIN}}),e.jsx(n,{variant:"caption",sx:{color:r.text.secondary},children:"Performing Algebraic Matrix Analysis..."})]}),!x&&!c&&!d&&e.jsx(t,{sx:{height:"100%",display:"flex",alignItems:"flex-start",justifyContent:"center",pt:5,px:3,border:`1px dashed ${r.border.subtle}`,borderRadius:p.borderRadius.md,backgroundColor:i.GLASS.VERY_SUBTLE},children:e.jsx(n,{variant:"body2",sx:{color:r.text.secondary,fontStyle:"italic",textAlign:"center"},children:"Select grid dimensions and click analyze to see results"})}),x&&!d&&e.jsx(W,{result:x})]})]})};export{z as SolvabilityAnalyzer};
