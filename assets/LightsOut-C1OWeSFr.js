import{r as z,j as a,__tla as tn}from"./vendor_react-BC_ZxTUy.js";import{a as b,T as K,R as nn,d as $t,e as en,L as It,__tla as on}from"./index-C8P4Xo67.js";import{c as rn,B as At,u as sn,g as an,a as cn,b as ln,d as dn,G as fn,e as un,f as Q}from"./GamePageLayout-DLHhDour.js";import{G as pn}from"./GlassCard-Cdndvff9.js";import{C as V,u as xn}from"./layout-Csyrq1KZ.js";import{b as Bt,E as mn,c as gn,K as hn,d as yn,e as bn,R as jn,N as Sn,f as wn,g as Pt,M as vn}from"./vendor_mui_icons-DNj8xVz8.js";import{G as X,B as y,d as F,M as _n,h as zn,I as Rt,e as tt}from"./vendor_mui_core-D6ruIU1t.js";import"./GlobalHeader-1JimkmyO.js";let Dt,Cn=Promise.all([(()=>{try{return tn}catch{}})(),(()=>{try{return on}catch{}})()]).then(async()=>{function lt(n,t){const o=z.useCallback((i,l)=>{const c=n(i,l);return{front:c?t.primary:t.secondary,back:c?t.secondary:t.primary}},[n,t]),e=z.useCallback((i,l)=>(function(c,f,d){const s=d(c,f),u={},p=s===d(c-1,f),x=s===d(c+1,f),m=s===d(c,f-1),j=s===d(c,f+1);return(p||m)&&(u.borderTopLeftRadius=0),(p||j)&&(u.borderTopRightRadius=0),(x||m)&&(u.borderBottomLeftRadius=0),(x||j)&&(u.borderBottomRightRadius=0),u})(i,l,n),[n]),r=z.useCallback((i,l)=>(function(f,d,s){const u=s(f,d),p=s(f,d+1),x=s(f+1,d),m=s(f+1,d+1);let j=!0;return u&&m||!(u+p+x+m<3)||(j=!1),j})(i,l,n)?t.primary:t.secondary,[n,t]);return z.useMemo(()=>({getColor:o,getBorder:e,getFiller:r}),[o,e,r])}function dt(n,t){const{grid:o,rows:e,cols:r}=n;return lt(z.useCallback((i,l)=>{if(i<0||l<0||i>=e||l>=r)return-1;const c=o[i];return c===void 0?0:c>>l&1},[o,e,r]),t)}function ft(n,t){const o=n.length,e=[];for(let r=0;r<o;r++){const i=n[r];let l=0n;if(i!==void 0){for(let c=0;c<o;c++)if(i&1n<<BigInt(o-1-c)){const f=t[c];f!==void 0&&(l^=f)}}e.push(l)}return e}function ut(n){const t=Array(n).fill(1n);for(let o=0;o<n;o++){const e=t[o];e!==void 0&&(t[o]=e<<BigInt(n-o-1))}return t}function Tt(n,t,o){let e=ut(n.length),r=[...n],i=t;for(;i>0;)i%2==1&&(e=ft(e,r)),r=ft(r,r),i=Math.floor(i/2);return e}function Ot(n,t){const o=n.length,e=[];for(let r=0;r<o;r++){const i=n[r],l=t[r];if(i!==void 0&&l!==void 0){const c=i^l;e.push(c)}}return e}function Mt(n,t){const o=n.length,e=[...Array(o).keys()].sort((r,i)=>{const l=n[i],c=n[r];return l===void 0||c===void 0?0:l>c?1:l<c?-1:0});return[e.map(r=>n[r]??0n),e.map(r=>t[r]??0n)]}function pt(n){const t=n.length;let o=n,e=ut(t);for(let r=0;r<t;r++){const i=1n<<BigInt(t-r-1);[o,e]=Mt(o,e);for(let l=0;l<t;l++){const c=o[l];if(c!==void 0&&l!==r&&c&i){const f=o[r],d=e[r];if(f!==void 0){const s=o[l];s!==void 0&&(o[l]=s^f)}if(d!==void 0){const s=e[l];s!==void 0&&(e[l]=s^d)}}}}return e}function Et(n,t){const o=(function(f,d){const s=d(8*f.length,8)>>>0;return xt().set(f,s/8),mt=f.length,s})(n,$.__wbindgen_malloc),e=mt,r=$.invert_matrix(o,e,t);if(r[3])throw(function(f){const d=$.__wbindgen_externrefs.get(f);return $.__externref_table_dealloc(f),d})(r[2]);var i,l,c=(i=r[0],l=r[1],i>>>=0,xt().subarray(i/8,i/8+l)).slice();return $.__wbindgen_free(r[0],8*r[1],8),c}function Wt(){return{__proto__:null,"./lights_out_wasm_bg.js":{__proto__:null,__wbindgen_cast_0000000000000001:function(n,t){var o;return o=n,(function(e,r){return nt+=r,nt>=Ft&&(Y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Y.decode(),nt=r),Y.decode((H!==null&&H.byteLength!==0||(H=new Uint8Array($.memory.buffer)),H).subarray(e,e+r))})(o>>>=0,t)},__wbindgen_init_externref_table:function(){const n=$.__wbindgen_externrefs,t=n.grow(4);n.set(0,void 0),n.set(t+0,void 0),n.set(t+1,null),n.set(t+2,!0),n.set(t+3,!1)}}}}let U=null;function xt(){return U!==null&&U.byteLength!==0||(U=new BigUint64Array($.memory.buffer)),U}let H=null,Y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Y.decode();const Ft=2146435072;let nt=0,$,mt=0;try{await(async function(n){if($!==void 0)return $;n!==void 0&&Object.getPrototypeOf(n)===Object.prototype&&({module_or_path:n}=n),n===void 0&&(n=new URL("/assets/lights_out_wasm_bg-8JZuMai_.wasm",import.meta.url));const t=Wt();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:o}=await(async function(e,r){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,r)}catch(l){if(!e.ok||!(function(c){switch(c){case"basic":case"cors":case"default":return!0}return!1})(e.type)||e.headers.get("Content-Type")==="application/wasm")throw l}const i=await e.arrayBuffer();return await WebAssembly.instantiate(i,r)}{const i=await WebAssembly.instantiate(e,r);return i instanceof WebAssembly.Instance?{instance:i,module:e}:i}})(await n,t);return(function(e){return $=e.exports,U=null,H=null,$.__wbindgen_start(),$})(o)})()}catch{}const N={};function gt(n,t,o){const e=`${t.toString()},${o.toString()}`;if(!N[e]){const c=(function(d){if(d===1)return[1n];const s=[7n<<BigInt(d-2)];for(let p=1;p<d;p++){const x=s[p-1];if(x!==void 0){const m=x>>1n;s.push(m)}}const u=s[0];return u!==void 0&&(s[0]=u-(1n<<BigInt(d))),s})(o),f=(function(d,s){const u=d.length;let p=Array(u).fill(0n),x=0,m=s;for(;m>0n;)1n&m&&(p=Ot(p,Tt(d,x))),m>>=1n,x++;return p})(c,(function(d){const s=[0n,1n];for(let u=1;u<d;u++){const p=s[u],x=s[u-1];if(p!==void 0&&x!==void 0){const m=p<<1n;s.push(m^x)}}return s[d]??0n})(t+1));if(o<=64)try{const d=Et(new BigUint64Array(f.map(s=>BigInt.asUintN(64,s))),f.length);N[e]=Array.from(d)}catch{N[e]=pt(f)}else N[e]=pt(f)}const r=N[e],i=n.join(""),l=i?BigInt("0b"+i):0n;if(r===void 0)throw new Error("Inverse matrix not found in cache");return r.map(c=>1&(function(f){let d=0,s=f;if(s<0n)throw new Error("countBits called on negative bigint");for(;s>0n;)s&=s-1n,d++;return d})(c&l))}function et(n,t){return Array.from({length:n},()=>0)}function G(n,t,o,e,r){const i=[...o];let l=1<<t;if(t>0&&(l|=1<<t-1),t<r-1&&(l|=1<<t+1),i[n]!==void 0&&(i[n]^=l),n>0){const c=i[n-1];c!==void 0&&(i[n-1]=c^1<<t)}if(n<e-1){const c=i[n+1];c!==void 0&&(i[n+1]=c^1<<t)}return i}function ht(n,t,o,e,r){let i=1<<t;if(t>0&&(i|=1<<t-1),t<r-1&&(i|=1<<t+1),o[n]!==void 0&&(o[n]^=i),n>0){const l=o[n-1];l!==void 0&&(o[n-1]=l^1<<t)}if(n<e-1){const l=o[n+1];l!==void 0&&(o[n+1]=l^1<<t)}}function ot(n,t){const o=et(n);for(let e=0;e<n;e++)for(let r=0;r<t;r++)Math.random()>.5&&ht(e,r,o,n,t);return o}function q(n,t){return{grid:et(n),score:0,rows:n,cols:t,initialized:!1}}const Lt=rn({getInitialState:q,customHandler:(n,t)=>{const{rows:o,cols:e}=n;switch(t.type){case"adjacent":return{...n,grid:G(t.row,t.col,n.grid,o,e)};case"multi_adjacent":{const r=[...n.grid];return t.moves.forEach(({row:i,col:l})=>{ht(i,l,r,o,e)}),{...n,grid:r}}case"random":case"randomize":return{...n,grid:ot(o,e),initialized:!0};case"resize":{const r=t.newRows??t.rows??n.rows,i=t.newCols??t.cols??n.cols;return{...q(r,i),grid:ot(r,i),initialized:!0}}case"new":case"next":return{...q(o,e),grid:ot(o,e),score:n.score+1,initialized:!0}}return n}});function yt(n,t){const o=[...n];let e=n.at(-1);if(!e)return o;for(let r=1;r<t;r++){const i=e[r-1];if(i!==void 0)for(let l=0;l<t;l++){if(!(i>>l&1))continue;const c=G(r,l,e,t,t);o.push(c),e=c}}return o}function bt(n,t){const o=n.at(-1);if(!o)return n;const e=[...n];for(;e.length<t;)e.push([...o]);return e}function Ut(n,t){let o=et(t);for(const w of n)o=G(Math.floor(w/t),w%t,o,t,t);const e=yt([o],t),r=e.at(-1);if(!r)return{boardStates:[],inputStates:[],outputStates:[]};const i=r.at(-1)??0,l=Array.from({length:t},(w,S)=>i>>S&1),{input:c,output:f}=(function(w,S){const g=Array(S).fill(0),k=[g],P=[g],M=[...g];for(let R=0;R<S;R++){if(!w[R])continue;M[R]=1;const E=[...M],h=gt(E,S,S);k.push(E),P.push(h)}return{input:k,output:P}})(l,t),d=e.length+c.length+1,s=f.at(-1);if(!s)return{boardStates:[],inputStates:[],outputStates:[]};let u=[...r];for(;e.length<d;)e.push([...r]);const p=c[0];for(;c.length<d;)p&&c.unshift([...p]);const x=f[0];for(;f.length<d;)x&&f.unshift([...x]);for(let w=0;w<t;w++)s[w]&&(u=G(0,w,u,t,t),e.push([...u]));const m=yt(e,t),j=m.length;return{boardStates:m,inputStates:bt(c,j),outputStates:bt(f,j)}}const rt={FAST:"background-color 100ms ease-in-out, color 100ms ease-in-out, opacity 100ms ease-in-out, border-radius 100ms ease-in-out",DEFAULT:"background-color 200ms ease, color 200ms ease, opacity 200ms ease, border-radius 200ms ease"},jt={DROP:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},Ht=1.25,St={MOBILE:-28,DESKTOP:-40},Nt="lights-out-size",Gt="lights-out-state";function st({getColor:n,getBorder:t}){return(o,e)=>{const{front:r}=n(o,e);return{backgroundColor:r,color:r,children:a.jsx(Bt,{}),style:t(o,e),sx:{transition:rt.DEFAULT}}}}function Z(n,t,o){return lt(z.useCallback((e,r)=>e!==0||r<0||r>=t?-1:n[r]??0,[n,t]),o)}function wt(n,t,o,e,r,i=1){const l=n.length,c={},f=100/l;for(let d=0;d<l;d++){const s=d*f,u=(d+1)*f;let p=r.secondary,x=!1,m="";const j=n[d],w=d+1<l?n[d+1]:null;if(j&&w){const S=G(t,o,j,e,e);x=!0;for(let g=0;g<e;g++)if(S[g]!==w[g]){x=!1;break}if(x){const g=j[t];g!==void 0&&(p=g>>o&1?r.secondary:r.primary,m=`"${String(d+1)}"`)}}x?(c[`${String(s)}%`]={opacity:0,content:m,color:p,transform:"scale(0.5)"},c[`${String(s+f*(.1/i))}%`]={opacity:1,content:m,color:p,transform:"scale(1.2)"},c[`${String(s+f*(.2/i))}%`]={opacity:1,content:m,color:p,transform:"scale(1)"},c[`${String(u-f*(.1/i))}%`]={opacity:1,content:m,color:p,transform:"scale(1)"},c[`${String(u)}%`]={opacity:0,content:m,color:p,transform:"scale(0.5)"}):(c[`${String(s)}%`]={opacity:0,content:'""',color:p,transform:"scale(0.5)"},c[`${String(u)}%`]={opacity:0,content:'""',color:p,transform:"scale(0.5)"})}return c}function Kt({start:n=[],dims:t=3,size:o,palette:e,getFrontProps:r,getBackProps:i}){const[l,c]=z.useState(0);z.useEffect(()=>{const h=setInterval(()=>{c(v=>v+1)},2e3);return()=>{clearInterval(h)}},[]);const f=Ut(n,t),d=o,{boardStates:s,inputStates:u,outputStates:p}=f,x=l%u.length,m=x===u.length-1,j=dt({grid:s[x]??s[0]??[],rows:t,cols:t},e),w=r(j),S=i(j),g=(function(h,v,_,C){return(W,A)=>{const D=wt(h,W,A,v,C),I=h.length,B=`${_}-board-icon-${String(W)}-${String(A)}`;return{icon:a.jsx(y,{sx:{width:"100%",height:"100%",position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2,"&::after":{content:'""',fontSize:{xs:"0.8rem",sm:"1.2rem"},fontWeight:"bold",filter:jt.DROP,paddingTop:{xs:"0.08rem",sm:"0.15rem"},animation:`${B} ${String(2*I)}s linear infinite`}}}),keyframes:D,keyframeName:B}}})(s,t,"example",e),k=Z(u[x]??[],t,e),P=Z(p[x]??[],t,e),M=st(k),R=st(P),E=(function(h,v,_,C){return(W,A)=>{const D=h.length,I={},B=100/D;for(let T=0;T<D;T++){const J=T*B,at=(T+1)*B;let O=C.secondary,Ct=!1,L="";const ct=h[T],kt=T+1<D?h[T+1]:null;ct&&kt&&ct[A]!==kt[A]&&(Ct=!0,O=ct[A]===1?C.secondary:C.primary,L=`"${String(T+1)}"`),Ct?(I[`${String(J)}%`]={opacity:0,content:L,color:O,transform:"scale(0.5)"},I[`${String(J+.05*B)}%`]={opacity:1,content:L,color:O,transform:"scale(1.2)"},I[`${String(J+.1*B)}%`]={opacity:1,content:L,color:O,transform:"scale(1)"},I[`${String(at-.05*B)}%`]={opacity:1,content:L,color:O,transform:"scale(1)"},I[`${String(at)}%`]={opacity:0,content:L,color:O,transform:"scale(0.5)"}):(I[`${String(J)}%`]={opacity:0,content:'""',color:O,transform:"scale(0.5)"},I[`${String(at)}%`]={opacity:0,content:'""',color:O,transform:"scale(0.5)"})}const zt=`${_}-input-icon-${String(W)}-${String(A)}`;return{icon:a.jsx(y,{sx:{width:"100%",height:"100%",position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2,"&::after":{content:'""',fontSize:{xs:"0.8rem",sm:"1.2rem"},fontWeight:"bold",filter:jt.DROP,paddingTop:{xs:"0.08rem",sm:"0.15rem"},animation:`${zt} ${String(2*D)}s linear infinite`}}}),keyframes:I,keyframeName:zt}}})(u,0,"example",e);return a.jsx(Yt,{boardStates:s,inputStates:u,dims:t,id:"example",palette:e,children:a.jsx(X,{container:!0,size:12,spacing:2,sx:{height:"100%"},children:a.jsxs(X,{container:!0,size:12,wrap:"nowrap",sx:{justifyContent:"center",alignItems:"center",flex:1,height:"100%",overflow:"hidden"},children:[a.jsx(X,{size:6,sx:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:a.jsxs(y,{sx:{position:"relative",display:"inline-flex"},children:[a.jsx(At,{size:d,rows:t,cols:t,frontProps:(h,v)=>{const _=w(h,v),C=g(h,v);return{..._,children:a.jsxs(a.Fragment,{children:[_.children,C.icon]}),sx:{..._.sx,position:"relative"}}},backProps:S}),a.jsx(y,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:m?1:0,transform:m?"scale(1)":"scale(0.5)",visibility:m?"visible":"hidden",transition:"all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",pointerEvents:"none",zIndex:10},children:(()=>{const h=s[u.length-1],v=h==null?void 0:h.every(_=>_===(1<<t)-1);return a.jsx(mn,{sx:{fontSize:{xs:"2.5rem",sm:"4rem"},color:v?e.secondary:e.primary}})})()})]})}),a.jsxs(X,{container:!0,size:6,spacing:2,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsxs(y,{sx:{mb:2,textAlign:"center"},children:[a.jsx(F,{variant:"subtitle2",sx:{mb:1,color:b.text.secondary},children:"Input"}),a.jsx(V,{rows:1,cols:t,size:d,cellProps:(h,v)=>{const _=M(h,v),C=E(h,v);return{..._,children:a.jsxs(a.Fragment,{children:[_.children,C.icon]}),sx:{..._.sx,position:"relative"}}},space:0})]}),a.jsxs(y,{sx:{textAlign:"center"},children:[a.jsx(V,{rows:1,cols:t,size:d,cellProps:R,space:0}),a.jsx(F,{variant:"subtitle2",sx:{mt:1,color:b.text.secondary},children:"Result"})]})]})]})})})}function Yt({boardStates:n,inputStates:t,dims:o,id:e,palette:r,children:i}){const l=z.useMemo(()=>[...n.flatMap((c,f)=>Array.from({length:o},(d,s)=>({name:`${e}-board-icon-${String(f)}-${String(s)}`,frames:wt(n,f,s,o,r)}))),...t.flatMap((c,f)=>{const d=`${e}-input-icon-0-${String(f)}`,s={},u=t.length,p=100/u;for(let x=0;x<u;x++){const m=x*p,j=(x+1)*p;let w=!1,S=r.secondary,g="";const k=t[x],P=x+1<u?t[x+1]:null;k&&P&&k[f]!==P[f]&&(w=!0,g=`"${String(x+1)}"`,S=k[f]===1?r.secondary:r.primary),w?(s[`${String(m)}%`]={opacity:0,content:g,color:S,transform:"scale(0.5)"},s[`${String(m+.05*p)}%`]={opacity:1,content:g,color:S,transform:"scale(1.2)"},s[`${String(m+.1*p)}%`]={opacity:1,content:g,color:S,transform:"scale(1)"},s[`${String(j-.05*p)}%`]={opacity:1,content:g,color:S,transform:"scale(1)"},s[`${String(j)}%`]={opacity:0,content:g,color:S,transform:"scale(0.5)"}):(s[`${String(m)}%`]={opacity:0,content:'""',color:S},s[`${String(j)}%`]={opacity:0,content:'""',color:S})}return{name:d,frames:s}})],[n,t,o,e,r]);return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:l.map(c=>`
                @keyframes ${c.name} {
                    ${Object.entries(c.frames).map(([f,d])=>`
                        ${f} {
                            ${Object.entries(d).map(([s,u])=>`${s.replace(/[A-Z]/g,p=>`-${p.toLowerCase()}`)}: ${u};`).join(" ")}
                        }
                    `).join("")}
                }
            `).join("")}),i]})}const qt=({children:n})=>a.jsx(F,{variant:"h5",sx:{color:b.text.primary,fontWeight:K.fontWeight.bold,textAlign:"left",fontSize:K.fontSize.h2},children:n}),it=({Icon:n,title:t,text:o})=>a.jsxs(y,{sx:{px:2},children:[a.jsxs(F,{variant:"h6",sx:{color:b.text.primary,fontWeight:K.fontWeight.semibold,display:"flex",alignItems:"center",mb:1.5,fontSize:K.fontSize.subheading},children:[a.jsx(n,{sx:{mr:2,color:b.primary.main,fontSize:"1.75rem"}}),t]}),a.jsx(F,{variant:"body1",sx:{color:b.text.secondary,lineHeight:1.6,fontSize:K.fontSize.body,ml:6},children:o})]}),Zt=["Chasing Lights","How It Works","Calculator"],Jt=pn;function Qt(n){const{rows:t,cols:o,size:e,open:r,palette:i,toggleOpen:l,getFrontProps:c,getBackProps:f}=n,d=xn("md"),[s,u]=z.useState(0),[p,x]=z.useState(Array(o).fill(0));z.useEffect(()=>{x(Array(o).fill(0))},[o,i]);const m=z.useCallback(h=>{const v=parseInt(h,10);x(_=>{const C=[..._];return C[v]!==void 0&&(C[v]^=1),C})},[x]),j=gt(p,t,o),{getDragProps:w}=sn({onAction:m,checkEnabled:()=>s===2,posAttribute:"data-col"}),S=Z(p,o,i),g=Z(j,o,i),k=(function(h,v){const{getColor:_,getBorder:C}=h;return(W,A)=>{const{front:D,back:I}=_(W,A),B=v(A.toString());return{...B,backgroundColor:D,style:C(W,A),sx:{...B.sx,"&:hover":{cursor:"pointer",color:I}},color:D,children:a.jsx(Bt,{})}}})(S,w),P=st(g),M=()=>{l()},R=`#${nn.pages.LightsOutResearch}`;let E;return E=d?a.jsx(Rt,{component:"a",href:R,size:"small",sx:{color:b.text.secondary},children:a.jsx(Pt,{})}):a.jsx(tt,{component:"a",href:R,variant:"outlined",size:"small",startIcon:a.jsx(Pt,{}),sx:{borderColor:b.border.subtle,color:b.text.secondary,fontSize:"0.75rem",py:.75,px:1.5,"&:hover":{borderColor:b.primary.main,color:b.primary.main,backgroundColor:b.interactive.hover}},children:"Analysis"}),a.jsx(_n,{open:r,onClose:M,slots:{backdrop:zn},slotProps:{backdrop:{sx:{backgroundColor:h=>h.palette.mode==="dark"?"hsla(0, 0%, 3%, 0.85)":"hsla(0, 0%, 98%, 0.85)",backdropFilter:"blur(12px) saturate(180%)",transition:"all 0.3s ease-in-out !important"}}},sx:{zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsxs(y,{sx:{outline:"none",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:[a.jsxs(Jt,{onClick:h=>{h.stopPropagation()},sx:{width:"100%",maxWidth:"1000px",height:{xs:"630px",sm:"495px"},minHeight:{xs:"630px",sm:"495px"},display:"flex",flexDirection:"column",p:0,overflow:"hidden",position:"relative",m:2},children:[a.jsxs(y,{sx:{flex:1,overflowY:s===1?"hidden":"auto",p:{xs:2.5,md:3},display:"flex",flexDirection:"column"},children:[a.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,px:2},children:[a.jsx(qt,{children:Zt[s]}),a.jsxs(y,{sx:{display:"flex",gap:2,alignItems:"center"},children:[E,a.jsx(Rt,{onClick:M,size:"small",sx:{color:b.text.secondary},children:a.jsx(gn,{})})]})]}),s===0&&a.jsx(y,{sx:{animation:"fadeIn 0.3s ease",flex:1,display:"flex",flexDirection:"column"},children:a.jsxs(y,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:4},children:[a.jsx(it,{Icon:hn,title:"Chase to Bottom",text:"Turn off rows from top to bottom by clicking lights in each row to push them down."}),a.jsx(it,{Icon:yn,title:"Use Calulator",text:"Enter the remaining lights pattern from the bottom row into the calculator on the last page."}),a.jsx(it,{Icon:bn,title:"Chase Again",text:"Apply the solution pattern to the top row, then chase them down again to solve the puzzle."})]})}),s===1&&a.jsx(y,{sx:{flex:1,display:"flex",flexDirection:"column",animation:"fadeIn 0.3s ease"},children:a.jsx(y,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:a.jsx(Kt,{dims:3,size:.7*e,start:[1,3,8],palette:i,getFrontProps:c,getBackProps:f})})}),s===2&&a.jsx(y,{sx:{animation:"fadeIn 0.3s ease",textAlign:"center",flex:1,display:"flex",flexDirection:"column"},children:a.jsxs(y,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:3},children:[a.jsxs(y,{children:[a.jsxs(F,{variant:"subtitle2",sx:{mb:1,color:b.text.primary,fontWeight:"bold"},children:["Input"," ",a.jsx(y,{component:"span",sx:{color:b.text.secondary,fontWeight:"normal"},children:"(Bottom Row)"})]}),a.jsx(V,{space:0,rows:1,cols:o,size:e*(d?.9:.8),cellProps:k})]}),a.jsxs(y,{children:[a.jsxs(F,{variant:"subtitle2",sx:{mb:1,color:b.text.primary,fontWeight:"bold"},children:["Solution"," ",a.jsx(y,{component:"span",sx:{color:b.text.secondary,fontWeight:"normal"},children:"(Top Row)"})]}),a.jsx(V,{space:0,rows:1,cols:o,size:e*(d?.9:.8),cellProps:P})]}),a.jsx(y,{sx:{display:"flex",justifyContent:"center"},children:a.jsx(tt,{variant:"outlined",size:"small",startIcon:a.jsx(jn,{}),onClick:()=>{x(Array(o).fill(0))},sx:{borderColor:b.border.subtle,color:b.text.secondary},children:"Clear Pattern"})})]})})]}),a.jsxs(y,{sx:{p:2.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx(tt,{onClick:()=>{s>0&&u(s-1)},disabled:s===0,startIcon:a.jsx(Sn,{}),sx:{visibility:s===0?"hidden":"visible",color:b.text.primary},children:"Back"}),a.jsx(y,{sx:{display:"flex",gap:1},children:[0,1,2].map(h=>a.jsx(y,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:s===h?b.primary.main:b.interactive.disabled,transition:"background-color 0.3s"}},h))}),a.jsx(tt,{onClick:()=>{s<2?u(s+1):l()},disabled:s===2,endIcon:a.jsx(wn,{}),sx:{visibility:s===2?"hidden":"visible",color:b.text.primary},children:"Next"})]})]}),a.jsx("style",{children:`
                    @keyframes fadeIn {
                        from { opacity: 0; transform: translateY(10px); }
                        to { opacity: 1; transform: translateY(0); }
                    }
                `})]})})}const Vt=a.jsx(y,{sx:{width:"45%",height:"45%",borderRadius:"50%",backgroundColor:"currentColor"}});function vt(n,t){const{getColor:o,getBorder:e}=t;return(r,i)=>{const l=e(r,i),{front:c,back:f}=o(r,i),d=an(r,i),s=n(d);return{...s,children:Vt,backgroundColor:c,color:c,style:l,sx:{...s.sx,"&:hover":{cursor:"pointer",color:f}}}}}function _t(n){return(t,o)=>({backgroundColor:n.getFiller(t,o),transition:rt.FAST})}function Xt(n){const t=vt(o=>({onMouseDown:()=>{},onMouseEnter:()=>{},onTouchStart:()=>{},"data-pos":o,sx:{touchAction:"none",transition:"none"}}),n);return(o,e)=>({...t(o,e),onMouseDown:void 0,onMouseEnter:void 0,onTouchStart:void 0,sx:{}})}Dt=function(){const{rows:n,cols:t,state:o,dispatch:e,size:r,mobile:i,solved:l,handleNext:c,controlsProps:f}=cn({storageKeys:{size:Nt,state:Gt},pageTitle:$t.lightsOut,gridConfig:{defaultSize:null,minSize:2,maxSize:10,headerOffset:{mobile:It.headerHeight.xs,desktop:It.headerHeight.md},paddingOffset:120,cellSizeReference:{mobile:Q.gridSizes.mobile,desktop:Q.gridSizes.desktop},mobileRowOffset:-2},boardConfig:{paddingOffset:180,boardMaxWidth:1200,boardSizeFactor:.9,maxCellSize:80,remBase:16},reducer:Lt,getInitialState:q,winAnimationDelay:Q.timing.winAnimationDelay,isSolved:g=>g.initialized&&g.grid.every(k=>k===0)}),[d,s]=z.useReducer(g=>!g,!1),u=z.useMemo(()=>({primary:b.primary.main,secondary:b.primary.dark}),[]),{getDragProps:p}=ln({onToggle:(g,k)=>{e({type:"adjacent",row:g,col:k})},checkEnabled:()=>!l,touchTimeout:Q.timing.interactionDelay,transition:rt.FAST}),x=z.useMemo(()=>o.initialized&&o.grid.every(g=>g===(1<<t)-1),[o.initialized,o.grid,t]),m=dt(o,u),j=dn(vt,p,[m]),w=z.useMemo(()=>_t(m),[m]),S=a.jsx(un,{...f,children:a.jsx(en,{title:"How to Play",Icon:vn,onClick:s})});return a.jsxs(fn,{title:$t.lightsOut,infoUrl:"https://en.wikipedia.org/wiki/Lights_Out_(game)",showTrophy:l,onReset:c,boardSize:r,iconSizeRatio:Ht,primaryColor:u.primary,secondaryColor:u.secondary,useSecondaryTrophy:x,boardSx:{marginTop:i?`${String(St.MOBILE)}px`:`${String(St.DESKTOP)}px`},controls:S,children:[a.jsx(At,{size:r,rows:n,cols:t,frontProps:j,backProps:w}),d&&a.jsx(Qt,{rows:n,cols:t,size:r,open:d,palette:u,toggleOpen:s,getFrontProps:Xt,getBackProps:_t})]})}});export{Cn as __tla,Dt as default};
