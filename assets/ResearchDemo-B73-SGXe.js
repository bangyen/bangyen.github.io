import{j as e}from"./vendor_react-WaSaIrII.js";import{c as r,a as t,A as o,T as i,S as a,C as n}from"./index-CgC1DzFw.js";import{G as s}from"./GlassCard-CjHZKLbJ.js";import{B as l,e as d,G as x,d as c,x as m,y as h,u as g}from"./vendor_mui_core-D4-4kcvK.js";import{R as b,Q as u}from"./vendor_mui_icons-urSXftat.js";import{G as p}from"./GlobalHeader-B_Ys6Bfk.js";import{R as f,L as y,C as S,X as R,Y as T,T as A,a as v}from"./vendor_recharts-C1M_ch-7.js";const k={oligopoly:{defaultFirms:3,defaultElasticity:2,defaultBasePrice:40,maxRounds:15,simulation:{fallbackPrice:20,fallbackHHI:.3,collusionStart:6,collusionEnd:10,priceAmplitude:5,hhiAmplitude:.1,priceFrequency:.3,hhiFrequency:.1},options:{firms:[{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],elasticity:[{value:1.5,label:"1.5"},{value:2,label:"2.0"},{value:2.5,label:"2.5"}],price:[{value:30,label:"$30"},{value:40,label:"$40"},{value:50,label:"$50"}]}},zsharp:{baseAccuracy:.65,maxAccuracy:.75,baseLoss:2,minLoss:.8,improvement:.05,lossReduction:.1,maxEpochs:20,yAxisPadding:.05,lossPadding:.1,gapPadding:.005,convergencePadding:.005},lightsOut:{yAxisMax:70},modelTypes:{cournot:"cournot"}},j=300,E=4,I=3,C={strokeDashArray:"3 3",defaultStrokeWidth:2},L={multiplier:100,divisor:100},_={GLASS:{VERY_SUBTLE:"rgba(255, 255, 255, 0.01)",SUBTLE:"rgba(255, 255, 255, 0.02)",TRANSPARENT:"rgba(255, 255, 255, 0.03)",SLIGHT:"rgba(255, 255, 255, 0.05)",MEDIUM:"rgba(255, 255, 255, 0.1)",STRONG:"rgba(255, 255, 255, 0.2)",DARK:"rgba(0, 0, 0, 0.2)"},CYAN:{BG_SUBTLE:"rgba(0, 184, 212, 0.05)",BG_SLIGHT:"rgba(0, 184, 212, 0.1)",BORDER_SUBTLE:"rgba(0, 184, 212, 0.1)",BORDER_SLIGHT:"rgba(0, 184, 212, 0.2)"},GREEN:{BG_SUBTLE:"rgba(0, 200, 83, 0.05)",BORDER_SUBTLE:"rgba(0, 200, 83, 0.1)",HOVER:"hsl(141, 64%, 39%)"},AMBER:{HOVER:"hsl(34, 95%, 48%)"},BORDER:{VERY_SUBTLE:"rgba(255, 255, 255, 0.03)",SUBTLE:"rgba(255, 255, 255, 0.05)"},LAYOUT:{BUTTON_HEIGHT:"36.5px",CONTROLS_SPACING:2.5,RESULT_CARD_HEIGHT:480,INNER_PADDING:"1rem",INNER_PADDING_SM:"0.6rem 0.8rem",FONT_SIZE_XS:"0.65rem",FONT_SIZE_SM:"0.75rem",FONT_SIZE_MD:"0.85rem",CARD_RADIUS:"6px"},ANIMATIONS:{SPIN:{animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}}},w=({viewTypes:n,currentViewType:s,onViewTypeChange:x})=>n.length<=1?null:e.jsx(l,{sx:{marginBottom:3,width:"100%",boxSizing:"border-box"},children:e.jsx(l,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, minmax(0, 1fr))",md:`repeat(${Math.min(n.length,4).toString()}, 1fr)`},gap:1.5,width:"100%",margin:0},children:n.map(n=>{const l=n.icon;return e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(l,{}),onClick:()=>{x(n.key)},sx:{width:"100%",color:s===n.key?"inherit":t.text.secondary,backgroundColor:s===n.key?t.primary.main:t.surface.elevated,"&.MuiButton-root":{color:s===n.key?t.text.primary:t.text.secondary},borderColor:t.border.subtle,borderWidth:"1px",borderStyle:"solid",borderRadius:a.borderRadius.lg,minHeight:_.LAYOUT.BUTTON_HEIGHT,padding:_.LAYOUT.INNER_PADDING_SM,fontSize:_.LAYOUT.FONT_SIZE_SM,fontWeight:i.fontWeight.medium,transition:o.transitions.standard,"&:hover":{backgroundColor:s===n.key?t.primary.dark:t.interactive.hover,transform:"translateY(-1px)",boxShadow:r.sm}},children:n.label},n.key)})})}),N=({controls:n,onReset:s,resetLabel:g="Reset"})=>0===n.length?null:e.jsxs(l,{sx:{marginBottom:0,width:"100%",boxSizing:"border-box",paddingBottom:a.padding.md},children:[s&&e.jsx(l,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",mb:_.LAYOUT.CONTROLS_SPACING},children:e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(b,{}),onClick:s,sx:{color:t.text.secondary,borderColor:t.border.subtle,borderRadius:a.borderRadius.lg,px:2,py:.5,fontSize:_.LAYOUT.FONT_SIZE_MD,fontWeight:i.fontWeight.medium,transition:o.transitions.standard,"&:hover":{borderColor:t.primary.main,backgroundColor:t.interactive.hover,transform:"translateY(-1px)",boxShadow:r.sm}},children:g})}),e.jsx(x,{container:!0,spacing:_.LAYOUT.CONTROLS_SPACING,children:n.map((n,s)=>e.jsx(x,{size:{xs:12,md:4},children:e.jsxs(l,{sx:{marginBottom:0,padding:_.LAYOUT.INNER_PADDING,backgroundColor:t.interactive.disabled,borderRadius:a.borderRadius.lg,border:`1px solid ${t.border.subtle}`},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[n.icon&&e.jsx(n.icon,{sx:{color:n.color??t.primary.light,fontSize:"1.1rem"}}),e.jsx(c,{variant:"body2",sx:{color:t.text.secondary,fontWeight:i.fontWeight.medium},children:n.label})]}),e.jsx(m,{value:n.value,exclusive:!0,onChange:(e,r)=>{null!==r&&n.onChange(r)},size:"small",sx:{width:"100%",borderRadius:a.borderRadius.lg,overflow:"hidden",border:`1px solid ${t.border.subtle}`,"& .MuiToggleButtonGroup-grouped":{margin:0,border:0,borderRadius:0,"&:not(:first-of-type)":{borderLeft:`1px solid ${t.border.subtle}`}},"& .MuiToggleButton-root":{color:t.text.secondary,borderColor:t.border.subtle,padding:_.LAYOUT.INNER_PADDING_SM,flex:1,fontSize:_.LAYOUT.FONT_SIZE_MD,fontWeight:i.fontWeight.medium,borderRadius:0,transition:o.transitions.standard,"&.Mui-selected":{backgroundColor:n.color??t.primary.main,color:t.text.primary,borderColor:n.color??t.primary.main,"&:hover":{backgroundColor:n.hoverColor??(n.color===t.primary.main?t.primary.dark:n.color===t.data.green?_.GREEN.HOVER:n.color===t.data.amber?_.AMBER.HOVER:n.color??t.primary.dark),borderColor:n.hoverColor??(n.color===t.primary.main?t.primary.dark:n.color===t.data.green?_.GREEN.HOVER:n.color===t.data.amber?_.AMBER.HOVER:n.color??t.primary.dark),transform:"translateY(-1px)",boxShadow:r.sm}}},"&:hover":{backgroundColor:t.interactive.hover,transform:"translateY(-1px)"}},children:n.options.map(r=>e.jsx(h,{value:r.value,children:r.label},r.value))})]})},n.label||s))})]}),D=({title:r,subtitle:o,githubUrl:m,chartData:h=[],chartConfig:b={type:"line",lines:[],xAxisKey:"x",yAxisFormatter:e=>e.toFixed(2),yAxisDomain:["dataMin - 0.05","dataMax + 0.05"],dualYAxis:!1,rightYAxisFormatter:e=>e.toFixed(2),rightYAxisDomain:["dataMin - 0.05","dataMax + 0.05"],tooltipLabelFormatter:e=>`Round ${e.toString()}`,tooltipFormatter:(e,r)=>[e.toFixed(2),r]},viewTypes:k=[],currentViewType:L="default",onViewTypeChange:_=()=>{},controls:D=[],loading:O=!1,loadingMessage:B="Loading data...",onReset:z,resetLabel:G="Reset",chartTitle:U=null,children:M,backUrl:F})=>{const Y=(()=>{if(0===h.length)return[];if(!k.length)return h;const e=k.find(e=>e.key===L);return e?.dataProcessor?e.dataProcessor(h):h})(),H=k.find(e=>e.key===L)?.chartConfig??b,W=g("(max-width:600px)"),P=r=>e.jsx(d,{component:"a",href:`#${F??""}`,startIcon:e.jsx(u,{}),size:"small",sx:{color:t.text.secondary,padding:0,minWidth:0,"&:hover":{backgroundColor:"transparent",color:t.primary.main},marginBottom:r,alignSelf:{xs:"center",sm:"flex-end"},textTransform:"none",fontSize:"0.8rem"},children:"Back to Simulation"});let V;return V=F&&W?P(0):e.jsx(c,{variant:"h5",sx:{color:t.text.secondary,fontSize:i.fontSize.subheading,textAlign:{xs:"center",md:"right"},whiteSpace:{xs:"normal",md:"nowrap"},display:{xs:"none",sm:"block"}},children:o}),e.jsxs(l,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",background:t.surface.background},children:[e.jsx(p,{showHome:!0,githubUrl:m}),e.jsx(x,{container:!0,flex:1,flexDirection:"column",sx:{position:"relative",padding:a.padding.md,paddingTop:a.padding.xl,paddingBottom:{xs:a.padding.md,md:0},boxSizing:"border-box",width:"100%",maxWidth:"100vw",overflowX:"hidden"},children:e.jsx(x,{size:{xs:12},flex:1,sx:{...n.flexCenter,flexDirection:"column",zIndex:1,padding:0,minHeight:0},children:e.jsxs(l,{sx:{textAlign:"center",maxWidth:a.maxWidth.md,width:"100%",padding:{xs:"0 0.5rem",md:"0 2rem"},boxSizing:"border-box",overflow:"hidden"},children:[e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:{xs:"center",md:"flex-start"},gap:2,marginBottom:{xs:3,md:4},width:"100%"},children:[F&&!W&&P(-2),e.jsxs(l,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:{xs:"center",md:"baseline"},width:"100%"},children:[e.jsx(c,{variant:"h1",sx:{color:t.text.primary,fontWeight:i.fontWeight.bold,fontSize:i.fontSize.h2,textAlign:{xs:"center",md:"left"}},children:r}),V]})]}),e.jsxs(s,{sx:{marginBottom:3,width:"100%",boxSizing:"border-box",overflow:"hidden"},children:[e.jsx(c,{variant:"subtitle1",sx:{color:t.text.secondary,marginBottom:2,textAlign:"center",fontWeight:i.fontWeight.medium,fontSize:i.fontSize.subheading},children:U??(k.length>0?k.find(e=>e.key===L)?.chartTitle??"Data Visualization":"Data Visualization")}),e.jsx(l,{sx:{height:j,width:"100%",position:"relative"},children:O?e.jsx(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:t.text.secondary},children:e.jsx(c,{children:B})}):e.jsx(f,{width:"100%",height:j,minWidth:0,minHeight:0,debounce:1,children:e.jsxs(y,{data:Y,children:[e.jsx(S,{strokeDasharray:C.strokeDashArray,stroke:t.border.subtle,vertical:!1}),e.jsx(R,{dataKey:H.xAxisKey,stroke:t.text.secondary,tick:{fill:t.text.secondary,fontSize:10},axisLine:{stroke:t.border.subtle},tickLine:!1}),e.jsx(T,{yAxisId:"left",hide:W,stroke:t.text.secondary,tick:{fill:t.text.secondary,fontSize:10},axisLine:!1,tickLine:!1,tickFormatter:H.yAxisFormatter,domain:H.yAxisDomain}),H.dualYAxis&&e.jsx(T,{yAxisId:"right",orientation:"right",hide:W,stroke:t.text.secondary,tick:{fill:t.text.secondary,fontSize:10},axisLine:!1,tickLine:!1,tickFormatter:H.rightYAxisFormatter,domain:H.rightYAxisDomain}),e.jsx(A,{contentStyle:{backgroundColor:t.surface.glass,backdropFilter:"blur(8px) saturate(180%)",border:`1px solid ${t.border.subtle}`,borderRadius:a.borderRadius.md,color:t.text.primary,boxShadow:"none"},itemStyle:{fontSize:"12px",padding:"2px 0"},labelStyle:{fontWeight:"bold",marginBottom:"4px",color:t.text.primary},labelFormatter:H.tooltipLabelFormatter,formatter:(e,r)=>{if(void 0===e)throw new Error("Value is undefined");if(void 0===r)throw new Error("Name is undefined");return H.tooltipFormatter(e,r)}}),H.lines.map((r,t)=>e.jsx(v,{yAxisId:r.yAxisId??"left",type:"monotone",dataKey:r.dataKey,stroke:r.color,strokeWidth:I,name:r.name,dot:{fill:r.color,strokeWidth:C.defaultStrokeWidth,r:E}},r.dataKey))]})})})]}),e.jsx(w,{viewTypes:k,currentViewType:L,onViewTypeChange:_}),e.jsx(N,{controls:D,onReset:z,resetLabel:G}),M]})})})]})};export{L as P,D as R,k as a,_ as b};
