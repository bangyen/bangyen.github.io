import{r as e,j as t,a as r,u as n}from"./vendor_react-WaSaIrII.js";import{G as o,a as s,T as i,g as a,S as c,L as l,d,A as u}from"./index-Be82yssE.js";import{d as p,i as x,B as h,u as f,j as g,G as m,e as b,l as y,S as v,m as k}from"./vendor_mui_core-D4-4kcvK.js";import{G as j}from"./GlobalHeader-DydjQMS3.js";import{G as w}from"./GlassCard-D7GJCDzH.js";import{w as C,D as S,x as I,y as z,e as M,P as F,z as W,I as R,p as P,o as E}from"./vendor_mui_icons-kUp0AcNR.js";import{u as $,G as O,b as B,C as D,g as H,a as T,c as A}from"./CustomGrid-Clqu7ztH.js";import{u as G,a as L}from"./useTimer-DHwl40cy.js";function _(t){const r=e.useRef([]),n=e.useRef(0),s=e.useRef(!1),i=e.useRef(t);return e.useEffect(()=>{i.current=t},[t]),e.useCallback(({type:e,payload:t})=>{const a=r.current;switch(e){case"next":{if(s.current){const e=a[n.current];return e?{...e}:t}s.current=!0;const e=n.current;if(e+1===a.length){const t=a[e];if(!t)return{...a[0]};const r=i.current(t);r===t||(a.push(r),n.current++)}else n.current++;const r=a[n.current];if(!r)return t;const c={...r};return setTimeout(()=>{s.current=!1},o.processing.resetDelay),c}case"prev":{if(s.current){const e=a[n.current];return e?{...e}:t}s.current=!0,n.current&&n.current--;const e=a[n.current];if(!e)return t;const r={...e};return setTimeout(()=>{s.current=!1},o.processing.resetDelay),r}case"clear":r.current=[{...t}],n.current=0}return t},[])}const V=e.createContext(null);function N({text:e,...r}){return t.jsx(p,{...r,sx:[{fontSize:"inherit",fontWeight:"inherit",fontFamily:"inherit",userSelect:"none",lineHeight:1,display:"inline"},...Array.isArray(r.sx)?r.sx:[r.sx]],children:e})}const Y=w,q=e.memo(function({compact:r=!1}){const n=e.useContext(V);if(!n)return null;const{code:o,index:s}=n;return void 0===o?null:r?t.jsx(Q,{Icon:C,title:"Program",data:[...o],pointer:s}):t.jsx(K,{Icon:C,title:"Program",data:[...o],pointer:s,children:t.jsx(N,{text:" "})})}),U=e.memo(function({compact:r=!1}){const n=e.useContext(V);if(!n)return null;const{tape:o,pointer:s,tapeFlag:i}=n;return i?r?t.jsx(Q,{Icon:S,title:"Tape",data:o,pointer:s}):t.jsx(K,{Icon:S,title:"Tape",data:o,pointer:s,children:t.jsx(N,{text:" "})}):null}),X=e.memo(function({compact:r=!1}){const n=e.useContext(V);if(!n)return null;const{output:o,outFlag:s}=n;if(!s)return null;const i=Array.isArray(o)?o:[o];return r?t.jsx(Q,{Icon:I,title:"Output",data:i}):t.jsx(K,{Icon:I,title:"Output",data:i,children:t.jsx(N,{text:" "})})}),J=e.memo(function({compact:r=!1}){const n=e.useContext(V);if(!n)return null;const{register:o,regFlag:s}=n;return s?r?t.jsx(Q,{Icon:z,title:"Register",data:[o]}):t.jsx(K,{Icon:z,title:"Register",data:[o],children:t.jsx(N,{text:" "})}):null});function K({Icon:e,title:n,data:o,pointer:a,children:c}){const l=r.useMemo(()=>o.map((e,t)=>({id:`${n}-${String(t)}`,val:e,ind:t})),[o,n]).map(e=>{const r=a===e.ind?"info":"inherit";return t.jsx(N,{color:r,text:e.val,sx:{fontSize:i.fontSize.body,fontWeight:i.fontWeight.semibold,fontFamily:"monospace"}},e.id)});return t.jsxs(h,{sx:{height:"100%"},children:[t.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1,marginBottom:1},children:[t.jsx(e,{sx:{color:s.primary.main}}),t.jsx(p,{variant:"subtitle2",sx:{color:s.primary.main,fontWeight:i.fontWeight.semibold,fontSize:i.fontSize.body},children:n})]}),t.jsxs(Z,{children:[l,c]})]})}function Q({Icon:e,title:n,data:o,pointer:a}){const c=r.useMemo(()=>o.map((e,t)=>({id:`${n}-${String(t)}`,val:e,ind:t})),[o,n]).map(e=>{const r=a===e.ind?"info":"inherit";return t.jsx(x,{label:String(e.val),size:"small",sx:{backgroundColor:"info"===r?s.primary.main:s.surface.glass,color:s.text.primary,fontFamily:"monospace",fontSize:i.fontSize.caption,height:"32px",border:`1px solid ${s.border.subtle}`,backdropFilter:"blur(24px) saturate(180%)"}},e.id)});return t.jsxs(Y,{sx:{height:"100%",minHeight:"24rem"},children:[t.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1,marginBottom:1},children:[t.jsx(e,{sx:{color:s.primary.main,fontSize:i.fontSize.body}}),t.jsx(p,{variant:"caption",sx:{color:s.primary.main,fontWeight:i.fontWeight.semibold,fontSize:i.fontSize.caption},children:n})]}),t.jsx(h,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:c})]})}function Z({children:e}){return t.jsx(w,{sx:{overflowX:"auto",width:"100%",maxWidth:"100%",height:"60px",display:"flex",flexDirection:"column",justifyContent:"center",padding:2},children:t.jsx(h,{sx:{display:"flex",alignItems:"center",gap:1,width:"max-content",minWidth:0},children:e})})}function ee(){const r=e.useContext(V),n=f("(min-width:650px)"),o=r?.pause??!1,s=e.useMemo(()=>r?.dispatch??(()=>{}),[r]),i=r?.fastForward??!1,c=e.useMemo(()=>o?t.jsx(a,{title:"Run",onClick:s("run"),Icon:M},"Run"):t.jsx(a,{title:"Pause",onClick:s("stop"),Icon:F},"Pause"),[s,o]);if(!r)return[];const l={Reset:{icon:W,action:"reset",flag:!0},"Fast Forward":{icon:R,flag:i,action:"ff"},Previous:{icon:E,flag:n,action:"prev"},Next:{icon:P,flag:n,action:"next"}},d=[],u=l["Fast Forward"]??{icon:R,flag:!1};d.push(c),d.push(t.jsx(a,{title:"Reset",Icon:W,onClick:s("reset")},"Reset")),d.push(t.jsx(a,{title:"Fast Forward",Icon:u.icon,onClick:u.flag?s("ff"):void 0,disabled:!u.flag,sx:{opacity:u.flag?1:.3,"&.Mui-disabled":{color:"inherit",opacity:.3}}},"Fast Forward"));return["Previous","Next"].forEach(e=>{const r=l[e];if(!r)return;const{icon:n,flag:o,action:i}=r;i&&o&&d.push(t.jsx(a,{title:e,Icon:n,onClick:s(i)},e))}),d}function te(e,t){const{type:r,payload:n}=t;let s={};const{dispatch:i,create:a,clear:c}=n,l=function(e){return(t,r)=>{const{nextIter:n,clear:o}=e;return r&&o(),{...n({type:t,payload:e}),select:null}}}(n),d=()=>{i({type:"timer",payload:n})},u=!1,p=!0,x=!0,h=!0;switch(r){case"run":a({repeat:d,speed:o.timer.defaultSpeed}),s.pause=u;break;case"timer":{const t=e.end?"stop":"next";i({type:t,payload:n});break}case"stop":c(),s.pause=p;break;case"reset":window.confirm("Are you sure you want to reset the code?")&&(s=l("clear",!0),s.pause=x);break;case"prev":s=l("prev",!0),s.pause=h;break;case"next":s=l("next",!1);break;case"share":{const e=window.location.href;navigator.clipboard.writeText(e);break}}return s}function re({value:r,readOnly:n=!1,infoLabel:o="Program code",fillValue:i="Hello, World!",placeholder:a,handleChange:l}){const d=e.useContext(V);if(!d)throw new Error("TextArea must be used within EditorContext.Provider");const{height:u}=d,p=$("md"),x=Math.floor(u/(p?24:32)),h=void 0!==r?{value:r||"",onChange:l}:{defaultValue:i,onChange:l};return t.jsx(g,{variant:"outlined",label:o,placeholder:a,slotProps:{inputLabel:{shrink:!0},htmlInput:{readOnly:n}},fullWidth:!0,multiline:!0,rows:x,...h,sx:{"& .MuiInputBase-root":{alignItems:"flex-start",backgroundColor:s.surface.glass,backdropFilter:"blur(24px) saturate(180%)",borderRadius:c.borderRadius.md,border:`1px solid ${s.border.subtle}`},"& .MuiInputBase-input":{fontFamily:"monospace",color:"text.primary","&::placeholder":{opacity:.6,color:"text.secondary"}},"& .MuiOutlinedInput-notchedOutline":{borderColor:s.border.subtle},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:s.border.subtle},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.light"},"& .MuiInputLabel-root":{color:"text.secondary"},"& .MuiInputLabel-root.Mui-focused":{color:"primary.light"}}})}function ne({container:r,sideProps:n={},hide:o=!1,navigation:a,children:c}){const d=e.useContext(V);if(!d)throw new Error("Editor must be used within EditorContext.Provider");const{tapeFlag:u,outFlag:x,regFlag:f,code:g}=d;let b,y;o?(b="none",y=12):(y={xs:6,md:8},b="flex");const v={flex:{xs:"none",md:1},spacing:2,ref:r,container:!0,display:"flex",alignItems:"center",sx:{overflowY:"hidden",height:{xs:void 0!==g?O.layout.editorHeight.xs.withCode:O.layout.editorHeight.xs.withoutCode,md:"auto"}}};return t.jsxs(m,{container:!0,spacing:2,minHeight:{xs:"50vh",md:"auto"},height:{xs:"auto",md:`calc(100vh - ${l.headerHeight.md.toString()}px)`},direction:"column",wrap:"nowrap",padding:O.layout.padding,sx:{background:s.surface.background,position:"relative",boxSizing:"border-box",width:"100% !important",margin:"0 !important",display:"flex",flexDirection:"column",overflowY:"auto",height:"100%"},children:[t.jsxs(m,{container:!0,alignItems:"center",direction:{xs:"column",md:"row"},justifyContent:"space-between",sx:{mb:{xs:2,md:0},gap:{xs:2,md:0}},children:[t.jsx(m,{size:"grow",display:"flex",alignItems:"center",justifyContent:{xs:"center",md:"flex-start"},sx:{width:"100%"},children:t.jsx(p,{variant:"h4",sx:{fontSize:i.fontSize.h2,fontWeight:i.fontWeight.semibold,paddingLeft:{xs:0,md:2},flexShrink:0},children:"Interpreters"})}),t.jsxs(m,{display:"flex",alignItems:"center",gap:1,size:"auto",justifyContent:{xs:"center",md:"flex-end"},sx:{paddingRight:1,width:{xs:"100%",md:"auto"}},children:[t.jsx(ee,{}),a&&t.jsx(h,{sx:{flexShrink:0},children:a})]})]}),t.jsxs(m,{...v,children:[t.jsx(m,{size:y,children:c}),t.jsx(m,{display:b,size:{xs:6,md:4},children:t.jsx(re,{...n})})]}),t.jsx(m,{size:{xs:12},sx:{minHeight:[void 0!==g,u,x,f].filter(Boolean).length>0?{xs:"auto",md:O.layout.fieldsMinHeight.md}:0,flexShrink:0},children:t.jsx(m,{container:!0,spacing:2,sx:{width:"100%",maxWidth:"100%"},children:(()=>{const e=[],r={xs:12,md:6};return void 0!==g&&e.push(t.jsx(m,{size:r,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:t.jsx(q,{})},"program")),u&&e.push(t.jsx(m,{size:r,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:t.jsx(U,{})},"tape")),x&&e.push(t.jsx(m,{size:r,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:t.jsx(X,{})},"output")),f&&e.push(t.jsx(m,{size:r,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:t.jsx(J,{})},"register")),e})()})})]})}let oe=null;function se(e,t){const{type:r,payload:n}=t,{nextIter:o,clear:s,create:i,dispatch:a}=n;let c={};switch(r){case"ff":{const t=()=>{a({type:"timer",payload:n})};e.pause?(c={pause:!1},i({repeat:t,speed:50})):(s(),c={pause:!1},i({repeat:t,speed:10}));break}case"edit":{const{newText:t,clean:r}=n;void 0!==t&&r&&(c={...e,text:t,code:r(t)},s(),o({type:"clear",payload:c}),c.pause=!0);break}default:c=te(e,t)}return{...e,...c}}function ie({name:n,start:o,runner:s,clean:i,tape:a,output:c,register:l,navigation:u}){const p=r.useRef(null),x=B(p),[h,f]=e.useReducer(se,{...o,pause:!0,text:"",code:""}),{create:g,clear:m}=G(200),b=_(s);e.useEffect(()=>{document.title=d.interpreter(n)},[n]);const y=e.useCallback(e=>{f({type:"edit",payload:{newText:e.target.value,clean:i,nextIter:b,clear:m,create:g,dispatch:f}})},[i,b,m,g,f]),v=e.useCallback(e=>{y(e)},[y]),k=e.useCallback(e=>{if("string"==typeof e)return()=>{f({type:e,payload:{start:o,nextIter:b,dispatch:f,create:g,clear:m}})};f({type:e.type,payload:{...e.payload,start:o,nextIter:b,dispatch:f,create:g,clear:m}})},[o,b,g,m,f]),j=e.useMemo(()=>{let{height:e}=x;return 0===e&&null!==oe&&(e=oe.height),{name:n,tapeFlag:a??!1,outFlag:c??!1,regFlag:l??!1,code:h.code?[...h.code]:[],index:h.index||0,tape:h.tape??[],pointer:h.pointer||0,output:h.output??"",register:h.register||0,height:e,size:0,dispatch:k,fastForward:!0,pause:h.pause??!1}},[x,n,a,c,l,h.code,h.index,h.tape,h.pointer,h.output,h.register,h.pause,k]);e.useEffect(()=>{x.height>0&&(oe={height:x.height})},[x.height]);return t.jsx(V.Provider,{value:j,children:t.jsx(ne,{hide:!0,container:p,sideProps:{readOnly:!0,infoLabel:"RISC-V Equivalent",fillValue:"addi x0, x0, 0",value:""},navigation:u,children:t.jsx(re,{value:h.text,placeholder:"Enter your code here...",handleChange:v})})})}function ae({navigation:r}){const n=e.useCallback(e=>function(e){let{pointer:t,index:r,tape:n,end:o}=e;const{code:s}=e;if(o){if(void 0===n[t]||!n[t])return e;o=!1}if(r===s.length)return{...e,index:0,end:!0};const i=s[r++];if(n=[...n],"+"===i){const e=n[t];void 0!==e&&(n[t]=e+1)}else if(n[t])if("-"===i){const e=n[t];void 0!==e&&(n[t]=e-1)}else">"===i?n.length===++t&&n.push(1):t&&t--;return{pointer:t,index:r,code:s,tape:n,end:o}}(e),[]),o=e.useCallback(e=>function(e){let t="";for(const r of e)"+-><".includes(r)&&(t+=r);return t}(e),[]);return t.jsx(ie,{name:"Stun Step",start:{pointer:0,index:0,tape:[0],end:!1,code:""},runner:n,clean:o,tape:!0,navigation:r})}function ce({navigation:r}){const n=e.useCallback(e=>function(e){let{register:t,pointer:r,output:n,index:o,tape:s,end:i}=e;const{code:a}=e;if(i&&(i=!1),o===a.length)return{...e,index:0,end:!0};const c=a[o++];switch(s=[...s],c){case">":s.length===++r&&s.push(0);break;case"<":{const e=s[r];void 0!==e&&(t+=e),r=0;break}case"!":{const e=s[r];if(void 0!==e){const n=e-(t-1);s[r]=n<0?0:n}t=0,r=0;break}case",":{const e=prompt("Input: ");t=e?.length?e.charCodeAt(0):0;break}case".":t>0&&(n+=String.fromCharCode(t-1))}return{register:t,pointer:r,output:n,index:o,code:a,tape:s,end:i}}(e),[]),o=e.useCallback(e=>function(e){let t="";for(const r of e)"><!,.".includes(r)&&(t+=r);return t}(e),[]);return t.jsx(ie,{name:"Suffolk",start:{register:0,pointer:0,output:"",index:0,tape:[0],end:!1,code:""},runner:n,clean:o,tape:!0,output:!0,register:!0,navigation:r})}function le({handleClick:r,chooseColor:n,options:o,rows:i,cols:a}){const l=e.useContext(V);if(!l)throw new Error("GridArea must be used within EditorContext.Provider");const{size:d}=l,p=e.useMemo(()=>({primary:{bg:s.surface.glass,text:s.primary.main,border:`1px solid ${s.primary.main}`,hover:s.interactive.selected},info:{bg:s.interactive.focus,text:s.text.primary,border:`1px solid ${s.primary.main}`,hover:s.interactive.hover},secondary:{bg:s.surface.glass,text:s.text.secondary,border:`1px solid ${s.border.subtle}`,hover:s.interactive.selected}}),[]),x=e.useMemo(()=>e=>p[e]??p.secondary,[p]);return t.jsx(D,{cellProps:(e,s)=>{const i=a*e+s,l=n(i),d=o[i]??" ",p=x(l);return{color:p.text,backgroundColor:p.bg,onClick:r(i),children:t.jsx(N,{text:d}),sx:{borderRadius:c.borderRadius.md,cursor:"pointer",transition:u.transition,...u.presets.glass,border:p.border,"&:hover":{backgroundColor:p.hover}}}},size:d,rows:i,cols:a})}const de=({keys:e,onSelect:r})=>t.jsx(h,{sx:{width:"100%",padding:"16px",background:s.surface.glass,borderTop:`1px solid ${s.border.subtle}`,backdropFilter:"blur(24px) saturate(180%)",position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:t.jsxs(m,{container:!0,spacing:.5,justifyContent:"center",sx:{maxWidth:"468px",width:"100%"},children:[e.map(e=>t.jsx(m,{children:t.jsx(b,{variant:"contained",onClick:()=>{r(e)},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:s.surface.glass,color:s.text.primary,borderRadius:c.borderRadius.sm,border:`1px solid ${s.border.subtle}`,"&:hover":{background:s.interactive.hover}},children:" "===e?"␣":e})},e)),t.jsx(m,{children:t.jsx(b,{variant:"contained",onClick:()=>{r("Backspace")},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:s.surface.glass,color:s.text.primary,borderRadius:c.borderRadius.sm,border:`1px solid ${s.border.subtle}`,"&:hover":{background:s.interactive.hover}},children:"⌫"})}),t.jsx(m,{children:t.jsx(b,{variant:"contained",onClick:()=>{r("Escape")},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:s.surface.glass,color:s.data.red,borderRadius:c.borderRadius.sm,border:`1px solid ${s.border.subtle}`,"&:hover":{background:s.interactive.hover}},children:"✕"})})]})});function ue(e,t){const{type:r}=t;let n={};switch(r){case"edit":n=function(e,t){let r,{grid:n,select:o}=e;const{key:s,resetState:i}=t;if(null===o)return{};if(s.includes("Arrow")){const t=H(s),{rows:r,cols:n}=e;return o=T(o,t,r,n),{select:o}}if("Backslash"===s||"\\"===s)r="\\";else if(1===s.length)r=s;else{if("Backspace"!==s&&"Delete"!==s)return{};r=" "}const a=n.slice(0,o),c=n.slice(o+1);return n=a+r+c,i(n),{grid:n,pause:!0}}(e,t.payload);break;case"resize":n=function(e,t){const{resetState:r,...n}=t;let{grid:o}=e;const{rows:s,cols:i}=e;let a="";const{rows:c,cols:l}=n;void 0!==c&&c>s&&(o+=" ".repeat((c-s)*i));const d=c??s,u=l??i;for(let p=0;p<d;p++){const e=p*i;let t=e;t+=void 0!==l&&l>i?i:l??i,a+=o.substring(e,t).padEnd(u," ")}return r(a),{...n,grid:a,pause:!0}}(e,t.payload);break;case"click":{const{select:r}=t.payload;n=r===e.select?{select:null}:{select:r};break}case"delete":{const{tape:t,pointer:r}=e;r>0&&0===t[r]&&e.pointer--;break}default:n=te(e,t)}return{...e,...n}}let pe=null;function xe(r){const{create:n,clear:o}=L(),{name:s,start:i,tape:a,output:c,register:l,navigation:u,keys:p=[]}=r,x=e.useRef(null);let{height:h,width:f}=B(x);const g=$("md"),m=g?4:6;h=(h||400)*(g?1:.8),f=.95*(f||600);const{rows:b,cols:y}=e.useMemo(()=>!x.current&&pe?pe:A(m,h,f),[m,h,f]);e.useEffect(()=>{x.current&&b>0&&y>0&&(pe={rows:b,cols:y})},[b,y]);const v={...i,grid:" ".repeat(b*y),select:null,pause:!0,rows:b,cols:y},[k,j]=e.useReducer(ue,v),{resetState:w,handleClick:C,chooseColor:S,wrapDispatch:I}=function(t,r,n){const{runner:o,start:s}=r,{rows:i,cols:a}=t,{create:c,clear:l}=G(200),d=_(o),u=e.useCallback(e=>(l(),d({type:"clear",payload:{...s,grid:e,rows:i,cols:a}})),[s,l,d,i,a]),p=e.useCallback(e=>()=>{n({type:"click",payload:{select:e}})},[n]),x=e.useCallback(e=>{const{position:r,select:n}=t;return e===n?"primary":null!==r&&e===r?"info":"secondary"},[t]),h=e.useCallback(e=>()=>{n({type:e,payload:{start:s,resetState:u,nextIter:d,dispatch:n,create:c,clear:l}})},[u,d,n,c,l,s]);return{resetState:u,handleClick:p,chooseColor:x,wrapDispatch:h}}(k,r,j);e.useEffect(()=>{j({type:"resize",payload:{rows:b,cols:y,resetState:w}})},[b,y,w]);const z=e.useCallback(e=>{"Escape"!==e?j({type:"edit",payload:{key:e,resetState:w}}):null!==k.select&&j({type:"click",payload:{select:k.select}})},[w,k.select]);e.useEffect(()=>{document.title=d.interpreter(s);return n(e=>{z(e.key)}),()=>{o()}},[s,n,z,o]);const M={name:s,size:m,...k,dispatch:I,tapeFlag:a??!1,outFlag:c??!1,regFlag:l??!1,height:h,index:0,tape:[],pointer:0,output:k.output??"",register:0,code:void 0,fastForward:!1,pause:k.pause};return t.jsxs(V.Provider,{value:M,children:[t.jsx(ne,{hide:!0,container:x,navigation:u,children:t.jsx(le,{rows:b,cols:y,options:k.grid.split(""),handleClick:C,chooseColor:S})}),g&&null!==k.select&&t.jsx(de,{keys:p,onSelect:z})]})}function he(e,t,r){let n=e,o=t;const s=n%r,i=o%r;n-=s,o-=i;const a=Math.abs(n-o);return Math.floor(a/r)+Math.abs(s-i)}function fe(e,t,r){const n=[];for(let s=0;s<t.length;s++)"@"===t[s]&&n.push(s);if(1===n.length)return e;const o=function(e,t){return(r,n)=>he(e,r,t)-he(e,n,t)}(e,r);return n.sort(o),n[1]??e}function ge(e){const t="^<>v";let{position:r,velocity:n,output:o,register:s,end:i}=e;const{grid:a,rows:c,cols:l}=e;if(i)return e;if(null==r){const t=a.indexOf("!"),n=a.lastIndexOf("!");if(-1===t||t!==n)return{...e,end:!0};r=t}const d=a[r];if(void 0===d)return e;if(t.includes(d)){const e=t.indexOf(d);n=e%2+1,e<2&&(n-=3)}else+d&&(s=+d);switch(d){case"|":n*=-1;break;case"@":r=fe(r,a,l),r-=l,r<0&&(r+=c*l);break;case"+":s++;break;case"-":s--;break;case"*":s*=2;break;case"s":s*=s;break;case"/":s=Math.floor(s/2);break;case"~":o+=String.fromCharCode(s);break;case"?":{const e=4*Math.random(),t=Math.floor(e);n=t-2+(t>1?1:0);break}case".":r=null,i=!0}return null!==r&&"@"!==d&&(r=T(r,n,c,l)),{...e,position:r,velocity:n,grid:a,output:o,register:s,end:i,rows:c,cols:l}}function me({navigation:e}){return t.jsx(xe,{name:"WII2D",start:{position:null,velocity:-2,end:!1,output:"",register:0},runner:ge,output:!0,register:!0,navigation:e,keys:["^","<",">","v","|","'",'"',"@","+","-","*","s","/","~","?",".","!","0","1","2","3","4","5","6","7","8","9"]})}function be(e){let{velocity:t,position:r,pointer:n,tape:o}=e;const{grid:s,rows:i,cols:a,end:c}=e;if(c||null==r)return e;const l=t>0?3:-3,d=s[r];switch(o=[...o],d){case"\\":t=l-t;break;case"/":t-=l;break;case"<":n&&n--;break;case">":++n===o.length&&o.push(0);break;case"-":{const e=o[n];void 0!==e&&(o[n]=1^e);break}case"+":{let e;if(!o[n])do{r=T(r,t,i,a);e=s[r]??""}while(!"\\/<>-+*".includes(e));break}}return r=T(r,t,i,a),{...e,velocity:t,position:r,pointer:n,grid:s,tape:o,rows:i,cols:a,end:c}}function ye({navigation:e}){return t.jsx(xe,{name:"Back",start:{velocity:1,pointer:0,position:0,tape:[0],end:!1},runner:be,tape:!0,navigation:e,keys:["\\","/","<",">","-","+","*"]})}const ve=({active:e,onChange:r})=>t.jsx(y,{size:"small",sx:{minWidth:{xs:140,sm:160},"& .MuiOutlinedInput-root":{...u.presets.glass,borderRadius:c.borderRadius.full,color:s.text.primary,fontWeight:i.fontWeight.medium,transition:u.transition,"& fieldset":{border:`1px solid ${s.border.subtle}`},"&:hover fieldset":{borderColor:s.primary.main},"&.Mui-focused fieldset":{borderColor:s.primary.main,boxShadow:`0 0 0 2px ${s.primary.main}22`}},"& .MuiSelect-select":{py:1,px:{xs:2,sm:3}},"& .MuiSvgIcon-root":{color:s.text.secondary}},children:t.jsxs(v,{value:e,onChange:e=>{r(e.target.value)},MenuProps:{autoFocus:!1,BackdropProps:{sx:{backdropFilter:"none",backgroundColor:"transparent"}},PaperProps:{sx:{...u.presets.glass,borderRadius:c.borderRadius.lg,mt:1,"& .MuiMenuItem-root":{color:s.text.secondary,fontSize:"0.9rem",transition:u.transition,"&:hover":{backgroundColor:s.interactive.hover,color:s.text.primary},"&.Mui-selected":{backgroundColor:s.interactive.selected,color:s.primary.main,fontWeight:"bold","&:hover":{backgroundColor:s.interactive.selected}}}}}},children:[t.jsx(k,{value:"stun-step",children:"Stun Step"}),t.jsx(k,{value:"suffolk",children:"Suffolk"}),t.jsx(k,{value:"wii2d",children:"WII2D"}),t.jsx(k,{value:"back",children:"Back"})]})});function ke(){const[r,o]=n(),i=r.get("type")??"stun-step";e.useEffect(()=>{document.title=d.interpreters},[]);const a=e=>{o({type:e})},l=`https://esolangs.org/wiki/${(u=i,{"stun-step":"Stun Step",suffolk:"Suffolk",wii2d:"WII2D",back:"Back"}[u]??"Stun Step").replace(" ","_")}`;var u;return t.jsxs(h,{sx:{height:{xs:"100dvh",md:"100vh"},width:"100%",boxSizing:"border-box",background:s.surface.background,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},children:[t.jsx(j,{showHome:!0,infoUrl:l}),t.jsx(h,{sx:{width:"100%",maxWidth:c.maxWidth.lg,margin:"0 auto",flex:1,display:"flex",justifyContent:"center",overflow:"hidden",boxSizing:"border-box"},children:(()=>{const e=t.jsx(ve,{active:i,onChange:a});switch(i){case"stun-step":default:return t.jsx(ae,{navigation:e});case"suffolk":return t.jsx(ce,{navigation:e});case"wii2d":return t.jsx(me,{navigation:e});case"back":return t.jsx(ye,{navigation:e})}})()})]})}export{ke as default};
