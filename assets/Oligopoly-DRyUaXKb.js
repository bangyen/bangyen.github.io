import{r as o,j as e}from"./vendor_react-CPTKWKBb.js";import{c as i,u as a,R as t,a as r,b as l,f as s}from"./chartHelpers-wRpBLHxi.js";import{h as n,T as d,i as m}from"./vendor_mui_icons-CTfyhkcx.js";import{C as c,U as p,d as y}from"./index-SRUj2Se0.js";import"./vendor_mui_core-D9k3Vigt.js";import"./PageLayout-e5FkAEPq.js";const u=async()=>{const o=await s("/oligopoly_data.json.gz");if(!Array.isArray(o))throw new TypeError("Invalid data format: expected array");return o},g=()=>{const[s,g]=o.useState(i.oligopoly.defaultFirms),[f,h]=o.useState(i.oligopoly.defaultElasticity),[x,b]=o.useState(i.oligopoly.defaultBasePrice),A=i.modelTypes.cournot,_=!1,{data:F,loading:j}=a(y.oligopoly,u,()=>[]),C=o.useMemo(()=>((o,e,a,t,r,l)=>{if(0===o.length)return[];const s=o.filter(o=>o.num_firms===e&&o.model_type===a&&o.demand_elasticity===t&&o.base_price===r&&o.collusion_enabled===l);if(0===s.length)return o.filter(o=>o.num_firms===e&&o.model_type===a).sort((o,e)=>o.round-e.round).slice(0,i.oligopoly.maxRounds);return s.sort((o,e)=>o.round-e.round).slice(0,15)})(F,s,A,f,x,_),[F,s,A,f,x,_]),v=[{label:"Number of Firms",icon:n,color:c.primary.main,value:s,onChange:g,options:i.oligopoly.options.firms},{label:"Demand Elasticity",icon:d,color:c.data.green,value:f,onChange:h,options:i.oligopoly.options.elasticity},{label:"Base Price",icon:m,color:c.data.amber,value:x,onChange:b,options:i.oligopoly.options.price}],P={type:"line",xAxisKey:"round",yAxisFormatter:o=>`$${o.toFixed(2)}`,yAxisDomain:l(5),dualYAxis:!0,rightYAxisFormatter:o=>o.toFixed(2),rightYAxisDomain:l(i.oligopoly.hhiAxisPadding),tooltipLabelFormatter:r("Round"),tooltipFormatter:(o,e)=>["Market Price"===e?`$${o.toFixed(2)}`:o.toFixed(2),e],lines:[{dataKey:"price",name:"Market Price",color:c.primary.main,yAxisId:"left"},{dataKey:"hhi",name:"HHI Concentration",color:c.data.amber,yAxisId:"right"}]};return e.jsx(t,{title:"Oligopoly",subtitle:"Agent-Based Economic Competition Analysis",githubUrl:p.oligopolyRepo,chartData:C,chartConfig:P,chartTitle:"Market Dynamics",controls:v,loading:j,loadingMessage:"Loading Cournot simulation data...",onReset:()=>{g(i.oligopoly.defaultFirms),h(i.oligopoly.defaultElasticity),b(i.oligopoly.defaultBasePrice)},resetLabel:"Reset"})};export{g as default};
