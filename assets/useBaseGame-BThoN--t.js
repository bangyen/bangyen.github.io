const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CsPc3i-4.js","assets/vendor_react-De-BR_RD.js","assets/vendor_mui_core-K-vIj0S5.js","assets/vendor_mui_icons-D2L4zTna.js","assets/index-nHZRkKzU.js","assets/index-GLeeZWEo.css","assets/PageLayout-B9fS3WSS.js","assets/lazyNamed-DQvUO-Js.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,a as o}from"./vendor_react-De-BR_RD.js";import{L as n,g as r,G as s,T as i,a,S as l,c,A as d,R as u,b as m,C as f,d as h,F as x,_ as p,u as g}from"./index-nHZRkKzU.js";import{s as b,t as S,P as y}from"./PageLayout-B9fS3WSS.js";import{B as w,P as z,G as v,T as j,M as C,h as D}from"./vendor_mui_core-K-vIj0S5.js";import{f as M,A as I,M as R,E as k}from"./vendor_mui_icons-D2L4zTna.js";import{E as P,a as E,l as O,b as T,u as L}from"./lazyNamed-DQvUO-Js.js";const A={display:"grid",placeItems:"center"},$={gridArea:"1/1"},B={gridArea:"1/1",zIndex:n.zIndex.base+1},W=e.memo(function({size:o,children:n,...r}){const l=`${o.toString()}rem`,c=`${(o/s.cellSize.divisor).toString()}rem`,{backgroundColor:d,color:u,boxShadow:m,border:f,opacity:h,transition:x=!0,sx:p,...g}=r,S=!1===x?"none":"string"==typeof x?x:"background-color 200ms ease, color 200ms ease, opacity 200ms ease, transform 200ms ease, border-radius 200ms ease",y=e.useMemo(()=>({...a.flexCenter,borderRadius:c,height:l,width:l,fontSize:`${(o*s.cellSize.fontSizeMultiplier).toString()}rem`,fontWeight:i.fontWeight.semibold,fontFamily:"monospace"}),[c,l,o]);return t.jsx(w,{role:"gridcell",...y,...g,sx:{backgroundColor:d,color:u,boxShadow:m,border:f,opacity:h,transition:S,...b(p)},children:n})}),_=e.memo(function({cols:o,size:n,index:r,spacing:s,cellProps:i}){return t.jsx(w,{role:"row",sx:{display:"flex",gap:s,justifyContent:"center"},children:Array.from({length:o},(t,o)=>e.createElement(W,{...i(r,o),key:`${r.toString()}_${o.toString()}`,size:n}))})}),N=e.memo(function({size:e,rows:o,cols:n,cellProps:s,space:i,sx:a,...l}){const c=r(e),d=`${(i??c).toString()}rem`;return t.jsx(w,{role:"grid","aria-label":`Grid with ${o.toString()} rows and ${n.toString()} columns`,sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:d,...b(a)},...l,children:Array.from({length:o},(o,r)=>t.jsx(_,{index:r,cols:n,size:e,spacing:d,cellProps:s},`row_${r.toString()}`))})}),F=o.memo(function(e){const{overlayProps:o,cellProps:n,size:r,rows:s,cols:i,cellRows:a=s,cellCols:l=i,overlayLayerSx:c,cellLayerSx:d,overlayDecorative:u=!1,cellDecorative:m=!1}=e;return t.jsxs(w,{sx:A,children:[t.jsx(w,{sx:{...b($),...b(d)},children:t.jsx(N,{space:0,size:r,rows:a,cols:l,cellProps:n,...m?{role:"presentation","aria-hidden":!0}:{}})}),t.jsx(w,{sx:{...b(B),...b(c)},children:t.jsx(N,{space:0,size:r,rows:s,cols:i,cellProps:o,...u?{role:"presentation","aria-hidden":!0}:{}})})]})}),H={transform:"translateX(-50%)",position:"absolute",bottom:l.padding.xl,left:"50%",zIndex:n.zIndex.navigation,...d.presets.glass,borderRadius:l.borderRadius.lg,boxShadow:c.lg,padding:`${l.padding.sm} ${l.padding.lg}`},G={...a.flexCenter,flexWrap:"nowrap",minWidth:0};function K({children:e,sx:o,opacity:n}){return t.jsx(z,{elevation:0,component:"nav",role:"navigation","aria-label":"Game controls navigation",onClick:e=>{e.stopPropagation()},sx:[...S(H),{opacity:n},...S(o)],children:t.jsx(v,{container:!0,spacing:2,sx:G,children:e})})}const U=o.memo(function({rows:e,cols:o,dynamicSize:n,minSize:r,maxSize:s,handlePlus:i,handleMinus:a,onRefresh:l,disabled:c=!1,onOpenInfo:d,hidden:f=!1,children:h}){if(f)return null;const x=Math.min(e,o)<=r,p=Math.min(e,o)>=s||Math.min(e,o)>=Math.min(n.rows,n.cols);return t.jsxs(K,{children:[t.jsx(u,{onClick:l}),t.jsx(m,{title:"Decrease Size",Icon:M,onClick:a,disabled:c||x}),t.jsx(m,{title:"Increase Size",Icon:I,onClick:i,disabled:c||p}),d&&t.jsx(m,{title:"How to Play",Icon:R,onClick:d}),h]})}),J={gridSizes:{mobile:2.5,desktop:4},timing:{winAnimationDelay:2e3,interactionDelay:500,touchHoldDelay:500},layout:{headerHeight:{mobile:64,desktop:80}}},X={info:{loading:"Loading info...",loadError:"Failed to load info panel."},trophy:{solvedLabel:"Solved!"},errors:{boardTitle:"Board Error",boardReset:"Reset Board"}},Y={xs:"80px",md:"120px"},Z={PADDING:{MOBILE:"30px",DESKTOP:"36px"},BORDER_RADIUS:"24px",BORDER:"2px solid transparent",SHADOW:"0 2px 4px rgba(0,0,0,0.2)",DROP_SHADOW:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"};function q(e){return{SIZE:`${e}-size`,STATE:`${e}-state`}}const V={boardPadding:0,boardMaxWidth:1200,boardSizeFactor:.94,maxCellSize:80,remBase:16},Q={defaultSize:null,minSize:3,maxSize:10,mobileRowOffset:2,headerOffset:J.layout.headerHeight,gridPadding:0,widthLimit:1300,cellSizeReference:{mobile:J.gridSizes.mobile,desktop:J.gridSizes.desktop}},ee=e=>({position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:e?1:0,transform:e?"scale(1)":"scale(0.5)",visibility:e?"visible":"hidden",transition:"all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",zIndex:10,backgroundColor:"transparent",pointerEvents:"none"}),te={display:"flex",flexDirection:"column",alignItems:"center",gap:1.5,height:"auto",width:"auto",maxWidth:"80%"},oe={color:f.text.primary,fontWeight:600,letterSpacing:"0.02em"};function ne({show:e=!1,onReset:o,size:n=0,iconSizeRatio:r=1,primaryColor:s=f.primary.main,secondaryColor:i=f.primary.main,useSecondary:a=!1,showLabel:c=!0}){const d=a?i:s;return t.jsx(w,{sx:ee(e),children:n>0&&t.jsxs(h,{padding:l.padding.md,sx:te,children:[t.jsx(k,{sx:(u=`${(n*r*.6).toString()}rem`,m=d,{fontSize:u,color:m,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.1))"})}),c&&t.jsx(j,{variant:"h6",sx:oe,children:X.trophy.solvedLabel})]})});var u,m}function re({children:o,controls:n,infoUrl:r,title:s,background:i=f.surface.background,trophyProps:a={},layout:l={},onClick:c}){const{paddingBottom:d=Y,contentSx:u={},boardSx:m}=l,h=e.useMemo(()=>((e,t)=>[{flex:1,position:"relative",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden",pb:e},...S(t)])(d,u),[d,u]),p=e.useMemo(()=>(e=>[{position:"relative",width:"fit-content",userSelect:"none",padding:{xs:Z.PADDING.MOBILE,sm:Z.PADDING.DESKTOP},borderRadius:Z.BORDER_RADIUS,border:Z.BORDER},...S(e)])(m),[m]);return t.jsxs(y,{title:s,infoUrl:r,background:i,containerSx:{height:"100vh",transition:"background 0.5s ease-in-out",cursor:c?"pointer":"inherit"},sx:{justifyContent:"center",alignItems:"center"},onClick:c,children:[t.jsx(P,{FallbackComponent:x,fallbackProps:{title:X.errors.boardTitle,resetLabel:X.errors.boardReset},children:t.jsx(w,{sx:h,children:t.jsxs(w,{sx:p,children:[o,t.jsx(ne,{...a})]})})}),n]})}function se(e,t){return`${e.toString()},${t.toString()}`}function ie(e){return(t,o)=>{if(e.customHandler){const n=e.customHandler(t,o);if(null!==n)return n}switch(o.type){case"resize":if("newRows"in o||"rows"in o||"cols"in o){const n=o.newRows??o.rows??t.rows,r=o.newCols??o.cols??t.cols;return n===t.rows&&r===t.cols?t:e.getInitialState(n,r)}return t;case"new":case"next":case"reset":return e.getInitialState(t.rows,t.cols);case"hydrate":case"restore":return"state"in o?o.state:t;default:return t}}}function ae(t,o,n){return e.useMemo(()=>t(o,...n),[t,o,...n])}const le=e=>{if(e<1||e>100)throw new Error("Invalid grid size: must be between 1 and 100");return e},ce=e=>{if(e<0)throw new Error("Invalid cell index: cannot be negative");return e};function de(t){const o=e.useRef(t);return o.current=t,e.useCallback((...e)=>o.current(...e),[])}function ue(t=!1){const[o,n]=e.useState(t);return{isOpen:o,open:e.useCallback(()=>{n(!0)},[]),close:e.useCallback(()=>{n(!1)},[]),toggle:e.useCallback(()=>{n(e=>!e)},[])}}function me({checkEnabled:t=()=>!0,touchTimeout:o=500,posAttribute:n="data-pos",preventDefault:r=!0,transition:s="all 0.2s",...i}){const a=e.useRef(void 0),l=e.useRef(i.onToggle);l.current=i.onToggle;const c=void 0!==i.onToggle,d=i.onAction,u=e.useMemo(()=>!c&&d?d:(e,o,n)=>{if(!t())return;const r=l.current;if(!r)return;const[s,i]=e.split(",").map(Number);void 0!==s&&void 0!==i&&(n?a.current=r(s,i,o,void 0,!0):r(s,i,o,a.current,!1))},[c,d,t]),[m,f]=e.useState(null),h=e.useRef(new Set),x=e.useRef(0),p=e.useCallback(()=>{f(null),h.current.clear()},[]),g=e.useCallback(e=>{if(null===m)return;const t=e.touches[0];if(!t)return;const o=document.elementFromPoint(t.clientX,t.clientY);if(!o)return;const r=o.closest(`[${n}]`);if(r){const e=r.getAttribute(n);e&&!h.current.has(e)&&(u(e,2===m,!1),h.current.add(e))}},[m,u,n]);e.useEffect(()=>(globalThis.addEventListener("mouseup",p),globalThis.addEventListener("touchend",p),globalThis.addEventListener("touchcancel",p),globalThis.addEventListener("touchmove",g,{passive:!1}),()=>{globalThis.removeEventListener("mouseup",p),globalThis.removeEventListener("touchend",p),globalThis.removeEventListener("touchcancel",p),globalThis.removeEventListener("touchmove",g)}),[p,g]);const b=e.useCallback(e=>({onMouseDown:n=>{t()&&(0!==n.button&&2!==n.button||Date.now()-x.current<o||(r&&n.preventDefault(),f(n.button),u(e,2===n.button,!0),h.current.add(e)))},onMouseEnter:()=>{null!==m&&!h.current.has(e)&&t()&&(u(e,2===m,!1),h.current.add(e))},onTouchStart:o=>{t()&&(o.cancelable&&r&&o.preventDefault(),x.current=Date.now(),f(0),u(e,!1,!0),h.current.add(e))},onKeyDown:o=>{t()&&("Enter"!==o.key&&" "!==o.key||(o.preventDefault(),u(e,!1,!0)))},onContextMenu:e=>{r&&e.preventDefault()},[n]:e,role:"button",tabIndex:0,sx:{touchAction:"none",transition:s}}),[u,t,m,o,n,r,s]);return{isDragging:null!==m,draggingButton:m,getDragProps:b,lastTouchTime:x}}const fe={backgroundColor:e=>"dark"===e.palette.mode?"hsla(0, 0%, 3%, 0.85)":"hsla(0, 0%, 98%, 0.85)",backdropFilter:"blur(12px) saturate(180%)",transition:"all 0.3s ease-in-out !important"},he={zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},xe={outline:"none",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},pe={width:"100%",maxWidth:"1000px",height:{xs:"630px",sm:"495px"},minHeight:{xs:"630px",sm:"495px"},display:"flex",flexDirection:"column",p:0,overflow:"hidden",position:"relative",m:2},ge={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,px:2},be={color:f.text.secondary},Se=e=>({flex:1,display:"flex",flexDirection:"column",pr:0===e?{xs:3,md:0}:0}),ye=e=>({flex:1,overflowY:1===e?"hidden":"auto",p:{xs:2.5,md:3},display:"flex",flexDirection:"column"}),we=8,ze={p:2.5,display:"flex",justifyContent:"space-between",alignItems:"center"},ve={color:f.text.primary,fontWeight:i.fontWeight.semibold,display:"flex",alignItems:"center",mb:1.5,fontSize:i.fontSize.subheading},je={mr:2,color:f.primary.main,fontSize:"1.75rem"},Ce={color:f.text.secondary,lineHeight:1.6,fontSize:i.fontSize.body,ml:6},De={animation:"fadeIn 0.3s ease",flex:1,display:"flex",flexDirection:"column"},Me={flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},Ie={flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:4},Re=O(()=>p(()=>import("./index-CsPc3i-4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"GameInfoContent"),ke="game-info-title";function Pe(){return t.jsx(w,{sx:{...b(pe),display:"flex",justifyContent:"center",alignItems:"center"},children:t.jsx(j,{sx:{color:f.text.primary},children:X.info.loading})})}function Ee(o){if(!o.open)return null;const{open:n,...r}=o;return t.jsx(C,{open:!0,onClose:o.toggleOpen,"aria-labelledby":ke,slots:{backdrop:D},slotProps:{backdrop:{sx:fe}},sx:he,children:t.jsx(w,{sx:xe,role:"document",children:t.jsx(P,{fallback:t.jsx(E,{message:X.info.loadError}),children:t.jsx(e.Suspense,{fallback:t.jsx(Pe,{}),children:t.jsx(Re,{...r,titleId:ke})})})})})}function Oe({rows:t,cols:o,width:n,height:r,mobile:s,headerOffset:i,boardConfig:a}){return e.useMemo(()=>{const e="function"==typeof a.boardPadding?a.boardPadding(s):a.boardPadding;return function({rows:e,cols:t,width:o,height:n,mobile:r,headerOffset:s,boardPadding:i,boardMaxWidth:a,boardSizeFactor:l,maxCellSize:c,remBase:d}){const u=r?s.mobile:s.desktop,m="number"==typeof i?0:i.x,f="number"==typeof i?i:i.y,h=(Math.min(o,a)-m)*l,x=(n-u-f)*l;return Math.min(h/t,x/e,c)/d}({rows:t+(a.rowOffset??0),cols:o+(a.colOffset??0),width:n,height:r,mobile:s,headerOffset:i,...a,boardPadding:e})},[t,o,n,r,s,i,a])}function Te({storageKey:t,rows:o,cols:n,state:r,onRestore:s,serialize:i,deserialize:a,enabled:l=!0,saveDebounceMs:c=300}){const d=`${t}-${String(o)}x${String(n)}`,u=de(s),m=de(i??(e=>e)),f=de(a??(e=>e));var h,x,p;e.useEffect(()=>{if(!l)return;const e=localStorage.getItem(d);if(e)try{const t=JSON.parse(e);u(f(t))}catch{localStorage.removeItem(d)}},[d,l,u,f]),h=()=>{if(!l)return;const e=m(r);localStorage.setItem(d,JSON.stringify(e))},x=c,p=[d,r,l,m],e.useEffect(()=>{const e=setTimeout(h,x);return()=>{clearTimeout(e)}},[...p,x])}function Le({storageKey:t,defaultSize:o,minSize:n=2,maxSize:r=10,headerOffset:s,gridPadding:i=0,widthLimit:a=1300,cellSizeReference:l,mobileRowOffset:c=0}){const{height:d,width:u}=T(),m=L("sm"),[f,h]=g(t,o,{serialize:String,deserialize:e=>{if("null"===e)return null;const t=Number.parseInt(e,10);return Number.isNaN(t)?void 0:t}}),x=e.useMemo(()=>{const e=m?s.mobile:s.desktop,t="number"==typeof l?l:m?l.mobile:l.desktop,o="number"==typeof i?0:i.x,r="number"==typeof i?i:i.y,f=function(e,t,o){const n=16*e;return{rows:Math.floor(t/n),cols:Math.floor(o/n)}}(t,d-e-r,Math.min(u,a)-o);let h=f.rows-1;const x=f.cols-1;return m&&(h+=c),{rows:Math.max(n,h),cols:Math.max(n,x)}},[l,d,u,m,s,i,a,n,c]),{rows:p,cols:b}=e.useMemo(()=>{if(null===f)return x;const e=m?Math.max(0,c+1):0;return{rows:Math.min(f+e,x.rows),cols:Math.min(f,x.cols)}},[f,x,m,c]);return{rows:p,cols:b,dynamicSize:x,handlePlus:()=>{const e=Math.min(p,b);null!==f&&e<Math.min(x.rows,x.cols)&&e<r&&h(e+1)},handleMinus:()=>{const e=Math.min(p,b);if(null===f){const e=Math.min(x.rows,x.cols);x.rows===x.cols?h(Math.max(n,e-1)):h(e)}else e>n&&h(e-1)},desiredSize:f,setDesiredSize:h,mobile:m,width:u,height:d,minSize:n,maxSize:r}}function Ae(e,t){return{...e,...Object.fromEntries(Object.entries(t).filter(([,e])=>void 0!==e))}}function $e({storageKey:t,grid:o={},board:n={},logic:r}){const s=q(t),{reducer:i,getInitialState:a,isSolved:l,winAnimationDelay:c=J.timing.winAnimationDelay,persistence:d,manualResize:u=!1,onNext:m}=r,f=Ae(Q,{defaultSize:o.defaultSize,minSize:o.minSize,maxSize:o.maxSize,headerOffset:o.headerOffset,gridPadding:o.gridPadding,widthLimit:o.widthLimit,cellSizeReference:o.cellSizeReference,mobileRowOffset:o.mobileRowOffset}),h=e.useMemo(()=>({...Ae(V,{boardPadding:n.boardPadding,boardMaxWidth:n.boardMaxWidth,boardSizeFactor:n.boardSizeFactor,maxCellSize:n.maxCellSize,remBase:n.remBase}),rowOffset:n.rowOffset,colOffset:n.colOffset}),[n.boardPadding,n.boardMaxWidth,n.boardSizeFactor,n.maxCellSize,n.remBase,n.rowOffset,n.colOffset]),{rows:x,cols:p,dynamicSize:g,handlePlus:b,handleMinus:S,mobile:y,width:w,height:z,minSize:v,maxSize:j}=Le({storageKey:s.SIZE,...f}),C=e.useRef(null);null===C.current&&(C.current=a(x,p));const[D,M]=e.useReducer(i,C.current),I=e.useMemo(()=>l(D),[D,l]),R=e.useCallback(()=>{M({type:"new"})},[M]),k=m??R;Te({storageKey:s.STATE,rows:x,cols:p,state:D,onRestore:e=>{M({type:"hydrate",state:e})},...d}),function(t,o,n=2e3){const r=de(o);e.useEffect(()=>{if(t){const e=setTimeout(()=>{r()},n);return()=>{clearTimeout(e)}}},[t,n,r])}(I,k,c),e.useEffect(()=>{u||M({type:"resize",rows:x,cols:p,newRows:x,newCols:p})},[x,p,M,u]);const P=Oe({rows:x,cols:p,width:w,height:z,mobile:y,headerOffset:f.headerOffset,boardConfig:h});return{rows:x,cols:p,state:D,dispatch:M,size:P,mobile:y,solved:I,handleNext:k,controlsProps:{rows:x,cols:p,dynamicSize:g,minSize:v,maxSize:j,handlePlus:b,handleMinus:S,onRefresh:k}}}export{be as A,Z as B,N as C,Se as D,pe as E,J as G,Ee as L,we as S,ne as T,le as a,F as b,ie as c,ae as d,$e as e,ue as f,se as g,ce as h,re as i,U as j,q as k,X as l,ye as m,Te as n,ve as o,je as p,Ce as q,Ie as r,De as s,Me as t,me as u,ze as v,he as w,fe as x,xe as y,ge as z};
