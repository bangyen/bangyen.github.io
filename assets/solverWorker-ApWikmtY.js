const e=1,t=2;var n,r,o={exports:{}},u={};function c(){if(n)return u;n=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),y=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,m={};function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function v(){}function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=b.prototype;var S=g.prototype=new v;S.constructor=g,_(S,b.prototype),S.isPureReactComponent=!0;var w=Array.isArray;function E(){}var k={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function j(t,n,r){var o=r.ref;return{$$typeof:e,type:t,key:n,ref:void 0!==o?o:null,props:r}}function R(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var C=/\/+/g;function $(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function x(n,r,o,u,c){var s=typeof n;"undefined"!==s&&"boolean"!==s||(n=null);var i,f,a=!1;if(null===n)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case e:case t:a=!0;break;case p:return x((a=n._init)(n._payload),r,o,u,c)}}if(a)return c=c(n),a=""===u?"."+$(n,0):u,w(c)?(o="",null!=a&&(o=a.replace(C,"$&/")+"/"),x(c,r,o,"",function(e){return e})):null!=c&&(R(c)&&(i=c,f=o+(null==c.key||n&&n.key===c.key?"":(""+c.key).replace(C,"$&/")+"/")+a,c=j(i.type,f,i.props)),r.push(c)),1;a=0;var l,d=""===u?".":u+":";if(w(n))for(var h=0;h<n.length;h++)a+=x(u=n[h],r,o,s=d+$(u,h),c);else if("function"==typeof(h=null===(l=n)||"object"!=typeof l?null:"function"==typeof(l=y&&l[y]||l["@@iterator"])?l:null))for(n=h.call(n),h=0;!(u=n.next()).done;)a+=x(u=u.value,r,o,s=d+$(u,h++),c);else if("object"===s){if("function"==typeof n.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,o,u,c);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return a}function A(e,t,n){if(null==e)return e;var r=[],o=0;return x(e,r,"","",function(e){return t.call(n,e,o++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},I={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return u.Activity=d,u.Children=I,u.Component=b,u.Fragment=r,u.Profiler=c,u.PureComponent=g,u.StrictMode=o,u.Suspense=a,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,u.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},u.cache=function(e){return function(){return e.apply(null,arguments)}},u.cacheSignal=function(){return null},u.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=_({},e.props),o=e.key;if(null!=t)for(u in void 0!==t.key&&(o=""+t.key),t)!H.call(t,u)||"key"===u||"__self"===u||"__source"===u||"ref"===u&&void 0===t.ref||(r[u]=t[u]);var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){for(var c=Array(u),s=0;s<u;s++)c[s]=arguments[s+2];r.children=c}return j(e.type,o,r)},u.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},u.createElement=function(e,t,n){var r,o={},u=null;if(null!=t)for(r in void 0!==t.key&&(u=""+t.key),t)H.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var s=Array(c),i=0;i<c;i++)s[i]=arguments[i+2];o.children=s}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return j(e,u,o)},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:f,render:e}},u.isValidElement=R,u.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:T}},u.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},u.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),o=k.S;null!==o&&o(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(E,O)}catch(u){O(u)}finally{null!==t&&null!==n.types&&(t.types=n.types),k.T=t}},u.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},u.use=function(e){return k.H.use(e)},u.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},u.useCallback=function(e,t){return k.H.useCallback(e,t)},u.useContext=function(e){return k.H.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},u.useEffect=function(e,t){return k.H.useEffect(e,t)},u.useEffectEvent=function(e){return k.H.useEffectEvent(e)},u.useId=function(){return k.H.useId()},u.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},u.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},u.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},u.useMemo=function(e,t){return k.H.useMemo(e,t)},u.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},u.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},u.useRef=function(e){return k.H.useRef(e)},u.useState=function(e){return k.H.useState(e)},u.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},u.useTransition=function(){return k.H.useTransition()},u.version="19.2.4",u}function s(e,t){return`${e.toString()},${t.toString()}`}function i(e,t,n){const r=function(e,t){const n=t(1*e.length,1)>>>0;return function(){null!==a&&0!==a.byteLength||(a=new Uint8Array(p.memory.buffer));return a}().set(e,n/1),d=e.length,n}(e,p.__wbindgen_malloc),o=d,u=p.find_cycles_wasm(r,o,t,n);var c=function(e,t){e>>>=0;const n=function(){(null===f||!0===f.buffer.detached||void 0===f.buffer.detached&&f.buffer!==p.memory.buffer)&&(f=new DataView(p.memory.buffer));return f}(),r=[];for(let o=e;o<e+4*t;o+=4)r.push(p.__wbindgen_externrefs.get(n.getUint32(o,!0)));return p.__externref_drop_slice(e,t),r}(u[0],u[1]).slice();return p.__wbindgen_free(u[0],4*u[1],4),c}r||(r=1,o.exports=c()),o.exports;let f=null;let a=null;new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode();const l=new TextEncoder;"encodeInto"in l||(l.encodeInto=function(e,t){const n=l.encode(e);return t.set(n),{read:e.length,written:n.length}});let p,d=0;function y(e,t,n){return e*(n+1)+t}self.onmessage=n=>{if("SOLVE"===n.data.type){const{rows:r,cols:o,numbers:u,userMoves:c}=n.data.payload,f=new Map,a=[],l=[];c.forEach((e,t)=>{f.set(t,{state:e,source:"user"});const[n,r]=t.split(",").map(Number);void 0!==n&&void 0!==r&&a.push({r:n,c:r})});const p=(e,t)=>{if(e<0||e>=r||t<0||t>=o)return 0;const n=s(e,t);return f.get(n)?.state??0},d=(e,t,n,r)=>{const o=s(e,t),u=f.get(o);u?u.state!==n&&l.push({type:"cell",r:e,c:t}):(f.set(o,{state:n,source:r}),a.push({r:e,c:t}))},h=(n,u)=>[{r:n-1,c:u-1,required:t},{r:n-1,c:u,required:e},{r:n,c:u-1,required:e},{r:n,c:u,required:t}].filter(e=>e.r>=0&&e.r<r&&e.c>=0&&e.c<o);let _=0;for(;_<a.length;){const n=a[_++];if(!n)break;const{r:r,c:o}=n,c=[{r:r,c:o},{r:r,c:o+1},{r:r+1,c:o},{r:r+1,c:o+1}];for(const i of c){const n=u[i.r]?.[i.c];if(null==n)continue;const c=h(i.r,i.c);let a=0;const y=[];for(const e of c){const t=p(e.r,e.c);0===t?y.push(e):t===e.required&&a++}if(a>n)l.push({type:"node",r:i.r,c:i.c});else if(a+y.length<n)l.push({type:"node",r:i.r,c:i.c});else if("user"===f.get(s(r,o))?.source)if(a===n&&y.length>0)for(const r of y){const n=r.required===e?t:e;d(r.r,r.c,n,"propagated")}else if(a+y.length===n&&y.length>0)for(const e of y)d(e.r,e.c,e.required,"propagated")}}const m=Array.from({length:r},()=>Array(o).fill(0));f.forEach((e,t)=>{const[n,r]=t.split(",").map(Number);void 0!==n&&void 0!==r&&m[n]&&(m[n][r]=e.state)});const b=function(t,n,r){try{const e=new Uint8Array(n*r);for(let u=0;u<n;u++)for(let n=0;n<r;n++)e[u*r+n]=t[u]?.[n]??0;const o=i(e,n,r);if(o.length>0)return new Set(o)}catch(p){}const o=new Map,u=new Set;for(let s=0;s<n;s++)for(let n=0;n<r;n++){const u=t[s]?.[n];if(!u||0===u)continue;const c=y(s,u===e?n+1:n,r),i=y(s+1,u===e?n:n+1,r);o.has(c)||o.set(c,[]),o.has(i)||o.set(i,[]),o.get(c)?.push({node:i,r:s,c:n}),o.get(i)?.push({node:c,r:s,c:n})}const c=new Set,f=new Set,a=[],l=(e,t)=>{c.add(e),f.add(e);const n=o.get(e)??[];for(const{node:r,r:o,c:i}of n)if(r!==t)if(f.has(r)){u.add(s(o,i));for(let e=a.length-1;e>=0;e--){const t=a[e];if(!t)break;if(u.add(s(t.r,t.c)),t.u===r||t.v===r)break}}else c.has(r)||(a.push({r:o,c:i,u:e,v:r}),l(r,e),a.pop());f.delete(e)};for(const e of o.keys())c.has(e)||l(e,-1);return u}(m,r,o);self.postMessage({type:"RESULT",payload:{gridState:f,conflicts:l,cycleCells:b}})}};
