import{j as e}from"./vendor_react-WaSaIrII.js";import{c as r,a as o,T as t,S as i,C as a}from"./index-CiSMMeE7.js";import{G as n}from"./GlassCard-BAqQyjKB.js";import{B as s,e as d,G as l,d as x,x as c,y as m,u as h}from"./vendor_mui_core-D4-4kcvK.js";import{R as g,Q as b}from"./vendor_mui_icons-kUp0AcNR.js";import{G as u}from"./GlobalHeader-8njknenw.js";import{R as p,L as f,C as y,X as k,Y as j,T as S,a as R}from"./vendor_recharts-C1M_ch-7.js";const v={oligopoly:{defaultFirms:3,defaultElasticity:2,defaultBasePrice:40,maxRounds:15,simulation:{fallbackPrice:20,fallbackHHI:.3,collusionStart:6,collusionEnd:10,priceAmplitude:5,hhiAmplitude:.1,priceFrequency:.3,hhiFrequency:.1}},zsharp:{baseAccuracy:.65,maxAccuracy:.75,baseLoss:2,minLoss:.8,improvement:.05,lossReduction:.1,maxEpochs:20},modelTypes:{cournot:"cournot"}},w=300,E=4,B=3,C={strokeDashArray:"3 3",defaultStrokeWidth:2},A={multiplier:100,divisor:100},T=({viewTypes:a,currentViewType:n,onViewTypeChange:l})=>a.length<=1?null:e.jsx(s,{sx:{marginBottom:3,width:"100%",boxSizing:"border-box"},children:e.jsx(s,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, minmax(0, 1fr))",md:`repeat(${Math.min(a.length,4).toString()}, 1fr)`},gap:1.5,width:"100%",margin:0},children:a.map(a=>{const s=a.icon;return e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(s,{}),onClick:()=>{l(a.key)},sx:{width:"100%",color:n===a.key?"inherit":o.text.secondary,backgroundColor:n===a.key?o.primary.main:o.surface.elevated,"&.MuiButton-root":{color:n===a.key?"#fff":o.text.secondary},borderColor:o.border.subtle,borderWidth:"1px",borderStyle:"solid",borderRadius:i.borderRadius.lg,minHeight:"36px",padding:"0.4rem 0.8rem",fontSize:"0.8rem",fontWeight:t.fontWeight.medium,transition:"transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease","&:hover":{backgroundColor:n===a.key?o.primary.dark:o.interactive.hover,transform:"translateY(-1px)",boxShadow:r.sm}},children:a.label},a.key)})})}),z={GLASS:{VERY_SUBTLE:"rgba(255, 255, 255, 0.01)",SUBTLE:"rgba(255, 255, 255, 0.02)",TRANSPARENT:"rgba(255, 255, 255, 0.03)",SLIGHT:"rgba(255, 255, 255, 0.05)",MEDIUM:"rgba(255, 255, 255, 0.1)",STRONG:"rgba(255, 255, 255, 0.2)",DARK:"rgba(0, 0, 0, 0.2)"},CYAN:{BG_SUBTLE:"rgba(0, 184, 212, 0.05)",BG_SLIGHT:"rgba(0, 184, 212, 0.1)",BORDER_SUBTLE:"rgba(0, 184, 212, 0.1)",BORDER_SLIGHT:"rgba(0, 184, 212, 0.2)"},GREEN:{BG_SUBTLE:"rgba(0, 200, 83, 0.05)",BORDER_SUBTLE:"rgba(0, 200, 83, 0.1)",HOVER:"hsl(141, 64%, 39%)"},AMBER:{HOVER:"hsl(34, 95%, 48%)"},BORDER:{VERY_SUBTLE:"rgba(255, 255, 255, 0.03)",SUBTLE:"rgba(255, 255, 255, 0.05)"}},L=({controls:a,onReset:n,resetLabel:h="Reset"})=>0===a.length?null:e.jsxs(s,{sx:{marginBottom:0,width:"100%",boxSizing:"border-box",paddingBottom:i.padding.md},children:[n&&e.jsx(s,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:2.5},children:e.jsx(d,{variant:"outlined",size:"small",startIcon:e.jsx(g,{}),onClick:n,sx:{color:o.text.secondary,borderColor:o.border.subtle,borderRadius:i.borderRadius.lg,padding:"0.25rem 1rem",fontSize:"0.875rem",fontWeight:t.fontWeight.medium,transition:"all 0.2s ease-in-out","&:hover":{borderColor:o.primary.main,backgroundColor:o.interactive.hover,transform:"translateY(-1px)",boxShadow:r.sm}},children:h})}),e.jsx(l,{container:!0,spacing:2.5,children:a.map((a,n)=>e.jsx(l,{size:{xs:12,md:4},children:e.jsxs(s,{sx:{marginBottom:0,padding:"1rem",backgroundColor:o.interactive.disabled,borderRadius:i.borderRadius.lg,border:`1px solid ${o.border.subtle}`},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[a.icon&&e.jsx(a.icon,{sx:{color:a.color??o.primary.light,fontSize:"1.1rem"}}),e.jsx(x,{variant:"body2",sx:{color:o.text.secondary,fontWeight:t.fontWeight.medium},children:a.label})]}),e.jsx(c,{value:a.value,exclusive:!0,onChange:(e,r)=>{null!==r&&a.onChange(r)},size:"small",sx:{width:"100%",borderRadius:i.borderRadius.lg,overflow:"hidden",border:`1px solid ${o.border.subtle}`,"& .MuiToggleButtonGroup-grouped":{margin:0,border:0,borderRadius:0,"&:not(:first-of-type)":{borderLeft:`1px solid ${o.border.subtle}`}},"& .MuiToggleButton-root":{color:o.text.secondary,borderColor:o.border.subtle,padding:"0.6rem 0.8rem",flex:1,fontSize:"0.85rem",fontWeight:t.fontWeight.medium,borderRadius:0,transition:"all 0.2s ease-in-out","&.Mui-selected":{backgroundColor:a.color??o.primary.main,color:"#fff",borderColor:a.color??o.primary.main,"&:hover":{backgroundColor:a.hoverColor??(a.color===o.primary.main?o.primary.dark:a.color===o.data.green?z.GREEN.HOVER:a.color===o.data.amber?z.AMBER.HOVER:a.color??o.primary.dark),borderColor:a.hoverColor??(a.color===o.primary.main?o.primary.dark:a.color===o.data.green?z.GREEN.HOVER:a.color===o.data.amber?z.AMBER.HOVER:a.color??o.primary.dark),transform:"translateY(-1px)",boxShadow:r.sm}}},"&:hover":{backgroundColor:o.interactive.hover,transform:"translateY(-1px)"}},children:a.options.map(r=>e.jsx(m,{value:r.value,children:r.label},r.value))})]})},a.label||n))})]}),W=({title:r,subtitle:c,githubUrl:m,chartData:g=[],chartConfig:v={type:"line",lines:[],xAxisKey:"x",yAxisFormatter:e=>e.toFixed(2),yAxisDomain:["dataMin - 0.05","dataMax + 0.05"],dualYAxis:!1,rightYAxisFormatter:e=>e.toFixed(2),rightYAxisDomain:["dataMin - 0.05","dataMax + 0.05"],tooltipLabelFormatter:e=>`Round ${e.toString()}`,tooltipFormatter:(e,r)=>[e.toFixed(2),r]},viewTypes:A=[],currentViewType:z="default",onViewTypeChange:W=()=>{},controls:D=[],loading:F=!1,loadingMessage:I="Loading data...",onReset:G,resetLabel:H="Reset",chartTitle:V=null,children:M,backUrl:Y})=>{const _=(()=>{if(0===g.length)return[];if(!A.length)return g;const e=A.find(e=>e.key===z);return e?.dataProcessor?e.dataProcessor(g):g})(),U=A.find(e=>e.key===z)?.chartConfig??v,O=h("(max-width:600px)"),N=r=>e.jsx(d,{component:"a",href:`#${Y??""}`,startIcon:e.jsx(b,{}),size:"small",sx:{color:o.text.secondary,padding:0,minWidth:0,"&:hover":{backgroundColor:"transparent",color:o.primary.main},marginBottom:r,alignSelf:{xs:"center",sm:"flex-end"},textTransform:"none",fontSize:"0.8rem"},children:"Back to Simulation"});let K;return K=Y&&O?N(0):e.jsx(x,{variant:"h5",sx:{color:o.text.secondary,fontSize:t.fontSize.subheading,textAlign:{xs:"center",md:"right"},whiteSpace:{xs:"normal",md:"nowrap"},display:{xs:"none",sm:"block"}},children:c}),e.jsxs(s,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",background:o.surface.background},children:[e.jsx(u,{showHome:!0,githubUrl:m}),e.jsx(l,{container:!0,flex:1,flexDirection:"column",sx:{position:"relative",padding:i.padding.md,paddingTop:i.padding.xl,paddingBottom:{xs:i.padding.md,md:0},boxSizing:"border-box",width:"100%",maxWidth:"100vw",overflowX:"hidden"},children:e.jsx(l,{size:{xs:12},flex:1,sx:{...a.flexCenter,flexDirection:"column",zIndex:1,padding:0,minHeight:0},children:e.jsxs(s,{sx:{textAlign:"center",maxWidth:i.maxWidth.md,width:"100%",padding:{xs:"0 0.5rem",md:"0 2rem"},boxSizing:"border-box",overflow:"hidden"},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:{xs:"center",md:"flex-start"},gap:2,marginBottom:{xs:3,md:4},width:"100%"},children:[Y&&!O&&N(-2),e.jsxs(s,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:{xs:"center",md:"baseline"},width:"100%"},children:[e.jsx(x,{variant:"h1",sx:{color:o.text.primary,fontWeight:t.fontWeight.bold,fontSize:t.fontSize.h2,textAlign:{xs:"center",md:"left"}},children:r}),K]})]}),e.jsxs(n,{sx:{marginBottom:3,width:"100%",boxSizing:"border-box",overflow:"hidden"},children:[e.jsx(x,{variant:"subtitle1",sx:{color:o.text.secondary,marginBottom:2,textAlign:"center",fontWeight:t.fontWeight.medium,fontSize:t.fontSize.subheading},children:V??(A.length>0?A.find(e=>e.key===z)?.chartTitle??"Data Visualization":"Data Visualization")}),e.jsx(s,{sx:{height:w,width:"100%",position:"relative"},children:F?e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:o.text.secondary},children:e.jsx(x,{children:I})}):e.jsx(p,{width:"100%",height:w,minWidth:0,minHeight:0,debounce:1,children:e.jsxs(f,{data:_,children:[e.jsx(y,{strokeDasharray:C.strokeDashArray,stroke:o.border.subtle,vertical:!1}),e.jsx(k,{dataKey:U.xAxisKey,stroke:o.text.secondary,tick:{fill:o.text.secondary,fontSize:10},axisLine:{stroke:o.border.subtle},tickLine:!1}),e.jsx(j,{yAxisId:"left",hide:O,stroke:o.text.secondary,tick:{fill:o.text.secondary,fontSize:10},axisLine:!1,tickLine:!1,tickFormatter:U.yAxisFormatter,domain:U.yAxisDomain}),U.dualYAxis&&e.jsx(j,{yAxisId:"right",orientation:"right",hide:O,stroke:o.text.secondary,tick:{fill:o.text.secondary,fontSize:10},axisLine:!1,tickLine:!1,tickFormatter:U.rightYAxisFormatter,domain:U.rightYAxisDomain}),e.jsx(S,{contentStyle:{backgroundColor:o.surface.glass,backdropFilter:"blur(8px) saturate(180%)",border:`1px solid ${o.border.subtle}`,borderRadius:i.borderRadius.md,color:o.text.primary,boxShadow:"none"},itemStyle:{fontSize:"12px",padding:"2px 0"},labelStyle:{fontWeight:"bold",marginBottom:"4px",color:o.text.primary},labelFormatter:U.tooltipLabelFormatter,formatter:(e,r)=>{if(void 0===e)throw new Error("Value is undefined");if(void 0===r)throw new Error("Name is undefined");return U.tooltipFormatter(e,r)}}),U.lines.map((r,o)=>e.jsx(R,{yAxisId:r.yAxisId??"left",type:"monotone",dataKey:r.dataKey,stroke:r.color,strokeWidth:B,name:r.name,dot:{fill:r.color,strokeWidth:C.defaultStrokeWidth,r:E}},r.dataKey))]})})})]}),e.jsx(T,{viewTypes:A,currentViewType:z,onViewTypeChange:W}),e.jsx(L,{controls:D,onReset:G,resetLabel:H}),M]})})})]})};export{A as P,W as R,v as a,z as b};
