var e,t,r={exports:{}},n={};function o(){if(e)return n;e=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),i=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),d=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function _(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||h}function b(){}function S(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||h}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=_.prototype;var g=S.prototype=new b;g.constructor=S,v(g,_.prototype),g.isPureReactComponent=!0;var E=Array.isArray;function w(){}var k={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function j(e,r,n){var o=n.ref;return{$$typeof:t,type:e,key:r,ref:void 0!==o?o:null,props:n}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var C=/\/+/g;function $(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36);var r,n}function x(e,n,o,u,s){var c=typeof e;"undefined"!==c&&"boolean"!==c||(e=null);var i,a,f=!1;if(null===e)f=!0;else switch(c){case"bigint":case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case t:case r:f=!0;break;case p:return x((f=e._init)(e._payload),n,o,u,s)}}if(f)return s=s(e),f=""===u?"."+$(e,0):u,E(s)?(o="",null!=f&&(o=f.replace(C,"$&/")+"/"),x(s,n,o,"",function(e){return e})):null!=s&&(R(s)&&(i=s,a=o+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+f,s=j(i.type,a,i.props)),n.push(s)),1;f=0;var l,y=""===u?".":u+":";if(E(e))for(var h=0;h<e.length;h++)f+=x(u=e[h],n,o,c=y+$(u,h),s);else if("function"==typeof(h=null===(l=e)||"object"!=typeof l?null:"function"==typeof(l=d&&l[d]||l["@@iterator"])?l:null))for(e=h.call(e),h=0;!(u=e.next()).done;)f+=x(u=u.value,n,o,c=y+$(u,h++),s);else if("object"===c){if("function"==typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),n,o,u,s);throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.")}return f}function A(e,t,r){if(null==e)return e;var n=[],o=0;return x(e,n,"","",function(e){return t.call(r,e,o++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},q={map:A,forEach:function(e,t,r){A(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return n.Activity=y,n.Children=q,n.Component=_,n.Fragment=o,n.Profiler=s,n.PureComponent=S,n.StrictMode=u,n.Suspense=f,n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,n.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},n.cache=function(e){return function(){return e.apply(null,arguments)}},n.cacheSignal=function(){return null},n.cloneElement=function(e,t,r){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var n=v({},e.props),o=e.key;if(null!=t)for(u in void 0!==t.key&&(o=""+t.key),t)!H.call(t,u)||"key"===u||"__self"===u||"__source"===u||"ref"===u&&void 0===t.ref||(n[u]=t[u]);var u=arguments.length-2;if(1===u)n.children=r;else if(1<u){for(var s=Array(u),c=0;c<u;c++)s[c]=arguments[c+2];n.children=s}return j(e.type,o,n)},n.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:c,_context:e},e},n.createElement=function(e,t,r){var n,o={},u=null;if(null!=t)for(n in void 0!==t.key&&(u=""+t.key),t)H.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(o[n]=t[n]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var c=Array(s),i=0;i<s;i++)c[i]=arguments[i+2];o.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===o[n]&&(o[n]=s[n]);return j(e,u,o)},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:a,render:e}},n.isValidElement=R,n.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:T}},n.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},n.startTransition=function(e){var t=k.T,r={};k.T=r;try{var n=e(),o=k.S;null!==o&&o(r,n),"object"==typeof n&&null!==n&&"function"==typeof n.then&&n.then(w,O)}catch(u){O(u)}finally{null!==t&&null!==r.types&&(t.types=r.types),k.T=t}},n.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},n.use=function(e){return k.H.use(e)},n.useActionState=function(e,t,r){return k.H.useActionState(e,t,r)},n.useCallback=function(e,t){return k.H.useCallback(e,t)},n.useContext=function(e){return k.H.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},n.useEffect=function(e,t){return k.H.useEffect(e,t)},n.useEffectEvent=function(e){return k.H.useEffectEvent(e)},n.useId=function(){return k.H.useId()},n.useImperativeHandle=function(e,t,r){return k.H.useImperativeHandle(e,t,r)},n.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},n.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},n.useMemo=function(e,t){return k.H.useMemo(e,t)},n.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},n.useReducer=function(e,t,r){return k.H.useReducer(e,t,r)},n.useRef=function(e){return k.H.useRef(e)},n.useState=function(e){return k.H.useState(e)},n.useSyncExternalStore=function(e,t,r){return k.H.useSyncExternalStore(e,t,r)},n.useTransition=function(){return k.H.useTransition()},n.version="19.2.4",n}function u(e,t){return`${e.toString()},${t.toString()}`}t||(t=1,r.exports=o()),r.exports;const s=1,c=2;function i(e,t,r){return e*(r+1)+t}self.onmessage=e=>{if("SOLVE"===e.data.type){const{rows:t,cols:r,numbers:n,userMoves:o}=e.data.payload,a=new Map,f=[],l=[];o.forEach((e,t)=>{a.set(t,{state:e,source:"user"});const[r,n]=t.split(",").map(Number);void 0!==r&&void 0!==n&&f.push({r:r,c:n})});const p=(e,n)=>{if(e<0||e>=t||n<0||n>=r)return 0;const o=u(e,n);return a.get(o)?.state??0},y=(e,t,r,n)=>{const o=u(e,t),s=a.get(o);s?s.state!==r&&l.push({type:"cell",r:e,c:t}):(a.set(o,{state:r,source:n}),f.push({r:e,c:t}))},d=(e,n)=>[{r:e-1,c:n-1,required:c},{r:e-1,c:n,required:s},{r:e,c:n-1,required:s},{r:e,c:n,required:c}].filter(e=>e.r>=0&&e.r<t&&e.c>=0&&e.c<r);let h=0;for(;h<f.length;){const e=f[h++];if(!e)break;const{r:t,c:r}=e,o=[{r:t,c:r},{r:t,c:r+1},{r:t+1,c:r},{r:t+1,c:r+1}];for(const i of o){const e=n[i.r]?.[i.c];if(null==e)continue;const o=d(i.r,i.c);let f=0;const h=[];for(const t of o){const e=p(t.r,t.c);0===e?h.push(t):e===t.required&&f++}if(f>e)l.push({type:"node",r:i.r,c:i.c});else if(f+h.length<e)l.push({type:"node",r:i.r,c:i.c});else if("user"===a.get(u(t,r))?.source)if(f===e&&h.length>0)for(const t of h){const e=t.required===s?c:s;y(t.r,t.c,e,"propagated")}else if(f+h.length===e&&h.length>0)for(const t of h)y(t.r,t.c,t.required,"propagated")}}const v=Array.from({length:t},()=>Array(r).fill(0));a.forEach((e,t)=>{const[r,n]=t.split(",").map(Number);void 0!==r&&void 0!==n&&v[r]&&(v[r][n]=e.state)});const m=function(e,t,r){const n=new Map,o=new Set;for(let u=0;u<t;u++)for(let t=0;t<r;t++){const o=e[u]?.[t];if(!o||0===o)continue;const c=i(u,o===s?t+1:t,r),a=i(u+1,o===s?t:t+1,r);n.has(c)||n.set(c,[]),n.has(a)||n.set(a,[]),n.get(c)?.push({node:a,r:u,c:t}),n.get(a)?.push({node:c,r:u,c:t})}const c=new Set,a=new Set,f=[],l=(e,t)=>{c.add(e),a.add(e);const r=n.get(e)??[];for(const{node:n,r:s,c:i}of r)if(n!==t)if(a.has(n)){o.add(u(s,i));for(let e=f.length-1;e>=0;e--){const t=f[e];if(!t)break;if(o.add(u(t.r,t.c)),t.u===n||t.v===n)break}}else c.has(n)||(f.push({r:s,c:i,u:e,v:n}),l(n,e),f.pop());a.delete(e)};for(const u of n.keys())c.has(u)||l(u,-1);return o}(v,t,r);self.postMessage({type:"RESULT",payload:{gridState:a,conflicts:l,cycleCells:m}})}};
