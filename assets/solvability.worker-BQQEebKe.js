function t(){return{__proto__:null,"./lights_out_wasm_bg.js":{__proto__:null,__wbindgen_cast_0000000000000001:function(t,s){var c;return c=t,function(t,s){return r+=s,r>=o&&(e=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),e.decode(),r=s),e.decode((null!==n&&0!==n.byteLength||(n=new Uint8Array(i.memory.buffer)),n).subarray(t,t+s))}(c>>>=0,s)},__wbindgen_init_externref_table:function(){const t=i.__wbindgen_externrefs,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)}}}}let n=null;let e=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});e.decode();const o=2146435072;let i,r=0;try{await async function(e){if(void 0!==i)return i;void 0!==e&&Object.getPrototypeOf(e)===Object.prototype&&({module_or_path:e}=e),void 0===e&&(e=new URL("/assets/lights_out_wasm_bg-8JZuMai_.wasm",import.meta.url));const o=t();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:s}=await async function(t,n){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,n)}catch(e){if(!t.ok||!function(t){switch(t){case"basic":case"cors":case"default":return!0}return!1}(t.type)||"application/wasm"===t.headers.get("Content-Type"))throw e}const o=await t.arrayBuffer();return await WebAssembly.instantiate(o,n)}{const e=await WebAssembly.instantiate(t,n);return e instanceof WebAssembly.Instance?{instance:e,module:t}:e}}(await e,o);return function(t){return i=t.exports,n=null,i.__wbindgen_start(),i}(r)}()}catch(d){}function s(t){let n=0,e=t;if(e<0n)throw new Error("countBits called on negative bigint");for(;e>0n;)e&=e-1n,n++;return n}function c(t,n){const e=t.length,o=[];for(let i=0;i<e;i++){const r=t[i];let s=0n;if(void 0!==r)for(let t=0;t<e;t++)if(r&1n<<BigInt(e-1-t)){const e=n[t];void 0!==e&&(s^=e)}o.push(s)}return o}function a(t){const n=Array(t).fill(1n);for(let e=0;e<t;e++){const o=n[e];void 0!==o&&(n[e]=o<<BigInt(t-e-1))}return n}function l(t,n,e){let o=a(t.length),i=[...t],r=n;for(;r>0;)r%2==1&&(o=c(o,i)),i=c(i,i),r=Math.floor(r/2);return o}function f(t,n){const e=t.length,o=[];for(let i=0;i<e;i++){const e=t[i],r=n[i];if(void 0!==e&&void 0!==r){const t=e^r;o.push(t)}}return o}function u(t,n){const e=[...t],o=a(n);let i=0;for(let s=0;s<n&&i<e.length;s++){const t=1n<<BigInt(n-1-s);let r=i;for(;r<e.length;){const n=e[r];if(void 0!==n&&n&t)break;r++}if(r<e.length){const n=e[r],s=o[r],c=e[i],a=o[i];if(void 0!==n&&void 0!==s&&void 0!==c&&void 0!==a){e[i]=n,e[r]=c,o[i]=s,o[r]=a;const l=e[i]??0n,f=o[i]??0n;for(let n=0;n<e.length;n++){const r=e[n],s=o[n];n!==i&&void 0!==r&&void 0!==s&&r&t&&(e[n]=r^l,o[n]=s^f)}}i++}}const r=[];for(let s=i;s<e.length;s++){const t=o[s];void 0!==t&&r.push(t)}return r}function g(t,n,e){const o=[...t],i=a(e);let r=0;const c=[];for(let s=0;s<e&&r<o.length;s++){const t=1n<<BigInt(e-1-s);let n=r;for(;n<o.length;){const e=o[n];if(void 0!==e&&e&t)break;n++}if(n<o.length){const e=o[n],a=i[n],l=o[r],f=i[r];if(void 0!==e&&void 0!==a&&void 0!==l&&void 0!==f){o[r]=e,o[n]=l,i[r]=a,i[n]=f;const s=o[r]??0n,c=i[r]??0n;for(let n=0;n<o.length;n++){const e=o[n],a=i[n];n!==r&&void 0!==e&&void 0!==a&&e&t&&(o[n]=e^s,i[n]=a^c)}}c[r]=s,r++}}let l=0n,f=n;for(let s=0;s<r;s++){const t=c[s];if(void 0===t)continue;if(f&1n<<BigInt(e-1-t)){const t=o[s],n=i[s];void 0!==t&&void 0!==n&&(f^=t,l^=n)}}if(0n!==f)return-1n;const g=u(t,e);if(g.length>20)return l;let d=l,h=s(l);for(let a=1;a<1<<g.length;a++){let t=l;for(let e=0;e<g.length;e++)if(a>>e&1){const n=g[e];void 0!==n&&(t^=n)}const n=s(t);n<h&&(h=n,d=t)}return d}self.onmessage=t=>{const{n:n}=t.data;try{const t=n,e=n,o=function(t){if(1===t)return[1n];const n=[7n<<BigInt(t-2)];for(let o=1;o<t;o++){const t=n[o-1];if(void 0!==t){const e=t>>1n;n.push(e)}}const e=n[0];return void 0!==e&&(n[0]=e-(1n<<BigInt(t))),n}(e),i=function(t,n){const e=t.length;let o=Array(e).fill(0n),i=0,r=n;for(;r>0n;)1n&r&&(o=f(o,l(t,i))),r>>=1n,i++;return o}(o,function(t){const n=[0n,1n];for(let e=1;e<t;e++){const t=n[e],o=n[e-1];if(void 0!==t&&void 0!==o){const e=t<<1n;n.push(e^o)}}return n[t]??0n}(t+1)),r=u(i,e),s=r.length,c=e-s,d=t*e,h=d-s,v=t=>{if(t<50){return(1n<<BigInt(t)).toLocaleString()}return`2^${t.toString()}`},p=function(t,n){const e=[...t],o=a(n);let i=0;for(let s=0;s<n&&i<e.length;s++){const t=1n<<BigInt(n-1-s);let r=i;for(;r<e.length;){const n=e[r];if(void 0!==n&&n&t)break;r++}if(r<e.length){const n=e[r],s=o[r],c=e[i],a=o[i];if(void 0!==n&&void 0!==s&&void 0!==c&&void 0!==a){e[i]=n,e[r]=c,o[i]=s,o[r]=a;const l=e[i]??0n,f=o[i]??0n;for(let n=0;n<e.length;n++){const r=e[n],s=o[n];n!==i&&void 0!==r&&void 0!==s&&r&t&&(e[n]=r^l,o[n]=s^f)}}i++}}const r=[];for(let s=0;s<i;s++){const t=e[s],n=o[s];void 0!==t&&void 0!==n&&r.push({state:t,toggle:n})}return r}(i,e),_=p.length,b=_<=6&&_>0,w=[];if(b){const t=1<<_;for(let n=1;n<t;n++){let t=0n;for(let e=0;e<_;e++)if(n>>e&1){const n=p[e];n&&(t^=n.state)}const o=g(i,t,e);w.push({state:t.toString(2).padStart(e,"0"),toggle:o.toString(2).padStart(e,"0")})}w.sort((t,n)=>t.state.localeCompare(n.state))}else p.forEach(t=>{const n=g(i,t.state,e);w.push({state:t.state.toString(2).padStart(e,"0"),toggle:n.toString(2).padStart(e,"0")})});const y={rank:c,nullity:s,gridRank:h,solvablePercent:(1/Math.pow(2,s)*100).toFixed(0===s?0:2),quietPatterns:r.map(t=>t.toString(2).padStart(e,"0")),totalStates:v(d),reachableStates:v(h),imageMapping:w,isFullSubspace:b};self.postMessage({success:!0,result:y})}catch(e){self.postMessage({success:!1,error:e instanceof Error?e.message:"Unknown error occurred in worker"})}};
