const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BorHYZOZ.js","assets/vendor_react-De-BR_RD.js","assets/vendor_mui_core-K-vIj0S5.js","assets/vendor_mui_icons-D2L4zTna.js","assets/index-RDLDN4eR.js","assets/index-GLeeZWEo.css","assets/PageLayout-CLN6aZXB.js","assets/lazyNamed-H40M1Cf6.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,a as n}from"./vendor_react-De-BR_RD.js";import{L as o,g as r,G as i,T as s,a,S as l,c,A as d,R as u,b as f,C as m,d as h,F as p,_ as x,u as g}from"./index-RDLDN4eR.js";import{s as b,t as y,P as w}from"./PageLayout-CLN6aZXB.js";import{B as S,P as z,G as v,T as j,M as k,h as D}from"./vendor_mui_core-K-vIj0S5.js";import{f as C,A as M,M as R,E}from"./vendor_mui_icons-D2L4zTna.js";import{E as I,l as P,a as O,b as T,u as A}from"./lazyNamed-H40M1Cf6.js";const L={display:"grid",placeItems:"center"},$={gridArea:"1/1"},N={gridArea:"1/1",zIndex:o.zIndex.base+1},B=e.memo(function({size:n,children:o,...r}){const l=`${n.toString()}rem`,c=`${(n/i.cellSize.divisor).toString()}rem`,{backgroundColor:d,color:u,boxShadow:f,border:m,opacity:h,transition:p=!0,sx:x,...g}=r,y=!1===p?"none":"string"==typeof p?p:"background-color 200ms ease, color 200ms ease, opacity 200ms ease, transform 200ms ease, border-radius 200ms ease",w=e.useMemo(()=>({...a.flexCenter,borderRadius:c,height:l,width:l,fontSize:`${(n*i.cellSize.fontSizeMultiplier).toString()}rem`,fontWeight:s.fontWeight.semibold,fontFamily:"monospace"}),[c,l,n]);return t.jsx(S,{role:"gridcell",...w,...g,sx:{"--cell-radius":c,backgroundColor:d,color:u,boxShadow:f,border:m,opacity:h,transition:y,...b(x)},children:o})}),W=e.memo(function({cols:n,size:o,index:r,spacing:i,cellProps:s}){return t.jsx(S,{role:"row",sx:{display:"flex",gap:i,justifyContent:"center"},children:Array.from({length:n},(t,n)=>e.createElement(B,{...s(r,n),key:`${r.toString()}_${n.toString()}`,size:o}))})}),_=e.memo(function({size:e,rows:n,cols:o,cellProps:i,space:s,sx:a,...l}){const c=r(e),d=`${(s??c).toString()}rem`;return t.jsx(S,{role:"grid","aria-label":`Grid with ${n.toString()} rows and ${o.toString()} columns`,sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:d,...b(a)},...l,children:Array.from({length:n},(n,r)=>t.jsx(W,{index:r,cols:o,size:e,spacing:d,cellProps:i},`row_${r.toString()}`))})}),F=n.memo(function(e){const{overlayProps:n,cellProps:o,size:r,rows:i,cols:s,cellRows:a=i,cellCols:l=s,space:c=0,overlayLayerSx:d,cellLayerSx:u,overlayDecorative:f=!1,cellDecorative:m=!1}=e;return t.jsxs(S,{sx:L,onContextMenu:e=>{e.preventDefault()},children:[t.jsx(S,{sx:{...b($),...b(u)},children:t.jsx(_,{space:c,size:r,rows:a,cols:l,cellProps:o,...m?{role:"presentation","aria-hidden":!0}:{}})}),t.jsx(S,{sx:{...b(N),...b(d)},children:t.jsx(_,{space:c,size:r,rows:i,cols:s,cellProps:n,...f?{role:"presentation","aria-hidden":!0}:{}})})]})}),H={transform:"translateX(-50%)",position:"absolute",bottom:l.padding.xl,left:"50%",zIndex:o.zIndex.navigation,...d.presets.glass,borderRadius:l.borderRadius.lg,boxShadow:c.lg,padding:`${l.padding.sm} ${l.padding.lg}`},G={...a.flexCenter,flexWrap:"nowrap",minWidth:0};function K({children:e,sx:n,opacity:o}){return t.jsx(z,{elevation:0,component:"nav",role:"navigation","aria-label":"Game controls navigation",onClick:e=>{e.stopPropagation()},sx:[...y(H),{opacity:o},...y(n)],children:t.jsx(v,{container:!0,spacing:2,sx:G,children:e})})}const U=n.memo(function({rows:e,cols:n,dynamicSize:o,minSize:r,maxSize:i,handlePlus:s,handleMinus:a,onRefresh:l,disabled:c=!1,onOpenInfo:d,hidden:m=!1,children:h}){if(m)return null;const p=Math.min(e,n)<=r,x=Math.min(e,n)>=i||Math.min(e,n)>=Math.min(o.rows,o.cols);return t.jsxs(K,{children:[t.jsx(u,{onClick:l}),t.jsx(f,{title:"Decrease Size",Icon:C,onClick:a,disabled:c||p}),t.jsx(f,{title:"Increase Size",Icon:M,onClick:s,disabled:c||x}),d&&t.jsx(f,{title:"How to Play",Icon:R,onClick:d}),h]})}),q={gridSizes:{mobile:2.5,desktop:4},timing:{winAnimationDelay:2e3,interactionDelay:500,touchHoldDelay:500},layout:{headerHeight:{mobile:64,desktop:80}}},J={info:{loading:"Loading info...",loadError:"Failed to load info panel."},trophy:{solvedLabel:"Solved!"},errors:{boardTitle:"Board Error",boardReset:"Reset Board"}},V={xs:"80px",md:"120px"},X={PADDING:{MOBILE:"30px",DESKTOP:"36px"},BORDER_RADIUS:"24px",BORDER:"2px solid transparent",SHADOW:"0 2px 4px rgba(0,0,0,0.2)",DROP_SHADOW:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"};function Y(e){return{SIZE:`${e}-size`,STATE:`${e}-state`}}const Z={boardPadding:0,boardMaxWidth:1200,boardSizeFactor:.94,maxCellSize:80,remBase:16},Q={defaultSize:null,minSize:3,maxSize:10,mobileRowOffset:2,headerOffset:q.layout.headerHeight,gridPadding:0,widthLimit:1300,cellSizeReference:{mobile:q.gridSizes.mobile,desktop:q.gridSizes.desktop}},ee=e=>({position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:e?1:0,transform:e?"scale(1)":"scale(0.5)",visibility:e?"visible":"hidden",transition:["opacity 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)","transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)","visibility 0.5s step-start"].join(", "),willChange:"opacity, transform",backfaceVisibility:"hidden",zIndex:10,backgroundColor:"transparent",pointerEvents:"none"}),te={display:"flex",flexDirection:"column",alignItems:"center",gap:1.5,height:"auto",width:"auto",maxWidth:"80%"},ne={color:m.text.primary,fontWeight:600,letterSpacing:"0.02em"};function oe({show:e=!1,onReset:n,size:o=0,iconSizeRatio:r=1,primaryColor:i=m.primary.main,secondaryColor:s=m.primary.main,useSecondary:a=!1,showLabel:c=!0}){const d=a?s:i;return t.jsx(S,{sx:ee(e),children:o>0&&t.jsxs(h,{padding:l.padding.md,sx:te,children:[t.jsx(E,{sx:(u=`${(o*r*.6).toString()}rem`,f=d,{fontSize:u,color:f,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.1))"})}),c&&t.jsx(j,{variant:"h6",sx:ne,children:J.trophy.solvedLabel})]})});var u,f}function re({children:n,controls:o,infoUrl:r,title:i,background:s=m.surface.background,trophyProps:a={},layout:l={},onClick:c}){const{paddingBottom:d=V,contentSx:u={},boardSx:f}=l,h=e.useMemo(()=>((e,t)=>[{flex:1,position:"relative",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden",pb:e},...y(t)])(d,u),[d,u]),x=e.useMemo(()=>(e=>[{position:"relative",width:"fit-content",userSelect:"none",padding:{xs:X.PADDING.MOBILE,sm:X.PADDING.DESKTOP},borderRadius:X.BORDER_RADIUS,border:X.BORDER},...y(e)])(f),[f]);return t.jsxs(w,{title:i,infoUrl:r,background:s,containerSx:{height:"100vh",transition:"background 0.5s ease-in-out",cursor:c?"pointer":"inherit"},sx:{justifyContent:"center",alignItems:"center"},onClick:c,children:[t.jsx(I,{FallbackComponent:p,fallbackProps:{title:J.errors.boardTitle,resetLabel:J.errors.boardReset},children:t.jsx(S,{sx:h,children:t.jsxs(S,{sx:x,children:[n,t.jsx(oe,{...a})]})})}),o]})}function ie(e,t){return`${e.toString()},${t.toString()}`}function se(e){return(t,n)=>{if(e.customHandler){const o=e.customHandler(t,n);if(null!==o)return o}switch(n.type){case"resize":if("newRows"in n||"rows"in n||"cols"in n){const o=n.newRows??n.rows??t.rows,r=n.newCols??n.cols??t.cols;return o===t.rows&&r===t.cols?t:e.getInitialState(o,r)}return t;case"new":case"next":case"reset":return e.getInitialState(t.rows,t.cols);case"hydrate":case"restore":return"state"in n?n.state:t;default:return t}}}function ae(t,n,o){return e.useMemo(()=>t(n,...o),[t,n,...o])}const le=e=>{if(e<1||e>100)throw new Error("Invalid grid size: must be between 1 and 100");return e},ce=e=>{if(e<0)throw new Error("Invalid cell index: cannot be negative");return e};function de(t){const n=e.useRef(t);return n.current=t,e.useCallback((...e)=>n.current(...e),[])}function ue(t=!1){const[n,o]=e.useState(t);return{isOpen:n,open:e.useCallback(()=>{o(!0)},[]),close:e.useCallback(()=>{o(!1)},[]),toggle:e.useCallback(()=>{o(e=>!e)},[])}}function fe({checkEnabled:t=()=>!0,touchTimeout:n=500,posAttribute:o="data-pos",preventDefault:r=!0,transition:i="all 0.2s",...s}){const a=e.useRef(void 0),l=e.useRef(s.onToggle);l.current=s.onToggle;const c=void 0!==s.onToggle,d=s.onAction,u=e.useMemo(()=>!c&&d?d:(e,n,o)=>{if(!t())return;const r=l.current;if(!r)return;const[i,s]=e.split(",").map(Number);void 0!==i&&void 0!==s&&(o?a.current=r(i,s,n,void 0,!0):r(i,s,n,a.current,!1))},[c,d,t]),[f,m]=e.useState(null),h=e.useRef(new Set),p=e.useRef(0),x=e.useRef(null),g=e.useCallback(()=>{m(null),x.current=null,h.current.clear()},[]),b=e.useCallback(e=>{" "!==e.key&&"Enter"!==e.key||null===x.current||(x.current=null,h.current.clear())},[]),y=e.useCallback(e=>{if(null===f)return;const t=e.touches[0];if(!t)return;const n=document.elementFromPoint(t.clientX,t.clientY);if(!n)return;const r=n.closest(`[${o}]`);if(r){const e=r.getAttribute(o);e&&!h.current.has(e)&&(u(e,2===f,!1),h.current.add(e))}},[f,u,o]);e.useEffect(()=>(globalThis.addEventListener("mouseup",g),globalThis.addEventListener("touchend",g),globalThis.addEventListener("touchcancel",g),globalThis.addEventListener("keyup",b),globalThis.addEventListener("touchmove",y,{passive:!1}),()=>{globalThis.removeEventListener("mouseup",g),globalThis.removeEventListener("touchend",g),globalThis.removeEventListener("touchcancel",g),globalThis.removeEventListener("keyup",b),globalThis.removeEventListener("touchmove",y)}),[g,b,y]);const w=e.useCallback(e=>({onMouseDown:o=>{t()&&(0!==o.button&&2!==o.button||Date.now()-p.current<n||(x.current=null,r&&o.preventDefault(),m(o.button),u(e,2===o.button,!0),h.current.add(e)))},onMouseEnter:()=>{null!==f&&!h.current.has(e)&&t()&&(u(e,2===f,!1),h.current.add(e))},onFocus:()=>{null!==x.current&&!h.current.has(e)&&t()&&(u(e,x.current,!1),h.current.add(e))},onTouchStart:n=>{t()&&(n.cancelable&&r&&n.preventDefault(),p.current=Date.now(),m(0),u(e,!1,!0),h.current.add(e))},onKeyDown:n=>{t()&&(" "!==n.key||n.repeat?"Enter"!==n.key||n.repeat?" "!==n.key&&"Enter"!==n.key||!n.repeat||n.preventDefault():(n.preventDefault(),m(null),x.current=!0,h.current.clear(),u(e,!0,!0),h.current.add(e)):(n.preventDefault(),m(null),x.current=!1,h.current.clear(),u(e,!1,!0),h.current.add(e)))},onContextMenu:e=>{r&&e.preventDefault()},[o]:e,role:"button",tabIndex:0,sx:{touchAction:"none",transition:i}}),[u,t,f,n,o,r,i]);return{isDragging:null!==f,draggingButton:f,getDragProps:w,lastTouchTime:p}}const me={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",w:"up",W:"up",a:"left",A:"left",s:"down",S:"down",d:"right",D:"right"};function he({rows:t,cols:n,posAttribute:o="data-pos"}){return{handleKeyDown:e.useCallback(e=>{const{key:r,currentTarget:i}=e,s=me[r];if(!s)return;const a=i.getAttribute(o);if(!a)return;const l=a.split(",").map(Number),c=l[0],d=l[1];if(void 0===c||void 0===d||isNaN(c)||isNaN(d))return;let u=c,f=d;switch(s){case"up":u=Math.max(0,c-1);break;case"down":u=Math.min(t-1,c+1);break;case"left":f=Math.max(0,d-1);break;case"right":f=Math.min(n-1,d+1)}if(u===c&&f===d)return;e.preventDefault();const m=`${u.toString()},${f.toString()}`,h=i.closest('[role="grid"]');if(!h)return;const p=h.querySelector(`[${o}="${m}"]`);p instanceof HTMLElement&&p.focus()},[t,n,o])}}const pe={backgroundColor:e=>"dark"===e.palette.mode?"hsla(0, 0%, 3%, 0.85)":"hsla(0, 0%, 98%, 0.85)",backdropFilter:"blur(12px) saturate(180%)",transition:"all 0.3s ease-in-out !important"},xe={zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},ge={outline:"none",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},be={width:"100%",maxWidth:"1000px",height:{xs:"630px",sm:"495px"},minHeight:{xs:"630px",sm:"495px"},display:"flex",flexDirection:"column",p:0,overflow:"hidden",position:"relative",m:2},ye={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,px:2},we={color:m.text.secondary},Se=e=>({flex:1,display:"flex",flexDirection:"column",pr:0===e?{xs:3,md:0}:0}),ze=e=>({flex:1,overflowY:1===e?"hidden":"auto",p:{xs:2.5,md:3},display:"flex",flexDirection:"column"}),ve=8,je={p:2.5,display:"flex",justifyContent:"space-between",alignItems:"center"},ke={color:m.text.primary,fontWeight:s.fontWeight.semibold,display:"flex",alignItems:"center",mb:1.5,fontSize:s.fontSize.subheading},De={mr:2,color:m.primary.main,fontSize:"1.75rem"},Ce={color:m.text.secondary,lineHeight:1.6,fontSize:s.fontSize.body,ml:6},Me={animation:"fadeIn 0.3s ease",flex:1,display:"flex",flexDirection:"column"},Re={flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},Ee={flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:4},Ie=P(()=>x(()=>import("./index-BorHYZOZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"GameInfoContent"),Pe="game-info-title";function Oe({children:e}){return t.jsx(S,{sx:{...b(be),display:"flex",justifyContent:"center",alignItems:"center"},children:e})}function Te(){return t.jsx(Oe,{children:t.jsx(j,{sx:{color:m.text.primary},children:J.info.loading})})}function Ae(){return t.jsx(Oe,{children:t.jsx(O,{message:J.info.loadError,height:"auto"})})}function Le(n){if(!n.open)return null;const{open:o,...r}=n;return t.jsx(k,{open:!0,onClose:n.toggleOpen,"aria-labelledby":Pe,slots:{backdrop:D},slotProps:{backdrop:{sx:pe}},sx:xe,children:t.jsx(S,{sx:ge,role:"document",children:t.jsx(I,{fallback:t.jsx(Ae,{}),children:t.jsx(e.Suspense,{fallback:t.jsx(Te,{}),children:t.jsx(Ie,{...r,titleId:Pe})})})})})}function $e({rows:t,cols:n,width:o,height:r,mobile:i,headerOffset:s,boardConfig:a}){return e.useMemo(()=>{const e="function"==typeof a.boardPadding?a.boardPadding(i):a.boardPadding;return function({rows:e,cols:t,width:n,height:o,mobile:r,headerOffset:i,boardPadding:s,boardMaxWidth:a,boardSizeFactor:l,maxCellSize:c,remBase:d}){const u=r?i.mobile:i.desktop,f="number"==typeof s?0:s.x,m="number"==typeof s?s:s.y,h=(Math.min(n,a)-f)*l,p=(o-u-m)*l;return Math.min(h/t,p/e,c)/d}({rows:t+(a.rowOffset??0),cols:n+(a.colOffset??0),width:o,height:r,mobile:i,headerOffset:s,...a,boardPadding:e})},[t,n,o,r,i,s,a])}function Ne({storageKey:t,rows:n,cols:o,state:r,onRestore:i,serialize:s,deserialize:a,enabled:l=!0,saveDebounceMs:c=300}){const d=`${t}-${String(n)}x${String(o)}`,u=de(i),f=de(s??(e=>e)),m=de(a??(e=>e));var h,p,x;e.useEffect(()=>{if(!l)return;const e=localStorage.getItem(d);if(e)try{const t=JSON.parse(e);u(m(t))}catch{localStorage.removeItem(d)}},[d,l,u,m]),h=()=>{if(!l)return;const e=f(r);localStorage.setItem(d,JSON.stringify(e))},p=c,x=[d,r,l,f],e.useEffect(()=>{const e=setTimeout(h,p);return()=>{clearTimeout(e)}},[...x,p])}function Be({storageKey:t,defaultSize:n,minSize:o=2,maxSize:r=10,headerOffset:i,gridPadding:s=0,widthLimit:a=1300,cellSizeReference:l,mobileRowOffset:c=0}){const{height:d,width:u}=T(),f=A("sm"),[m,h]=g(t,n,{serialize:String,deserialize:e=>{if("null"===e)return null;const t=Number.parseInt(e,10);return Number.isNaN(t)?void 0:t}}),p=e.useMemo(()=>{const e=f?i.mobile:i.desktop,t="number"==typeof l?l:f?l.mobile:l.desktop,n="number"==typeof s?0:s.x,r="number"==typeof s?s:s.y,m=function(e,t,n){const o=16*e;return{rows:Math.floor(t/o),cols:Math.floor(n/o)}}(t,d-e-r,Math.min(u,a)-n);let h=m.rows-1;const p=m.cols-1;return f&&(h+=c),{rows:Math.max(o,h),cols:Math.max(o,p)}},[l,d,u,f,i,s,a,o,c]),{rows:x,cols:b}=e.useMemo(()=>{if(null===m)return p;const e=f?Math.max(0,c+1):0;return{rows:Math.min(m+e,p.rows),cols:Math.min(m,p.cols)}},[m,p,f,c]);return{rows:x,cols:b,dynamicSize:p,handlePlus:()=>{const e=Math.min(x,b);null!==m&&e<Math.min(p.rows,p.cols)&&e<r&&h(e+1)},handleMinus:()=>{const e=Math.min(x,b);if(null===m){const e=Math.min(p.rows,p.cols);p.rows===p.cols?h(Math.max(o,e-1)):h(e)}else e>o&&h(e-1)},desiredSize:m,setDesiredSize:h,mobile:f,width:u,height:d,minSize:o,maxSize:r}}function We(e,t){return{...e,...Object.fromEntries(Object.entries(t).filter(([,e])=>void 0!==e))}}function _e({storageKey:t,grid:n={},board:o={},logic:r}){const i=Y(t),{reducer:s,getInitialState:a,isSolved:l,winAnimationDelay:c=q.timing.winAnimationDelay,persistence:d,manualResize:u=!1,onNext:f}=r,m=We(Q,{defaultSize:n.defaultSize,minSize:n.minSize,maxSize:n.maxSize,headerOffset:n.headerOffset,gridPadding:n.gridPadding,widthLimit:n.widthLimit,cellSizeReference:n.cellSizeReference,mobileRowOffset:n.mobileRowOffset}),h=e.useMemo(()=>({...We(Z,{boardPadding:o.boardPadding,boardMaxWidth:o.boardMaxWidth,boardSizeFactor:o.boardSizeFactor,maxCellSize:o.maxCellSize,remBase:o.remBase}),rowOffset:o.rowOffset,colOffset:o.colOffset}),[o.boardPadding,o.boardMaxWidth,o.boardSizeFactor,o.maxCellSize,o.remBase,o.rowOffset,o.colOffset]),{rows:p,cols:x,dynamicSize:g,handlePlus:b,handleMinus:y,mobile:w,width:S,height:z,minSize:v,maxSize:j}=Be({storageKey:i.SIZE,...m}),k=e.useRef(null);null===k.current&&(k.current=a(p,x));const[D,C]=e.useReducer(s,k.current),M=e.useMemo(()=>l(D),[D,l]),R=e.useCallback(()=>{C({type:"new"})},[C]),E=f??R;Ne({storageKey:i.STATE,rows:p,cols:x,state:D,onRestore:e=>{C({type:"hydrate",state:e})},...d}),function(t,n,o=2e3){const r=de(n);e.useEffect(()=>{if(t){const e=setTimeout(()=>{r()},o);return()=>{clearTimeout(e)}}},[t,o,r])}(M,E,c),e.useEffect(()=>{u||C({type:"resize",rows:p,cols:x,newRows:p,newCols:x})},[p,x,C,u]);const I=$e({rows:p,cols:x,width:S,height:z,mobile:w,headerOffset:m.headerOffset,boardConfig:h});return{rows:p,cols:x,state:D,dispatch:C,size:I,mobile:w,solved:M,handleNext:E,controlsProps:{rows:p,cols:x,dynamicSize:g,minSize:v,maxSize:j,handlePlus:b,handleMinus:y,onRefresh:E}}}export{ye as A,X as B,_ as C,we as D,Se as E,be as F,q as G,Le as L,ve as S,oe as T,le as a,F as b,se as c,fe as d,ae as e,_e as f,ie as g,ue as h,ce as i,re as j,U as k,Y as l,J as m,ze as n,Ne as o,ke as p,De as q,Ce as r,Me as s,Ee as t,he as u,Re as v,je as w,xe as x,pe as y,ge as z};
