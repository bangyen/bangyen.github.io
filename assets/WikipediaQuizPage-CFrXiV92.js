import{r as u,j as e,a as $e,u as Ve,__tla as Ye}from"./vendor_react-CiGj4Onb.js";import{_ as V,a as r,T as k,S as Q,C as he,c as Ae,A as xe,__tla as Ke}from"./index-Bkt6oEec.js";import{d as x,B as m,G as I,m as ie,F as Y,e as D,n as Ie,L as Xe,j as _e,k as z,S as N,l as O,o as P,i as Je}from"./vendor_mui_core-Cb6gYFA4.js";import{G as et}from"./GlobalHeader-h7BmtKrr.js";import{p as tt,q as ke,r as me}from"./vendor_mui_icons-88WVDz42.js";let Oe,nt=Promise.all([(()=>{try{return Ye}catch{}})(),(()=>{try{return Ke}catch{}})()]).then(async()=>{const E=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\bst\.(?=\s|$)/g,"saint").replace(/^the\s+/g,"").replace(/[^\w\s.]/g,"").trim(),K=(t,i,o={})=>{var s;const a=E(t),l=E(i);return!!(a===l||(s=o[l])!=null&&s.map(n=>E(n)).includes(a)||a===E(i.replace(/\s*\(.*?\)\s*/g," ").replace(/\s+/g," "))||a===E(i.split("(")[0]??"")||l.includes(" and ")&&a===E(i.split(" and ")[0]??""))},g={START_BUTTON:{FONT_SIZE:{xs:"1rem",sm:"1.2rem"},MIN_WIDTH:{xs:210,sm:300},LETTER_SPACING:"0.05em"},QUESTION_CARD:{FONT_SIZE:{DEFAULT:{xs:"3rem",sm:"4rem"},DETAILED:{xs:"2.5rem",sm:"3.5rem"}},MIN_HEIGHT:360,MAX_WIDTH:450},ACTION_BUTTON:{FONT_SIZE:"0.8rem",PY:1.5},PROGRESS_BAR:{HEIGHT:4},FEEDBACK:{FLAG_HEIGHT:24},HISTORY_ITEM:{FLAG_HEIGHT:16,FLAG_BORDER_RADIUS:"1px"},BADGE:{HEIGHT:20,FONT_SIZE:"0.75rem"}},X={cctld:{questionOptions:[5,10,20,50]},telephone:{questionOptions:[5,10,20,50,100]},vehicleRegistration:{questionOptions:[5,10,20,50,100,186]}},Ee=["All","English","Non-English"],J={"united arab emirates":["uae"],"united states":["us","usa"],"united kingdom":["uk"],"democratic republic of the congo":["drc","congo dr"],"republic of the congo":["congo"],"central african republic":["car"],"central african":["car"],"british indian ocean territory":["biot"],"saint vincent and the grenadines":["st vincent"],"saint kitts and nevis":["st kitts"],"antigua and barbuda":["antigua"],"trinidad and tobago":["trinidad"],"bosnia and herzegovina":["bosnia"],"sao tome and principe":["sao tome"],"turks and caicos islands":["turks and caicos"]},Re=[{label:"All",value:"All"},{label:"Zone 1: North American Numbering Plan (NANP)",value:"1"},{label:"Zone 2: Mostly Africa",value:"2"},{label:"Zone 3: Mostly Europe",value:"3"},{label:"Zone 4: Mostly Europe",value:"4"},{label:"Zone 5: South and Central Americas",value:"5"},{label:"Zone 6: Southeast Asia and Oceania",value:"6"},{label:"Zone 7: Russia and neighboring regions",value:"7"},{label:"Zone 8: East Asia, Southeast Asia, and special services",value:"8"},{label:"Zone 9: West, Central, and South Asia",value:"9"}],Qe=[{label:"All",value:"All"},{label:"1909 Paris Convention",value:"1909"},{label:"1924 Paris Convention",value:"1924"}],Fe=[{label:"All",value:"All"},{label:"Switched historically",value:"Switched"},{label:"Never switched",value:"Never switched"}],Le=[{label:"All",value:"All"},{label:"Left",value:"Left"},{label:"Right",value:"Right"}],ee={cctld:{title:"Internet Domain Quiz",subtitle:"Test your knowledge of Internet country codes",infoUrl:"https://en.wikipedia.org/wiki/Country_code_top-level_domain",getData:async()=>(await V(async()=>{const{default:t}=await import("./cctlds-CSoxFquj.js");return{default:t}},[])).default,defaultSettings:{mode:"toCountry",allowRepeats:!1,filterLetter:"",filterLanguage:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"toCountry",label:"Guess Country (from Code)"},{value:"toCode",label:"Guess Code (from Country)"}],maxQuestionOptions:X.cctld.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"What country belongs to:":"What is the ccTLD for:",renderQuestionContent:(t,i)=>{const o=t;return e.jsx(x,{variant:"h1",sx:{fontWeight:"bold",textAlign:"center",fontSize:g.QUESTION_CARD.FONT_SIZE.DEFAULT},children:i==="toCountry"?o.code:o.country})},checkAnswer:(t,i,o)=>{const a=i;let l=!1,s="";if(o.mode==="toCountry")s=a.country,l=K(t,s,J);else{s=a.code;let n=t.trim();n.startsWith(".")||(n="."+n),l=E(n)===E(s)}return Promise.resolve({isCorrect:l,expected:s,points:l?1:0})},renderFeedbackOrigin:t=>{const i=t;return e.jsxs(x,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:["Origin:"," ",e.jsx(m,{component:"span",dangerouslySetInnerHTML:{__html:i.explanation??""}})]})}},driving_side:{title:"Driving Side Quiz",subtitle:"Test your knowledge of global road rules",infoUrl:"https://en.wikipedia.org/wiki/Left-_and_right-hand_traffic",getData:async()=>(await V(async()=>{const{default:t}=await import("./driving_sides-D-tc2eF_.js");return{default:t}},[])).default,defaultSettings:{mode:"guessing",allowRepeats:!1,filterLetter:"",filterSwitch:"All",filterSide:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"guessing",label:"Guess Side (from Country)"},{value:"toCountry",label:"Guess Country (from Side)"}],maxQuestionOptions:X.cctld.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"Which country is this?":"They drive on the...",renderQuestionContent:(t,i)=>{const o=t;return i==="toCountry"?e.jsxs(m,{sx:{textAlign:"center",maxWidth:600,mx:"auto"},children:[e.jsxs(x,{variant:"h2",sx:{fontWeight:"bold",mb:2},children:["Drives on the ",o.side]}),e.jsx(x,{variant:"h5",color:"text.secondary",sx:{fontStyle:"italic",mb:3},children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(o.explanation??"").replace(/^Drives on the <b>(Left|Right)<\/b>\.?\s*/i,"").trim()||"No details available."}})})]}):e.jsxs(m,{sx:{textAlign:"center"},children:[e.jsx(x,{variant:"h2",sx:{fontWeight:"bold",mb:2},children:o.country}),o.flag&&e.jsx(m,{component:"img",src:o.flag,alt:`Flag of ${o.country} `,sx:{height:80,width:"auto",borderRadius:1,boxShadow:3,mb:2}})]})},checkAnswer:(t,i,o)=>{const a=i;if(o.mode==="toCountry"){const s=K(t,a.country,J);return Promise.resolve({isCorrect:s,expected:a.country,points:s?1:0})}const l=E(t)===E(a.side);return Promise.resolve({isCorrect:l,expected:a.side,points:l?1:0})},renderFeedbackOrigin:t=>{const i=(t.explanation??"").replace(/^Drives on the <b>(Left|Right)<\/b>\.?\s*/i,"").trim();return i?e.jsx(x,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:e.jsx(m,{component:"span",dangerouslySetInnerHTML:{__html:i}})}):null}},telephone:{title:"Telephone Code Quiz",subtitle:"Master the world's calling codes",infoUrl:"https://en.wikipedia.org/wiki/List_of_telephone_country_codes",getData:async()=>(await V(async()=>{const{default:t}=await import("./telephone_codes-E9FqB9Wg.js");return{default:t}},[])).default,defaultSettings:{mode:"toCountry",allowRepeats:!1,filterLetter:"",filterZone:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"toCountry",label:"Guess Country (from Code)"},{value:"toCode",label:"Guess Code (from Country)"}],maxQuestionOptions:X.telephone.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"What country belongs to:":"What is the telephone code for:",renderQuestionContent:(t,i)=>{const o=t;return e.jsx(x,{variant:"h1",sx:{fontWeight:"bold",textAlign:"center",fontSize:g.QUESTION_CARD.FONT_SIZE.DETAILED,wordBreak:"break-word"},children:i==="toCountry"?o.code:o.country})},checkAnswer:(t,i,o)=>{const a=i;let l=!1,s="";if(o.mode==="toCountry")s=a.country,l=K(t,s,J);else{s=a.code;let n=t.trim();n.startsWith("+")||(n="+"+n);const w=F=>F.replace(/[^0-9+]/g,"");l=w(n)===w(s)}return Promise.resolve({isCorrect:l,expected:s,points:l?1:0})}},vehicle:{title:"License Plate Quiz",subtitle:"Identify international vehicle registration codes",infoUrl:"https://en.wikipedia.org/wiki/International_vehicle_registration_code",getData:async()=>(await V(async()=>{const{default:t}=await import("./vehicle_codes-BQgUQGip.js");return{default:t}},[])).default,defaultSettings:{mode:"toCountry",allowRepeats:!1,filterLetter:"",filterConvention:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"toCountry",label:"Guess Country (from Code)"},{value:"toCode",label:"Guess Code (from Country)"}],maxQuestionOptions:X.vehicleRegistration.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"What country belongs to:":"What is the vehicle registration code for:",renderQuestionContent:(t,i)=>{const o=t;return e.jsx(x,{variant:"h1",sx:{fontWeight:"bold",textAlign:"center",fontSize:g.QUESTION_CARD.FONT_SIZE.DETAILED,wordBreak:"break-word"},children:i==="toCountry"?o.code:o.country})},checkAnswer:async(t,i,o)=>{const a=i;let l=!1,s="";if(o.mode==="toCountry")l=(await V(async()=>{const{default:n}=await import("./vehicle_codes-BQgUQGip.js");return{default:n}},[])).default.filter(n=>n.code===a.code).some(n=>K(t,n.country,J)),s=a.country;else{s=a.code;const n=w=>w.trim().toUpperCase().replace(/[^A-Z0-9]/g,"");l=n(t)===n(s)}return{isCorrect:l,expected:s,points:l?1:0}}}},We=({title:t,subtitle:i,infoUrl:o,children:a,headerContent:l})=>e.jsxs(m,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",background:r.surface.background},children:[e.jsx(et,{showHome:!0,infoUrl:o}),e.jsxs(I,{container:!0,flex:1,flexDirection:"column",alignItems:"center",sx:{py:4,px:{xs:2,sm:4},width:"100%"},children:[e.jsxs(m,{sx:{mb:6,textAlign:"center",width:"100%",maxWidth:800,mx:"auto",marginBottom:0},children:[e.jsxs(I,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{marginBottom:4},children:[e.jsx(I,{size:{xs:"grow",sm:"auto"},sx:{display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},mb:0,minWidth:0},children:l?e.jsxs(e.Fragment,{children:[e.jsx(m,{sx:{display:"block"},children:e.jsx(x,{variant:"h1",sx:{color:r.text.primary,fontWeight:k.fontWeight.bold,fontSize:k.fontSize.h2},children:t})}),e.jsx(m,{sx:{display:{xs:"flex",sm:"none"},justifyContent:"flex-end",width:"100%"},children:l})]}):e.jsx(x,{variant:"h1",sx:{color:r.text.primary,fontWeight:k.fontWeight.bold,fontSize:k.fontSize.h2},children:t})}),l&&e.jsx(I,{size:{xs:0,sm:"auto"},sx:{display:{xs:"none",sm:"flex"},flex:1,justifyContent:"center",px:4},children:l})]}),i&&e.jsx(x,{variant:"h5",sx:{color:r.text.secondary,marginTop:2,marginBottom:4,fontWeight:k.fontWeight.normal,fontSize:k.fontSize.subheading},children:i})]}),a]})]}),Me=({settings:t,onUpdate:i,onStart:o,questions:a,children:l,title:s="Game Settings",maxQuestionOptions:n})=>e.jsxs(ie,{sx:{...he.card,p:3,mb:4,width:"100%",maxWidth:Q.maxWidth.sm,mx:"auto"},children:[e.jsx(x,{variant:"h5",sx:{mb:3,textAlign:"center"},children:s}),e.jsx(I,{container:!0,spacing:3,children:l})]}),De=({score:t,history:i,onRestart:o,onBackToMenu:a,renderHistoryItem:l})=>e.jsx(Y,{in:!0,children:e.jsxs(m,{sx:{width:"100%",maxWidth:Q.maxWidth.sm,display:"flex",flexDirection:"column",alignItems:"center",mx:"auto"},children:[e.jsxs(ie,{sx:{...he.card,p:4,mb:4,width:"100%"},children:[e.jsx(x,{variant:"h4",sx:{mb:2,textAlign:"center"},children:"Quiz Complete!"}),e.jsxs(x,{variant:"h2",sx:{color:r.primary.main,mb:4,textAlign:"center"},children:[t," / ",i.length]}),e.jsxs(m,{sx:{display:"flex",justifyContent:"center",gap:2},children:[e.jsx(D,{variant:"contained",startIcon:e.jsx(tt,{}),onClick:o,sx:{flex:1},children:"Replay"}),e.jsx(D,{variant:"outlined",startIcon:e.jsx(ke,{}),onClick:a,sx:{flex:1},children:"Menu"})]})]}),e.jsx(x,{variant:"h6",align:"center",sx:{mb:2,width:"100%"},children:"History"}),e.jsx(Ie,{spacing:2,sx:{width:"100%"},children:i.map((s,n)=>l(s,n))})]})});function ze({value:t,hasInitialized:i}){return i?e.jsx(Xe,{"aria-label":"Quiz progress",variant:"determinate",value:t,sx:{height:g.PROGRESS_BAR.HEIGHT,borderRadius:Q.borderRadius.full,backgroundColor:r.interactive.hover,"& .MuiLinearProgress-bar":{borderRadius:Q.borderRadius.full,background:`linear-gradient(90deg, ${r.primary.main}, ${r.primary.light})`}}}):null}function Ne({modeLabel:t,currentQuestionNumber:i,totalQuestions:o,score:a,progressValue:l,hasInitialized:s,onBackToMenu:n}){return e.jsxs(m,{sx:{mb:4,display:"flex",flexDirection:"column",width:"100%"},children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(x,{variant:"caption",color:"textSecondary",sx:{letterSpacing:"0.1em",textTransform:"uppercase",fontWeight:k.fontWeight.bold,opacity:.6},children:t}),e.jsx(D,{size:"small",variant:"text",startIcon:e.jsx(ke,{}),onClick:n,sx:{color:r.text.secondary,opacity:.6,"&:hover":{opacity:1,backgroundColor:"transparent",color:r.primary.main},fontSize:"0.75rem",textTransform:"none",p:0},children:"Quit Quiz"})]}),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"baseline",mb:1.5},children:[e.jsxs(x,{variant:"h6",sx:{fontWeight:k.fontWeight.medium},children:["Question ",i," of ",o]}),e.jsxs(x,{variant:"h5",sx:{fontWeight:"bold",color:r.primary.main},children:[a," ",e.jsx(x,{component:"span",variant:"caption",color:"textSecondary",sx:{fontWeight:"normal"},children:"PTS"})]})]}),e.jsx(ze,{value:l,hasInitialized:s})]})}function He({showFeedback:t,isCorrect:i,feedbackMessage:o,currentQuestion:a,renderFeedbackFlag:l,renderFeedbackOrigin:s}){if(!t)return null;const n=i?r.data.green:r.data.amber;return e.jsx(Y,{in:t,children:e.jsxs(m,{sx:{mt:3,width:"100%"},children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1.5},children:[a&&(l==null?void 0:l(a)),e.jsx(x,{variant:"h5",noWrap:!0,sx:{color:n,fontWeight:k.fontWeight.bold,textShadow:Ae.text,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:o})]}),(()=>{const w=i===!1&&a&&(s==null?void 0:s(a));return w?e.jsx(m,{sx:{textAlign:"center",mt:1},children:w}):null})()]})})}function Pe({inputValue:t,showFeedback:i,showHint:o,hideInput:a,hideHint:l,inputPlaceholder:s,currentQuestion:n,inputRef:w,nextButtonRef:F,onInputChange:L,onSubmit:R,onSkip:A,onToggleHint:c,renderHint:y,renderCustomActions:T}){return e.jsxs(e.Fragment,{children:[e.jsxs(m,{component:"form",onSubmit:R,sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[!a&&e.jsx(_e,{slotProps:{htmlInput:{"aria-label":"Answer input"}},inputRef:w,value:t,onChange:p=>{L(p.target.value)},placeholder:s,disabled:i,autoComplete:"off",sx:{input:{textAlign:"center",fontSize:"1.2rem"},width:"100%",maxWidth:g.QUESTION_CARD.MAX_WIDTH,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:r.border.subtle},"&:hover fieldset":{borderColor:r.primary.main},"&.Mui-focused fieldset":{borderColor:r.primary.main},"&.Mui-disabled fieldset":{borderColor:`${r.border.subtle} !important`}}},variant:"outlined"}),e.jsxs(Ie,{direction:"row",spacing:2,sx:{mt:4,justifyContent:"center",width:"100%",maxWidth:g.QUESTION_CARD.MAX_WIDTH},children:[e.jsx(D,{ref:F,variant:"outlined",sx:{py:g.ACTION_BUTTON.PY,flex:1,borderColor:r.border.subtle,color:r.text.secondary,whiteSpace:"nowrap",fontSize:g.ACTION_BUTTON.FONT_SIZE,"&.Mui-disabled":{borderColor:r.border.subtle,opacity:.6}},onClick:A,children:i?"Next":"Skip"}),T,!l&&e.jsx(D,{variant:"outlined",onClick:c,disabled:i,sx:{py:g.ACTION_BUTTON.PY,flex:1,borderColor:r.border.subtle,whiteSpace:"nowrap",fontSize:g.ACTION_BUTTON.FONT_SIZE,"&.Mui-disabled":{borderColor:r.border.subtle,opacity:.6}},children:o?"Hide Hint":"Show Hint"}),!a&&e.jsx(D,{type:"submit",variant:"contained",sx:{py:g.ACTION_BUTTON.PY,flex:1,whiteSpace:"nowrap",fontSize:g.ACTION_BUTTON.FONT_SIZE,"&.Mui-disabled":{backgroundColor:r.interactive.disabled,color:r.interactive.disabledText,borderColor:"transparent"}},disabled:!t||i,children:"Submit"})]})]}),o&&!i&&e.jsx(Y,{in:!0,children:e.jsx(m,{sx:{mt:3,p:2,borderRadius:Q.borderRadius.sm,border:`1px dashed ${r.primary.main}40`,width:"100%",maxWidth:g.QUESTION_CARD.MAX_WIDTH},children:n&&y(n)})})]})}let re,pe,fe,ge,be,ye,Ce;re=({gameState:t,actions:i,onBackToMenu:o,renderQuestionPrompt:a,renderQuestionContent:l,renderHint:s,renderFeedbackFlag:n,renderFeedbackOrigin:w,inputPlaceholder:F="Type answer...",inputRef:L,nextButtonRef:R,modeLabel:A,hideInput:c=!1,hideHint:y=!1,renderCustomActions:T,onKeyDown:p})=>{const{history:f,currentQuestion:d,inputValue:b,showFeedback:h,feedbackMessage:C,isCorrect:j,totalQuestions:v,showHint:te,score:oe,hasInitialized:se}=t,{setInputValue:Z,handleSubmit:H,handleSkip:W,toggleHint:B}=i;$e.useEffect(()=>{const G=M=>{if(M.key==="Enter")return M.preventDefault(),void(h||c||!b.trim()?W():H());p&&p(M)};return window.addEventListener("keydown",G),()=>{window.removeEventListener("keydown",G)}},[h,c,b,W,H,p]);const le=Math.min(f.length+1,v),q=v>0?Math.min(f.length,v)/v*100:0;return e.jsx(m,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",mt:4},children:e.jsxs(m,{sx:{width:"100%",maxWidth:Q.maxWidth.sm,mx:"auto"},children:[e.jsx(Ne,{modeLabel:A,currentQuestionNumber:le,totalQuestions:v,score:oe,progressValue:q,hasInitialized:se,onBackToMenu:o}),e.jsxs(ie,{sx:{...he.card,p:4,pt:6,pb:3,mb:4,minHeight:g.QUESTION_CARD.MIN_HEIGHT,width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"column"},children:[e.jsx(x,{variant:"body1",color:"textSecondary",sx:{mb:2},children:a()}),e.jsx(Y,{in:!0,children:e.jsx(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:4},children:d?l(d):e.jsx(x,{variant:"h4",color:"textSecondary",children:"Loading..."})})},JSON.stringify(d)),e.jsx(Pe,{inputValue:b,showFeedback:h,showHint:te,hideInput:c,hideHint:y,inputPlaceholder:F,currentQuestion:d,inputRef:L,nextButtonRef:R,onInputChange:Z,onSubmit:G=>{H(G)},onSkip:()=>{W()},onToggleHint:B,renderHint:s,renderCustomActions:T==null?void 0:T(t,i)}),e.jsx(He,{showFeedback:h,isCorrect:j,feedbackMessage:C,currentQuestion:d,renderFeedbackFlag:n,renderFeedbackOrigin:w})]})]})})},pe=({quizType:t,settings:i,initialPool:o,onEndGame:a,onBackToMenu:l})=>{const s=ee[t],{state:n,actions:w}=(({initialPool:c,settings:y,onEndGame:T,checkAnswer:p,advanceDelay:f={correct:1e3,incorrect:3e3}})=>{const[d,b]=u.useState(!1),[h,C]=u.useState([]),[,j]=u.useState([]),[v,te]=u.useState(null),[oe,se]=u.useState(0),[Z,H]=u.useState(""),[W,B]=u.useState(!1),[le,q]=u.useState(""),[G,M]=u.useState(null),[Be,ae]=u.useState(!1),[ne,ve]=u.useState(0),Se=u.useRef(h),je=u.useRef(ne),$=u.useRef(null);u.useEffect(()=>{Se.current=h},[h]),u.useEffect(()=>{je.current=ne},[ne]);const we=u.useCallback(S=>{const _=[...S].sort(()=>Math.random()-.5);return{currentQuestion:_.length>0?_[0]??null:null,pool:_.length>0?_.slice(1):[],totalQuestions:_.length}},[]);u.useEffect(()=>{const S=we(c);te(S.currentQuestion),j(S.pool),se(S.totalQuestions),C([]),ve(0),H(""),B(!1),ae(!1),M(null),b(!0)},[c,we]);const U=u.useCallback(()=>{j(S=>{if(S.length===0)return T(Se.current,je.current),[];$.current&&(clearTimeout($.current),$.current=null);const _=S[0]??null;return te(_),H(""),B(!1),ae(!1),M(null),S.slice(1)})},[T]),de=u.useCallback(async S=>{if(!v||W)return;const{isCorrect:_,expected:ce,points:Te}=await p(S,v,y),qe={id:crypto.randomUUID(),item:v,userAnswer:S,isCorrect:_,pointsEarned:Te};C(ue=>[...ue,qe]),_?(ve(ue=>ue+Te),q("Correct!"),M(!0)):(q(ce),M(!1)),B(!0),$.current=setTimeout(U,_?f.correct:f.incorrect)},[v,W,p,y,U,f]),Ge=u.useCallback(async()=>{if(!v)return;if(W)return void U();const{expected:S}=await p("",v,y),_={id:crypto.randomUUID(),item:v,userAnswer:"",isCorrect:!1,pointsEarned:0};C(ce=>[...ce,_]),q(S),M(!1),B(!0),$.current=setTimeout(U,f.incorrect)},[v,W,U,p,y,f.incorrect]),Ue=u.useCallback(async S=>{S==null||S.preventDefault(),await de(Z)},[Z,de]),Ze=u.useCallback(()=>{ae(S=>!S)},[]);return{state:{history:h,currentQuestion:v,inputValue:Z,showFeedback:W,feedbackMessage:le,isCorrect:G,totalQuestions:oe,showHint:Be,score:ne,currentIndex:h.length,hasInitialized:d},actions:{setInputValue:H,handleSubmit:Ue,handleSkip:Ge,toggleHint:Ze,nextQuestion:U,submitAnswer:de}}})({initialPool:o,settings:i,onEndGame:a,checkAnswer:s.checkAnswer}),{currentQuestion:F,showFeedback:L}=n,R=u.useRef(null),A=u.useRef(null);return u.useEffect(()=>{var c;L?(c=A.current)==null||c.focus():requestAnimationFrame(()=>{var y;(y=R.current)==null||y.focus()})},[L,F]),t==="driving_side"&&i.mode!=="toCountry"?e.jsx(re,{gameState:n,actions:w,onBackToMenu:l,modeLabel:"Guessing Side",hideInput:!0,hideHint:!0,renderQuestionPrompt:()=>s.renderQuestionPrompt(i.mode),onKeyDown:c=>{n.showFeedback||(c.key==="ArrowLeft"?(c.preventDefault(),w.submitAnswer("Left")):c.key==="ArrowRight"&&(c.preventDefault(),w.submitAnswer("Right")))},renderQuestionContent:c=>s.renderQuestionContent(c,i.mode),renderCustomActions:(c,y)=>e.jsxs(e.Fragment,{children:[e.jsx(D,{variant:"contained",onClick:()=>{var T;(T=y.submitAnswer)==null||T.call(y,"Left")},disabled:c.showFeedback,sx:{flex:1,py:g.ACTION_BUTTON.PY,whiteSpace:"nowrap","&.Mui-disabled":{backgroundColor:r.interactive.disabled,color:r.interactive.disabledText,borderColor:"transparent"}},children:"Left"}),e.jsx(D,{variant:"contained",onClick:()=>{var T;(T=y.submitAnswer)==null||T.call(y,"Right")},disabled:c.showFeedback,sx:{flex:1,py:g.ACTION_BUTTON.PY,whiteSpace:"nowrap","&.Mui-disabled":{backgroundColor:r.interactive.disabled,color:r.interactive.disabledText,borderColor:"transparent"}},children:"Right"})]}),renderHint:()=>e.jsx(x,{variant:"body2",children:"Think about the region and historical influences."}),renderFeedbackOrigin:s.renderFeedbackOrigin}):e.jsx(re,{gameState:n,actions:w,onBackToMenu:l,inputRef:R,nextButtonRef:A,modeLabel:i.mode==="toCountry"?"Guessing Country":i.mode==="toCode"?"Guessing Code":"Quiz",inputPlaceholder:i.mode==="toCountry"?"Type country name...":"Type answer...",renderQuestionPrompt:()=>s.renderQuestionPrompt(i.mode),renderQuestionContent:c=>s.renderQuestionContent(c,i.mode),renderHint:c=>t==="cctld"?e.jsxs(x,{variant:"body2",color:"textSecondary",sx:{textAlign:"center",fontStyle:"italic"},children:["Hint: ",c.language," origin"]}):e.jsx(x,{variant:"body2",color:"textSecondary",children:"Hint functionality coming soon..."}),hideHint:t!=="cctld",renderFeedbackFlag:c=>c.flag&&e.jsx("img",{src:c.flag,alt:`Flag of ${c.country}`,style:{height:`${g.FEEDBACK.FLAG_HEIGHT.toString()}px`,width:"auto",borderRadius:Q.borderRadius.sm,boxShadow:Ae.sm}}),renderFeedbackOrigin:s.renderFeedbackOrigin})},fe=({uniqueId:t,selectedQuiz:i,onQuizChange:o})=>e.jsx(z,{size:"small",sx:{width:"auto",minWidth:{xs:180,sm:200},flexShrink:0,marginRight:{xs:0,sm:-4},"& .MuiOutlinedInput-root":{...xe.presets.glass,borderRadius:Q.borderRadius.full,color:r.text.primary,fontWeight:"medium","& fieldset":{border:`1px solid ${r.border.subtle}`},"&:hover fieldset":{borderColor:r.primary.main},"&.Mui-focused fieldset":{borderColor:r.primary.main}},"& .MuiSelect-select":{py:1,px:{xs:2,sm:3},textAlign:"center"},"& .MuiSvgIcon-root":{color:r.text.secondary}},children:e.jsxs(N,{id:t,value:i,onChange:o,MenuProps:{autoFocus:!1,BackdropProps:{sx:{backdropFilter:"none",backgroundColor:"transparent"}},PaperProps:{sx:{...xe.presets.glass,borderRadius:Q.borderRadius.lg,mt:1,"& .MuiMenuItem-root":{color:r.text.secondary,transition:xe.transition,"&:hover":{backgroundColor:r.interactive.hover,color:r.text.primary},"&.Mui-selected":{backgroundColor:r.interactive.selected,color:r.primary.main,fontWeight:"bold"}}}}},children:[e.jsx(O,{value:"cctld",children:"Domains"}),e.jsx(O,{value:"driving_side",children:"Driving Side"}),e.jsx(O,{value:"telephone",children:"Telephone Codes"}),e.jsx(O,{value:"vehicle",children:"Vehicle Registration"})]})}),ge=({selectedQuiz:t,settings:i,onSettingsChange:o,activeConfig:a,commonSelectProps:l,onEnterKey:s})=>e.jsxs(e.Fragment,{children:[a.hasModeSelect&&a.modes?e.jsx(I,{size:{xs:12,md:6},children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(P,{children:"Game Mode"}),e.jsx(N,{value:i.mode,label:"Game Mode",onChange:n=>{o({...i,mode:n.target.value})},sx:{color:r.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:r.border.subtle}},...l,children:a.modes.map(n=>e.jsx(O,{value:n.value,children:n.label},n.value))})]})}):e.jsx(I,{size:{xs:12,md:6},sx:{display:{xs:"none",md:"block"}},children:e.jsx(m,{sx:{height:56}})}),t==="cctld"&&e.jsx(I,{size:{xs:12,md:6},children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(P,{children:"Language Filter"}),e.jsx(N,{value:i.filterLanguage??"All",label:"Language Filter",onChange:n=>{o({...i,filterLanguage:n.target.value})},sx:{color:r.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:r.border.subtle}},...l,children:Ee.map(n=>e.jsx(O,{value:n,children:n},n))})]})}),t==="telephone"&&e.jsx(I,{size:{xs:12,md:6},children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(P,{children:"Zone Filter"}),e.jsx(N,{value:i.filterZone??"All",label:"Zone Filter",onChange:n=>{o({...i,filterZone:n.target.value})},sx:{color:r.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:r.border.subtle}},...l,MenuProps:{...l.MenuProps,PaperProps:{sx:{maxWidth:250}}},children:Re.map(n=>e.jsx(O,{value:n.value,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:n.label},n.value))})]})}),t==="vehicle"&&e.jsx(I,{size:{xs:12,md:6},children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(P,{children:"Convention Filter"}),e.jsx(N,{value:i.filterConvention??"All",label:"Convention Filter",onChange:n=>{o({...i,filterConvention:n.target.value})},sx:{color:r.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:r.border.subtle}},...l,children:Qe.map(n=>e.jsx(O,{value:n.value,children:n.label},n.value))})]})}),t==="driving_side"&&(i.mode==="toCountry"?e.jsx(I,{size:{xs:12,md:6},children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(P,{children:"Side Filter"}),e.jsx(N,{value:i.filterSide??"All",label:"Side Filter",onChange:n=>{o({...i,filterSide:n.target.value})},sx:{color:r.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:r.border.subtle}},...l,children:Le.map(n=>e.jsx(O,{value:n.value,children:n.label},n.value))})]})}):e.jsx(I,{size:{xs:12,md:6},children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(P,{children:"Switch Filter"}),e.jsx(N,{value:i.filterSwitch??"All",label:"Switch Filter",onChange:n=>{o({...i,filterSwitch:n.target.value})},sx:{color:r.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:r.border.subtle}},...l,children:Fe.map(n=>e.jsx(O,{value:n.value,children:n.label},n.value))})]})})),e.jsx(I,{size:{xs:12,md:6},children:e.jsx(_e,{fullWidth:!0,label:"Filter by Letter(s)",value:i.filterLetter,onChange:n=>{o({...i,filterLetter:n.target.value})},helperText:"Comma separated (e.g. a, b)",slotProps:{inputLabel:{style:{color:r.text.secondary}}},onKeyDown:n=>{n.key==="Enter"&&s()},sx:{input:{color:r.text.primary},label:{color:r.text.secondary},"& .MuiOutlinedInput-root":{backgroundColor:"transparent",backdropFilter:"none","& fieldset":{borderColor:r.border.subtle},"&:hover fieldset":{borderColor:r.primary.main}}}})}),e.jsx(I,{size:{xs:12,md:6},children:e.jsxs(z,{fullWidth:!0,children:[e.jsx(P,{children:"# Questions"}),e.jsxs(N,{value:i.maxQuestions,label:"# Questions",onChange:n=>{o({...i,maxQuestions:n.target.value==="All"?"All":Number(n.target.value)})},sx:{color:r.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:r.border.subtle}},...l,children:[a.maxQuestionOptions.map(n=>e.jsx(O,{value:n,children:n},n)),e.jsx(O,{value:"All",children:"All"})]})]})})]}),be=()=>e.jsx(Je,{label:"Skipped",size:"small",variant:"outlined",sx:{height:g.BADGE.HEIGHT,fontSize:g.BADGE.FONT_SIZE,borderColor:r.surface.error,color:r.data.red,fontWeight:k.fontWeight.medium,"& .MuiChip-label":{px:1}}}),ye=({question:t,selectedQuiz:i,settings:o,activeConfig:a})=>e.jsxs(ie,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"flex-start",bgcolor:t.pointsEarned===1?r.surface.success:t.pointsEarned===.5?r.surface.warning:r.surface.error,border:`1px solid ${r.border.subtle} `,flexShrink:0},children:[e.jsxs(m,{sx:{textAlign:"left",flex:1,minWidth:0},children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.item.flag&&e.jsx("img",{src:t.item.flag,alt:`Flag of ${t.item.country}`,style:{height:`${g.HISTORY_ITEM.FLAG_HEIGHT.toString()}px`,width:"auto",borderRadius:g.HISTORY_ITEM.FLAG_BORDER_RADIUS}}),e.jsx(x,{variant:"body1",fontWeight:k.fontWeight.bold,noWrap:!0,children:i==="driving_side"?t.item.country:o.mode==="toCountry"?t.item.code:t.item.country})]}),e.jsxs(x,{variant:"body2",color:"textSecondary",noWrap:!0,children:["Answer:"," ",i==="driving_side"?t.item.side:o.mode==="toCountry"?t.item.country:t.item.code]}),a.renderFeedbackOrigin&&e.jsx(m,{sx:{mt:.5,opacity:.8},children:a.renderFeedbackOrigin(t.item)})]}),e.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1,flexShrink:0,ml:2},children:[e.jsx(x,{variant:"body2",component:"div",sx:{color:t.pointsEarned===1?r.data.green:t.pointsEarned===.5?r.data.amber:r.data.red,fontWeight:t.pointsEarned>0?k.fontWeight.bold:k.fontWeight.normal,maxWidth:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",fontSize:g.BADGE.FONT_SIZE},children:(()=>{const l=t.userAnswer.trim();if(!l)return e.jsx(be,{});let s=l;return s=i==="cctld"?o.mode==="toCode"?(s.startsWith(".")?s:"."+s).toLowerCase():s.toUpperCase():i==="telephone"&&o.mode==="toCode"?s.startsWith("+")?s.toUpperCase():"+"+s.toUpperCase():s.toUpperCase(),e.jsxs(x,{component:"span",variant:"inherit",children:[s,t.pointsEarned===.5&&" (0.5 pts)"]})})()}),t.pointsEarned===1?e.jsx(me,{fontSize:"small",color:"success"}):t.pointsEarned===.5?e.jsx(me,{fontSize:"small",sx:{color:r.data.amber}}):t.userAnswer.trim()&&e.jsx(me,{fontSize:"small",color:"error"})]})]}),Ce={MenuProps:{BackdropProps:{sx:{backdropFilter:"none",backgroundColor:"transparent"}}}},Oe=()=>{const[t,i]=Ve(),o=u.useMemo(()=>{const p=t.get("type");return p&&Object.prototype.hasOwnProperty.call(ee,p)?p:"cctld"},[t]),[a,l]=u.useState({status:"menu"}),[s,n]=u.useState(ee[o].defaultSettings),[w,F]=u.useState([]),[L,R]=u.useState(!0),A=ee[o];u.useEffect(()=>{let p=!0;return(async()=>{R(!0);try{const f=await A.getData();p&&(F(f),R(!1))}catch{p&&R(!1)}})(),()=>{p=!1}},[o,A]),u.useEffect(()=>{document.title=`${A.title} | Bangyen`},[o,A.title]);const c=(({data:p,quizType:f,settings:d})=>u.useMemo(()=>{let b=p;if(d.filterLanguage&&d.filterLanguage!=="All"&&f==="cctld"&&(b=d.filterLanguage==="Non-English"?b.filter(h=>h.language!=="English"):b.filter(h=>h.language===d.filterLanguage)),d.filterZone&&d.filterZone!=="All"&&f==="telephone"){const h=d.filterZone.split(",");b=b.filter(C=>h.some(j=>C.code.startsWith(`+${j}`)))}if(d.filterConvention&&d.filterConvention!=="All"&&f==="vehicle"&&(b=b.filter(h=>{var j;return(j=h.conventions)==null?void 0:j.includes(Number(d.filterConvention))})),d.filterSwitch&&d.filterSwitch!=="All"&&f==="driving_side"?b=d.mode==="toCountry"?b.filter(h=>h.switched):b.filter(h=>d.filterSwitch==="Switched"?h.switched:!h.switched):f==="driving_side"&&d.mode==="toCountry"&&(b=b.filter(h=>h.switched)),d.filterSide&&d.filterSide!=="All"&&f==="driving_side"&&d.mode==="toCountry"&&(b=b.filter(h=>h.side===d.filterSide)),typeof d.filterLetter=="string"&&d.filterLetter!==""){let h=d.filterLetter.toLowerCase().split(",").map(C=>C.trim()).filter(C=>C);if(h.length<=1&&!d.filterLetter.includes(",")){const C=d.filterLetter.toLowerCase().split(/\s+/).filter(j=>j);h=C.length>1?C:d.filterLetter.toLowerCase().split("").filter(j=>j.trim())}h.length>0&&(b=b.filter(C=>{let j="";if(f==="cctld")j=d.mode==="toCountry"?C.code.toLowerCase().replace(".",""):C.country.toLowerCase();else if(f==="driving_side")j=C.country.toLowerCase();else if(f==="telephone")j=C.country.toLowerCase();else{const v=C;j=d.mode==="toCountry"?v.code.toLowerCase():v.country.toLowerCase()}return h.some(v=>j.startsWith(v))}))}return d.maxQuestions!=="All"?[...b].sort(()=>Math.random()-.5).slice(0,d.maxQuestions):b},[p,f,d]))({data:w,quizType:o,settings:s}),y=()=>{c.length>0&&l({status:"playing"})},T=()=>{l({status:"menu"})};return e.jsxs(We,{title:"Knowledge",infoUrl:A.infoUrl,headerContent:e.jsx(fe,{uniqueId:"quiz-topic-selector",selectedQuiz:o,onQuizChange:p=>{const f=p.target.value;i({type:f})}}),children:[a.status==="menu"&&e.jsx(Y,{in:!0,children:e.jsxs(m,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Me,{settings:s,onUpdate:n,onStart:y,maxQuestionOptions:A.maxQuestionOptions,title:"Quiz Settings",children:e.jsx(ge,{selectedQuiz:o,settings:s,onSettingsChange:n,activeConfig:A,commonSelectProps:Ce,onEnterKey:y})}),e.jsx(m,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(D,{variant:"contained",size:"large",onClick:y,disabled:L||c.length===0,sx:{px:{xs:4,sm:8},py:1.5,fontSize:g.START_BUTTON.FONT_SIZE,borderRadius:Q.borderRadius.full,fontWeight:"bold",letterSpacing:g.START_BUTTON.LETTER_SPACING,minWidth:g.START_BUTTON.MIN_WIDTH,whiteSpace:"nowrap","&.Mui-disabled":{backgroundColor:r.interactive.disabled,color:r.interactive.disabledText}},children:L?"Loading Data...":c.length===0?"No Questions Found":`Start Quiz (${c.length.toString()})`})})]})}),a.status==="playing"&&e.jsx(pe,{quizType:o,settings:s,initialPool:c,onEndGame:(p,f)=>{l({status:"summary",history:p,score:f})},onBackToMenu:T}),a.status==="summary"&&e.jsx(De,{score:a.score,history:a.history,onRestart:y,onBackToMenu:T,renderHistoryItem:p=>e.jsx(ye,{question:p,selectedQuiz:o,settings:s,activeConfig:A},p.id)})]})}});export{nt as __tla,Oe as default};
