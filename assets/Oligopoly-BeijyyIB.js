import{r as o,j as i}from"./vendor_react-DdkxgTu-.js";import{a,u as t,R as e,f as r}from"./fetchGzippedJson-BXSiS8vv.js";import{h as l,T as s,i as n}from"./vendor_mui_icons-D_gaIqb2.js";import{C as d,U as m,d as p}from"./index-B8Z8jcR1.js";import"./vendor_mui_core-BDo3HO1u.js";import"./PageLayout-DcK0FnR8.js";const c=async()=>{const o=await r("/oligopoly_data.json.gz");if(!Array.isArray(o))throw new TypeError("Invalid data format: expected array");return o},y=()=>{const[r,y]=o.useState(a.oligopoly.defaultFirms),[g,u]=o.useState(a.oligopoly.defaultElasticity),[f,x]=o.useState(a.oligopoly.defaultBasePrice),h=a.modelTypes.cournot,A=!1,{data:_,loading:b}=t(p.oligopoly,c,()=>[]),F=o.useMemo(()=>((o,i,t,e,r,l)=>{if(0===o.length)return[];const s=o.filter(o=>o.num_firms===i&&o.model_type===t&&o.demand_elasticity===e&&o.base_price===r&&o.collusion_enabled===l);if(0===s.length)return o.filter(o=>o.num_firms===i&&o.model_type===t).sort((o,i)=>o.round-i.round).slice(0,a.oligopoly.maxRounds);return s.sort((o,i)=>o.round-i.round).slice(0,15)})(_,r,h,g,f,A),[_,r,h,g,f,A]),j=[{label:"Number of Firms",icon:l,color:d.primary.main,value:r,onChange:y,options:a.oligopoly.options.firms},{label:"Demand Elasticity",icon:s,color:d.data.green,value:g,onChange:u,options:a.oligopoly.options.elasticity},{label:"Base Price",icon:n,color:d.data.amber,value:f,onChange:x,options:a.oligopoly.options.price}],M={type:"line",xAxisKey:"round",yAxisFormatter:o=>`$${o.toFixed(2)}`,yAxisDomain:["dataMin - 5","dataMax + 5"],dualYAxis:!0,rightYAxisFormatter:o=>o.toFixed(2),rightYAxisDomain:[`dataMin - ${String(a.oligopoly.hhiAxisPadding)}`,`dataMax + ${String(a.oligopoly.hhiAxisPadding)}`],tooltipLabelFormatter:o=>`Round ${o.toString()}`,tooltipFormatter:(o,i)=>["Market Price"===i?`$${o.toFixed(2)}`:o.toFixed(2),i],lines:[{dataKey:"price",name:"Market Price",color:d.primary.main,yAxisId:"left"},{dataKey:"hhi",name:"HHI Concentration",color:d.data.amber,yAxisId:"right"}]};return i.jsx(e,{title:"Oligopoly",subtitle:"Agent-Based Economic Competition Analysis",githubUrl:m.oligopolyRepo,chartData:F,chartConfig:M,chartTitle:"Market Dynamics",controls:j,loading:b,loadingMessage:"Loading Cournot simulation data...",onReset:()=>{y(a.oligopoly.defaultFirms),u(a.oligopoly.defaultElasticity),x(a.oligopoly.defaultBasePrice)},resetLabel:"Reset"})};export{y as default};
