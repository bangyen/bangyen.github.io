import{j as e,r as f,a as Qe,u as Fe,__tla as Me}from"./vendor_react-CiGj4Onb.js";import{_ as P,T as j,a,S as O,C as ie,c as xe,A as oe,__tla as Re}from"./index-CB166san.js";import{d as u,B as h,G as w,m as Y,F as U,e as M,n as pe,L as Ne,j as me,k as R,S as N,l as I,o as L,i as Le}from"./vendor_mui_core-Cb6gYFA4.js";import{P as We}from"./PageLayout-D4KkK3P1.js";import{p as De,q as fe,r as se}from"./vendor_mui_icons-88WVDz42.js";let ge,ze=Promise.all([(()=>{try{return Me}catch{}})(),(()=>{try{return Re}catch{}})()]).then(async()=>{const k=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\bst\.(?=\s|$)/g,"saint").replace(/^the\s+/g,"").replace(/[^\w\s.]/g,"").trim(),G=(t,n,r={})=>{var l;const o=k(t),s=k(n);return!!(o===s||(l=r[s])!=null&&l.map(i=>k(i)).includes(o)||o===k(n.replace(/\s*\(.*?\)\s*/g," ").replace(/\s+/g," "))||o===k(n.split("(")[0]??"")||s.includes(" and ")&&o===k(n.split(" and ")[0]??""))},B=(t,n)=>{if(typeof n.filterLetter!="string"||n.filterLetter==="")return t;let r=n.filterLetter.toLowerCase().split(",").map(o=>o.trim()).filter(o=>o);if(r.length<=1&&!n.filterLetter.includes(",")){const o=n.filterLetter.toLowerCase().split(/\s+/).filter(s=>s);r=o.length>1?o:n.filterLetter.toLowerCase().split("").filter(s=>s.trim())}return r.length===0?t:t.filter(o=>{let s="";switch(o.type){case"cctld":s=n.mode==="toCountry"?o.code.toLowerCase().replace(".",""):o.country.toLowerCase();break;case"driving_side":case"telephone":s=o.country.toLowerCase();break;case"vehicle":s=n.mode==="toCountry"?o.code.toLowerCase():o.country.toLowerCase()}return r.some(l=>s.startsWith(l))})},x={START_BUTTON:{FONT_SIZE:{xs:"1rem",sm:"1.2rem"},MIN_WIDTH:{xs:210,sm:300},LETTER_SPACING:"0.05em"},QUESTION_CARD:{FONT_SIZE:{DEFAULT:{xs:"3rem",sm:"4rem"},DETAILED:{xs:"2.5rem",sm:"3.5rem"}},MIN_HEIGHT:360,MAX_WIDTH:450},ACTION_BUTTON:{FONT_SIZE:"0.8rem",PY:1.5},PROGRESS_BAR:{HEIGHT:4},FEEDBACK:{FLAG_HEIGHT:24},HISTORY_ITEM:{FLAG_HEIGHT:16,FLAG_BORDER_RADIUS:"1px"},BADGE:{HEIGHT:20,FONT_SIZE:"0.75rem"}},Z={cctld:{questionOptions:[5,10,20,50]},telephone:{questionOptions:[5,10,20,50,100]},vehicleRegistration:{questionOptions:[5,10,20,50,100,186]}},be=["All","English","Non-English"],q={"united arab emirates":["uae"],"united states":["us","usa"],"united kingdom":["uk"],"democratic republic of the congo":["drc","congo dr"],"republic of the congo":["congo"],"central african republic":["car"],"central african":["car"],"british indian ocean territory":["biot"],"saint vincent and the grenadines":["st vincent"],"saint kitts and nevis":["st kitts"],"antigua and barbuda":["antigua"],"trinidad and tobago":["trinidad"],"bosnia and herzegovina":["bosnia"],"sao tome and principe":["sao tome"],"turks and caicos islands":["turks and caicos"]},ye=[{label:"All",value:"All"},{label:"Zone 1: North American Numbering Plan (NANP)",value:"1"},{label:"Zone 2: Mostly Africa",value:"2"},{label:"Zone 3: Mostly Europe",value:"3"},{label:"Zone 4: Mostly Europe",value:"4"},{label:"Zone 5: South and Central Americas",value:"5"},{label:"Zone 6: Southeast Asia and Oceania",value:"6"},{label:"Zone 7: Russia and neighboring regions",value:"7"},{label:"Zone 8: East Asia, Southeast Asia, and special services",value:"8"},{label:"Zone 9: West, Central, and South Asia",value:"9"}],Ce=[{label:"All",value:"All"},{label:"1909 Paris Convention",value:"1909"},{label:"1924 Paris Convention",value:"1924"}],ve=[{label:"All",value:"All"},{label:"Switched historically",value:"Switched"},{label:"Never switched",value:"Never switched"}],we=[{label:"All",value:"All"},{label:"Left",value:"Left"},{label:"Right",value:"Right"}],D={cctld:{title:"Internet Domain Quiz",subtitle:"Test your knowledge of Internet country codes",infoUrl:"https://en.wikipedia.org/wiki/Country_code_top-level_domain",getData:async()=>(await P(async()=>{const{default:t}=await import("./cctlds-CSoxFquj.js");return{default:t}},[])).default.map(t=>({...t,type:"cctld"})),defaultSettings:{mode:"toCountry",allowRepeats:!1,filterLetter:"",filterLanguage:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"toCountry",label:"Guess Country (from Code)"},{value:"toCode",label:"Guess Code (from Country)"}],maxQuestionOptions:Z.cctld.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"What country belongs to:":"What is the ccTLD for:",renderQuestionContent:(t,n)=>{const r=t;return e.jsx(u,{variant:"h1",sx:{fontWeight:"bold",textAlign:"center",fontSize:x.QUESTION_CARD.FONT_SIZE.DEFAULT},children:n==="toCountry"?r.code:r.country})},checkAnswer:(t,n,r)=>{const o=n;let s=!1,l="";if(r.mode==="toCountry")l=o.country,s=G(t,l,q);else{l=o.code;let i=t.trim();i.startsWith(".")||(i="."+i),s=k(i)===k(l)}return Promise.resolve({isCorrect:s,expected:l,points:s?1:0})},renderFeedbackOrigin:t=>{const n=t;return e.jsxs(u,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:["Origin:"," ",e.jsx(h,{component:"span",dangerouslySetInnerHTML:{__html:n.explanation??""}})]})},filters:[(t,n)=>n.filterLanguage&&n.filterLanguage!=="All"?n.filterLanguage==="Non-English"?t.filter(r=>r.type==="cctld"&&r.language!=="English"):t.filter(r=>r.type==="cctld"&&r.language===n.filterLanguage):t,B]},driving_side:{title:"Driving Side Quiz",subtitle:"Test your knowledge of global road rules",infoUrl:"https://en.wikipedia.org/wiki/Left-_and_right-hand_traffic",getData:async()=>(await P(async()=>{const{default:t}=await import("./driving_sides-D-tc2eF_.js");return{default:t}},[])).default.map(t=>({...t,type:"driving_side"})),defaultSettings:{mode:"guessing",allowRepeats:!1,filterLetter:"",filterSwitch:"All",filterSide:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"guessing",label:"Guess Side (from Country)"},{value:"toCountry",label:"Guess Country (from Side)"}],maxQuestionOptions:Z.cctld.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"Which country is this?":"They drive on the...",renderQuestionContent:(t,n)=>{const r=t;return n==="toCountry"?e.jsxs(h,{sx:{textAlign:"center",maxWidth:600,mx:"auto"},children:[e.jsxs(u,{variant:"h2",sx:{fontWeight:"bold",mb:2},children:["Drives on the ",r.side]}),e.jsx(u,{variant:"h5",color:"text.secondary",sx:{fontStyle:"italic",mb:3},children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(r.explanation??"").replace(/^Drives on the <b>(Left|Right)<\/b>\.?\s*/i,"").trim()||"No details available."}})})]}):e.jsxs(h,{sx:{textAlign:"center"},children:[e.jsx(u,{variant:"h2",sx:{fontWeight:"bold",mb:2},children:r.country}),r.flag&&e.jsx(h,{component:"img",src:r.flag,alt:`Flag of ${r.country} `,sx:{height:80,width:"auto",borderRadius:1,boxShadow:3,mb:2}})]})},checkAnswer:(t,n,r)=>{const o=n;if(r.mode==="toCountry"){const l=G(t,o.country,q);return Promise.resolve({isCorrect:l,expected:o.country,points:l?1:0})}const s=k(t)===k(o.side);return Promise.resolve({isCorrect:s,expected:o.side,points:s?1:0})},renderFeedbackOrigin:t=>{const n=(t.explanation??"").replace(/^Drives on the <b>(Left|Right)<\/b>\.?\s*/i,"").trim();return n?e.jsx(u,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:e.jsx(h,{component:"span",dangerouslySetInnerHTML:{__html:n}})}):null},filters:[(t,n)=>n.mode==="toCountry"?t.filter(r=>r.type==="driving_side"&&r.switched):n.filterSwitch&&n.filterSwitch!=="All"?t.filter(r=>r.type==="driving_side"&&(n.filterSwitch==="Switched"?r.switched:!r.switched)):t,(t,n)=>n.filterSide&&n.filterSide!=="All"&&n.mode==="toCountry"?t.filter(r=>r.type==="driving_side"&&r.side===n.filterSide):t,B]},telephone:{title:"Telephone Code Quiz",subtitle:"Master the world's calling codes",infoUrl:"https://en.wikipedia.org/wiki/List_of_telephone_country_codes",getData:async()=>(await P(async()=>{const{default:t}=await import("./telephone_codes-E9FqB9Wg.js");return{default:t}},[])).default.map(t=>({...t,type:"telephone"})),defaultSettings:{mode:"toCountry",allowRepeats:!1,filterLetter:"",filterZone:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"toCountry",label:"Guess Country (from Code)"},{value:"toCode",label:"Guess Code (from Country)"}],maxQuestionOptions:Z.telephone.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"What country belongs to:":"What is the telephone code for:",renderQuestionContent:(t,n)=>{const r=t;return e.jsx(u,{variant:"h1",sx:{fontWeight:"bold",textAlign:"center",fontSize:x.QUESTION_CARD.FONT_SIZE.DETAILED,wordBreak:"break-word"},children:n==="toCountry"?r.code:r.country})},checkAnswer:(t,n,r)=>{const o=n;let s=!1,l="";if(r.mode==="toCountry")l=o.country,s=G(t,l,q);else{l=o.code;let i=t.trim();i.startsWith("+")||(i="+"+i);const g=Q=>Q.replace(/[^0-9+]/g,"");s=g(i)===g(l)}return Promise.resolve({isCorrect:s,expected:l,points:s?1:0})},filters:[(t,n)=>{if(!n.filterZone||n.filterZone==="All")return t;const r=n.filterZone.split(",");return t.filter(o=>o.type==="telephone"&&r.some(s=>o.code.startsWith(`+${s}`)))},B]},vehicle:{title:"License Plate Quiz",subtitle:"Identify international vehicle registration codes",infoUrl:"https://en.wikipedia.org/wiki/International_vehicle_registration_code",getData:async()=>(await P(async()=>{const{default:t}=await import("./vehicle_codes-BQgUQGip.js");return{default:t}},[])).default.map(t=>({...t,type:"vehicle"})),defaultSettings:{mode:"toCountry",allowRepeats:!1,filterLetter:"",filterConvention:"All",maxQuestions:"All"},hasModeSelect:!0,modes:[{value:"toCountry",label:"Guess Country (from Code)"},{value:"toCode",label:"Guess Code (from Country)"}],maxQuestionOptions:Z.vehicleRegistration.questionOptions,renderQuestionPrompt:t=>t==="toCountry"?"What country belongs to:":"What is the vehicle registration code for:",renderQuestionContent:(t,n)=>{const r=t;return e.jsx(u,{variant:"h1",sx:{fontWeight:"bold",textAlign:"center",fontSize:x.QUESTION_CARD.FONT_SIZE.DETAILED,wordBreak:"break-word"},children:n==="toCountry"?r.code:r.country})},checkAnswer:async(t,n,r)=>{const o=n;let s=!1,l="";if(r.mode==="toCountry")s=(await P(async()=>{const{default:i}=await import("./vehicle_codes-BQgUQGip.js");return{default:i}},[])).default.filter(i=>i.code===o.code).some(i=>G(t,i.country,q)),l=o.country;else{l=o.code;const i=g=>g.trim().toUpperCase().replace(/[^A-Z0-9]/g,"");s=i(t)===i(l)}return{isCorrect:s,expected:l,points:s?1:0}},filters:[(t,n)=>n.filterConvention&&n.filterConvention!=="All"?t.filter(r=>{var o;return r.type==="vehicle"&&((o=r.conventions)==null?void 0:o.includes(Number(n.filterConvention)))}):t,B]}};function Se(t,n){switch(n.type){case"INITIALIZE":return{...t,pool:n.payload.pool,currentQuestion:n.payload.currentQuestion,totalQuestions:n.payload.totalQuestions,history:[],score:0,inputValue:"",showFeedback:!1,showHint:!1,isCorrect:null,hasInitialized:!0};case"NEXT_QUESTION":{if(t.pool.length===0)return{...t,currentQuestion:null};const r=t.pool[0]??null;return{...t,currentQuestion:r,pool:t.pool.slice(1),inputValue:"",showFeedback:!1,showHint:!1,isCorrect:null}}case"SUBMIT_ANSWER":return{...t,history:[...t.history,n.payload.question],score:n.payload.question.isCorrect?t.score+n.payload.points:t.score,feedbackMessage:n.payload.feedbackMessage,isCorrect:n.payload.question.isCorrect,showFeedback:!0};case"SKIP_QUESTION":return{...t,history:[...t.history,n.payload.question],feedbackMessage:n.payload.feedbackMessage,isCorrect:!1,showFeedback:!0};case"SET_INPUT":return{...t,inputValue:n.payload};case"TOGGLE_HINT":return{...t,showHint:!t.showHint};case"END_GAME":return{...t,pool:[],currentQuestion:null};default:return t}}const je=({data:t,quizType:n,settings:r})=>f.useMemo(()=>{const o=D[n];let s=t;if(o&&o.filters)for(const l of o.filters)s=l(s,r);return s=((l,i)=>i.maxQuestions==="All"?l:[...l].sort(()=>Math.random()-.5).slice(0,i.maxQuestions))(s,r),s},[t,n,r]),Te=({title:t,subtitle:n,infoUrl:r,children:o,headerContent:s})=>e.jsx(We,{infoUrl:r,children:e.jsxs(w,{container:!0,flex:1,flexDirection:"column",alignItems:"center",sx:{py:4,px:{xs:2,sm:4},width:"100%"},children:[e.jsxs(h,{sx:{mb:6,textAlign:"center",width:"100%",maxWidth:800,mx:"auto",marginBottom:0},children:[e.jsxs(w,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{marginBottom:4},children:[e.jsx(w,{size:{xs:"grow",sm:"auto"},sx:{display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},mb:0,minWidth:0},children:s?e.jsxs(e.Fragment,{children:[e.jsx(h,{sx:{display:"block"},children:e.jsx(u,{variant:"h1",sx:{color:a.text.primary,fontWeight:j.fontWeight.bold,fontSize:j.fontSize.h2},children:t})}),e.jsx(h,{sx:{display:{xs:"flex",sm:"none"},justifyContent:"flex-end",width:"100%"},children:s})]}):e.jsx(u,{variant:"h1",sx:{color:a.text.primary,fontWeight:j.fontWeight.bold,fontSize:j.fontSize.h2},children:t})}),s&&e.jsx(w,{size:{xs:0,sm:"auto"},sx:{display:{xs:"none",sm:"flex"},flex:1,justifyContent:"center",px:4},children:s})]}),n&&e.jsx(u,{variant:"h5",sx:{color:a.text.secondary,marginTop:2,marginBottom:4,fontWeight:j.fontWeight.normal,fontSize:j.fontSize.subheading},children:n})]}),o]})}),Ie=({settings:t,onUpdate:n,onStart:r,questions:o,children:s,title:l="Game Settings",maxQuestionOptions:i})=>e.jsxs(Y,{sx:{...ie.card,p:3,mb:4,width:"100%",maxWidth:O.maxWidth.sm,mx:"auto"},children:[e.jsx(u,{variant:"h5",sx:{mb:3,textAlign:"center"},children:l}),e.jsx(w,{container:!0,spacing:3,children:s})]}),Ae=({score:t,history:n,onRestart:r,onBackToMenu:o,renderHistoryItem:s})=>e.jsx(U,{in:!0,children:e.jsxs(h,{sx:{width:"100%",maxWidth:O.maxWidth.sm,display:"flex",flexDirection:"column",alignItems:"center",mx:"auto"},children:[e.jsxs(Y,{sx:{...ie.card,p:4,mb:4,width:"100%"},children:[e.jsx(u,{variant:"h4",sx:{mb:2,textAlign:"center"},children:"Quiz Complete!"}),e.jsxs(u,{variant:"h2",sx:{color:a.primary.main,mb:4,textAlign:"center"},children:[t," / ",n.length]}),e.jsxs(h,{sx:{display:"flex",justifyContent:"center",gap:2},children:[e.jsx(M,{variant:"contained",startIcon:e.jsx(De,{}),onClick:r,sx:{flex:1},children:"Replay"}),e.jsx(M,{variant:"outlined",startIcon:e.jsx(fe,{}),onClick:o,sx:{flex:1},children:"Menu"})]})]}),e.jsx(u,{variant:"h6",align:"center",sx:{mb:2,width:"100%"},children:"History"}),e.jsx(pe,{spacing:2,sx:{width:"100%"},children:n.map((l,i)=>s(l,i))})]})});function ke({value:t,hasInitialized:n}){return n?e.jsx(Ne,{"aria-label":"Quiz progress",variant:"determinate",value:t,sx:{height:x.PROGRESS_BAR.HEIGHT,borderRadius:O.borderRadius.full,backgroundColor:a.interactive.hover,"& .MuiLinearProgress-bar":{borderRadius:O.borderRadius.full,background:`linear-gradient(90deg, ${a.primary.main}, ${a.primary.light})`}}}):null}function _e({modeLabel:t,currentQuestionNumber:n,totalQuestions:r,score:o,progressValue:s,hasInitialized:l,onBackToMenu:i}){return e.jsxs(h,{sx:{mb:4,display:"flex",flexDirection:"column",width:"100%"},children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(u,{variant:"caption",color:"textSecondary",sx:{letterSpacing:"0.1em",textTransform:"uppercase",fontWeight:j.fontWeight.bold,opacity:.6},children:t}),e.jsx(M,{size:"small",variant:"text",startIcon:e.jsx(fe,{}),onClick:i,sx:{color:a.text.secondary,opacity:.6,"&:hover":{opacity:1,backgroundColor:"transparent",color:a.primary.main},fontSize:"0.75rem",textTransform:"none",p:0},children:"Quit Quiz"})]}),e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"baseline",mb:1.5},children:[e.jsxs(u,{variant:"h6",sx:{fontWeight:j.fontWeight.medium},children:["Question ",n," of ",r]}),e.jsxs(u,{variant:"h5",sx:{fontWeight:"bold",color:a.primary.main},children:[o," ",e.jsx(u,{component:"span",variant:"caption",color:"textSecondary",sx:{fontWeight:"normal"},children:"PTS"})]})]}),e.jsx(ke,{value:s,hasInitialized:l})]})}function Ee({showFeedback:t,isCorrect:n,feedbackMessage:r,currentQuestion:o,renderFeedbackFlag:s,renderFeedbackOrigin:l}){if(!t)return null;const i=n?a.data.green:a.data.amber;return e.jsx(U,{in:t,children:e.jsxs(h,{sx:{mt:3,width:"100%"},children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1.5},children:[o&&(s==null?void 0:s(o)),e.jsx(u,{variant:"h5",noWrap:!0,sx:{color:i,fontWeight:j.fontWeight.bold,textShadow:xe.text,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:r})]}),(()=>{const g=n===!1&&o&&(l==null?void 0:l(o));return g?e.jsx(h,{sx:{textAlign:"center",mt:1},children:g}):null})()]})})}function Oe({inputValue:t,showFeedback:n,showHint:r,hideInput:o,hideHint:s,inputPlaceholder:l,currentQuestion:i,inputRef:g,nextButtonRef:Q,onInputChange:F,onSubmit:_,onSkip:C,onToggleHint:c,renderHint:m,renderCustomActions:b}){return e.jsxs(e.Fragment,{children:[e.jsxs(h,{component:"form",onSubmit:_,sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[!o&&e.jsx(me,{slotProps:{htmlInput:{"aria-label":"Answer input"}},inputRef:g,value:t,onChange:p=>{F(p.target.value)},placeholder:l,disabled:n,autoComplete:"off",sx:{input:{textAlign:"center",fontSize:"1.2rem"},width:"100%",maxWidth:x.QUESTION_CARD.MAX_WIDTH,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:a.border.subtle},"&:hover fieldset":{borderColor:a.primary.main},"&.Mui-focused fieldset":{borderColor:a.primary.main},"&.Mui-disabled fieldset":{borderColor:`${a.border.subtle} !important`}}},variant:"outlined"}),e.jsxs(pe,{direction:"row",spacing:2,sx:{mt:4,justifyContent:"center",width:"100%",maxWidth:x.QUESTION_CARD.MAX_WIDTH},children:[e.jsx(M,{ref:Q,variant:"outlined",sx:{py:x.ACTION_BUTTON.PY,flex:1,borderColor:a.border.subtle,color:a.text.secondary,whiteSpace:"nowrap",fontSize:x.ACTION_BUTTON.FONT_SIZE,"&.Mui-disabled":{borderColor:a.border.subtle,opacity:.6}},onClick:C,children:n?"Next":"Skip"}),b,!s&&e.jsx(M,{variant:"outlined",onClick:c,disabled:n,sx:{py:x.ACTION_BUTTON.PY,flex:1,borderColor:a.border.subtle,whiteSpace:"nowrap",fontSize:x.ACTION_BUTTON.FONT_SIZE,"&.Mui-disabled":{borderColor:a.border.subtle,opacity:.6}},children:r?"Hide Hint":"Show Hint"}),!o&&e.jsx(M,{type:"submit",variant:"contained",sx:{py:x.ACTION_BUTTON.PY,flex:1,whiteSpace:"nowrap",fontSize:x.ACTION_BUTTON.FONT_SIZE,"&.Mui-disabled":{backgroundColor:a.interactive.disabled,color:a.interactive.disabledText,borderColor:"transparent"}},disabled:!t||n,children:"Submit"})]})]}),r&&!n&&e.jsx(U,{in:!0,children:e.jsx(h,{sx:{mt:3,p:2,borderRadius:O.borderRadius.sm,border:`1px dashed ${a.primary.main}40`,width:"100%",maxWidth:x.QUESTION_CARD.MAX_WIDTH},children:i&&m(i)})})]})}let X,le,ae,de,ce,ue,he;X=({gameState:t,actions:n,onBackToMenu:r,renderQuestionPrompt:o,renderQuestionContent:s,renderHint:l,renderFeedbackFlag:i,renderFeedbackOrigin:g,inputPlaceholder:Q="Type answer...",inputRef:F,nextButtonRef:_,modeLabel:C,hideInput:c=!1,hideHint:m=!1,renderCustomActions:b,onKeyDown:p})=>{const{history:v,currentQuestion:d,inputValue:A,showFeedback:E,feedbackMessage:V,isCorrect:$,totalQuestions:T,showHint:z,score:J,hasInitialized:ee}=t,{setInputValue:te,handleSubmit:H,handleSkip:y,toggleHint:S}=n;Qe.useEffect(()=>{const W=re=>{if(re.key==="Enter")return re.preventDefault(),void(E||c||!A.trim()?y():H());p&&p(re)};return window.addEventListener("keydown",W),()=>{window.removeEventListener("keydown",W)}},[E,c,A,y,H,p]);const ne=Math.min(v.length+1,T),K=T>0?Math.min(v.length,T)/T*100:0;return e.jsx(h,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",mt:4},children:e.jsxs(h,{sx:{width:"100%",maxWidth:O.maxWidth.sm,mx:"auto"},children:[e.jsx(_e,{modeLabel:C,currentQuestionNumber:ne,totalQuestions:T,score:J,progressValue:K,hasInitialized:ee,onBackToMenu:r}),e.jsxs(Y,{sx:{...ie.card,p:4,pt:6,pb:3,mb:4,minHeight:x.QUESTION_CARD.MIN_HEIGHT,width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"column"},children:[e.jsx(u,{variant:"body1",color:"textSecondary",sx:{mb:2},children:o()}),e.jsx(U,{in:!0,children:e.jsx(h,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:4},children:d?s(d):e.jsx(u,{variant:"h4",color:"textSecondary",children:"Loading..."})})},JSON.stringify(d)),e.jsx(Oe,{inputValue:A,showFeedback:E,showHint:z,hideInput:c,hideHint:m,inputPlaceholder:Q,currentQuestion:d,inputRef:F,nextButtonRef:_,onInputChange:te,onSubmit:W=>{H(W)},onSkip:()=>{y()},onToggleHint:S,renderHint:l,renderCustomActions:b==null?void 0:b(t,n)}),e.jsx(Ee,{showFeedback:E,isCorrect:$,feedbackMessage:V,currentQuestion:d,renderFeedbackFlag:i,renderFeedbackOrigin:g})]})]})})},le=({quizType:t,settings:n,initialPool:r,onEndGame:o,onBackToMenu:s})=>{const l=D[t],{state:i,actions:g}=(({initialPool:c,settings:m,onEndGame:b,checkAnswer:p,advanceDelay:v={correct:1e3,incorrect:3e3}})=>{const[d,A]=f.useReducer(Se,{hasInitialized:!1,history:[],pool:[],currentQuestion:null,totalQuestions:0,inputValue:"",showFeedback:!1,feedbackMessage:"",isCorrect:null,showHint:!1,score:0}),E=f.useRef(null),V=f.useRef(b);f.useEffect(()=>{V.current=b},[b]);const $=f.useCallback(y=>{const S=[...y].sort(()=>Math.random()-.5);return{currentQuestion:S.length>0?S[0]??null:null,pool:S.length>0?S.slice(1):[],totalQuestions:S.length}},[]);f.useEffect(()=>{const y=$(c);A({type:"INITIALIZE",payload:y})},[c,$]);const T=f.useCallback(()=>{if(E.current&&(clearTimeout(E.current),E.current=null),d.pool.length===0)return A({type:"END_GAME"}),void V.current(d.history,d.score);A({type:"NEXT_QUESTION"})},[d.pool.length,d.history,d.score]),z=f.useCallback(async y=>{if(!d.currentQuestion||d.showFeedback)return;const{isCorrect:S,expected:ne,points:K}=await p(y,d.currentQuestion,m),W={id:crypto.randomUUID(),item:d.currentQuestion,userAnswer:y,isCorrect:S,pointsEarned:K};A({type:"SUBMIT_ANSWER",payload:{question:W,feedbackMessage:S?"Correct!":ne,points:K}}),E.current=setTimeout(T,S?v.correct:v.incorrect)},[d.currentQuestion,d.showFeedback,p,m,T,v]),J=f.useCallback(async()=>{if(!d.currentQuestion)return;if(d.showFeedback)return void T();const{expected:y}=await p("",d.currentQuestion,m),S={id:crypto.randomUUID(),item:d.currentQuestion,userAnswer:"",isCorrect:!1,pointsEarned:0};A({type:"SKIP_QUESTION",payload:{question:S,feedbackMessage:y}}),E.current=setTimeout(T,v.incorrect)},[d.currentQuestion,d.showFeedback,T,p,m,v.incorrect]),ee=f.useCallback(async y=>{y==null||y.preventDefault(),await z(d.inputValue)},[d.inputValue,z]),te=f.useCallback(()=>{A({type:"TOGGLE_HINT"})},[]),H=f.useCallback(y=>{A({type:"SET_INPUT",payload:y})},[]);return{state:{history:d.history,currentQuestion:d.currentQuestion,inputValue:d.inputValue,showFeedback:d.showFeedback,feedbackMessage:d.feedbackMessage,isCorrect:d.isCorrect,totalQuestions:d.totalQuestions,showHint:d.showHint,score:d.score,currentIndex:d.history.length,hasInitialized:d.hasInitialized},actions:{setInputValue:H,handleSubmit:ee,handleSkip:J,toggleHint:te,nextQuestion:T,submitAnswer:z}}})({initialPool:r,settings:n,onEndGame:o,checkAnswer:l.checkAnswer}),{currentQuestion:Q,showFeedback:F}=i,_=f.useRef(null),C=f.useRef(null);return f.useEffect(()=>{var c;F?(c=C.current)==null||c.focus():requestAnimationFrame(()=>{var m;(m=_.current)==null||m.focus()})},[F,Q]),t==="driving_side"&&n.mode!=="toCountry"?e.jsx(X,{gameState:i,actions:g,onBackToMenu:s,modeLabel:"Guessing Side",hideInput:!0,hideHint:!0,renderQuestionPrompt:()=>l.renderQuestionPrompt(n.mode),onKeyDown:c=>{i.showFeedback||(c.key==="ArrowLeft"?(c.preventDefault(),g.submitAnswer("Left")):c.key==="ArrowRight"&&(c.preventDefault(),g.submitAnswer("Right")))},renderQuestionContent:c=>l.renderQuestionContent(c,n.mode),renderCustomActions:(c,m)=>e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"contained",onClick:()=>{var b;(b=m.submitAnswer)==null||b.call(m,"Left")},disabled:c.showFeedback,sx:{flex:1,py:x.ACTION_BUTTON.PY,whiteSpace:"nowrap","&.Mui-disabled":{backgroundColor:a.interactive.disabled,color:a.interactive.disabledText,borderColor:"transparent"}},children:"Left"}),e.jsx(M,{variant:"contained",onClick:()=>{var b;(b=m.submitAnswer)==null||b.call(m,"Right")},disabled:c.showFeedback,sx:{flex:1,py:x.ACTION_BUTTON.PY,whiteSpace:"nowrap","&.Mui-disabled":{backgroundColor:a.interactive.disabled,color:a.interactive.disabledText,borderColor:"transparent"}},children:"Right"})]}),renderHint:()=>e.jsx(u,{variant:"body2",children:"Think about the region and historical influences."}),renderFeedbackOrigin:l.renderFeedbackOrigin}):e.jsx(X,{gameState:i,actions:g,onBackToMenu:s,inputRef:_,nextButtonRef:C,modeLabel:n.mode==="toCountry"?"Guessing Country":n.mode==="toCode"?"Guessing Code":"Quiz",inputPlaceholder:n.mode==="toCountry"?"Type country name...":"Type answer...",renderQuestionPrompt:()=>l.renderQuestionPrompt(n.mode),renderQuestionContent:c=>l.renderQuestionContent(c,n.mode),renderHint:c=>t==="cctld"?e.jsxs(u,{variant:"body2",color:"textSecondary",sx:{textAlign:"center",fontStyle:"italic"},children:["Hint: ",c.language," origin"]}):e.jsx(u,{variant:"body2",color:"textSecondary",children:"Hint functionality coming soon..."}),hideHint:t!=="cctld",renderFeedbackFlag:c=>c.flag&&e.jsx("img",{src:c.flag,alt:`Flag of ${c.country}`,style:{height:`${x.FEEDBACK.FLAG_HEIGHT.toString()}px`,width:"auto",borderRadius:O.borderRadius.sm,boxShadow:xe.sm}}),renderFeedbackOrigin:l.renderFeedbackOrigin})},ae=({uniqueId:t,selectedQuiz:n,onQuizChange:r})=>e.jsx(R,{size:"small",sx:{width:"auto",minWidth:{xs:180,sm:200},flexShrink:0,marginRight:{xs:0,sm:-4},"& .MuiOutlinedInput-root":{...oe.presets.glass,borderRadius:O.borderRadius.full,color:a.text.primary,fontWeight:"medium","& fieldset":{border:`1px solid ${a.border.subtle}`},"&:hover fieldset":{borderColor:a.primary.main},"&.Mui-focused fieldset":{borderColor:a.primary.main}},"& .MuiSelect-select":{py:1,px:{xs:2,sm:3},textAlign:"center"},"& .MuiSvgIcon-root":{color:a.text.secondary}},children:e.jsxs(N,{id:t,value:n,onChange:r,MenuProps:{autoFocus:!1,BackdropProps:{sx:{backdropFilter:"none",backgroundColor:"transparent"}},PaperProps:{sx:{...oe.presets.glass,borderRadius:O.borderRadius.lg,mt:1,"& .MuiMenuItem-root":{color:a.text.secondary,transition:oe.transition,"&:hover":{backgroundColor:a.interactive.hover,color:a.text.primary},"&.Mui-selected":{backgroundColor:a.interactive.selected,color:a.primary.main,fontWeight:"bold"}}}}},children:[e.jsx(I,{value:"cctld",children:"Domains"}),e.jsx(I,{value:"driving_side",children:"Driving Side"}),e.jsx(I,{value:"telephone",children:"Telephone Codes"}),e.jsx(I,{value:"vehicle",children:"Vehicle Registration"})]})}),de=({selectedQuiz:t,settings:n,onSettingsChange:r,activeConfig:o,commonSelectProps:s,onEnterKey:l})=>e.jsxs(e.Fragment,{children:[o.hasModeSelect&&o.modes?e.jsx(w,{size:{xs:12,md:6},children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{children:"Game Mode"}),e.jsx(N,{value:n.mode,label:"Game Mode",onChange:i=>{r({...n,mode:i.target.value})},sx:{color:a.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:a.border.subtle}},...s,children:o.modes.map(i=>e.jsx(I,{value:i.value,children:i.label},i.value))})]})}):e.jsx(w,{size:{xs:12,md:6},sx:{display:{xs:"none",md:"block"}},children:e.jsx(h,{sx:{height:56}})}),t==="cctld"&&e.jsx(w,{size:{xs:12,md:6},children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{children:"Language Filter"}),e.jsx(N,{value:n.filterLanguage??"All",label:"Language Filter",onChange:i=>{r({...n,filterLanguage:i.target.value})},sx:{color:a.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:a.border.subtle}},...s,children:be.map(i=>e.jsx(I,{value:i,children:i},i))})]})}),t==="telephone"&&e.jsx(w,{size:{xs:12,md:6},children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{children:"Zone Filter"}),e.jsx(N,{value:n.filterZone??"All",label:"Zone Filter",onChange:i=>{r({...n,filterZone:i.target.value})},sx:{color:a.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:a.border.subtle}},...s,MenuProps:{...s.MenuProps,PaperProps:{sx:{maxWidth:250}}},children:ye.map(i=>e.jsx(I,{value:i.value,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:i.label},i.value))})]})}),t==="vehicle"&&e.jsx(w,{size:{xs:12,md:6},children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{children:"Convention Filter"}),e.jsx(N,{value:n.filterConvention??"All",label:"Convention Filter",onChange:i=>{r({...n,filterConvention:i.target.value})},sx:{color:a.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:a.border.subtle}},...s,children:Ce.map(i=>e.jsx(I,{value:i.value,children:i.label},i.value))})]})}),t==="driving_side"&&(n.mode==="toCountry"?e.jsx(w,{size:{xs:12,md:6},children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{children:"Side Filter"}),e.jsx(N,{value:n.filterSide??"All",label:"Side Filter",onChange:i=>{r({...n,filterSide:i.target.value})},sx:{color:a.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:a.border.subtle}},...s,children:we.map(i=>e.jsx(I,{value:i.value,children:i.label},i.value))})]})}):e.jsx(w,{size:{xs:12,md:6},children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{children:"Switch Filter"}),e.jsx(N,{value:n.filterSwitch??"All",label:"Switch Filter",onChange:i=>{r({...n,filterSwitch:i.target.value})},sx:{color:a.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:a.border.subtle}},...s,children:ve.map(i=>e.jsx(I,{value:i.value,children:i.label},i.value))})]})})),e.jsx(w,{size:{xs:12,md:6},children:e.jsx(me,{fullWidth:!0,label:"Filter by Letter(s)",value:n.filterLetter,onChange:i=>{r({...n,filterLetter:i.target.value})},helperText:"Comma separated (e.g. a, b)",slotProps:{inputLabel:{style:{color:a.text.secondary}}},onKeyDown:i=>{i.key==="Enter"&&l()},sx:{input:{color:a.text.primary},label:{color:a.text.secondary},"& .MuiOutlinedInput-root":{backgroundColor:"transparent",backdropFilter:"none","& fieldset":{borderColor:a.border.subtle},"&:hover fieldset":{borderColor:a.primary.main}}}})}),e.jsx(w,{size:{xs:12,md:6},children:e.jsxs(R,{fullWidth:!0,children:[e.jsx(L,{children:"# Questions"}),e.jsxs(N,{value:n.maxQuestions,label:"# Questions",onChange:i=>{r({...n,maxQuestions:i.target.value==="All"?"All":Number(i.target.value)})},sx:{color:a.text.primary,".MuiOutlinedInput-notchedOutline":{borderColor:a.border.subtle}},...s,children:[o.maxQuestionOptions.map(i=>e.jsx(I,{value:i,children:i},i)),e.jsx(I,{value:"All",children:"All"})]})]})})]}),ce=()=>e.jsx(Le,{label:"Skipped",size:"small",variant:"outlined",sx:{height:x.BADGE.HEIGHT,fontSize:x.BADGE.FONT_SIZE,borderColor:a.surface.error,color:a.data.red,fontWeight:j.fontWeight.medium,"& .MuiChip-label":{px:1}}}),ue=({question:t,selectedQuiz:n,settings:r,activeConfig:o})=>e.jsxs(Y,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"flex-start",bgcolor:t.pointsEarned===1?a.surface.success:t.pointsEarned===.5?a.surface.warning:a.surface.error,border:`1px solid ${a.border.subtle} `,flexShrink:0},children:[e.jsxs(h,{sx:{textAlign:"left",flex:1,minWidth:0},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.item.flag&&e.jsx("img",{src:t.item.flag,alt:`Flag of ${t.item.country}`,style:{height:`${x.HISTORY_ITEM.FLAG_HEIGHT.toString()}px`,width:"auto",borderRadius:x.HISTORY_ITEM.FLAG_BORDER_RADIUS}}),e.jsx(u,{variant:"body1",fontWeight:j.fontWeight.bold,noWrap:!0,children:n==="driving_side"?t.item.country:r.mode==="toCountry"?t.item.code:t.item.country})]}),e.jsxs(u,{variant:"body2",color:"textSecondary",noWrap:!0,children:["Answer:"," ",n==="driving_side"?t.item.side:r.mode==="toCountry"?t.item.country:t.item.code]}),o.renderFeedbackOrigin&&e.jsx(h,{sx:{mt:.5,opacity:.8},children:o.renderFeedbackOrigin(t.item)})]}),e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1,flexShrink:0,ml:2},children:[e.jsx(u,{variant:"body2",component:"div",sx:{color:t.pointsEarned===1?a.data.green:t.pointsEarned===.5?a.data.amber:a.data.red,fontWeight:t.pointsEarned>0?j.fontWeight.bold:j.fontWeight.normal,maxWidth:"150px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",fontSize:x.BADGE.FONT_SIZE},children:(()=>{const s=t.userAnswer.trim();if(!s)return e.jsx(ce,{});let l=s;return l=n==="cctld"?r.mode==="toCode"?(l.startsWith(".")?l:"."+l).toLowerCase():l.toUpperCase():n==="telephone"&&r.mode==="toCode"?l.startsWith("+")?l.toUpperCase():"+"+l.toUpperCase():l.toUpperCase(),e.jsxs(u,{component:"span",variant:"inherit",children:[l,t.pointsEarned===.5&&" (0.5 pts)"]})})()}),t.pointsEarned===1?e.jsx(se,{fontSize:"small",color:"success"}):t.pointsEarned===.5?e.jsx(se,{fontSize:"small",sx:{color:a.data.amber}}):t.userAnswer.trim()&&e.jsx(se,{fontSize:"small",color:"error"})]})]}),he={MenuProps:{BackdropProps:{sx:{backdropFilter:"none",backgroundColor:"transparent"}}}},ge=()=>{const[t,n]=Fe(),r=f.useMemo(()=>{const p=t.get("type");return p&&Object.prototype.hasOwnProperty.call(D,p)?p:"cctld"},[t]),[o,s]=f.useState({status:"menu"}),[l,i]=f.useState(D[r].defaultSettings),[g,Q]=f.useState([]),[F,_]=f.useState(!0),C=D[r];f.useEffect(()=>{let p=!0;return(async()=>{_(!0);try{const v=await C.getData();p&&(Q(v),_(!1))}catch{p&&_(!1)}})(),()=>{p=!1}},[r,C]),f.useEffect(()=>{document.title=`${C.title} | Bangyen`},[r,C.title]);const c=je({data:g,quizType:r,settings:l}),m=()=>{c.length>0&&s({status:"playing"})},b=()=>{s({status:"menu"})};return e.jsxs(Te,{title:"Knowledge",infoUrl:C.infoUrl,headerContent:e.jsx(ae,{uniqueId:"quiz-topic-selector",selectedQuiz:r,onQuizChange:p=>{const v=p.target.value;n({type:v})}}),children:[o.status==="menu"&&e.jsx(U,{in:!0,children:e.jsxs(h,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ie,{settings:l,onUpdate:i,onStart:m,maxQuestionOptions:C.maxQuestionOptions,title:"Quiz Settings",children:e.jsx(de,{selectedQuiz:r,settings:l,onSettingsChange:i,activeConfig:C,commonSelectProps:he,onEnterKey:m})}),e.jsx(h,{sx:{display:"flex",justifyContent:"center",mt:2},children:e.jsx(M,{variant:"contained",size:"large",onClick:m,disabled:F||c.length===0,sx:{px:{xs:4,sm:8},py:1.5,fontSize:x.START_BUTTON.FONT_SIZE,borderRadius:O.borderRadius.full,fontWeight:"bold",letterSpacing:x.START_BUTTON.LETTER_SPACING,minWidth:x.START_BUTTON.MIN_WIDTH,whiteSpace:"nowrap","&.Mui-disabled":{backgroundColor:a.interactive.disabled,color:a.interactive.disabledText}},children:F?"Loading Data...":c.length===0?"No Questions Found":`Start Quiz (${c.length.toString()})`})})]})}),o.status==="playing"&&e.jsx(le,{quizType:r,settings:l,initialPool:c,onEndGame:(p,v)=>{s({status:"summary",history:p,score:v})},onBackToMenu:b}),o.status==="summary"&&e.jsx(Ae,{score:o.score,history:o.history,onRestart:m,onBackToMenu:b,renderHistoryItem:p=>e.jsx(ue,{question:p,selectedQuiz:r,settings:l,activeConfig:C},p.id)})]})}});export{ze as __tla,ge as default};
