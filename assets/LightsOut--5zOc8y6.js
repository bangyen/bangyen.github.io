import{r as t,j as n}from"./vendor_react-CPTKWKBb.js";import{g as e,c as o,a as r,B as s,b as i,C as a,u as c,d as l,I as u,e as d,i as f,f as p,h as g,j as x,k as m,S as h,l as y,m as j,n as S,o as b,p as w,q as v,r as k,s as C,G as I,t as z,v as $}from"./InfoNavigation-CoKMttKN.js";import{C as A,d as P,e as T,L as D}from"./index-DFvMnUKZ.js";import{b as R,c as B,R as O,E,K as M,d as F,e as N,f as L,M as _}from"./vendor_mui_icons-CTfyhkcx.js";import{B as H,d as W,e as K,G as U,M as G,h as q,I as Z}from"./vendor_mui_core-D9k3Vigt.js";import{G as J}from"./PageLayout-vOa3tuEQ.js";function Q(t){const n=new Array(t).fill(1n);for(let e=0;e<t;e++){const o=n[e];void 0!==o&&(n[e]=o<<BigInt(t-e-1))}return n}function V(t,n){const e=t.length,o=[];for(let r=0;r<e;r++){const e=t[r],s=n[r];void 0!==e&&void 0!==s&&o.push(e^s)}return o}function X(t,n){const e=t.length,o=[];for(let r=0;r<e;r++){const s=t[r];let i=0n;if(void 0!==s)for(let t=0;t<e;t++)if(s&1n<<BigInt(e-1-t)){const e=n[t];void 0!==e&&(i^=e)}o.push(i)}return o}function Y(t,n,e){let o=Q(t.length),r=[...t],s=n;for(;s>0;)s%2==1&&(o=X(o,r)),r=X(r,r),s=Math.floor(s/2);return o}function tt(t,n){const e=t.length,o=[...new Array(e).keys()].sort((n,e)=>{const o=t[e],r=t[n];return void 0===o||void 0===r?0:o>r?1:o<r?-1:0});return[o.map(n=>t[n]??0n),o.map(t=>n[t]??0n)]}const nt={};function et(t,n,o){const r=e(n,o);if(!nt[r]){const t=function(t){if(1===t)return[1n];const n=[7n<<BigInt(t-2)];for(let o=1;o<t;o++){const t=n[o-1];if(void 0!==t){const e=t>>1n;n.push(e)}}const e=n[0];return void 0!==e&&(n[0]=e-(1n<<BigInt(t))),n}(o),e=function(t,n){const e=t.length;let o=new Array(e).fill(0n),r=0,s=n;for(;s>0n;)1n&s&&(o=V(o,Y(t,r))),s>>=1n,r++;return o}(t,function(t){const n=[0n,1n];for(let e=1;e<t;e++){const t=n[e],o=n[e-1];if(void 0!==t&&void 0!==o){const e=t<<1n;n.push(e^o)}}return n[t]??0n}(n+1));nt[r]=function(t){const n=t.length;let e=t,o=Q(n);for(let r=0;r<n;r++){const t=1n<<BigInt(n-r-1);[e,o]=tt(e,o);for(let s=0;s<n;s++){const n=e[s];if(void 0!==n&&s!==r&&n&t){const t=e[r],n=o[r];if(void 0!==t){const n=e[s];void 0!==n&&(e[s]=n^t)}if(void 0!==n){const t=o[s];void 0!==t&&(o[s]=t^n)}}}}return o}(e)}const s=nt[r],i=t.join(""),a=i?BigInt("0b"+i):0n;if(void 0===s)throw new Error("Inverse matrix not found in cache");return s.map(t=>1&function(t){let n=0,e=t;if(e<0n)throw new Error("countBits called on negative bigint");for(;e>0n;)e&=e-1n,n++;return n}(t&a))}function ot(t,n){return Array.from({length:t},()=>0)}function rt(t,n,e,o,r){const s=[...e];let i=1<<n;if(n>0&&(i|=1<<n-1),n<r-1&&(i|=1<<n+1),void 0!==s[t]&&(s[t]^=i),t>0){const e=s[t-1];void 0!==e&&(s[t-1]=e^1<<n)}if(t<o-1){const e=s[t+1];void 0!==e&&(s[t+1]=e^1<<n)}return s}function st(t,n,e,o,r){let s=1<<n;if(n>0&&(s|=1<<n-1),n<r-1&&(s|=1<<n+1),void 0!==e[t]&&(e[t]^=s),t>0){const o=e[t-1];void 0!==o&&(e[t-1]=o^1<<n)}if(t<o-1){const o=e[t+1];void 0!==o&&(e[t+1]=o^1<<n)}}function it(t,n){const e=ot(t);for(let o=0;o<t;o++)for(let r=0;r<n;r++)Math.random()>.5&&st(o,r,e,t,n);return e}function at(t,n){return{grid:ot(t),score:0,rows:r(t),cols:r(n),initialized:!1}}const ct=o({getInitialState:at,customHandler:(t,n)=>{const{rows:e,cols:o}=t;switch(n.type){case"adjacent":return{...t,grid:rt(n.row,n.col,t.grid,e,o)};case"multi_adjacent":{const r=[...t.grid];for(const{row:t,col:s}of n.moves)st(t,s,r,e,o);return{...t,grid:r}}case"random":case"randomize":return{...t,grid:it(e,o),initialized:!0};case"resize":{const e=n.newRows??n.rows??t.rows,o=n.newCols??n.cols??t.cols;return{...at(e,o),grid:it(e,o),initialized:!0}}case"new":case"next":return{...at(e,o),grid:it(e,o),score:t.score+1,initialized:!0}}return t}});function lt(t,n,e,o,r,s=1){const i=t.length,a={},c=100/i;for(let l=0;l<i;l++){const u=l*c,d=(l+1)*c;let f=r.secondary,p=!1,g="";const x=t[l],m=l+1<i?t[l+1]:null;if(x&&m){const t=rt(n,e,x,o,o);p=!0;for(let n=0;n<o;n++)if(t[n]!==m[n]){p=!1;break}if(p){const t=x[n];if(void 0!==t){f=t>>e&1?r.secondary:r.primary,g=`"${String(l+1)}"`}}}p?(a[`${String(u)}%`]={opacity:0,content:g,color:f,transform:"scale(0.5)"},a[`${String(u+c*(.1/s))}%`]={opacity:1,content:g,color:f,transform:"scale(1.2)"},a[`${String(u+c*(.2/s))}%`]={opacity:1,content:g,color:f,transform:"scale(1)"},a[`${String(d-c*(.1/s))}%`]={opacity:1,content:g,color:f,transform:"scale(1)"},a[`${String(d)}%`]={opacity:0,content:g,color:f,transform:"scale(0.5)"}):(a[`${String(u)}%`]={opacity:0,content:'""',color:f,transform:"scale(0.5)"},a[`${String(d)}%`]={opacity:0,content:'""',color:f,transform:"scale(0.5)"})}return a}function ut(t,n,e){const o=t.length,r={},s=100/o;for(let i=0;i<o;i++){const a=i*s,c=(i+1)*s;let l=e.secondary,u=!1,d="";const f=t[i],p=i+1<o?t[i+1]:null;if(f&&p&&f[n]!==p[n]){u=!0;l=1===f[n]?e.secondary:e.primary,d=`"${String(i+1)}"`}u?(r[`${String(a)}%`]={opacity:0,content:d,color:l,transform:"scale(0.5)"},r[`${String(a+.05*s)}%`]={opacity:1,content:d,color:l,transform:"scale(1.2)"},r[`${String(a+.1*s)}%`]={opacity:1,content:d,color:l,transform:"scale(1)"},r[`${String(c-.05*s)}%`]={opacity:1,content:d,color:l,transform:"scale(1)"},r[`${String(c)}%`]={opacity:0,content:d,color:l,transform:"scale(0.5)"}):(r[`${String(a)}%`]={opacity:0,content:'""',color:l,transform:"scale(0.5)"},r[`${String(c)}%`]={opacity:0,content:'""',color:l,transform:"scale(0.5)"})}return r}function dt(t,n){const e=[...t];let o=t.at(-1);if(!o)return e;for(let r=1;r<n;r++){const t=o[r-1];if(void 0!==t)for(let s=0;s<n;s++){if(!(t>>s&1))continue;const i=rt(r,s,o,n,n);e.push(i),o=i}}return e}function ft(t,n){const e=t.at(-1);if(!e)return t;const o=[...t];for(;o.length<n;)o.push([...e]);return o}function pt(t,n){let e=ot(n);for(const m of t){e=rt(Math.floor(m/n),m%n,e,n,n)}const o=dt([e],n),r=o.at(-1);if(!r)return{boardStates:[],inputStates:[],outputStates:[]};const s=r.at(-1)??0,i=Array.from({length:n},(t,n)=>s>>n&1),{input:a,output:c}=function(t,n){const e=new Array(n).fill(0),o=[e],r=[e],s=[...e];for(let i=0;i<n;i++){if(!t[i])continue;s[i]=1;const e=[...s],a=et(e,n,n);o.push(e),r.push(a)}return{input:o,output:r}}(i,n),l=o.length+a.length-1,u=c.at(-1);if(!u)return{boardStates:[],inputStates:[],outputStates:[]};let d=[...r];for(;o.length<l;)o.push([...r]);const f=a[0];for(;a.length<l;)f&&a.unshift([...f]);const p=c[0];for(;c.length<l;)p&&c.unshift([...p]);for(let m=0;m<n;m++)u[m]&&(d=rt(0,m,d,n,n),o.push([...d]));const g=dt(o,n),x=g.length;return{boardStates:g,inputStates:ft(a,x),outputStates:ft(c,x)}}const gt={TRANSITION:{FAST:"background-color 100ms ease-in-out, color 100ms ease-in-out, opacity 100ms ease-in-out, border-radius 100ms ease-in-out",DEFAULT:"background-color 200ms ease, color 200ms ease, opacity 200ms ease, border-radius 200ms ease"},SHADOWS:{DROP:s.DROP_SHADOW}},xt=1.25,mt={MOBILE:-28,DESKTOP:-40},ht=i("lights-out");function yt(n,e){const o=t.useCallback((t,o)=>{const r=n(t,o);return{front:r?e.primary:e.secondary,back:r?e.secondary:e.primary}},[n,e]),r=t.useCallback((t,e)=>function(t,n,e){const o=e(t,n),r={},s=o===e(t-1,n),i=o===e(t+1,n),a=o===e(t,n-1),c=o===e(t,n+1);return(s||a)&&(r.borderTopLeftRadius=0),(s||c)&&(r.borderTopRightRadius=0),(i||a)&&(r.borderBottomLeftRadius=0),(i||c)&&(r.borderBottomRightRadius=0),r}(t,e,n),[n]),s=t.useCallback((t,o)=>{const r=function(t,n,e){const o=e(t,n),r=e(t,n+1),s=e(t+1,n),i=e(t+1,n+1);let a=!0;return o&&i||!(o+r+s+i<3)||(a=!1),a}(t,o,n);return r?e.primary:e.secondary},[n,e]);return t.useMemo(()=>({getColor:o,getBorder:r,getFiller:s}),[o,r,s])}function jt(n,e){const{grid:o,rows:r,cols:s}=n;return yt(t.useCallback((t,n)=>{if(t<0||n<0||t>=r||n>=s)return-1;const e=o[t];return void 0===e?0:e>>n&1},[o,r,s]),e)}function St({getColor:t,getBorder:e}){return(o,r)=>{const{front:s}=t(o,r);return{backgroundColor:s,color:s,children:n.jsx(R,{}),style:e(o,r),sx:{transition:gt.TRANSITION.DEFAULT}}}}function bt(n,e,o){return yt(t.useCallback((t,o)=>0!==t||o<0||o>=e?-1:n[o]??0,[n,e]),o)}const wt=["Chasing Lights","How It Works","Calculator"],vt={animation:"fadeIn 0.3s ease",textAlign:"center",flex:1,display:"flex",flexDirection:"column"},kt=t=>({flex:1,display:"flex",flexDirection:t?"row":"column",justifyContent:"center",alignItems:"center",gap:3}),Ct={mb:1,color:A.text.primary,fontWeight:"bold"},It={color:A.text.secondary,fontWeight:"normal"},zt=(t,n)=>({display:"flex",flexDirection:t||n?"column":"row",gap:1,alignItems:"center"}),$t={borderColor:A.border.subtle,color:A.text.secondary};function At({cols:t,size:e,isMobile:o,inputProps:r,outputProps:s,onReset:i,onApply:c,hasPattern:l}){const u=Math.min(e*(o?.9:.8),3),d=!o&&2*(t*u)+10+3<55;return n.jsx(H,{sx:vt,children:n.jsxs(H,{sx:kt(d),children:[n.jsxs(H,{sx:{textAlign:"center"},children:[n.jsxs(W,{variant:"subtitle2",sx:Ct,children:["Input"," ",n.jsx(H,{component:"span",sx:It,children:"(Bottom Row)"})]}),n.jsx(a,{space:0,rows:1,cols:t,size:u,cellProps:r})]}),n.jsxs(H,{sx:{textAlign:"center"},children:[n.jsxs(W,{variant:"subtitle2",sx:Ct,children:["Solution"," ",n.jsx(H,{component:"span",sx:It,children:"(Top Row)"})]}),n.jsx(a,{space:0,rows:1,cols:t,size:u,cellProps:s})]}),n.jsxs(H,{sx:zt(d,o),children:[n.jsx(K,{variant:"outlined",size:"small",startIcon:n.jsx(B,{}),disabled:!l,onClick:c,sx:$t,children:"Copy Pattern"}),n.jsx(K,{variant:"outlined",size:"small",startIcon:n.jsx(O,{}),onClick:i,sx:$t,children:"Clear Pattern"})]})]})})}function Pt({boardStates:e,inputStates:o,dims:r,id:s,palette:i,children:a}){const c=t.useMemo(()=>[...e.flatMap((t,n)=>Array.from({length:r},(t,o)=>({name:`${s}-board-icon-${String(n)}-${String(o)}`,frames:lt(e,n,o,r,i)}))),...o.flatMap((t,n)=>({name:`${s}-input-icon-0-${String(n)}`,frames:ut(o,n,i)}))],[e,o,r,s,i]);return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:c.map(t=>`\n                @keyframes ${t.name} {\n                    ${Object.entries(t.frames).map(([t,n])=>`\n                        ${t} {\n                            ${Object.entries(n).map(([t,n])=>`${t.replaceAll(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}: ${n};`).join(" ")}\n                        }\n                    `).join("")}\n                }\n            `).join("")}),a]})}function Tt({start:e=[],dims:o=3,size:r,palette:s,getFrontProps:i,getBackProps:u}){const[d,f]=t.useState(0);t.useEffect(()=>{const t=setInterval(()=>{f(t=>t+1)},2e3);return()=>{clearInterval(t)}},[]);const p=pt(e,o),g=r,{boardStates:x,inputStates:m,outputStates:h}=p,y=d%m.length,j=y===m.length-1,S=jt({grid:x[y]??x[0]??[],rows:o,cols:o},s),b=i(S),w=u(S),v=function(t,e,o,r){return(s,i)=>{const a=lt(t,s,i,e,r),c=t.length,l=`${o}-board-icon-${String(s)}-${String(i)}`;return{icon:n.jsx(H,{sx:{width:"100%",height:"100%",position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2,"&::after":{content:'""',fontSize:"1.2rem",fontWeight:"bold",filter:gt.SHADOWS.DROP,paddingTop:"0.15rem",animation:`${l} ${String(2*c)}s linear infinite`}}}),keyframes:a,keyframeName:l}}}(x,o,"example",s),k=bt(m[y]??[],o,s),C=bt(h[y]??[],o,s),I=St(k),z=St(C),$=function(t,e,o,r){return(e,s)=>{const i=ut(t,s,r),a=t.length,c=`${o}-input-icon-${String(e)}-${String(s)}`;return{icon:n.jsx(H,{sx:{width:"100%",height:"100%",position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2,"&::after":{content:'""',fontSize:"1.2rem",fontWeight:"bold",filter:gt.SHADOWS.DROP,paddingTop:"0.15rem",animation:`${c} ${String(2*a)}s linear infinite`}}}),keyframes:i,keyframeName:c}}}(m,0,"example",s),P=c("sm");return n.jsx(Pt,{boardStates:x,inputStates:m,dims:o,id:"example",palette:s,children:n.jsx(U,{container:!0,size:12,spacing:2,sx:{height:"100%"},children:n.jsxs(U,{container:!0,size:12,wrap:P?"wrap":"nowrap",sx:{justifyContent:"center",alignItems:"center",flex:1,height:"100%",overflow:"hidden",flexDirection:P?"column":"row"},children:[n.jsx(U,{size:P?12:6,sx:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:n.jsxs(H,{sx:{position:"relative",display:"inline-flex"},children:[n.jsx(l,{size:g,rows:o,cols:o,frontProps:(t,e)=>{const o=b(t,e),r=v(t,e);return{...o,children:n.jsxs(n.Fragment,{children:[o.children,r.icon]}),sx:{...o.sx,position:"relative"}}},backProps:w}),n.jsx(H,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:j?1:0,transform:j?"scale(1)":"scale(0.5)",visibility:j?"visible":"hidden",transition:"all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",pointerEvents:"none",zIndex:10},children:(()=>{const t=x[m.length-1],e=t?.every(t=>t===(1<<o)-1);return n.jsx(E,{sx:{fontSize:{xs:"2.5rem",sm:"4rem"},color:e?s.secondary:s.primary}})})()})]})}),n.jsxs(U,{container:!0,size:P?12:6,spacing:P?1:2,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[n.jsxs(H,{sx:{mb:P?0:2,textAlign:"center"},children:[n.jsx(W,{variant:"subtitle2",sx:{mb:1,color:A.text.secondary},children:"Input"}),n.jsx(a,{rows:1,cols:o,size:g,cellProps:(t,e)=>{const o=I(t,e),r=$(t,e);return{...o,children:n.jsxs(n.Fragment,{children:[o.children,r.icon]}),sx:{...o.sx,position:"relative"}}},space:0})]}),n.jsxs(H,{sx:{textAlign:"center"},children:[n.jsx(a,{rows:1,cols:o,size:g,cellProps:z,space:0}),n.jsx(W,{variant:"subtitle2",sx:{mt:1,color:A.text.secondary},children:"Result"})]})]})]})})})}function Dt({palette:t,getFrontProps:e,getBackProps:o}){return n.jsx(H,{sx:{flex:1,display:"flex",flexDirection:"column",animation:"fadeIn 0.3s ease"},children:n.jsx(H,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:n.jsx(Tt,{dims:3,size:4,start:[1,3,8],palette:t,getFrontProps:e,getBackProps:o})})})}function Rt(){return n.jsx(H,{sx:{animation:"fadeIn 0.3s ease",flex:1,display:"flex",flexDirection:"column"},children:n.jsxs(H,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:4},children:[n.jsx(u,{Icon:M,title:"Chase to Bottom",text:"Turn off rows from top to bottom by clicking lights in each row to push them down."}),n.jsx(u,{Icon:F,title:"Use Calulator",text:"Enter the remaining lights pattern from the bottom row into the calculator on the last page."}),n.jsx(u,{Icon:N,title:"Chase Again",text:"Apply the solution pattern to the top row, then chase them down again to solve the puzzle."})]})})}const Bt=J;function Ot(e){const{rows:o,cols:r,size:s,open:i,palette:a,toggleOpen:l,onApply:u,getFrontProps:w,getBackProps:v}=e,k=c("md"),[C,I]=t.useState(0),[z,$]=t.useState(new Array(r).fill(0));t.useEffect(()=>{$(new Array(r).fill(0))},[r,a]);const A=t.useCallback(t=>{const n=Number.parseInt(t,10);$(t=>{const e=[...t];return void 0!==e[n]&&(e[n]^=1),e})},[$]),P=et(z,o,r),{getDragProps:T}=d({onAction:A,checkEnabled:()=>2===C,posAttribute:"data-col"}),D=bt(z,r,a),B=bt(P,r,a),O=function(t,e){const{getColor:o,getBorder:r}=t;return(t,s)=>{const{front:i,back:a}=o(t,s),c=e(s.toString());return{...c,backgroundColor:i,style:r(t,s),sx:{...c.sx,"&:hover":{cursor:"pointer",color:a}},color:i,children:n.jsx(R,{})}}}(D,T),E=St(B),M=()=>{l()};return n.jsx(G,{open:i,onClose:M,slots:{backdrop:q},slotProps:{backdrop:{sx:p}},sx:f,children:n.jsx(H,{sx:g,children:n.jsxs(Bt,{onClick:t=>{t.stopPropagation()},sx:x,children:[n.jsxs(H,{sx:S(C),children:[n.jsxs(H,{sx:m,children:[n.jsx(h,{children:wt[C]}),n.jsx(Z,{onClick:M,size:"small",sx:y,children:n.jsx(L,{})})]}),n.jsxs(H,{sx:j(C),children:[0===C&&n.jsx(Rt,{}),1===C&&n.jsx(Dt,{palette:a,getFrontProps:w,getBackProps:v}),2===C&&n.jsx(At,{cols:r,size:s,isMobile:k,inputProps:O,outputProps:E,onReset:()=>{$(new Array(r).fill(0))},onApply:()=>{u(P)},hasPattern:P.some(t=>0!==t)})]})]}),n.jsx(b,{step:C,totalSteps:3,onBack:()=>{C>0&&I(C-1)},onNext:()=>{C<2?I(C+1):l()}})]})})})}const Et=n.jsx(H,{sx:{width:"45%",height:"45%",borderRadius:"50%",backgroundColor:"currentColor"}});function Mt(t,n,o){const{getColor:r,getBorder:s}=n;return(n,i)=>{const a=s(n,i),{front:c,back:l}=r(n,i),u=e(n,i),d=t(u);return{...d,children:Et,backgroundColor:c,color:c,style:a,...o?{transition:"none"}:{},"aria-label":`Cell at row ${String(n+1)}, column ${String(i+1)}`,sx:{...d.sx,"&:hover":{cursor:"pointer",color:l}}}}}function Ft(t,n){return(e,o)=>({backgroundColor:t.getFiller(e,o),transition:n?"none":gt.TRANSITION.FAST})}function Nt(t){const n=Mt(t=>({onMouseDown:()=>{},onMouseEnter:()=>{},onTouchStart:()=>{},onKeyDown:()=>{},"data-pos":t,role:"presentation",tabIndex:-1,sx:{touchAction:"none",transition:"none"}}),t);return(t,e)=>({...n(t,e),onMouseDown:void 0,onMouseEnter:void 0,onTouchStart:void 0,sx:{}})}function Lt(){const e=c("sm"),{rows:o,cols:r,state:s,dispatch:i,size:a,solved:u,handleNext:d,controlsProps:f}=w({storageKeys:{size:ht.SIZE,state:ht.STATE},pageTitle:P.lightsOut,gridConfig:{defaultSize:null,maxSize:10,headerOffset:{mobile:D.headerHeight.xs,desktop:D.headerHeight.md},paddingOffset:{x:e?60:80,y:60},cellSizeReference:{mobile:$.gridSizes.mobile,desktop:$.gridSizes.desktop}},boardConfig:{paddingOffset:{x:e?40:120,y:e?120:160},maxCellSize:80},reducer:ct,getInitialState:at,winAnimationDelay:$.timing.winAnimationDelay,isSolved:t=>t.initialized&&t.grid.every(t=>0===t)}),[p,g]=t.useReducer(t=>!t,!1),x=t.useMemo(()=>({primary:A.primary.main,secondary:A.primary.dark}),[]),{getDragProps:m}=v({onToggle:(t,n)=>{i({type:"adjacent",row:C(t),col:C(n)})},checkEnabled:()=>!u,touchTimeout:$.timing.interactionDelay,transition:gt.TRANSITION.FAST}),h=t.useMemo(()=>s.initialized&&s.grid.every(t=>t===(1<<r)-1),[s.initialized,s.grid,r]),y=jt(s,x),j=t.useRef(""),S=t.useRef(!1),[,b]=t.useState(0),R=`${String(o)},${String(r)},${String(s.score)}`;R!==j.current&&(S.current=""!==j.current,j.current=R),t.useEffect(()=>{if(!S.current)return;const t=requestAnimationFrame(()=>{S.current=!1,b(t=>t+1)});return()=>{cancelAnimationFrame(t)}},[R]);const B=S.current,O=k(Mt,m,[y,B]),E=t.useMemo(()=>Ft(y,B),[y,B]),M=t.useCallback(t=>{const n=t.map((t,n)=>t?{row:C(0),col:C(n)}:null).filter(t=>null!==t);n.length>0&&i({type:"multi_adjacent",moves:n}),g()},[i,g]),F=n.jsx(z,{...f,children:n.jsx(T,{title:"How to Play",Icon:_,onClick:g})});return n.jsxs(I,{title:P.lightsOut,infoUrl:"https://en.wikipedia.org/wiki/Lights_Out_(game)",showTrophy:u,onReset:d,boardSize:a,iconSizeRatio:xt,primaryColor:x.primary,secondaryColor:x.secondary,useSecondaryTrophy:h,boardSx:{marginTop:e?`${String(mt.MOBILE)}px`:`${String(mt.DESKTOP)}px`},controls:F,children:[n.jsx(l,{size:a,rows:o,cols:r,frontProps:O,backProps:E}),p&&n.jsx(Ot,{rows:o,cols:r,size:a,open:p,palette:x,toggleOpen:g,onApply:M,getFrontProps:Nt,getBackProps:Ft})]})}export{Lt as default};
