import{r as x,j as o,a as K,u as Ee}from"./vendor_react-BC_ZxTUy.js";import{G as Q,a as h,T as C,e as B,S as F,L as Pe,d as Z,A as $}from"./index-Ujh2ofxw.js";import{d as T,i as $e,B as z,u as Oe,j as Be,G as v,e as ee,k as De,S as Ae,l as G}from"./vendor_mui_core-BH2K4FI9.js";import{G as He}from"./GlobalHeader-DginOrxL.js";import{G as ae}from"./GlassCard-oR7-LSvg.js";import{j as ce,D as le,k as de,l as ue,m as Le,n as Te,F as pe,o as xe,f as Ge,N as Ve}from"./vendor_mui_icons-DLCmcMzz.js";import{u as he,G as V,a as fe,C as Ne,g as Ye,b as N,c as qe}from"./layout-D2pbncrX.js";function ge(t){const i=x.useRef([]),e=x.useRef(0),n=x.useRef(!1),a=x.useRef(t);return x.useEffect(()=>{a.current=t},[t]),x.useCallback(({type:r,payload:s})=>{const c=i.current;switch(r){case"next":{if(n.current){const u=c[e.current];return u?{...u}:s}n.current=!0;const p=e.current;if(p+1===c.length){const u=c[p];if(!u)return{...c[0]};const g=a.current(u);g===u||(c.push(g),e.current++)}else e.current++;const l=c[e.current];if(!l)return s;const d={...l};return setTimeout(()=>{n.current=!1},Q.processing.resetDelay),d}case"prev":{if(n.current){const d=c[e.current];return d?{...d}:s}n.current=!0,e.current&&e.current--;const p=c[e.current];if(!p)return s;const l={...p};return setTimeout(()=>{n.current=!1},Q.processing.resetDelay),l}case"clear":i.current=[{...s}],e.current=0}return s},[])}let M=null,D=null,Y=200;function me(t){const i=x.useRef(null),e=x.useRef(t),n=x.useCallback(({repeat:r,speed:s})=>{M!==null&&clearInterval(M),D=r??D,Y=s??Y,i.current=D,e.current=Y,D&&(M=setInterval(D,Y))},[]),a=x.useCallback(()=>{M!==null&&(clearInterval(M),M=null)},[]);return x.useEffect(()=>()=>{M!==null&&(clearInterval(M),M=null)},[]),{create:n,clear:a}}const I=x.createContext(null);function O({text:t,...i}){return o.jsx(T,{...i,sx:[{fontSize:"inherit",fontWeight:"inherit",fontFamily:"inherit",userSelect:"none",lineHeight:1,display:"inline"},...Array.isArray(i.sx)?i.sx:[i.sx]],children:t})}const Ue=ae,Xe=x.memo(function({compact:t=!1}){const i=x.useContext(I);if(!i)return null;const{code:e,index:n}=i;return e===void 0?null:t?o.jsx(U,{Icon:ce,title:"Program",data:[...e],pointer:n}):o.jsx(q,{Icon:ce,title:"Program",data:[...e],pointer:n,children:o.jsx(O,{text:"\xA0"})})}),_e=x.memo(function({compact:t=!1}){const i=x.useContext(I);if(!i)return null;const{tape:e,pointer:n,tapeFlag:a}=i;return a?t?o.jsx(U,{Icon:le,title:"Tape",data:e,pointer:n}):o.jsx(q,{Icon:le,title:"Tape",data:e,pointer:n,children:o.jsx(O,{text:"\xA0"})}):null}),Je=x.memo(function({compact:t=!1}){const i=x.useContext(I);if(!i)return null;const{output:e,outFlag:n}=i;if(!n)return null;const a=Array.isArray(e)?e:[e];return t?o.jsx(U,{Icon:de,title:"Output",data:a}):o.jsx(q,{Icon:de,title:"Output",data:a,children:o.jsx(O,{text:"\xA0"})})}),Ke=x.memo(function({compact:t=!1}){const i=x.useContext(I);if(!i)return null;const{register:e,regFlag:n}=i;return n?t?o.jsx(U,{Icon:ue,title:"Register",data:[e]}):o.jsx(q,{Icon:ue,title:"Register",data:[e],children:o.jsx(O,{text:"\xA0"})}):null});function q({Icon:t,title:i,data:e,pointer:n,children:a}){const r=K.useMemo(()=>e.map((s,c)=>({id:`${i}-${String(c)}`,val:s,ind:c})),[e,i]).map(s=>{const c=n===s.ind?"info":"inherit";return o.jsx(O,{color:c,text:s.val,sx:{fontSize:C.fontSize.body,fontWeight:C.fontWeight.semibold,fontFamily:"monospace"}},s.id)});return o.jsxs(z,{sx:{height:"100%"},children:[o.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:1,marginBottom:1},children:[o.jsx(t,{sx:{color:h.primary.main}}),o.jsx(T,{variant:"subtitle2",sx:{color:h.primary.main,fontWeight:C.fontWeight.semibold,fontSize:C.fontSize.body},children:i})]}),o.jsxs(Qe,{children:[r,a]})]})}function U({Icon:t,title:i,data:e,pointer:n}){const a=K.useMemo(()=>e.map((r,s)=>({id:`${i}-${String(s)}`,val:r,ind:s})),[e,i]).map(r=>{const s=n===r.ind?"info":"inherit";return o.jsx($e,{label:String(r.val),size:"small",sx:{backgroundColor:s==="info"?h.primary.main:h.surface.glass,color:h.text.primary,fontFamily:"monospace",fontSize:C.fontSize.caption,height:"32px",border:`1px solid ${h.border.subtle}`,backdropFilter:"blur(24px) saturate(180%)"}},r.id)});return o.jsxs(Ue,{sx:{height:"100%",minHeight:"24rem"},children:[o.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:1,marginBottom:1},children:[o.jsx(t,{sx:{color:h.primary.main,fontSize:C.fontSize.body}}),o.jsx(T,{variant:"caption",sx:{color:h.primary.main,fontWeight:C.fontWeight.semibold,fontSize:C.fontSize.caption},children:i})]}),o.jsx(z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a})]})}function Qe({children:t}){return o.jsx(ae,{sx:{overflowX:"auto",width:"100%",maxWidth:"100%",height:"60px",display:"flex",flexDirection:"column",justifyContent:"center",padding:2},children:o.jsx(z,{sx:{display:"flex",alignItems:"center",gap:1,width:"max-content",minWidth:0},children:t})})}function Ze(){const t=x.useContext(I),i=Oe("(min-width:650px)"),e=(t==null?void 0:t.pause)??!1,n=x.useMemo(()=>(t==null?void 0:t.dispatch)??(()=>{}),[t]),a=(t==null?void 0:t.fastForward)??!1,r=x.useMemo(()=>e?o.jsx(B,{title:"Run",onClick:n("run"),Icon:Le},"Run"):o.jsx(B,{title:"Pause",onClick:n("stop"),Icon:Te},"Pause"),[n,e]);if(!t)return[];const s={Reset:{icon:pe,action:"reset",flag:!0},"Fast Forward":{icon:xe,flag:a,action:"ff"},Previous:{icon:Ve,flag:i,action:"prev"},Next:{icon:Ge,flag:i,action:"next"}},c=[],p=s["Fast Forward"]??{icon:xe,flag:!1};return c.push(r),c.push(o.jsx(B,{title:"Reset",Icon:pe,onClick:n("reset")},"Reset")),c.push(o.jsx(B,{title:"Fast Forward",Icon:p.icon,onClick:p.flag?n("ff"):void 0,disabled:!p.flag,sx:{opacity:p.flag?1:.3,"&.Mui-disabled":{color:"inherit",opacity:.3}}},"Fast Forward")),["Previous","Next"].forEach(l=>{const d=s[l];if(!d)return;const{icon:u,flag:g,action:f}=d;f&&g&&c.push(o.jsx(B,{title:l,Icon:u,onClick:n(f)},l))}),c}function be(t,i){const{type:e,payload:n}=i;let a={};const{dispatch:r,create:s,clear:c}=n,p=(function(m){return(b,k)=>{const{nextIter:S,clear:j}=m;return k&&j(),{...S({type:b,payload:m}),select:null}}})(n),l=()=>{r({type:"timer",payload:n})},d=!1,u=!0,g=!0,f=!0;switch(e){case"run":s({repeat:l,speed:Q.timer.defaultSpeed}),a.pause=d;break;case"timer":{const m=t.end?"stop":"next";r({type:m,payload:n});break}case"stop":c(),a.pause=u;break;case"reset":window.confirm("Are you sure you want to reset the code?")&&(a=p("clear",!0),a.pause=g);break;case"prev":a=p("prev",!0),a.pause=f;break;case"next":a=p("next",!1);break;case"share":{const m=window.location.href;navigator.clipboard.writeText(m);break}}return a}function ye({value:t,readOnly:i=!1,infoLabel:e="Program code",fillValue:n="Hello, World!",placeholder:a,handleChange:r}){const s=x.useContext(I);if(!s)throw new Error("TextArea must be used within EditorContext.Provider");const{height:c}=s,p=he("md"),l=Math.floor(c/(p?24:32)),d=t!==void 0?{value:t||"",onChange:r}:{defaultValue:n,onChange:r};return o.jsx(Be,{variant:"outlined",label:e,placeholder:a,slotProps:{inputLabel:{shrink:!0},htmlInput:{readOnly:i}},fullWidth:!0,multiline:!0,rows:l,...d,sx:{"& .MuiInputBase-root":{alignItems:"flex-start",backgroundColor:h.surface.glass,backdropFilter:"blur(24px) saturate(180%)",borderRadius:F.borderRadius.md,border:`1px solid ${h.border.subtle}`},"& .MuiInputBase-input":{fontFamily:"monospace",color:"text.primary","&::placeholder":{opacity:.6,color:"text.secondary"}},"& .MuiOutlinedInput-notchedOutline":{borderColor:h.border.subtle},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:h.border.subtle},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.light"},"& .MuiInputLabel-root":{color:"text.secondary"},"& .MuiInputLabel-root.Mui-focused":{color:"primary.light"}}})}function ve({container:t,sideProps:i={},hide:e=!1,navigation:n,children:a}){const r=x.useContext(I);if(!r)throw new Error("Editor must be used within EditorContext.Provider");const{tapeFlag:s,outFlag:c,regFlag:p,code:l}=r;let d,u;e?(d="none",u=12):(u={xs:6,md:8},d="flex");const g={flex:{xs:"none",md:1},spacing:2,ref:t,container:!0,display:"flex",alignItems:"center",sx:{overflowY:"hidden",height:{xs:l!==void 0?V.layout.editorHeight.xs.withCode:V.layout.editorHeight.xs.withoutCode,md:"auto"}}};return o.jsxs(v,{container:!0,spacing:2,minHeight:{xs:"50vh",md:"auto"},height:{xs:"auto",md:`calc(100vh - ${Pe.headerHeight.md.toString()}px)`},direction:"column",wrap:"nowrap",padding:V.layout.padding,sx:{background:h.surface.background,position:"relative",boxSizing:"border-box",width:"100% !important",margin:"0 !important",display:"flex",flexDirection:"column",overflowY:"auto",height:"100%"},children:[o.jsxs(v,{container:!0,alignItems:"center",direction:{xs:"column",md:"row"},justifyContent:"space-between",sx:{mb:{xs:2,md:0},gap:{xs:2,md:0}},children:[o.jsx(v,{size:"grow",display:"flex",alignItems:"center",justifyContent:{xs:"center",md:"flex-start"},sx:{width:"100%"},children:o.jsx(T,{variant:"h4",sx:{fontSize:C.fontSize.h2,fontWeight:C.fontWeight.semibold,paddingLeft:{xs:0,md:2},flexShrink:0},children:"Interpreters"})}),o.jsxs(v,{display:"flex",alignItems:"center",gap:1,size:"auto",justifyContent:{xs:"center",md:"flex-end"},sx:{paddingRight:1,width:{xs:"100%",md:"auto"}},children:[o.jsx(Ze,{}),n&&o.jsx(z,{sx:{flexShrink:0},children:n})]})]}),o.jsxs(v,{...g,children:[o.jsx(v,{size:u,children:a}),o.jsx(v,{display:d,size:{xs:6,md:4},children:o.jsx(ye,{...i})})]}),o.jsx(v,{size:{xs:12},sx:{minHeight:[l!==void 0,s,c,p].filter(Boolean).length>0?{xs:"auto",md:V.layout.fieldsMinHeight.md}:0,flexShrink:0},children:o.jsx(v,{container:!0,spacing:2,sx:{width:"100%",maxWidth:"100%"},children:(()=>{const f=[],m={xs:12,md:6};return l!==void 0&&f.push(o.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:o.jsx(Xe,{})},"program")),s&&f.push(o.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:o.jsx(_e,{})},"tape")),c&&f.push(o.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:o.jsx(Je,{})},"output")),p&&f.push(o.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:o.jsx(Ke,{})},"register")),f})()})})]})}let te=null;function et(t,i){const{type:e,payload:n}=i,{nextIter:a,clear:r,create:s,dispatch:c}=n;let p={};switch(e){case"ff":{const l=()=>{c({type:"timer",payload:n})};t.pause?(p={pause:!1},s({repeat:l,speed:50})):(r(),p={pause:!1},s({repeat:l,speed:10}));break}case"edit":{const{newText:l,clean:d}=n;l!==void 0&&d&&(p={...t,text:l,code:d(l)},r(),a({type:"clear",payload:p}),p.pause=!0);break}default:p=be(t,i)}return{...t,...p}}function ke({name:t,start:i,runner:e,clean:n,tape:a,output:r,register:s,navigation:c}){const p=K.useRef(null),l=fe(p),[d,u]=x.useReducer(et,{...i,pause:!0,text:"",code:""}),{create:g,clear:f}=me(200),m=ge(e);x.useEffect(()=>{document.title=Z.interpreter(t)},[t]);const b=x.useCallback(y=>{u({type:"edit",payload:{newText:y.target.value,clean:n,nextIter:m,clear:f,create:g,dispatch:u}})},[n,m,f,g,u]),k=x.useCallback(y=>{b(y)},[b]),S=x.useCallback(y=>{if(typeof y=="string")return()=>{u({type:y,payload:{start:i,nextIter:m,dispatch:u,create:g,clear:f}})};u({type:y.type,payload:{...y.payload,start:i,nextIter:m,dispatch:u,create:g,clear:f}})},[i,m,g,f,u]),j=x.useMemo(()=>{let{height:y}=l;return y===0&&te!==null&&(y=te.height),{name:t,tapeFlag:a??!1,outFlag:r??!1,regFlag:s??!1,code:d.code?Array.from(d.code):[],index:d.index||0,tape:d.tape??[],pointer:d.pointer||0,output:d.output??"",register:d.register||0,height:y,size:0,dispatch:S,fastForward:!0,pause:d.pause??!1}},[l,t,a,r,s,d.code,d.index,d.tape,d.pointer,d.output,d.register,d.pause,S]);return x.useEffect(()=>{l.height>0&&(te={height:l.height})},[l.height]),o.jsx(I.Provider,{value:j,children:o.jsx(ve,{hide:!0,container:p,sideProps:{readOnly:!0,infoLabel:"RISC-V Equivalent",fillValue:"addi x0, x0, 0",value:""},navigation:c,children:o.jsx(ye,{value:d.text,placeholder:"Enter your code here...",handleChange:k})})})}function tt({navigation:t}){const i=x.useCallback(n=>(function(a){let{pointer:r,index:s,tape:c,end:p}=a;const{code:l}=a;if(p){if(c[r]===void 0||!c[r])return a;p=!1}if(s===l.length)return{...a,index:0,end:!0};const d=l[s++];if(c=[...c],d==="+"){const u=c[r];u!==void 0&&(c[r]=u+1)}else if(c[r])if(d==="-"){const u=c[r];u!==void 0&&(c[r]=u-1)}else d===">"?c.length===++r&&c.push(1):r&&r--;return{pointer:r,index:s,code:l,tape:c,end:p}})(n),[]),e=x.useCallback(n=>(function(a){let r="";for(const s of a)"+-><".includes(s)&&(r+=s);return r})(n),[]);return o.jsx(ke,{name:"Stun Step",start:{pointer:0,index:0,tape:[0],end:!1,code:""},runner:i,clean:e,tape:!0,navigation:t})}function rt({navigation:t}){const i=x.useCallback(n=>(function(a){let{register:r,pointer:s,output:c,index:p,tape:l,end:d}=a;const{code:u}=a;if(d&&(d=!1),p===u.length)return{...a,index:0,end:!0};const g=u[p++];switch(l=[...l],g){case">":l.length===++s&&l.push(0);break;case"<":{const f=l[s];f!==void 0&&(r+=f),s=0;break}case"!":{const f=l[s];if(f!==void 0){const m=f-(r-1);l[s]=m<0?0:m}r=0,s=0;break}case",":{const f=prompt("Input: ");r=f!=null&&f.length?f.charCodeAt(0):0;break}case".":r>0&&(c+=String.fromCharCode(r-1))}return{register:r,pointer:s,output:c,index:p,code:u,tape:l,end:d}})(n),[]),e=x.useCallback(n=>(function(a){let r="";for(const s of a)"><!,.".includes(s)&&(r+=s);return r})(n),[]);return o.jsx(ke,{name:"Suffolk",start:{register:0,pointer:0,output:"",index:0,tape:[0],end:!1,code:""},runner:i,clean:e,tape:!0,output:!0,register:!0,navigation:t})}function nt({handleClick:t,chooseColor:i,options:e,rows:n,cols:a}){const r=x.useContext(I);if(!r)throw new Error("GridArea must be used within EditorContext.Provider");const{size:s}=r,c=x.useMemo(()=>({primary:{bg:h.surface.glass,text:h.primary.main,border:`1px solid ${h.primary.main}`,hover:h.interactive.selected},info:{bg:h.interactive.focus,text:h.text.primary,border:`1px solid ${h.primary.main}`,hover:h.interactive.hover},secondary:{bg:h.surface.glass,text:h.text.secondary,border:`1px solid ${h.border.subtle}`,hover:h.interactive.selected}}),[]),p=x.useMemo(()=>l=>c[l]??c.secondary,[c]);return o.jsx(Ne,{cellProps:(l,d)=>{const u=a*l+d,g=i(u),f=e[u]??" ",m=p(g);return{color:m.text,backgroundColor:m.bg,onClick:t(u),children:o.jsx(O,{text:f}),sx:{borderRadius:F.borderRadius.md,cursor:"pointer",transition:$.transition,...$.presets.glass,border:m.border,"&:hover":{backgroundColor:m.hover}}}},size:s,rows:n,cols:a})}const ot=({keys:t,onSelect:i})=>o.jsx(z,{sx:{width:"100%",padding:"16px",background:h.surface.glass,borderTop:`1px solid ${h.border.subtle}`,backdropFilter:"blur(24px) saturate(180%)",position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:o.jsxs(v,{container:!0,spacing:.5,justifyContent:"center",sx:{maxWidth:"468px",width:"100%"},children:[t.map(e=>o.jsx(v,{children:o.jsx(ee,{variant:"contained",onClick:()=>{i(e)},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:h.surface.glass,color:h.text.primary,borderRadius:F.borderRadius.sm,border:`1px solid ${h.border.subtle}`,"&:hover":{background:h.interactive.hover}},children:e===" "?"\u2423":e})},e)),o.jsx(v,{children:o.jsx(ee,{variant:"contained",onClick:()=>{i("Backspace")},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:h.surface.glass,color:h.text.primary,borderRadius:F.borderRadius.sm,border:`1px solid ${h.border.subtle}`,"&:hover":{background:h.interactive.hover}},children:"\u232B"})}),o.jsx(v,{children:o.jsx(ee,{variant:"contained",onClick:()=>{i("Escape")},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:h.surface.glass,color:h.data.red,borderRadius:F.borderRadius.sm,border:`1px solid ${h.border.subtle}`,"&:hover":{background:h.interactive.hover}},children:"\u2715"})})]})});function st(t,i){const{type:e}=i;let n={};switch(e){case"edit":n=(function(a,r){let s,{grid:c,select:p}=a;const{key:l,resetState:d}=r;if(p===null)return{};if(l.includes("Arrow")){const f=Ye(l),{rows:m,cols:b}=a;return p=N(p,f,m,b),{select:p}}if(l==="Backslash"||l==="\\")s="\\";else if(l.length===1)s=l;else{if(l!=="Backspace"&&l!=="Delete")return{};s=" "}const u=c.slice(0,p),g=c.slice(p+1);return c=u+s+g,d(c),{grid:c,pause:!0}})(t,i.payload);break;case"resize":n=(function(a,r){const{resetState:s,...c}=r;let{grid:p}=a;const{rows:l,cols:d}=a;let u="";const{rows:g,cols:f}=c;g!==void 0&&g>l&&(p+=" ".repeat((g-l)*d));const m=g??l,b=f??d;for(let k=0;k<m;k++){const S=k*d;let j=S;j+=f!==void 0&&f>d?d:f??d,u+=p.substring(S,j).padEnd(b," ")}return s(u),{...c,grid:u,pause:!0}})(t,i.payload);break;case"click":{const{select:a}=i.payload;n=a===t.select?{select:null}:{select:a};break}case"delete":{const{tape:a,pointer:r}=t;r>0&&a[r]===0&&t.pointer--;break}default:n=be(t,i)}return{...t,...n}}let re=null;function je(t){const{create:i,clear:e}=(function(){const w=x.useRef(null),_=x.useCallback(P=>{w.current=P,document.addEventListener("keydown",P)},[]),W=x.useCallback(P=>{const E=P??w.current;E&&document.removeEventListener("keydown",E)},[]);return x.useEffect(()=>()=>{w.current&&document.removeEventListener("keydown",w.current)},[]),{create:_,clear:W}})(),{name:n,start:a,tape:r,output:s,register:c,navigation:p,keys:l=[]}=t,d=x.useRef(null);let{height:u,width:g}=fe(d);const f=he("md"),m=f?4:6;u=(u||400)*(f?1:.8),g=.95*(g||600);const{rows:b,cols:k}=x.useMemo(()=>!d.current&&re?re:qe(m,u,g),[m,u,g]);x.useEffect(()=>{d.current&&b>0&&k>0&&(re={rows:b,cols:k})},[b,k]);const S={...a,grid:" ".repeat(b*k),select:null,pause:!0,rows:b,cols:k},[j,y]=x.useReducer(st,S),{resetState:A,handleClick:Ce,chooseColor:Ie,wrapDispatch:Se}=(function(w,_,W){const{runner:P,start:E}=_,{rows:ne,cols:oe}=w,{create:se,clear:H}=me(200),L=ge(P),J=x.useCallback(R=>(H(),L({type:"clear",payload:{...E,grid:R,rows:ne,cols:oe}})),[E,H,L,ne,oe]),Me=x.useCallback(R=>()=>{W({type:"click",payload:{select:R}})},[W]),Re=x.useCallback(R=>{const{position:ie,select:We}=w;return R===We?"primary":ie!==null&&R===ie?"info":"secondary"},[w]),Fe=x.useCallback(R=>()=>{W({type:R,payload:{start:E,resetState:J,nextIter:L,dispatch:W,create:se,clear:H}})},[J,L,W,se,H,E]);return{resetState:J,handleClick:Me,chooseColor:Re,wrapDispatch:Fe}})(j,t,y);x.useEffect(()=>{y({type:"resize",payload:{rows:b,cols:k,resetState:A}})},[b,k,A]);const X=x.useCallback(w=>{w!=="Escape"?y({type:"edit",payload:{key:w,resetState:A}}):j.select!==null&&y({type:"click",payload:{select:j.select}})},[A,j.select]);x.useEffect(()=>(document.title=Z.interpreter(n),i(w=>{X(w.key)}),()=>{e()}),[n,i,X,e]);const ze={name:n,size:m,...j,dispatch:Se,tapeFlag:r??!1,outFlag:s??!1,regFlag:c??!1,height:u,index:0,tape:[],pointer:0,output:j.output??"",register:0,code:void 0,fastForward:!1,pause:j.pause};return o.jsxs(I.Provider,{value:ze,children:[o.jsx(ve,{hide:!0,container:d,navigation:p,children:o.jsx(nt,{rows:b,cols:k,options:j.grid.split(""),handleClick:Ce,chooseColor:Ie})}),f&&j.select!==null&&o.jsx(ot,{keys:l,onSelect:X})]})}function we(t,i,e){let n=t,a=i;const r=n%e,s=a%e;n-=r,a-=s;const c=Math.abs(n-a);return Math.floor(c/e)+Math.abs(r-s)}function it(t,i,e){const n=[];for(let r=0;r<i.length;r++)i[r]==="@"&&n.push(r);if(n.length===1)return t;const a=(function(r,s){return(c,p)=>we(r,c,s)-we(r,p,s)})(t,e);return n.sort(a),n[1]??t}function at(t){const i="^<>v";let{position:e,velocity:n,output:a,register:r,end:s}=t;const{grid:c,rows:p,cols:l}=t;if(s)return t;if(e==null){const u=c.indexOf("!"),g=c.lastIndexOf("!");if(u===-1||u!==g)return{...t,end:!0};e=u}const d=c[e];if(d===void 0)return t;if(i.includes(d)){const u=i.indexOf(d);n=u%2+1,u<2&&(n-=3)}else+d&&(r=+d);switch(d){case"|":n*=-1;break;case"@":e=it(e,c,l),e-=l,e<0&&(e+=p*l);break;case"+":r++;break;case"-":r--;break;case"*":r*=2;break;case"s":r*=r;break;case"/":r=Math.floor(r/2);break;case"~":a+=String.fromCharCode(r);break;case"?":{const u=4*Math.random(),g=Math.floor(u);n=g-2+(g>1?1:0);break}case".":e=null,s=!0}return e!==null&&d!=="@"&&(e=N(e,n,p,l)),{...t,position:e,velocity:n,grid:c,output:a,register:r,end:s,rows:p,cols:l}}function ct({navigation:t}){return o.jsx(je,{name:"WII2D",start:{position:null,velocity:-2,end:!1,output:"",register:0},runner:at,output:!0,register:!0,navigation:t,keys:["^","<",">","v","|","'",'"',"@","+","-","*","s","/","~","?",".","!","0","1","2","3","4","5","6","7","8","9"]})}function lt(t){let{velocity:i,position:e,pointer:n,tape:a}=t;const{grid:r,rows:s,cols:c,end:p}=t;if(p||e==null)return t;const l=i>0?3:-3,d=r[e];switch(a=[...a],d){case"\\":i=l-i;break;case"/":i-=l;break;case"<":n&&n--;break;case">":++n===a.length&&a.push(0);break;case"-":{const u=a[n];u!==void 0&&(a[n]=1^u);break}case"+":{let u;if(!a[n])do e=N(e,i,s,c),u=r[e]??"";while(!"\\/<>-+*".includes(u));break}}return e=N(e,i,s,c),{...t,velocity:i,position:e,pointer:n,grid:r,tape:a,rows:s,cols:c,end:p}}function dt({navigation:t}){return o.jsx(je,{name:"Back",start:{velocity:1,pointer:0,position:0,tape:[0],end:!1},runner:lt,tape:!0,navigation:t,keys:["\\","/","<",">","-","+","*"]})}const ut=({active:t,onChange:i})=>o.jsx(De,{size:"small",sx:{minWidth:{xs:140,sm:160},"& .MuiOutlinedInput-root":{...$.presets.glass,borderRadius:F.borderRadius.full,color:h.text.primary,fontWeight:C.fontWeight.medium,transition:$.transition,"& fieldset":{border:`1px solid ${h.border.subtle}`},"&:hover fieldset":{borderColor:h.primary.main},"&.Mui-focused fieldset":{borderColor:h.primary.main,boxShadow:`0 0 0 2px ${h.primary.main}22`}},"& .MuiSelect-select":{py:1,px:{xs:2,sm:3}},"& .MuiSvgIcon-root":{color:h.text.secondary}},children:o.jsxs(Ae,{value:t,onChange:e=>{i(e.target.value)},MenuProps:{autoFocus:!1,BackdropProps:{sx:{backdropFilter:"none",backgroundColor:"transparent"}},PaperProps:{sx:{...$.presets.glass,borderRadius:F.borderRadius.lg,mt:1,"& .MuiMenuItem-root":{color:h.text.secondary,fontSize:"0.9rem",transition:$.transition,"&:hover":{backgroundColor:h.interactive.hover,color:h.text.primary},"&.Mui-selected":{backgroundColor:h.interactive.selected,color:h.primary.main,fontWeight:"bold","&:hover":{backgroundColor:h.interactive.selected}}}}}},children:[o.jsx(G,{value:"stun-step",children:"Stun Step"}),o.jsx(G,{value:"suffolk",children:"Suffolk"}),o.jsx(G,{value:"wii2d",children:"WII2D"}),o.jsx(G,{value:"back",children:"Back"})]})});function pt(){const[t,i]=Ee(),e=t.get("type")??"stun-step";x.useEffect(()=>{document.title=Z.interpreters},[]);const n=s=>{i({type:s})},a=`https://esolangs.org/wiki/${(r=e,{"stun-step":"Stun Step",suffolk:"Suffolk",wii2d:"WII2D",back:"Back"}[r]??"Stun Step").replace(" ","_")}`;var r;return o.jsxs(z,{sx:{height:{xs:"100dvh",md:"100vh"},width:"100%",boxSizing:"border-box",background:h.surface.background,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},children:[o.jsx(He,{showHome:!0,infoUrl:a}),o.jsx(z,{sx:{width:"100%",maxWidth:F.maxWidth.lg,margin:"0 auto",flex:1,display:"flex",justifyContent:"center",overflow:"hidden",boxSizing:"border-box"},children:(()=>{const s=o.jsx(ut,{active:e,onChange:n});switch(e){case"stun-step":default:return o.jsx(tt,{navigation:s});case"suffolk":return o.jsx(rt,{navigation:s});case"wii2d":return o.jsx(ct,{navigation:s});case"back":return o.jsx(dt,{navigation:s})}})()})]})}export{pt as default};
