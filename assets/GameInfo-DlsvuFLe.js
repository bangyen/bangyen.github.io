import{r as e,j as t}from"./vendor_react-CPTKWKBb.js";import{g as n,G as o,T as i,a as s,L as r,S as a,c as l,A as c,R as d,e as u,C as f,E as m}from"./index-Di-8lv-r.js";import{B as x,P as h,G as p,d as g,u as b,M as S,j as y,I as w,e as z}from"./vendor_mui_core-CC-Vzdtj.js";import{m as v,n as j,M as C,E as R,j as O,o as I,p as k}from"./vendor_mui_icons-Dxxzao0W.js";import{G as D,P as E,t as M}from"./PageLayout-BhLrZQpp.js";import{F as P}from"./FeatureErrorFallback-DnyGN_Ht.js";const T=e.memo(function({size:n,children:r,...a}){const l=`${n.toString()}rem`,c=`${(n/o.cellSize.divisor).toString()}rem`,{backgroundColor:d,color:u,boxShadow:f,border:m,opacity:h,transition:p=!0,sx:g,...b}=a,S=!1===p?"none":"string"==typeof p?p:"background-color 200ms ease, color 200ms ease, opacity 200ms ease, transform 200ms ease, border-radius 200ms ease",y=e.useMemo(()=>({...s.flexCenter,borderRadius:c,height:l,width:l,fontSize:`${(n*o.cellSize.fontSizeMultiplier).toString()}rem`,fontWeight:i.fontWeight.semibold,fontFamily:"monospace"}),[c,l,n]);return t.jsx(x,{role:"gridcell",...y,...b,sx:{backgroundColor:d,color:u,boxShadow:f,border:m,opacity:h,transition:S,...g},children:r})}),A=e.memo(function({cols:n,size:o,index:i,spacing:s,cellProps:r}){return t.jsx(x,{role:"row",sx:{display:"flex",gap:s,justifyContent:"center"},children:Array.from({length:n},(t,n)=>e.createElement(T,{...r(i,n),key:`${i.toString()}_${n.toString()}`,size:o}))})}),L=e.memo(function({size:e,rows:o,cols:i,cellProps:s,space:r,sx:a,...l}){const c=n(e),d=`${(r??c).toString()}rem`;return t.jsx(x,{role:"grid","aria-label":`Grid with ${o.toString()} rows and ${i.toString()} columns`,sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:d,...a},...l,children:Array.from({length:o},(n,o)=>t.jsx(A,{index:o,cols:i,size:e,spacing:d,cellProps:s},`row_${o.toString()}`))})});function $(e){const{overlayProps:n,cellProps:o,size:i,rows:s,cols:a,cellRows:l=s,cellCols:c=a,overlayLayerSx:d,cellLayerSx:u}=e,f=d&&"pointerEvents"in d&&"none"===d.pointerEvents,m=u&&"pointerEvents"in u&&"none"===u.pointerEvents;return t.jsxs(x,{sx:{display:"grid",placeItems:"center"},children:[t.jsx(x,{sx:{gridArea:"1/1",...u},children:t.jsx(L,{space:0,size:i,rows:l,cols:c,cellProps:o,...m?{role:"presentation","aria-hidden":!0}:{}})}),t.jsx(x,{sx:{gridArea:"1/1",zIndex:r.zIndex.base+1,...d},children:t.jsx(L,{space:0,size:i,rows:s,cols:a,cellProps:n,...f?{role:"presentation","aria-hidden":!0}:{}})})]})}function W({children:e,...n}){return t.jsx(h,{elevation:0,component:"nav",role:"navigation","aria-label":"Game controls navigation",onClick:e=>{e.stopPropagation()},sx:{transform:"translateX(-50%)",position:"absolute",bottom:a.padding.xl,left:"50%",zIndex:r.zIndex.navigation,...c.presets.glass,borderRadius:a.borderRadius.lg,boxShadow:l.lg,padding:`${a.padding.sm} ${a.padding.lg}`,...n},children:t.jsx(p,{container:!0,spacing:2,sx:{...s.flexCenter,flexWrap:"nowrap",minWidth:0},children:e})})}function B({rows:e,cols:n,dynamicSize:o,minSize:i,maxSize:s,handlePlus:r,handleMinus:a,onRefresh:l,disabled:c=!1,onOpenInfo:f,hidden:m=!1,children:x}){if(m)return null;const h=Math.min(e,n)<=i,p=Math.min(e,n)>=s||Math.min(e,n)>=Math.min(o.rows,o.cols);return t.jsxs(W,{children:[t.jsx(d,{onClick:l}),t.jsx(u,{title:"Decrease Size",Icon:v,onClick:a,disabled:c||h}),t.jsx(u,{title:"Increase Size",Icon:j,onClick:r,disabled:c||p}),f&&t.jsx(u,{title:"How to Play",Icon:C,onClick:f}),x]})}function F({show:e,onReset:n,size:o,iconSizeRatio:i,primaryColor:s,secondaryColor:r,useSecondary:l=!1,showLabel:c=!0}){const d=l?r:s;return t.jsx(x,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:e?1:0,transform:e?"scale(1)":"scale(0.5)",visibility:e?"visible":"hidden",transition:"all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",zIndex:10,backgroundColor:"transparent",pointerEvents:"none"},children:o>0&&t.jsxs(D,{padding:a.padding.md,sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1.5,height:"auto",width:"auto",maxWidth:"80%"},children:[t.jsx(R,{sx:{fontSize:`${(o*i*.6).toString()}rem`,color:d,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.1))"}}),c&&t.jsx(g,{variant:"h6",sx:{color:f.text.primary,fontWeight:600,letterSpacing:"0.02em"},children:"Solved!"})]})})}const G={gridSizes:{mobile:2.5,desktop:4},timing:{winAnimationDelay:2e3,interactionDelay:500,touchHoldDelay:500},layout:{headerHeight:{mobile:64,desktop:80}}},H={PADDING:{MOBILE:"30px",DESKTOP:"36px"},BORDER_RADIUS:"24px",BORDER:"2px solid transparent",SHADOW:"0 2px 4px rgba(0,0,0,0.2)",DROP_SHADOW:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"};function N(e){return{SIZE:`${e}-size`,STATE:`${e}-state`}}const _={paddingOffset:0,boardMaxWidth:1200,boardSizeFactor:.94,maxCellSize:80,remBase:16},K={defaultSize:null,minSize:3,maxSize:10,mobileRowOffset:2,headerOffset:G.layout.headerHeight,paddingOffset:0,widthLimit:1300,cellSizeReference:{mobile:G.gridSizes.mobile,desktop:G.gridSizes.desktop}};function U({children:e,controls:n,infoUrl:o,background:i=f.surface.background,paddingBottom:s={xs:"80px",md:"120px"},contentSx:r={},showTrophy:a=!1,onReset:l,boardSize:c=0,iconSizeRatio:d=1,primaryColor:u=f.primary.main,secondaryColor:h=f.primary.main,useSecondaryTrophy:p=!1,boardSx:g,onClick:b}){return t.jsx(m,{FallbackComponent:P,fallbackProps:{title:"Game Error",resetLabel:"Reset Game"},children:t.jsxs(E,{infoUrl:o,background:i,containerSx:{height:"100vh",transition:"background 0.5s ease-in-out",cursor:b?"pointer":"inherit"},sx:{justifyContent:"center",alignItems:"center"},onClick:b,children:[t.jsx(x,{sx:[{flex:1,position:"relative",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden",pb:s},...M(r)],children:t.jsxs(x,{sx:[{position:"relative",width:"fit-content",userSelect:"none",padding:{xs:H.PADDING.MOBILE,sm:H.PADDING.DESKTOP},borderRadius:H.BORDER_RADIUS,border:H.BORDER},...M(g)],children:[e,t.jsx(F,{show:a,onReset:l,size:c,iconSizeRatio:d,primaryColor:u,secondaryColor:h,useSecondary:p})]})}),n]})})}function J({storageKey:t,rows:n,cols:o,state:i,onRestore:s,serialize:r,deserialize:a,enabled:l=!0,saveDebounceMs:c=300}){const d=`${t}-${String(n)}x${String(o)}`,u=e.useRef(s),f=e.useRef(a),m=e.useRef(r);e.useEffect(()=>{u.current=s,f.current=a,m.current=r}),e.useEffect(()=>{if(!l)return;const e=localStorage.getItem(d);if(e)try{const t=JSON.parse(e),n=f.current??(e=>e);u.current(n(t))}catch{localStorage.removeItem(d)}},[d,l]),e.useEffect(()=>{if(!l)return;const e=setTimeout(()=>{const e=(m.current??(e=>e))(i);localStorage.setItem(d,JSON.stringify(e))},c);return()=>{clearTimeout(e)}},[d,i,l,c])}function X(){const{innerWidth:e,innerHeight:t}=globalThis;return{width:e,height:t}}function Y(){const{size:t}=function(t){const[n,o]=e.useState(t());return e.useEffect(()=>{function e(){o(t())}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[t]),{size:n,setSize:o}}(X);return t}function Z(e){return b(t=>t.breakpoints.down(e))}function q({storageKey:t,defaultSize:n,minSize:o=2,maxSize:i=10,headerOffset:s,paddingOffset:r=0,widthLimit:a=1300,cellSizeReference:l,mobileRowOffset:c=0}){const{height:d,width:u}=Y(),f=Z("sm"),[m,x]=e.useState(()=>{const e=localStorage.getItem(t);return"null"===e?null:e?Number.parseInt(e,10):n}),h=e.useMemo(()=>{const e=f?s.mobile:s.desktop,t="number"==typeof l?l:f?l.mobile:l.desktop,n="number"==typeof r?0:r.x,i="number"==typeof r?r:r.y,m=function(e,t,n){const o=16*e;return{rows:Math.floor(t/o),cols:Math.floor(n/o)}}(t,d-e-i,Math.min(u,a)-n);let x=m.rows-1;const h=m.cols-1;return f&&(x+=c),{rows:Math.max(o,x),cols:Math.max(o,h)}},[l,d,u,f,s,r,a,o,c]),{rows:p,cols:g}=e.useMemo(()=>{if(null===m)return h;const e=f?Math.max(0,c+1):0;return{rows:Math.min(m+e,h.rows),cols:Math.min(m,h.cols)}},[m,h,f,c]);e.useEffect(()=>{localStorage.setItem(t,String(m))},[m,t]);return{rows:p,cols:g,dynamicSize:h,handlePlus:()=>{const e=Math.min(p,g);null!==m&&e<Math.min(h.rows,h.cols)&&e<i&&x(e+1)},handleMinus:()=>{const e=Math.min(p,g);if(null===m){const e=Math.min(h.rows,h.cols);h.rows===h.cols?x(Math.max(o,e-1)):x(e)}else e>o&&x(e-1)},desiredSize:m,setDesiredSize:x,mobile:f,width:u,height:d,minSize:o,maxSize:i}}function Q({storageKey:t,pageTitle:n,defaultSize:o=null,minSize:i,maxSize:s,headerOffset:r,gridPadding:a,widthLimit:l,cellSizeReference:c,mobileRowOffset:d,boardPadding:u,boardMaxWidth:f,boardSizeFactor:m,maxCellSize:x,remBase:h,rowOffset:p,colOffset:g,reducer:b,getInitialState:S,isSolved:y,winAnimationDelay:w=G.timing.winAnimationDelay,persistence:z,manualResize:v=!1,onNext:j}){const C=N(t),R={...K,defaultSize:o,minSize:i??K.minSize,maxSize:s??K.maxSize,headerOffset:r??K.headerOffset,paddingOffset:a??K.paddingOffset,widthLimit:l??K.widthLimit,cellSizeReference:c??K.cellSizeReference,mobileRowOffset:d??K.mobileRowOffset},O=e.useMemo(()=>({..._,paddingOffset:u??_.paddingOffset,boardMaxWidth:f??_.boardMaxWidth,boardSizeFactor:m??_.boardSizeFactor,maxCellSize:x??_.maxCellSize,remBase:h??_.remBase,rowOffset:p,colOffset:g}),[u,f,m,x,h,p,g]),{rows:I,cols:k,dynamicSize:D,handlePlus:E,handleMinus:M,mobile:P,width:T,height:A,minSize:L,maxSize:$}=q({storageKey:C.SIZE,...R}),W=e.useRef(null);null===W.current&&(W.current=S(I,k));const[B,F]=e.useReducer(b,W.current),H=e.useMemo(()=>y(B),[B,y]),U=e.useCallback(()=>{F({type:"new"})},[F]),X=j??U;var Y;J({storageKey:C.STATE,rows:I,cols:k,state:B,onRestore:e=>{F({type:"hydrate",state:e})},...z}),function(t,n,o=2e3){const i=e.useRef(n);i.current=n,e.useEffect(()=>{if(t){const e=setTimeout(()=>{i.current()},o);return()=>{clearTimeout(e)}}},[t,o])}(H,X,w),Y=n,e.useEffect(()=>{document.title=Y},[Y]),e.useEffect(()=>{v||F({type:"resize",rows:I,cols:k,newRows:I,newCols:k})},[I,k,F,v]);const Z=e.useMemo(()=>{const e="function"==typeof O.paddingOffset?O.paddingOffset(P):O.paddingOffset;return function({rows:e,cols:t,width:n,height:o,mobile:i,headerOffset:s,paddingOffset:r,boardMaxWidth:a,boardSizeFactor:l,maxCellSize:c,remBase:d}){const u=i?s.mobile:s.desktop,f="number"==typeof r?0:r.x,m="number"==typeof r?r:r.y,x=(Math.min(n,a)-f)*l,h=(o-u-m)*l;return Math.min(x/t,h/e,c)/d}({rows:I+(O.rowOffset??0),cols:k+(O.colOffset??0),width:T,height:A,mobile:P,headerOffset:R.headerOffset,...O,paddingOffset:e})},[I,k,T,A,P,O,R.headerOffset]);return{rows:I,cols:k,state:B,dispatch:F,size:Z,mobile:P,solved:H,handleNext:X,controlsProps:{rows:I,cols:k,dynamicSize:D,minSize:L,maxSize:$,handlePlus:E,handleMinus:M,onRefresh:X}}}function V({onAction:t,checkEnabled:n=()=>!0,touchTimeout:o=500,posAttribute:i="data-pos",preventDefault:s=!0,transition:r="all 0.2s"}){const[a,l]=e.useState(null),c=e.useRef(new Set),d=e.useRef(0),u=e.useCallback(()=>{l(null),c.current.clear()},[]),f=e.useCallback(e=>{if(null===a)return;const n=e.touches[0];if(!n)return;const o=document.elementFromPoint(n.clientX,n.clientY);if(!o)return;const s=o.closest(`[${i}]`);if(s){const e=s.getAttribute(i);e&&!c.current.has(e)&&(t(e,2===a,!1),c.current.add(e))}},[a,t,i]);e.useEffect(()=>(globalThis.addEventListener("mouseup",u),globalThis.addEventListener("touchend",u),globalThis.addEventListener("touchcancel",u),globalThis.addEventListener("touchmove",f,{passive:!1}),()=>{globalThis.removeEventListener("mouseup",u),globalThis.removeEventListener("touchend",u),globalThis.removeEventListener("touchcancel",u),globalThis.removeEventListener("touchmove",f)}),[u,f]);const m=e.useCallback(e=>({onMouseDown:i=>{n()&&(0!==i.button&&2!==i.button||Date.now()-d.current<o||(s&&i.preventDefault(),l(i.button),t(e,2===i.button,!0),c.current.add(e)))},onMouseEnter:()=>{null!==a&&!c.current.has(e)&&n()&&(t(e,2===a,!1),c.current.add(e))},onTouchStart:o=>{n()&&(o.cancelable&&s&&o.preventDefault(),d.current=Date.now(),l(0),t(e,!1,!0),c.current.add(e))},onKeyDown:o=>{n()&&("Enter"!==o.key&&" "!==o.key||(o.preventDefault(),t(e,!1,!0)))},onContextMenu:e=>{s&&e.preventDefault()},[i]:e,role:"button",tabIndex:0,sx:{touchAction:"none",transition:r}}),[t,n,a,o,i,s,r]);return{isDragging:null!==a,draggingButton:a,getDragProps:m,lastTouchTime:d}}function ee({onToggle:t,checkEnabled:n,touchTimeout:o,transition:i,posAttribute:s}){const r=e.useRef(void 0),a=e.useRef(t);a.current=t;const l=e.useCallback((e,t,o)=>{if(!n())return;const[i,s]=e.split(",").map(Number);void 0!==i&&void 0!==s&&(o?r.current=a.current(i,s,t,void 0,!0):a.current(i,s,t,r.current,!1))},[n]),{getDragProps:c}=V({onAction:l,checkEnabled:n,touchTimeout:o,transition:i,posAttribute:s});return{getDragProps:c}}function te(e,t){return`${e.toString()},${t.toString()}`}function ne(e){return(t,n)=>{if(e.customHandler){const o=e.customHandler(t,n);if(o!==t)return o}switch(n.type){case"resize":if("newRows"in n||"rows"in n||"cols"in n){const o=n.newRows??n.rows??t.rows,i=n.newCols??n.cols??t.cols;return o===t.rows&&i===t.cols?t:e.getInitialState(o,i)}return t;case"new":case"next":case"reset":return e.getInitialState(t.rows,t.cols);case"restore":case"hydrate":return"state"in n?n.state:t;default:return t}}}function oe(t,n,o){return e.useMemo(()=>t(n,...o),[t,n,o])}const ie=e=>{if(e<1||e>100)throw new Error("Invalid grid size: must be between 1 and 100");return e},se=e=>{if(e<0)throw new Error("Invalid cell index: cannot be negative");return e},re={backgroundColor:e=>"dark"===e.palette.mode?"hsla(0, 0%, 3%, 0.85)":"hsla(0, 0%, 98%, 0.85)",backdropFilter:"blur(12px) saturate(180%)",transition:"all 0.3s ease-in-out !important"},ae={zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},le={outline:"none",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},ce={width:"100%",maxWidth:"1000px",height:{xs:"630px",sm:"495px"},minHeight:{xs:"630px",sm:"495px"},display:"flex",flexDirection:"column",p:0,overflow:"hidden",position:"relative",m:2},de=e=>({flex:1,overflowY:1===e?"hidden":"auto",p:{xs:2.5,md:3},display:"flex",flexDirection:"column"}),ue={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,px:2},fe={color:f.text.secondary},me=e=>({flex:1,display:"flex",flexDirection:"column",pr:0===e?{xs:3,md:0}:0}),xe=({children:e})=>t.jsx(g,{variant:"h5",sx:{color:f.text.primary,fontWeight:i.fontWeight.bold,textAlign:"left",fontSize:i.fontSize.h2},children:e}),he=D;function pe({open:n,toggleOpen:o,titles:i,cardSx:s,contentSxOverride:r,steps:a}){const[l,c]=e.useState(0),d=i.length,u=()=>{o()},m=r?r(l):de(l);return t.jsx(S,{open:n,onClose:u,slots:{backdrop:y},slotProps:{backdrop:{sx:re}},sx:ae,children:t.jsx(x,{sx:le,children:t.jsxs(he,{onClick:e=>{e.stopPropagation()},sx:{...ce,...s},children:[t.jsxs(x,{sx:m,children:[t.jsxs(x,{sx:ue,children:[t.jsx(xe,{children:i[l]}),t.jsx(w,{onClick:u,size:"small",sx:fe,children:t.jsx(O,{})})]}),t.jsx(x,{sx:me(l),children:a[l]})]}),t.jsxs(x,{sx:{p:2.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(z,{onClick:()=>{l>0&&c(l-1)},disabled:0===l,startIcon:t.jsx(I,{}),sx:{visibility:0===l?"hidden":"visible",color:f.text.primary},children:"Back"}),t.jsx(x,{sx:{display:"flex",gap:1},children:Array.from({length:d},(e,n)=>t.jsx(x,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:l===n?f.primary.main:f.interactive.disabled,transition:"background-color 0.3s"}},n))}),t.jsx(z,{onClick:()=>{l<d-1?c(l+1):o()},disabled:l===d-1,endIcon:t.jsx(k,{}),sx:{visibility:l===d-1?"hidden":"visible",color:f.text.primary},children:"Next"})]})]})})})}function ge({Icon:e,title:n,text:o}){return t.jsxs(x,{sx:{px:2},children:[t.jsxs(g,{variant:"h6",sx:{color:f.text.primary,fontWeight:i.fontWeight.semibold,display:"flex",alignItems:"center",mb:1.5,fontSize:i.fontSize.subheading},children:[t.jsx(e,{sx:{mr:2,color:f.primary.main,fontSize:"1.75rem"}}),n]}),t.jsx(g,{variant:"body1",sx:{color:f.text.secondary,lineHeight:1.6,fontSize:i.fontSize.body,ml:6},children:o})]})}function be({open:e,toggleOpen:n,titles:o,instructions:i,instructionsFooter:s,exampleContent:r,extraSteps:a=[],cardSx:l,contentSxOverride:c}){const d=t.jsxs(x,{sx:{animation:"fadeIn 0.3s ease",flex:1,display:"flex",flexDirection:"column"},children:[t.jsx(x,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:4},children:i.map(({Icon:e,title:n,text:o})=>t.jsx(ge,{Icon:e,title:n,text:o},n))}),s]}),u=t.jsx(x,{sx:{flex:1,display:"flex",flexDirection:"column",animation:"fadeIn 0.3s ease"},children:t.jsx(x,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:r})});return t.jsx(pe,{open:e,toggleOpen:n,titles:o,cardSx:l,contentSxOverride:c,steps:[d,u,...a]})}export{H as B,L as C,be as G,F as T,ee as a,ne as b,ie as c,Z as d,$ as e,V as f,te as g,oe as h,se as i,U as j,B as k,G as l,N as m,de as n,J as o,Q as u};
