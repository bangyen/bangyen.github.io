var e,t,n={exports:{}},r={};function o(){if(e)return r;e=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),y=Symbol.iterator;var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,h={};function g(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||_}function m(){}function w(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||_}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var v=w.prototype=new m;v.constructor=w,b(v,g.prototype),v.isPureReactComponent=!0;var S=Array.isArray;function E(){}var j={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function k(e,n,r){var o=r.ref;return{$$typeof:t,type:e,key:n,ref:void 0!==o?o:null,props:r}}function $(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var A=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function H(e,r,o,u,c){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var i,a,f=!1;if(null===e)f=!0;else switch(s){case"bigint":case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case t:case n:f=!0;break;case p:return H((f=e._init)(e._payload),r,o,u,c)}}if(f)return c=c(e),f=""===u?"."+x(e,0):u,S(c)?(o="",null!=f&&(o=f.replace(A,"$&/")+"/"),H(c,r,o,"",function(e){return e})):null!=c&&($(c)&&(i=c,a=o+(null==c.key||e&&e.key===c.key?"":(""+c.key).replace(A,"$&/")+"/")+f,c=k(i.type,a,i.props)),r.push(c)),1;f=0;var l,d=""===u?".":u+":";if(S(e))for(var _=0;_<e.length;_++)f+=H(u=e[_],r,o,s=d+x(u,_),c);else if("function"==typeof(_=null===(l=e)||"object"!=typeof l?null:"function"==typeof(l=y&&l[y]||l["@@iterator"])?l:null))for(e=_.call(e),_=0;!(u=e.next()).done;)f+=H(u=u.value,r,o,s=d+x(u,_++),c);else if("object"===s){if("function"==typeof e.then)return H(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),r,o,u,c);throw r=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return f}function O(e,t,n){if(null==e)return e;var r=[],o=0;return H(e,r,"","",function(e){return t.call(n,e,o++)}),r}function C(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},I={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!$(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return r.Activity=d,r.Children=I,r.Component=g,r.Fragment=o,r.Profiler=c,r.PureComponent=w,r.StrictMode=u,r.Suspense=f,r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,r.__COMPILER_RUNTIME={__proto__:null,c:function(e){return j.H.useMemoCache(e)}},r.cache=function(e){return function(){return e.apply(null,arguments)}},r.cacheSignal=function(){return null},r.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=b({},e.props),o=e.key;if(null!=t)for(u in void 0!==t.key&&(o=""+t.key),t)!R.call(t,u)||"key"===u||"__self"===u||"__source"===u||"ref"===u&&void 0===t.ref||(r[u]=t[u]);var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){for(var c=Array(u),s=0;s<u;s++)c[s]=arguments[s+2];r.children=c}return k(e.type,o,r)},r.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},r.createElement=function(e,t,n){var r,o={},u=null;if(null!=t)for(r in void 0!==t.key&&(u=""+t.key),t)R.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var s=Array(c),i=0;i<c;i++)s[i]=arguments[i+2];o.children=s}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return k(e,u,o)},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:a,render:e}},r.isValidElement=$,r.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:C}},r.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},r.startTransition=function(e){var t=j.T,n={};j.T=n;try{var r=e(),o=j.S;null!==o&&o(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(E,T)}catch(u){T(u)}finally{null!==t&&null!==n.types&&(t.types=n.types),j.T=t}},r.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},r.use=function(e){return j.H.use(e)},r.useActionState=function(e,t,n){return j.H.useActionState(e,t,n)},r.useCallback=function(e,t){return j.H.useCallback(e,t)},r.useContext=function(e){return j.H.useContext(e)},r.useDebugValue=function(){},r.useDeferredValue=function(e,t){return j.H.useDeferredValue(e,t)},r.useEffect=function(e,t){return j.H.useEffect(e,t)},r.useEffectEvent=function(e){return j.H.useEffectEvent(e)},r.useId=function(){return j.H.useId()},r.useImperativeHandle=function(e,t,n){return j.H.useImperativeHandle(e,t,n)},r.useInsertionEffect=function(e,t){return j.H.useInsertionEffect(e,t)},r.useLayoutEffect=function(e,t){return j.H.useLayoutEffect(e,t)},r.useMemo=function(e,t){return j.H.useMemo(e,t)},r.useOptimistic=function(e,t){return j.H.useOptimistic(e,t)},r.useReducer=function(e,t,n){return j.H.useReducer(e,t,n)},r.useRef=function(e){return j.H.useRef(e)},r.useState=function(e){return j.H.useState(e)},r.useSyncExternalStore=function(e,t,n){return j.H.useSyncExternalStore(e,t,n)},r.useTransition=function(){return j.H.useTransition()},r.version="19.2.4",r}function u(e,t){return`${e.toString()},${t.toString()}`}function c(e,t,n){const r=function(e,t){const n=t(1*e.length,1)>>>0;return d().set(e,n/1),m=e.length,n}(e,g.__wbindgen_malloc),o=m,u=g.find_cycles_wasm(r,o,t,n);var c=function(e,t){e>>>=0;const n=f(),r=[];for(let o=e;o<e+4*t;o+=4)r.push(g.__wbindgen_externrefs.get(n.getUint32(o,!0)));return g.__externref_drop_slice(e,t),r}(u[0],u[1]).slice();return g.__wbindgen_free(u[0],4*u[1],4),c}function s(){return{__proto__:null,"./slant_wasm_bg.js":{__proto__:null,__wbg___wbindgen_debug_string_0bc8482c6e3508ae:function(e,t){const n=function(e,t,n){if(void 0===n){const n=h.encode(e),r=t(n.length,1)>>>0;return d().subarray(r,r+n.length).set(n),m=n.length,r}let r=e.length,o=t(r,1)>>>0;const u=d();let c=0;for(;c<r;c++){const t=e.charCodeAt(c);if(t>127)break;u[o+c]=t}if(c!==r){0!==c&&(e=e.slice(c)),o=n(o,r,r=c+3*e.length,1)>>>0;const t=d().subarray(o+c,o+r);c+=h.encodeInto(e,t).written,o=n(o,r,c,1)>>>0}return m=c,o}(i(t),g.__wbindgen_malloc,g.__wbindgen_realloc),r=m;f().setInt32(e+4,r,!0),f().setInt32(e+0,n,!0)},__wbg___wbindgen_throw_be289d5034ed271b:function(e,t){throw new Error(l(e,t))},__wbg_new_361308b2356cecd0:function(){return new Object},__wbg_new_3eb36ae241fe6f44:function(){return new Array},__wbg_set_3f1d0b984ed272ed:function(e,t,n){e[t]=n},__wbg_set_f43e577aea94465b:function(e,t,n){e[t>>>0]=n},__wbindgen_cast_0000000000000001:function(e){return e},__wbindgen_cast_0000000000000002:function(e,t){return l(e,t)},__wbindgen_init_externref_table:function(){const e=g.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}}}}function i(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=i(e[0]));for(let r=1;r<t;r++)n+=", "+i(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n&&n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(o){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}t||(t=1,n.exports=o()),n.exports;let a=null;function f(){return(null===a||!0===a.buffer.detached||void 0===a.buffer.detached&&a.buffer!==g.memory.buffer)&&(a=new DataView(g.memory.buffer)),a}function l(e,t){return function(e,t){b+=t,b>=_&&(y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),y.decode(),b=t);return y.decode(d().subarray(e,e+t))}(e>>>=0,t)}let p=null;function d(){return null!==p&&0!==p.byteLength||(p=new Uint8Array(g.memory.buffer)),p}let y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});y.decode();const _=2146435072;let b=0;const h=new TextEncoder;"encodeInto"in h||(h.encodeInto=function(e,t){const n=h.encode(e);return t.set(n),{read:e.length,written:n.length}});let g,m=0;async function w(e){if(void 0!==g)return g;void 0!==e&&Object.getPrototypeOf(e)===Object.prototype&&({module_or_path:e}=e),void 0===e&&(e=new URL("/assets/slant_wasm_bg-kZzm8ut6.wasm",import.meta.url));const t=s();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if(!e.ok||!function(e){switch(e){case"basic":case"cors":case"default":return!0}return!1}(e.type)||"application/wasm"===e.headers.get("Content-Type"))throw n}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return function(e){return g=e.exports,a=null,p=null,g.__wbindgen_start(),g}(n)}const v=1,S=2;let E=!1,j=null;function R(e,t,n){return e*(n+1)+t}function k(e,t,n){if(E)try{const r=new Uint8Array(t*n);for(let u=0;u<t;u++)for(let t=0;t<n;t++)r[u*n+t]=e[u]?.[t]??0;const o=c(r,t,n);if(o.length>0)return new Set(o)}catch(l){}const r=new Map,o=new Set;for(let u=0;u<t;u++)for(let t=0;t<n;t++){const o=e[u]?.[t];if(!o||0===o)continue;const c=R(u,o===v?t+1:t,n),s=R(u+1,o===v?t:t+1,n);r.has(c)||r.set(c,[]),r.has(s)||r.set(s,[]),r.get(c)?.push({node:s,r:u,c:t}),r.get(s)?.push({node:c,r:u,c:t})}const s=new Set,i=new Set,a=[],f=(e,t)=>{s.add(e),i.add(e);const n=r.get(e)??[];for(const{node:r,r:c,c:l}of n)if(r!==t)if(i.has(r)){o.add(u(c,l));for(let e=a.length-1;e>=0;e--){const t=a[e];if(!t)break;if(o.add(u(t.r,t.c)),t.u===r||t.v===r)break}}else s.has(r)||(a.push({r:c,c:l,u:e,v:r}),f(r,e),a.pop());i.delete(e)};for(const u of r.keys())s.has(u)||f(u,-1);return o}(async function(){if(!E)return j??=w().then(()=>{E=!0}).catch(e=>{throw j=null,e}),j})().catch(()=>{}),self.onmessage=e=>{if("SOLVE"===e.data.type){const{rows:t,cols:n,numbers:r,userMoves:o}=e.data.payload,c=new Map,s=[],i=[];o.forEach((e,t)=>{c.set(t,{state:e,source:"user"});const[n,r]=t.split(",").map(Number);void 0!==n&&void 0!==r&&s.push({r:n,c:r})});const a=(e,r)=>{if(e<0||e>=t||r<0||r>=n)return 0;const o=u(e,r);return c.get(o)?.state??0},f=(e,t,n,r)=>{const o=u(e,t),a=c.get(o);a?a.state!==n&&i.push({type:"cell",r:e,c:t}):(c.set(o,{state:n,source:r}),s.push({r:e,c:t}))},l=(e,r)=>[{r:e-1,c:r-1,required:S},{r:e-1,c:r,required:v},{r:e,c:r-1,required:v},{r:e,c:r,required:S}].filter(e=>e.r>=0&&e.r<t&&e.c>=0&&e.c<n);let p=0;for(;p<s.length;){const e=s[p++];if(!e)break;const{r:t,c:n}=e,o=[{r:t,c:n},{r:t,c:n+1},{r:t+1,c:n},{r:t+1,c:n+1}];for(const s of o){const e=r[s.r]?.[s.c];if(null==e)continue;const o=l(s.r,s.c);let p=0;const d=[];for(const t of o){const e=a(t.r,t.c);0===e?d.push(t):e===t.required&&p++}if(p>e)i.push({type:"node",r:s.r,c:s.c});else if(p+d.length<e)i.push({type:"node",r:s.r,c:s.c});else if("user"===c.get(u(t,n))?.source)if(p===e&&d.length>0)for(const t of d){const e=t.required===v?S:v;f(t.r,t.c,e,"propagated")}else if(p+d.length===e&&d.length>0)for(const t of d)f(t.r,t.c,t.required,"propagated")}}const d=Array.from({length:t},()=>Array(n).fill(0));c.forEach((e,t)=>{const[n,r]=t.split(",").map(Number);void 0!==n&&void 0!==r&&d[n]&&(d[n][r]=e.state)});const y=k(d,t,n);self.postMessage({type:"RESULT",payload:{gridState:c,conflicts:i,cycleCells:y}})}};
