var L={exports:{}},n={};var B;function V(){if(B)return n;B=1;var _=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),O=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),R=Symbol.iterator;function i(t){return t===null||typeof t!="object"?null:(t=R&&t[R]||t["@@iterator"],typeof t=="function"?t:null)}var c={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,y={};function E(t,e,o){this.props=t,this.context=e,this.refs=y,this.updater=o||c}E.prototype.isReactComponent={},E.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},E.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w(){}w.prototype=E.prototype;function N(t,e,o){this.props=t,this.context=e,this.refs=y,this.updater=o||c}var H=N.prototype=new w;H.constructor=N,f(H,E.prototype),H.isPureReactComponent=!0;var P=Array.isArray;function v(){}var s={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function q(t,e,o){var r=o.ref;return{$$typeof:_,type:t,key:e,ref:r!==void 0?r:null,props:o}}function z(t,e){return q(t.type,e,t.props)}function I(t){return typeof t=="object"&&t!==null&&t.$$typeof===_}function F(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(o){return e[o]})}var U=/\/+/g;function x(t,e){return typeof t=="object"&&t!==null&&t.key!=null?F(""+t.key):e.toString(36)}function Q(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(v,v):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function k(t,e,o,r,u){var p=typeof t;(p==="undefined"||p==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(p){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case _:case g:a=!0;break;case d:return a=t._init,k(a(t._payload),e,o,r,u)}}if(a)return u=u(t),a=r===""?"."+x(t,0):r,P(u)?(o="",a!=null&&(o=a.replace(U,"$&/")+"/"),k(u,e,o,"",function(J){return J})):u!=null&&(I(u)&&(u=z(u,o+(u.key==null||t&&t.key===u.key?"":(""+u.key).replace(U,"$&/")+"/")+a)),e.push(u)),1;a=0;var M=r===""?".":r+":";if(P(t))for(var C=0;C<t.length;C++)r=t[C],p=M+x(r,C),a+=k(r,e,o,p,u);else if(C=i(t),typeof C=="function")for(t=C.call(t),C=0;!(r=t.next()).done;)r=r.value,p=M+x(r,C++),a+=k(r,e,o,p,u);else if(p==="object"){if(typeof t.then=="function")return k(Q(t),e,o,r,u);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function b(t,e,o){if(t==null)return t;var r=[],u=0;return k(t,r,"","",function(p){return e.call(o,p,u++)}),r}function X(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(o){(t._status===0||t._status===-1)&&(t._status=1,t._result=o)},function(o){(t._status===0||t._status===-1)&&(t._status=2,t._result=o)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var K=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Z={map:b,forEach:function(t,e,o){b(t,function(){e.apply(this,arguments)},o)},count:function(t){var e=0;return b(t,function(){e++}),e},toArray:function(t){return b(t,function(e){return e})||[]},only:function(t){if(!I(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};return n.Activity=S,n.Children=Z,n.Component=E,n.Fragment=m,n.Profiler=T,n.PureComponent=N,n.StrictMode=h,n.Suspense=Y,n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,n.__COMPILER_RUNTIME={__proto__:null,c:function(t){return s.H.useMemoCache(t)}},n.cache=function(t){return function(){return t.apply(null,arguments)}},n.cacheSignal=function(){return null},n.cloneElement=function(t,e,o){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=f({},t.props),u=t.key;if(e!=null)for(p in e.key!==void 0&&(u=""+e.key),e)!W.call(e,p)||p==="key"||p==="__self"||p==="__source"||p==="ref"&&e.ref===void 0||(r[p]=e[p]);var p=arguments.length-2;if(p===1)r.children=o;else if(1<p){for(var a=Array(p),M=0;M<p;M++)a[M]=arguments[M+2];r.children=a}return q(t.type,u,r)},n.createContext=function(t){return t={$$typeof:O,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:A,_context:t},t},n.createElement=function(t,e,o){var r,u={},p=null;if(e!=null)for(r in e.key!==void 0&&(p=""+e.key),e)W.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(u[r]=e[r]);var a=arguments.length-2;if(a===1)u.children=o;else if(1<a){for(var M=Array(a),C=0;C<a;C++)M[C]=arguments[C+2];u.children=M}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)u[r]===void 0&&(u[r]=a[r]);return q(t,p,u)},n.createRef=function(){return{current:null}},n.forwardRef=function(t){return{$$typeof:j,render:t}},n.isValidElement=I,n.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:X}},n.memo=function(t,e){return{$$typeof:l,type:t,compare:e===void 0?null:e}},n.startTransition=function(t){var e=s.T,o={};s.T=o;try{var r=t(),u=s.S;u!==null&&u(o,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(v,K)}catch(p){K(p)}finally{e!==null&&o.types!==null&&(e.types=o.types),s.T=e}},n.unstable_useCacheRefresh=function(){return s.H.useCacheRefresh()},n.use=function(t){return s.H.use(t)},n.useActionState=function(t,e,o){return s.H.useActionState(t,e,o)},n.useCallback=function(t,e){return s.H.useCallback(t,e)},n.useContext=function(t){return s.H.useContext(t)},n.useDebugValue=function(){},n.useDeferredValue=function(t,e){return s.H.useDeferredValue(t,e)},n.useEffect=function(t,e){return s.H.useEffect(t,e)},n.useEffectEvent=function(t){return s.H.useEffectEvent(t)},n.useId=function(){return s.H.useId()},n.useImperativeHandle=function(t,e,o){return s.H.useImperativeHandle(t,e,o)},n.useInsertionEffect=function(t,e){return s.H.useInsertionEffect(t,e)},n.useLayoutEffect=function(t,e){return s.H.useLayoutEffect(t,e)},n.useMemo=function(t,e){return s.H.useMemo(t,e)},n.useOptimistic=function(t,e){return s.H.useOptimistic(t,e)},n.useReducer=function(t,e,o){return s.H.useReducer(t,e,o)},n.useRef=function(t){return s.H.useRef(t)},n.useState=function(t){return s.H.useState(t)},n.useSyncExternalStore=function(t,e,o){return s.H.useSyncExternalStore(t,e,o)},n.useTransition=function(){return s.H.useTransition()},n.version="19.2.4",n}var G;function tt(){return G||(G=1,L.exports=V()),L.exports}tt();function $(_,g){return`${_.toString()},${g.toString()}`}function D(_,g,m){return _*(m+1)+g}function et(_,g,m){const h=new Map,T=new Set;for(let l=0;l<g;l++)for(let d=0;d<m;d++){const S=_[l]?.[d];if(!S||S===0)continue;const R=S===1?D(l,d+1,m):D(l,d,m),i=S===1?D(l+1,d,m):D(l+1,d+1,m);h.has(R)||h.set(R,[]),h.has(i)||h.set(i,[]),h.get(R)?.push({node:i,r:l,c:d}),h.get(i)?.push({node:R,r:l,c:d})}const A=new Set,O=new Set,j=[],Y=(l,d)=>{A.add(l),O.add(l);const S=h.get(l)??[];for(const{node:R,r:i,c}of S)if(R!==d)if(O.has(R)){T.add($(i,c));for(let f=j.length-1;f>=0;f--){const y=j[f];if(!y||(T.add($(y.r,y.c)),y.u===R||y.v===R))break}}else A.has(R)||(j.push({r:i,c,u:l,v:R}),Y(R,l),j.pop());O.delete(l)};for(const l of h.keys())A.has(l)||Y(l,-1);return T}function nt(_,g,m,h){const T=new Map,A=[],O=[];h.forEach((i,c)=>{T.set(c,{state:i,source:"user"});const[f,y]=c.split(",").map(Number);f!==void 0&&y!==void 0&&A.push({r:f,c:y})});const j=(i,c)=>{if(i<0||i>=_||c<0||c>=g)return 0;const f=$(i,c);return T.get(f)?.state??0},Y=(i,c,f,y)=>{const E=$(i,c),w=T.get(E);if(w){w.state!==f&&O.push({type:"cell",r:i,c});return}T.set(E,{state:f,source:y}),A.push({r:i,c})},l=(i,c)=>[{r:i-1,c:c-1,required:2},{r:i-1,c,required:1},{r:i,c:c-1,required:1},{r:i,c,required:2}].filter(f=>f.r>=0&&f.r<_&&f.c>=0&&f.c<g);let d=0;for(;d<A.length;){const i=A[d++];if(!i)break;const{r:c,c:f}=i,y=[{r:c,c:f},{r:c,c:f+1},{r:c+1,c:f},{r:c+1,c:f+1}];for(const E of y){const w=m[E.r]?.[E.c];if(w==null)continue;const N=l(E.r,E.c);let H=0;const P=[];for(const v of N){const s=j(v.r,v.c);s===0?P.push(v):s===v.required&&H++}if(H>w){O.push({type:"node",r:E.r,c:E.c});continue}if(H+P.length<w){O.push({type:"node",r:E.r,c:E.c});continue}if(T.get($(c,f))?.source==="user"){if(H===w&&P.length>0)for(const v of P){const s=v.required===1?2:1;Y(v.r,v.c,s,"propagated")}else if(H+P.length===w&&P.length>0)for(const v of P)Y(v.r,v.c,v.required,"propagated")}}}const S=Array.from({length:_},()=>new Array(g).fill(0));for(const[i,c]of T.entries()){const[f,y]=i.split(",").map(Number);f!==void 0&&y!==void 0&&S[f]&&(S[f][y]=c.state)}const R=et(S,_,g);return{gridState:T,conflicts:O,cycleCells:R}}globalThis.onmessage=_=>{if(_.data.type==="SOLVE"){const{rows:g,cols:m,numbers:h,userMoves:T}=_.data.payload,A=nt(g,m,h,T);self.postMessage({type:"RESULT",payload:A})}};
