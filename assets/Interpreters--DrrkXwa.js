import{r as x,j as n,a as Q,u as Ee}from"./vendor_react-CiGj4Onb.js";import{d as $,i as Pe,B as M,u as $e,j as Oe,G as v,e as G,k as Be,S as Ae,l as V}from"./vendor_mui_core-Cb6gYFA4.js";import{G as Z,a as h,T as C,e as A,S as R,L as De,d as ee,A as O,E as Te}from"./index-CB166san.js";import{G as te}from"./GlassCard-ZVr2Az-J.js";import{P as He}from"./PageLayout-D4KkK3P1.js";import{j as ce,D as le,k as de,l as ue,m as Le,n as Ge,F as pe,o as xe,e as Ve,N as Ne}from"./vendor_mui_icons-88WVDz42.js";import{u as he,G as N,a as fe,C as Ye,g as qe,b as Y,c as Ue}from"./layout-DpyX98We.js";function ge(t){const s=x.useRef([]),e=x.useRef(0),o=x.useRef(!1),a=x.useRef(t);return x.useEffect(()=>{a.current=t},[t]),x.useCallback(({type:r,payload:i})=>{const c=s.current;switch(r){case"next":{if(o.current){const u=c[e.current];return u?{...u}:i}o.current=!0;const p=e.current;if(p+1===c.length){const u=c[p];if(!u)return{...c[0]};const g=a.current(u);g===u||(c.push(g),e.current++)}else e.current++;const l=c[e.current];if(!l)return i;const d={...l};return setTimeout(()=>{o.current=!1},Z.processing.resetDelay),d}case"prev":{if(o.current){const d=c[e.current];return d?{...d}:i}o.current=!0,e.current&&e.current--;const p=c[e.current];if(!p)return i;const l={...p};return setTimeout(()=>{o.current=!1},Z.processing.resetDelay),l}case"clear":s.current=[{...i}],e.current=0}return i},[])}let z=null,D=null,q=200;function me(t){const s=x.useRef(null),e=x.useRef(t),o=x.useCallback(({repeat:r,speed:i})=>{z!==null&&clearInterval(z),D=r??D,q=i??q,s.current=D,e.current=q,D&&(z=setInterval(D,q))},[]),a=x.useCallback(()=>{z!==null&&(clearInterval(z),z=null)},[]);return x.useEffect(()=>()=>{z!==null&&(clearInterval(z),z=null)},[]),{create:o,clear:a}}const I=x.createContext(null);function B({text:t,...s}){return n.jsx($,{...s,sx:[{fontSize:"inherit",fontWeight:"inherit",fontFamily:"inherit",userSelect:"none",lineHeight:1,display:"inline"},...Array.isArray(s.sx)?s.sx:[s.sx]],children:t})}const Xe=te,_e=x.memo(function({compact:t=!1}){const s=x.useContext(I);if(!s)return null;const{code:e,index:o}=s;return e===void 0?null:t?n.jsx(X,{Icon:ce,title:"Program",data:[...e],pointer:o}):n.jsx(U,{Icon:ce,title:"Program",data:[...e],pointer:o,children:n.jsx(B,{text:"\xA0"})})}),Je=x.memo(function({compact:t=!1}){const s=x.useContext(I);if(!s)return null;const{tape:e,pointer:o,tapeFlag:a}=s;return a?t?n.jsx(X,{Icon:le,title:"Tape",data:e,pointer:o}):n.jsx(U,{Icon:le,title:"Tape",data:e,pointer:o,children:n.jsx(B,{text:"\xA0"})}):null}),Ke=x.memo(function({compact:t=!1}){const s=x.useContext(I);if(!s)return null;const{output:e,outFlag:o}=s;if(!o)return null;const a=Array.isArray(e)?e:[e];return t?n.jsx(X,{Icon:de,title:"Output",data:a}):n.jsx(U,{Icon:de,title:"Output",data:a,children:n.jsx(B,{text:"\xA0"})})}),Qe=x.memo(function({compact:t=!1}){const s=x.useContext(I);if(!s)return null;const{register:e,regFlag:o}=s;return o?t?n.jsx(X,{Icon:ue,title:"Register",data:[e]}):n.jsx(U,{Icon:ue,title:"Register",data:[e],children:n.jsx(B,{text:"\xA0"})}):null});function U({Icon:t,title:s,data:e,pointer:o,children:a}){const r=Q.useMemo(()=>e.map((i,c)=>({id:`${s}-${String(c)}`,val:i,ind:c})),[e,s]).map(i=>{const c=o===i.ind?"info":"inherit";return n.jsx(B,{color:c,text:i.val,sx:{fontSize:C.fontSize.body,fontWeight:C.fontWeight.semibold,fontFamily:"monospace"}},i.id)});return n.jsxs(M,{sx:{height:"100%"},children:[n.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1,marginBottom:1},children:[n.jsx(t,{sx:{color:h.primary.main}}),n.jsx($,{variant:"subtitle2",sx:{color:h.primary.main,fontWeight:C.fontWeight.semibold,fontSize:C.fontSize.body},children:s})]}),n.jsxs(Ze,{children:[r,a]})]})}function X({Icon:t,title:s,data:e,pointer:o}){const a=Q.useMemo(()=>e.map((r,i)=>({id:`${s}-${String(i)}`,val:r,ind:i})),[e,s]).map(r=>{const i=o===r.ind?"info":"inherit";return n.jsx(Pe,{label:String(r.val),size:"small",sx:{backgroundColor:i==="info"?h.primary.main:h.surface.glass,color:h.text.primary,fontFamily:"monospace",fontSize:C.fontSize.caption,height:"32px",border:`1px solid ${h.border.subtle}`,backdropFilter:"blur(24px) saturate(180%)"}},r.id)});return n.jsxs(Xe,{sx:{height:"100%",minHeight:"24rem"},children:[n.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1,marginBottom:1},children:[n.jsx(t,{sx:{color:h.primary.main,fontSize:C.fontSize.body}}),n.jsx($,{variant:"caption",sx:{color:h.primary.main,fontWeight:C.fontWeight.semibold,fontSize:C.fontSize.caption},children:s})]}),n.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a})]})}function Ze({children:t}){return n.jsx(te,{sx:{overflowX:"auto",width:"100%",maxWidth:"100%",height:"60px",display:"flex",flexDirection:"column",justifyContent:"center",padding:2},children:n.jsx(M,{sx:{display:"flex",alignItems:"center",gap:1,width:"max-content",minWidth:0},children:t})})}function et(){const t=x.useContext(I),s=$e("(min-width:650px)"),e=(t==null?void 0:t.pause)??!1,o=x.useMemo(()=>(t==null?void 0:t.dispatch)??(()=>{}),[t]),a=(t==null?void 0:t.fastForward)??!1,r=x.useMemo(()=>e?n.jsx(A,{title:"Run",onClick:o("run"),Icon:Le},"Run"):n.jsx(A,{title:"Pause",onClick:o("stop"),Icon:Ge},"Pause"),[o,e]);if(!t)return[];const i={Reset:{icon:pe,action:"reset",flag:!0},"Fast Forward":{icon:xe,flag:a,action:"ff"},Previous:{icon:Ne,flag:s,action:"prev"},Next:{icon:Ve,flag:s,action:"next"}},c=[],p=i["Fast Forward"]??{icon:xe,flag:!1};return c.push(r),c.push(n.jsx(A,{title:"Reset",Icon:pe,onClick:o("reset")},"Reset")),c.push(n.jsx(A,{title:"Fast Forward",Icon:p.icon,onClick:p.flag?o("ff"):void 0,disabled:!p.flag,sx:{opacity:p.flag?1:.3,"&.Mui-disabled":{color:"inherit",opacity:.3}}},"Fast Forward")),["Previous","Next"].forEach(l=>{const d=i[l];if(!d)return;const{icon:u,flag:g,action:f}=d;f&&g&&c.push(n.jsx(A,{title:l,Icon:u,onClick:o(f)},l))}),c}function be(t,s){const{type:e,payload:o}=s;let a={};const{dispatch:r,create:i,clear:c}=o,p=(function(m){return(b,k)=>{const{nextIter:S,clear:j}=m;return k&&j(),{...S({type:b,payload:m}),select:null}}})(o),l=()=>{r({type:"timer",payload:o})},d=!1,u=!0,g=!0,f=!0;switch(e){case"run":i({repeat:l,speed:Z.timer.defaultSpeed}),a.pause=d;break;case"timer":{const m=t.end?"stop":"next";r({type:m,payload:o});break}case"stop":c(),a.pause=u;break;case"reset":window.confirm("Are you sure you want to reset the code?")&&(a=p("clear",!0),a.pause=g);break;case"prev":a=p("prev",!0),a.pause=f;break;case"next":a=p("next",!1);break;case"share":{const m=window.location.href;navigator.clipboard.writeText(m);break}}return a}function ye({value:t,readOnly:s=!1,infoLabel:e="Program code",fillValue:o="Hello, World!",placeholder:a,handleChange:r}){const i=x.useContext(I);if(!i)throw new Error("TextArea must be used within EditorContext.Provider");const{height:c}=i,p=he("md"),l=Math.floor(c/(p?24:32)),d=t!==void 0?{value:t||"",onChange:r}:{defaultValue:o,onChange:r};return n.jsx(Oe,{variant:"outlined",label:e,placeholder:a,slotProps:{inputLabel:{shrink:!0},htmlInput:{readOnly:s}},fullWidth:!0,multiline:!0,rows:l,...d,sx:{"& .MuiInputBase-root":{alignItems:"flex-start",backgroundColor:h.surface.glass,backdropFilter:"blur(24px) saturate(180%)",borderRadius:R.borderRadius.md,border:`1px solid ${h.border.subtle}`},"& .MuiInputBase-input":{fontFamily:"monospace",color:"text.primary","&::placeholder":{opacity:.6,color:"text.secondary"}},"& .MuiOutlinedInput-notchedOutline":{borderColor:h.border.subtle},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:h.border.subtle},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.light"},"& .MuiInputLabel-root":{color:"text.secondary"},"& .MuiInputLabel-root.Mui-focused":{color:"primary.light"}}})}function ve({container:t,sideProps:s={},hide:e=!1,navigation:o,children:a}){const r=x.useContext(I);if(!r)throw new Error("Editor must be used within EditorContext.Provider");const{tapeFlag:i,outFlag:c,regFlag:p,code:l}=r;let d,u;e?(d="none",u=12):(u={xs:6,md:8},d="flex");const g={flex:{xs:"none",md:1},spacing:2,ref:t,container:!0,display:"flex",alignItems:"center",sx:{overflowY:"hidden",height:{xs:l!==void 0?N.layout.editorHeight.xs.withCode:N.layout.editorHeight.xs.withoutCode,md:"auto"}}};return n.jsxs(v,{container:!0,spacing:2,minHeight:{xs:"50vh",md:"auto"},height:{xs:"auto",md:`calc(100vh - ${De.headerHeight.md.toString()}px)`},direction:"column",wrap:"nowrap",padding:N.layout.padding,sx:{background:h.surface.background,position:"relative",boxSizing:"border-box",width:"100% !important",margin:"0 !important",display:"flex",flexDirection:"column",overflowY:"auto",height:"100%"},children:[n.jsxs(v,{container:!0,alignItems:"center",direction:{xs:"column",md:"row"},justifyContent:"space-between",sx:{mb:{xs:2,md:0},gap:{xs:2,md:0}},children:[n.jsx(v,{size:"grow",display:"flex",alignItems:"center",justifyContent:{xs:"center",md:"flex-start"},sx:{width:"100%"},children:n.jsx($,{variant:"h4",sx:{fontSize:C.fontSize.h2,fontWeight:C.fontWeight.semibold,paddingLeft:{xs:0,md:2},flexShrink:0},children:"Interpreters"})}),n.jsxs(v,{display:"flex",alignItems:"center",gap:1,size:"auto",justifyContent:{xs:"center",md:"flex-end"},sx:{paddingRight:1,width:{xs:"100%",md:"auto"}},children:[n.jsx(et,{}),o&&n.jsx(M,{sx:{flexShrink:0},children:o})]})]}),n.jsxs(v,{...g,children:[n.jsx(v,{size:u,children:a}),n.jsx(v,{display:d,size:{xs:6,md:4},children:n.jsx(ye,{...s})})]}),n.jsx(v,{size:{xs:12},sx:{minHeight:[l!==void 0,i,c,p].filter(Boolean).length>0?{xs:"auto",md:N.layout.fieldsMinHeight.md}:0,flexShrink:0},children:n.jsx(v,{container:!0,spacing:2,sx:{width:"100%",maxWidth:"100%"},children:(()=>{const f=[],m={xs:12,md:6};return l!==void 0&&f.push(n.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:n.jsx(_e,{})},"program")),i&&f.push(n.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:n.jsx(Je,{})},"tape")),c&&f.push(n.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:n.jsx(Ke,{})},"output")),p&&f.push(n.jsx(v,{size:m,sx:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:n.jsx(Qe,{})},"register")),f})()})})]})}let re=null;function tt(t,s){const{type:e,payload:o}=s,{nextIter:a,clear:r,create:i,dispatch:c}=o;let p={};switch(e){case"ff":{const l=()=>{c({type:"timer",payload:o})};t.pause?(p={pause:!1},i({repeat:l,speed:50})):(r(),p={pause:!1},i({repeat:l,speed:10}));break}case"edit":{const{newText:l,clean:d}=o;l!==void 0&&d&&(p={...t,text:l,code:d(l)},r(),a({type:"clear",payload:p}),p.pause=!0);break}default:p=be(t,s)}return{...t,...p}}function ke({name:t,start:s,runner:e,clean:o,tape:a,output:r,register:i,navigation:c}){const p=Q.useRef(null),l=fe(p),[d,u]=x.useReducer(tt,{...s,pause:!0,text:"",code:""}),{create:g,clear:f}=me(200),m=ge(e);x.useEffect(()=>{document.title=ee.interpreter(t)},[t]);const b=x.useCallback(y=>{u({type:"edit",payload:{newText:y.target.value,clean:o,nextIter:m,clear:f,create:g,dispatch:u}})},[o,m,f,g,u]),k=x.useCallback(y=>{b(y)},[b]),S=x.useCallback(y=>{if(typeof y=="string")return()=>{u({type:y,payload:{start:s,nextIter:m,dispatch:u,create:g,clear:f}})};u({type:y.type,payload:{...y.payload,start:s,nextIter:m,dispatch:u,create:g,clear:f}})},[s,m,g,f,u]),j=x.useMemo(()=>{let{height:y}=l;return y===0&&re!==null&&(y=re.height),{name:t,tapeFlag:a??!1,outFlag:r??!1,regFlag:i??!1,code:d.code?Array.from(d.code):[],index:d.index??0,tape:d.tape??[],pointer:d.pointer??0,output:d.output??"",register:d.register??0,height:y,size:0,dispatch:S,fastForward:!0,pause:d.pause??!1}},[l,t,a,r,i,d.code,d.index,d.tape,d.pointer,d.output,d.register,d.pause,S]);return x.useEffect(()=>{l.height>0&&(re={height:l.height})},[l.height]),n.jsx(I.Provider,{value:j,children:n.jsx(ve,{hide:!0,container:p,sideProps:{readOnly:!0,infoLabel:"RISC-V Equivalent",fillValue:"addi x0, x0, 0",value:""},navigation:c,children:n.jsx(ye,{value:d.text,placeholder:"Enter your code here...",handleChange:k})})})}function rt({navigation:t}){const s=x.useCallback(o=>(function(a){let{pointer:r,index:i,tape:c,end:p}=a;const{code:l}=a;if(p){if(c[r]===void 0||!c[r])return a;p=!1}if(i===l.length)return{...a,index:0,end:!0};const d=l[i++];if(c=[...c],d==="+"){const u=c[r];u!==void 0&&(c[r]=u+1)}else if(c[r])if(d==="-"){const u=c[r];u!==void 0&&(c[r]=u-1)}else d===">"?c.length===++r&&c.push(1):r&&r--;return{pointer:r,index:i,code:l,tape:c,end:p}})(o),[]),e=x.useCallback(o=>(function(a){let r="";for(const i of a)"+-><".includes(i)&&(r+=i);return r})(o),[]);return n.jsx(ke,{name:"Stun Step",start:{pointer:0,index:0,tape:[0],end:!1,code:""},runner:s,clean:e,tape:!0,navigation:t})}function nt({navigation:t}){const s=x.useCallback(o=>(function(a){let{register:r,pointer:i,output:c,index:p,tape:l,end:d}=a;const{code:u}=a;if(d&&(d=!1),p===u.length)return{...a,index:0,end:!0};const g=u[p++];switch(l=[...l],g){case">":l.length===++i&&l.push(0);break;case"<":{const f=l[i];f!==void 0&&(r+=f),i=0;break}case"!":{const f=l[i];if(f!==void 0){const m=f-(r-1);l[i]=m<0?0:m}r=0,i=0;break}case",":{const f=prompt("Input: ");r=f!=null&&f.length?f.charCodeAt(0):0;break}case".":r>0&&(c+=String.fromCharCode(r-1))}return{register:r,pointer:i,output:c,index:p,code:u,tape:l,end:d}})(o),[]),e=x.useCallback(o=>(function(a){let r="";for(const i of a)"><!,.".includes(i)&&(r+=i);return r})(o),[]);return n.jsx(ke,{name:"Suffolk",start:{register:0,pointer:0,output:"",index:0,tape:[0],end:!1,code:""},runner:s,clean:e,tape:!0,output:!0,register:!0,navigation:t})}function ot({handleClick:t,chooseColor:s,options:e,rows:o,cols:a}){const r=x.useContext(I);if(!r)throw new Error("GridArea must be used within EditorContext.Provider");const{size:i}=r,c=x.useMemo(()=>({primary:{bg:h.surface.glass,text:h.primary.main,border:`1px solid ${h.primary.main}`,hover:h.interactive.selected},info:{bg:h.interactive.focus,text:h.text.primary,border:`1px solid ${h.primary.main}`,hover:h.interactive.hover},secondary:{bg:h.surface.glass,text:h.text.secondary,border:`1px solid ${h.border.subtle}`,hover:h.interactive.selected}}),[]),p=x.useMemo(()=>l=>c[l]??c.secondary,[c]);return n.jsx(Ye,{cellProps:(l,d)=>{const u=a*l+d,g=s(u),f=e[u]??" ",m=p(g);return{color:m.text,backgroundColor:m.bg,onClick:t(u),children:n.jsx(B,{text:f}),sx:{borderRadius:R.borderRadius.md,cursor:"pointer",transition:O.transition,...O.presets.glass,border:m.border,"&:hover":{backgroundColor:m.hover}}}},size:i,rows:o,cols:a})}const st=({keys:t,onSelect:s})=>n.jsx(M,{sx:{width:"100%",padding:"16px",background:h.surface.glass,borderTop:`1px solid ${h.border.subtle}`,backdropFilter:"blur(24px) saturate(180%)",position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:n.jsxs(v,{container:!0,spacing:.5,justifyContent:"center",sx:{maxWidth:"468px",width:"100%"},children:[t.map(e=>n.jsx(v,{children:n.jsx(G,{variant:"contained",onClick:()=>{s(e)},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:h.surface.glass,color:h.text.primary,borderRadius:R.borderRadius.sm,border:`1px solid ${h.border.subtle}`,"&:hover":{background:h.interactive.hover}},children:e===" "?"\u2423":e})},e)),n.jsx(v,{children:n.jsx(G,{variant:"contained",onClick:()=>{s("Backspace")},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:h.surface.glass,color:h.text.primary,borderRadius:R.borderRadius.sm,border:`1px solid ${h.border.subtle}`,"&:hover":{background:h.interactive.hover}},children:"\u232B"})}),n.jsx(v,{children:n.jsx(G,{variant:"contained",onClick:()=>{s("Escape")},sx:{minWidth:"44px",width:"44px",height:"44px",padding:0,background:h.surface.glass,color:h.data.red,borderRadius:R.borderRadius.sm,border:`1px solid ${h.border.subtle}`,"&:hover":{background:h.interactive.hover}},children:"\u2715"})})]})});function it(t,s){const{type:e}=s;let o={};switch(e){case"edit":o=(function(a,r){let i,{grid:c,select:p}=a;const{key:l,resetState:d}=r;if(p===null)return{};if(l.includes("Arrow")){const f=qe(l),{rows:m,cols:b}=a;return p=Y(p,f,m,b),{select:p}}if(l==="Backslash"||l==="\\")i="\\";else if(l.length===1)i=l;else{if(l!=="Backspace"&&l!=="Delete")return{};i=" "}const u=c.slice(0,p),g=c.slice(p+1);return c=u+i+g,d(c),{grid:c,pause:!0}})(t,s.payload);break;case"resize":o=(function(a,r){const{resetState:i,...c}=r;let{grid:p}=a;const{rows:l,cols:d}=a;let u="";const{rows:g,cols:f}=c;g!==void 0&&g>l&&(p+=" ".repeat((g-l)*d));const m=g??l,b=f??d;for(let k=0;k<m;k++){const S=k*d;let j=S;j+=f!==void 0&&f>d?d:f??d,u+=p.substring(S,j).padEnd(b," ")}return i(u),{...c,grid:u,pause:!0}})(t,s.payload);break;case"click":{const{select:a}=s.payload;o=a===t.select?{select:null}:{select:a};break}case"delete":{const{tape:a,pointer:r}=t;r>0&&a[r]===0&&t.pointer--;break}default:o=be(t,s)}return{...t,...o}}let ne=null;function je(t){const{create:s,clear:e}=(function(){const w=x.useRef(null),J=x.useCallback(P=>{w.current=P,document.addEventListener("keydown",P)},[]),W=x.useCallback(P=>{const E=P??w.current;E&&document.removeEventListener("keydown",E)},[]);return x.useEffect(()=>()=>{w.current&&document.removeEventListener("keydown",w.current)},[]),{create:J,clear:W}})(),{name:o,start:a,tape:r,output:i,register:c,navigation:p,keys:l=[]}=t,d=x.useRef(null);let{height:u,width:g}=fe(d);const f=he("md"),m=f?4:6;u=(u||400)*(f?1:.8),g=.95*(g||600);const{rows:b,cols:k}=x.useMemo(()=>!d.current&&ne?ne:Ue(m,u,g),[m,u,g]);x.useEffect(()=>{d.current&&b>0&&k>0&&(ne={rows:b,cols:k})},[b,k]);const S={...a,grid:" ".repeat(b*k),select:null,pause:!0,rows:b,cols:k},[j,y]=x.useReducer(it,S),{resetState:T,handleClick:Ce,chooseColor:Ie,wrapDispatch:Se}=(function(w,J,W){const{runner:P,start:E}=J,{rows:oe,cols:se}=w,{create:ie,clear:H}=me(200),L=ge(P),K=x.useCallback(F=>(H(),L({type:"clear",payload:{...E,grid:F,rows:oe,cols:se}})),[E,H,L,oe,se]),ze=x.useCallback(F=>()=>{W({type:"click",payload:{select:F}})},[W]),Fe=x.useCallback(F=>{const{position:ae,select:We}=w;return F===We?"primary":ae!==null&&F===ae?"info":"secondary"},[w]),Me=x.useCallback(F=>()=>{W({type:F,payload:{start:E,resetState:K,nextIter:L,dispatch:W,create:ie,clear:H}})},[K,L,W,ie,H,E]);return{resetState:K,handleClick:ze,chooseColor:Fe,wrapDispatch:Me}})(j,t,y);x.useEffect(()=>{y({type:"resize",payload:{rows:b,cols:k,resetState:T}})},[b,k,T]);const _=x.useCallback(w=>{w!=="Escape"?y({type:"edit",payload:{key:w,resetState:T}}):j.select!==null&&y({type:"click",payload:{select:j.select}})},[T,j.select]);x.useEffect(()=>(document.title=ee.interpreter(o),s(w=>{_(w.key)}),()=>{e()}),[o,s,_,e]);const Re={name:o,size:m,...j,dispatch:Se,tapeFlag:r??!1,outFlag:i??!1,regFlag:c??!1,height:u,index:0,tape:[],pointer:0,output:j.output??"",register:0,code:void 0,fastForward:!1,pause:j.pause};return n.jsxs(I.Provider,{value:Re,children:[n.jsx(ve,{hide:!0,container:d,navigation:p,children:n.jsx(ot,{rows:b,cols:k,options:j.grid.split(""),handleClick:Ce,chooseColor:Ie})}),f&&j.select!==null&&n.jsx(st,{keys:l,onSelect:_})]})}function we(t,s,e){let o=t,a=s;const r=o%e,i=a%e;o-=r,a-=i;const c=Math.abs(o-a);return Math.floor(c/e)+Math.abs(r-i)}function at(t,s,e){const o=[];for(let r=0;r<s.length;r++)s[r]==="@"&&o.push(r);if(o.length===1)return t;const a=(function(r,i){return(c,p)=>we(r,c,i)-we(r,p,i)})(t,e);return o.sort(a),o[1]??t}function ct(t){const s="^<>v";let{position:e,velocity:o,output:a,register:r,end:i}=t;const{grid:c,rows:p,cols:l}=t;if(i)return t;if(e==null){const u=c.indexOf("!"),g=c.lastIndexOf("!");if(u===-1||u!==g)return{...t,end:!0};e=u}const d=c[e];if(d===void 0)return t;if(s.includes(d)){const u=s.indexOf(d);o=u%2+1,u<2&&(o-=3)}else+d&&(r=+d);switch(d){case"|":o*=-1;break;case"@":e=at(e,c,l),e-=l,e<0&&(e+=p*l);break;case"+":r++;break;case"-":r--;break;case"*":r*=2;break;case"s":r*=r;break;case"/":r=Math.floor(r/2);break;case"~":a+=String.fromCharCode(r);break;case"?":{const u=4*Math.random(),g=Math.floor(u);o=g-2+(g>1?1:0);break}case".":e=null,i=!0}return e!==null&&d!=="@"&&(e=Y(e,o,p,l)),{...t,position:e,velocity:o,grid:c,output:a,register:r,end:i,rows:p,cols:l}}function lt({navigation:t}){return n.jsx(je,{name:"WII2D",start:{position:null,velocity:-2,end:!1,output:"",register:0},runner:ct,output:!0,register:!0,navigation:t,keys:["^","<",">","v","|","'",'"',"@","+","-","*","s","/","~","?",".","!","0","1","2","3","4","5","6","7","8","9"]})}function dt(t){let{velocity:s,position:e,pointer:o,tape:a}=t;const{grid:r,rows:i,cols:c,end:p}=t;if(p||e==null)return t;const l=s>0?3:-3,d=r[e];switch(a=[...a],d){case"\\":s=l-s;break;case"/":s-=l;break;case"<":o&&o--;break;case">":++o===a.length&&a.push(0);break;case"-":{const u=a[o];u!==void 0&&(a[o]=1^u);break}case"+":{let u;if(!a[o])do e=Y(e,s,i,c),u=r[e]??"";while(!"\\/<>-+*".includes(u));break}}return e=Y(e,s,i,c),{...t,velocity:s,position:e,pointer:o,grid:r,tape:a,rows:i,cols:c,end:p}}function ut({navigation:t}){return n.jsx(je,{name:"Back",start:{velocity:1,pointer:0,position:0,tape:[0],end:!1},runner:dt,tape:!0,navigation:t,keys:["\\","/","<",">","-","+","*"]})}const pt=({active:t,onChange:s})=>n.jsx(Be,{size:"small",sx:{minWidth:{xs:140,sm:160},"& .MuiOutlinedInput-root":{...O.presets.glass,borderRadius:R.borderRadius.full,color:h.text.primary,fontWeight:C.fontWeight.medium,transition:O.transition,"& fieldset":{border:`1px solid ${h.border.subtle}`},"&:hover fieldset":{borderColor:h.primary.main},"&.Mui-focused fieldset":{borderColor:h.primary.main,boxShadow:`0 0 0 2px ${h.primary.main}22`}},"& .MuiSelect-select":{py:1,px:{xs:2,sm:3}},"& .MuiSvgIcon-root":{color:h.text.secondary}},children:n.jsxs(Ae,{value:t,onChange:e=>{s(e.target.value)},MenuProps:{autoFocus:!1,BackdropProps:{sx:{backdropFilter:"none",backgroundColor:"transparent"}},PaperProps:{sx:{...O.presets.glass,borderRadius:R.borderRadius.lg,mt:1,"& .MuiMenuItem-root":{color:h.text.secondary,fontSize:"0.9rem",transition:O.transition,"&:hover":{backgroundColor:h.interactive.hover,color:h.text.primary},"&.Mui-selected":{backgroundColor:h.interactive.selected,color:h.primary.main,fontWeight:"bold","&:hover":{backgroundColor:h.interactive.selected}}}}}},children:[n.jsx(V,{value:"stun-step",children:"Stun Step"}),n.jsx(V,{value:"suffolk",children:"Suffolk"}),n.jsx(V,{value:"wii2d",children:"WII2D"}),n.jsx(V,{value:"back",children:"Back"})]})}),xt=({children:t})=>n.jsx(Te,{FallbackComponent:({error:s,resetErrorBoundary:e})=>n.jsx(M,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:4,minHeight:"300px"},children:n.jsxs(te,{sx:{p:4,maxWidth:"500px",textAlign:"center"},children:[n.jsx($,{variant:"h5",sx:{mb:2,color:h.text.primary,fontWeight:"bold"},children:"Interpreter Error"}),n.jsx($,{sx:{mb:3,color:h.text.secondary,fontFamily:"monospace",fontSize:"0.9rem"},children:(s==null?void 0:s.message)??"An unexpected error occurred."}),n.jsx(G,{variant:"contained",onClick:e,sx:{borderRadius:R.borderRadius.md,textTransform:"none"},children:"Reset Interpreter"})]})}),children:t});function ht(){const[t,s]=Ee(),e=t.get("type")??"stun-step";x.useEffect(()=>{document.title=ee.interpreters},[]);const o=i=>{s({type:i})},a=`https://esolangs.org/wiki/${(r=e,{"stun-step":"Stun Step",suffolk:"Suffolk",wii2d:"WII2D",back:"Back"}[r]??"Stun Step").replace(" ","_")}`;var r;return n.jsx(He,{infoUrl:a,containerSx:{height:{xs:"100dvh",md:"100vh"}},sx:{width:"100%",maxWidth:R.maxWidth.lg,margin:"0 auto",flex:1,display:"flex",justifyContent:"center",overflow:"hidden",boxSizing:"border-box"},children:n.jsx(xt,{children:(()=>{const i=n.jsx(pt,{active:e,onChange:o});switch(e){case"stun-step":default:return n.jsx(rt,{navigation:i});case"suffolk":return n.jsx(nt,{navigation:i});case"wii2d":return n.jsx(lt,{navigation:i});case"back":return n.jsx(ut,{navigation:i})}})()})})}export{ht as default};
