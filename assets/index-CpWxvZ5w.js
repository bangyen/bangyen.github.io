import{j as s,r as f}from"./vendor_react-BjoZPjhv.js";import{n as v,o as T,p as y,s as g,q as R,r as E,t as P,S as j,w as z,x as A,y as G,k as M,z as _,A as w,D,E as F}from"./gameUtils-C9ZmF7tp.js";import{d as a,T as h,B as m,M as H,g as L,I as O}from"./vendor_mui_core-Bzt2vl7i.js";import{N as W,d as Y,g as $}from"./vendor_mui_icons-CLHgFD_-.js";import{C as c,e as q,T as p}from"./index-BKHJR21r.js";import"./PageLayout-BOYuJdAS.js";import"./layout-DjuNrwTn.js";function Z({Icon:n,title:t,text:o}){return s.jsxs(a,{sx:{px:2},children:[s.jsxs(h,{variant:"h6",sx:v,children:[s.jsx(n,{sx:T}),t]}),s.jsx(h,{variant:"body1",sx:y,children:o})]})}function J({instructions:n,footer:t}){return s.jsxs(a,{sx:g,children:[s.jsx(a,{sx:R,children:n.map(({Icon:o,title:e,text:x})=>s.jsx(Z,{Icon:o,title:e,text:x},e))}),t]})}function Q({children:n}){return s.jsx(a,{sx:g,children:s.jsx(a,{sx:E,children:n})})}function U({step:n,totalSteps:t,onBack:o,onNext:e}){return s.jsxs(a,{sx:P,role:"navigation","aria-label":"Step navigation",children:[s.jsx(m,{onClick:o,disabled:n===0,startIcon:s.jsx(W,{}),"aria-label":"Previous step",sx:{visibility:n===0?"hidden":"visible",color:c.text.primary},children:"Back"}),s.jsx(a,{sx:{display:"flex",gap:1},role:"group","aria-label":`Step ${String(n+1)} of ${String(t)}`,children:Array.from({length:t},(x,l)=>s.jsx(a,{"aria-hidden":"true",sx:{width:j,height:j,borderRadius:"50%",backgroundColor:n===l?c.primary.main:c.interactive.disabled,transition:"background-color 0.3s"}},l))}),s.jsx(m,{onClick:e,disabled:n===t-1,endIcon:s.jsx(Y,{}),"aria-label":"Next step",sx:{visibility:n===t-1?"hidden":"visible",color:c.text.primary},children:"Next"})]})}function V(n,t,o){const[e,x]=f.useState(()=>{if(!o)return 0;try{const r=sessionStorage.getItem(o),i=r?parseInt(r,10):0;return isNaN(i)||i<0||i>=n?0:i}catch{return 0}}),l=f.useCallback(()=>{x(r=>{const i=r+1;return i<n?(o&&sessionStorage.setItem(o,String(i)),i):(t(),r)})},[n,t,o]),u=f.useCallback(()=>{x(r=>{if(r>0){const i=r-1;return o&&sessionStorage.setItem(o,String(i)),i}return r})},[o]);return{step:e,handleNext:l,handleBack:u}}const X=({children:n,id:t})=>s.jsx(h,{id:t,variant:"h5",sx:{color:c.text.primary,fontWeight:p.fontWeight.bold,textAlign:"left",fontSize:p.fontSize.h2},children:n});function K({toggleOpen:n,titles:t,instructions:o,instructionsFooter:e,exampleContent:x,extraSteps:l=[],cardSx:u,contentSxOverride:r,persistenceKey:i,titleId:b}){const S=t.length,{step:d,handleNext:C,handleBack:I}=V(S,n,i),k=[s.jsx(J,{instructions:o,footer:e},"instructions"),s.jsx(Q,{children:x},"example"),...l],B=r?r(d):M();return s.jsxs(q,{onClick:N=>{N.stopPropagation()},sx:[_,u],children:[s.jsxs(a,{sx:B,children:[s.jsxs(a,{sx:w,children:[s.jsx(X,{id:b,children:t[d]}),s.jsx(O,{onClick:n,size:"small","aria-label":"Close",sx:D,children:s.jsx($,{})})]}),s.jsx(a,{sx:F(d),children:k[d]})]}),s.jsx(U,{step:d,totalSteps:S,onBack:I,onNext:C})]})}function es({open:n,toggleOpen:t,...o}){const e="game-info-title";return s.jsx(H,{open:n,onClose:t,"aria-labelledby":e,slots:{backdrop:L},slotProps:{backdrop:{sx:A}},sx:z,children:s.jsx(a,{sx:G,role:"document",children:s.jsx(K,{...o,toggleOpen:t,titleId:e})})})}export{es as GameInfo,K as GameInfoContent};
