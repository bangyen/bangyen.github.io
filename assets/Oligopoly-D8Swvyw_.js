import{r as o,j as e}from"./vendor_react-CPTKWKBb.js";import{c as a,u as t,R as i,a as r,b as l,f as s}from"./chartHelpers-DHYQAQsR.js";import{g as n,T as d,h as m}from"./vendor_mui_icons-Dxxzao0W.js";import{C as c,U as p,d as u}from"./index-BPcuBZuL.js";import"./vendor_mui_core-CC-Vzdtj.js";import"./FeatureErrorFallback-D06YLDJu.js";import"./PageLayout-BivZ9oJq.js";const y=async()=>{const o=await s("/oligopoly_data.json.gz");if(!Array.isArray(o))throw new TypeError("Invalid data format: expected array");return o},g=()=>{const[s,g]=o.useState(a.oligopoly.defaultFirms),[f,h]=o.useState(a.oligopoly.defaultElasticity),[x,b]=o.useState(a.oligopoly.defaultBasePrice),A=a.modelTypes.cournot,F=!1,{data:_,loading:j}=t(u.oligopoly,y,()=>[]),C=o.useMemo(()=>((o,e,t,i,r,l)=>{if(0===o.length)return[];const s=o.filter(o=>o.num_firms===e&&o.model_type===t&&o.demand_elasticity===i&&o.base_price===r&&o.collusion_enabled===l);if(0===s.length)return o.filter(o=>o.num_firms===e&&o.model_type===t).sort((o,e)=>o.round-e.round).slice(0,a.oligopoly.maxRounds);return s.sort((o,e)=>o.round-e.round).slice(0,15)})(_,s,A,f,x,F),[_,s,A,f,x,F]),v=[{label:"Number of Firms",icon:n,color:c.primary.main,value:s,onChange:g,options:a.oligopoly.options.firms},{label:"Demand Elasticity",icon:d,color:c.data.green,value:f,onChange:h,options:a.oligopoly.options.elasticity},{label:"Base Price",icon:m,color:c.data.amber,value:x,onChange:b,options:a.oligopoly.options.price}],P={type:"line",xAxisKey:"round",yAxisFormatter:o=>`$${o.toFixed(2)}`,yAxisDomain:l(5),dualYAxis:!0,rightYAxisFormatter:o=>o.toFixed(2),rightYAxisDomain:l(a.oligopoly.hhiAxisPadding),tooltipLabelFormatter:r("Round"),tooltipFormatter:(o,e)=>["Market Price"===e?`$${o.toFixed(2)}`:o.toFixed(2),e],lines:[{dataKey:"price",name:"Market Price",color:c.primary.main,yAxisId:"left"},{dataKey:"hhi",name:"HHI Concentration",color:c.data.amber,yAxisId:"right"}]};return e.jsx(i,{title:"Oligopoly",subtitle:"Agent-Based Economic Competition Analysis",githubUrl:p.oligopolyRepo,chartData:C,chartConfig:P,chartTitle:"Market Dynamics",controls:v,loading:j,loadingMessage:"Loading Cournot simulation data...",onReset:()=>{g(a.oligopoly.defaultFirms),h(a.oligopoly.defaultElasticity),b(a.oligopoly.defaultBasePrice)},resetLabel:"Reset"})};export{g as default};
