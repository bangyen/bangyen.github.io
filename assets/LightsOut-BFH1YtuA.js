import{r as C,j as c}from"./vendor_react-BC_ZxTUy.js";import{a as j,T as U,R as Bt,d as ct,e as Pt,L as lt}from"./index-DxkDet3P.js";import{B as dt,u as Dt,g as Rt,a as Tt,b as Et,c as Mt,G as Ot,d as Ft,e as K}from"./gameUtils-BqiGYNbz.js";import{G as _t}from"./GlassCard-DpN40gR7.js";import{C as Y,u as Wt}from"./layout-B0wDzl-L.js";import{b as ft,E as Lt,c as Ut,K as Ht,d as Nt,e as Gt,R as Kt,N as Yt,f as Zt,g as ut,M as qt}from"./vendor_mui_icons-DLCmcMzz.js";import{G as Z,B as b,d as F,M as Jt,h as Qt,I as pt,e as q}from"./vendor_mui_core-BH2K4FI9.js";import"./GlobalHeader-C14muTK7.js";function xt(n,t){const o=C.useCallback((i,l)=>{const a=n(i,l);return{front:a?t.primary:t.secondary,back:a?t.secondary:t.primary}},[n,t]),r=C.useCallback((i,l)=>(function(a,d,f){const e=f(a,d),u={},m=e===f(a-1,d),p=e===f(a+1,d),g=e===f(a,d-1),x=e===f(a,d+1);return(m||g)&&(u.borderTopLeftRadius=0),(m||x)&&(u.borderTopRightRadius=0),(p||g)&&(u.borderBottomLeftRadius=0),(p||x)&&(u.borderBottomRightRadius=0),u})(i,l,n),[n]),s=C.useCallback((i,l)=>(function(d,f,e){const u=e(d,f),m=e(d,f+1),p=e(d+1,f),g=e(d+1,f+1);let x=!0;return u&&g||!(u+m+p+g<3)||(x=!1),x})(i,l,n)?t.primary:t.secondary,[n,t]);return C.useMemo(()=>({getColor:o,getBorder:r,getFiller:s}),[o,r,s])}function mt(n,t){const{grid:o,rows:r,cols:s}=n;return xt(C.useCallback((i,l)=>{if(i<0||l<0||i>=r||l>=s)return-1;const a=o[i];return a===void 0?0:a>>l&1},[o,r,s]),t)}function Vt(n,t){const o=(function(d,f){const e=f(8*d.length,8)>>>0;return gt().set(d,e/8),ht=d.length,e})(n,L.__wbindgen_malloc),r=ht,s=L.invert_matrix(o,r,t);if(s[3])throw(function(d){const f=L.__wbindgen_externrefs.get(d);return L.__externref_table_dealloc(d),f})(s[2]);var i,l,a=(i=s[0],l=s[1],i>>>=0,gt().subarray(i/8,i/8+l)).slice();return L.__wbindgen_free(s[0],8*s[1],8),a}let J=null;function gt(){return J!==null&&J.byteLength!==0||(J=new BigUint64Array(L.memory.buffer)),J}new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode();let L,ht=0;function yt(n,t){const o=n.length,r=[];for(let s=0;s<o;s++){const i=n[s];let l=0n;if(i!==void 0){for(let a=0;a<o;a++)if(i&1n<<BigInt(o-1-a)){const d=t[a];d!==void 0&&(l^=d)}}r.push(l)}return r}function bt(n){const t=Array(n).fill(1n);for(let o=0;o<n;o++){const r=t[o];r!==void 0&&(t[o]=r<<BigInt(n-o-1))}return t}function Xt(n,t,o){let r=bt(n.length),s=[...n],i=t;for(;i>0;)i%2==1&&(r=yt(r,s)),s=yt(s,s),i=Math.floor(i/2);return r}function te(n,t){const o=n.length,r=[];for(let s=0;s<o;s++){const i=n[s],l=t[s];if(i!==void 0&&l!==void 0){const a=i^l;r.push(a)}}return r}function ee(n,t){const o=n.length,r=[...Array(o).keys()].sort((s,i)=>{const l=n[i],a=n[s];return l===void 0||a===void 0?0:l>a?1:l<a?-1:0});return[r.map(s=>n[s]??0n),r.map(s=>t[s]??0n)]}function jt(n){const t=n.length;let o=n,r=bt(t);for(let s=0;s<t;s++){const i=1n<<BigInt(t-s-1);[o,r]=ee(o,r);for(let l=0;l<t;l++){const a=o[l];if(a!==void 0&&l!==s&&a&i){const d=o[s],f=r[s];if(d!==void 0){const e=o[l];e!==void 0&&(o[l]=e^d)}if(f!==void 0){const e=r[l];e!==void 0&&(r[l]=e^f)}}}}return r}const H={};function St(n,t,o){const r=`${t.toString()},${o.toString()}`;if(!H[r]){const a=(function(f){if(f===1)return[1n];const e=[7n<<BigInt(f-2)];for(let m=1;m<f;m++){const p=e[m-1];if(p!==void 0){const g=p>>1n;e.push(g)}}const u=e[0];return u!==void 0&&(e[0]=u-(1n<<BigInt(f))),e})(o),d=(function(f,e){const u=f.length;let m=Array(u).fill(0n),p=0,g=e;for(;g>0n;)1n&g&&(m=te(m,Xt(f,p))),g>>=1n,p++;return m})(a,(function(f){const e=[0n,1n];for(let u=1;u<f;u++){const m=e[u],p=e[u-1];if(m!==void 0&&p!==void 0){const g=m<<1n;e.push(g^p)}}return e[f]??0n})(t+1));if(o<=64)try{const f=Vt(new BigUint64Array(d.map(e=>BigInt.asUintN(64,e))),d.length);H[r]=Array.from(f)}catch{H[r]=jt(d)}else H[r]=jt(d)}const s=H[r],i=n.join(""),l=i?BigInt("0b"+i):0n;return s.map(a=>1&(function(d){let f=0,e=d;if(e<0n)throw new Error("countBits called on negative bigint");for(;e>0n;)e&=e-1n,f++;return f})(a&l))}function Q(n,t){return Array.from({length:n},()=>0)}function N(n,t,o,r,s){const i=[...o];let l=1<<t;if(t>0&&(l|=1<<t-1),t<s-1&&(l|=1<<t+1),i[n]!==void 0&&(i[n]^=l),n>0){const a=i[n-1];a!==void 0&&(i[n-1]=a^1<<t)}if(n<r-1){const a=i[n+1];a!==void 0&&(i[n+1]=a^1<<t)}return i}function vt(n,t,o,r,s){let i=1<<t;if(t>0&&(i|=1<<t-1),t<s-1&&(i|=1<<t+1),o[n]!==void 0&&(o[n]^=i),n>0){const l=o[n-1];l!==void 0&&(o[n-1]=l^1<<t)}if(n<r-1){const l=o[n+1];l!==void 0&&(o[n+1]=l^1<<t)}}function et(n,t){const o=Q(n);for(let r=0;r<n;r++)for(let s=0;s<t;s++)Math.random()>.5&&vt(r,s,o,n,t);return o}function ne(n,t){const{type:o,row:r,col:s}=t;let{grid:i,score:l,rows:a,cols:d,initialized:f}=n;switch(o){case"adjacent":r!==void 0&&s!==void 0&&(i=N(r,s,i,a,d));break;case"multi_adjacent":if(t.moves){const e=[...i];t.moves.forEach(({row:u,col:m})=>{vt(u,m,e,a,d)}),i=e}break;case"random":case"randomize":i=et(a,d);break;case"resize":{const{newRows:e,newCols:u}=t;e!==void 0&&u!==void 0&&(a=e,d=u,i=et(a,d),f=!0);break}case"reset":i=Q(a),l=0;break;case"new":case"next":i=et(a,d),l+=1;break;case"restore":if(t.state)return{...t.state}}return{grid:i,score:l,rows:a,cols:d,initialized:f||!1}}function wt(n,t){var s;const o=[...n];let r=n.at(-1);if(!r)return o;for(let i=1;i<t;i++)for(let l=0;l<t;l++){if(!((s=r[i-1])!=null&&s[l]))continue;const a=N(i,l,r);o.push(a),r=a}return o}function kt(n,t){const o=n.at(-1);if(!o)return n;const r=[...n];for(;r.length<t;)r.push([...o]);return r}function oe(n,t){let o=Q(t);for(const x of n)o=N(Math.floor(x/t),x%t,o);const r=wt([o],t),s=r.at(-1);if(!s)return{boardStates:[],inputStates:[],outputStates:[]};const i=s.at(-1);if(!i)return{boardStates:[],inputStates:[],outputStates:[]};const{input:l,output:a}=(function(x,w){const S=Array(w).fill(0),y=[S],v=[S],I=[...S];for(let A=0;A<w;A++){if(!x[A])continue;I[A]=1;const B=[...I],_=St(B,w,w);y.push(B),v.push(_)}return{input:y,output:v}})(i,t),d=r.length+l.length+1,f=a.at(-1);if(!f)return{boardStates:[],inputStates:[],outputStates:[]};let e=[...s];for(let x=0;x<d-r.length;x++)r.push([...s]);const u=l[0];for(let x=0;x<d-l.length;x++)u&&l.unshift([...u]);const m=a[0];for(let x=0;x<d-a.length;x++)m&&a.unshift([...m]);for(let x=0;x<t;x++)f[x]&&(e=N(0,x,e),r.push([...e]));const p=wt(r,t),g=p.length;return{boardStates:p,inputStates:kt(l,g),outputStates:kt(a,g)}}const nt={FAST:"background-color 100ms ease-in-out, color 100ms ease-in-out, opacity 100ms ease-in-out, border-radius 100ms ease-in-out",DEFAULT:"background-color 200ms ease, color 200ms ease, opacity 200ms ease, border-radius 200ms ease"},zt={DROP:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},re=1.25,Ct={MOBILE:-28,DESKTOP:-40},se="lights-out-size",ie="lights-out-state";function ot({getColor:n,getBorder:t}){return(o,r)=>{const{front:s}=n(o,r);return{backgroundColor:s,color:s,children:c.jsx(ft,{}),style:t(o,r),sx:{transition:nt.DEFAULT}}}}function V(n,t,o){return xt(C.useCallback((r,s)=>r!==0||s<0||s>=t?-1:n[s],[n,t]),o)}function $t(n,t,o,r,s,i=1){var f;const l=n.length,a={},d=100/l;for(let e=0;e<l;e++){const u=e*d,m=(e+1)*d;let p=s.secondary,g=!1,x="";const w=n[e],S=e+1<l?n[e+1]:null;if(w&&S){const y=N(t,o,w);g=!0;for(let v=0;v<r;v++){const I=y[v],A=S[v];if(!I||!A){g=!1;break}for(let B=0;B<r;B++)if(I[B]!==A[B]){g=!1;break}if(!g)break}g&&(p=((f=w[t])==null?void 0:f[o])===1?s.secondary:s.primary,x=`"${String(e+1)}"`)}g?(a[`${String(u)}%`]={opacity:0,content:x,color:p,transform:"scale(0.5)"},a[`${String(u+d*(.1/i))}%`]={opacity:1,content:x,color:p,transform:"scale(1.2)"},a[`${String(u+d*(.2/i))}%`]={opacity:1,content:x,color:p,transform:"scale(1)"},a[`${String(m-d*(.1/i))}%`]={opacity:1,content:x,color:p,transform:"scale(1)"},a[`${String(m)}%`]={opacity:0,content:x,color:p,transform:"scale(0.5)"}):(a[`${String(u)}%`]={opacity:0,content:'""',color:p,transform:"scale(0.5)"},a[`${String(m)}%`]={opacity:0,content:'""',color:p,transform:"scale(0.5)"})}return a}function ae({start:n=[],dims:t=3,size:o,palette:r,getFrontProps:s,getBackProps:i}){const[l,a]=C.useState(0);C.useEffect(()=>{const h=setInterval(()=>{a(k=>k+1)},2e3);return()=>{clearInterval(h)}},[]);const d=oe(n,t),f=o,{boardStates:e,inputStates:u,outputStates:m}=d,p=l%u.length,g=p===u.length-1,x=mt({grid:e[p]??e[0]??[],rows:t,cols:t},r),w=s(x),S=i(x),y=(function(h,k,z,$){return(O,D)=>{const T=$t(h,O,D,k,$),P=h.length,R=`${z}-board-icon-${String(O)}-${String(D)}`;return{icon:c.jsx(b,{sx:{width:"100%",height:"100%",position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2,"&::after":{content:'""',fontSize:{xs:"0.8rem",sm:"1.2rem"},fontWeight:"bold",filter:zt.DROP,paddingTop:{xs:"0.08rem",sm:"0.15rem"},animation:`${R} ${String(2*P)}s linear infinite`}}}),keyframes:T,keyframeName:R}}})(e,t,"example",r),v=V(u[p]??[],t,r),I=V(m[p]??[],t,r),A=ot(v),B=ot(I),_=(function(h,k,z,$){return(O,D)=>{const T=h.length,P={},R=100/T;for(let E=0;E<T;E++){const G=E*R,X=(E+1)*R;let M=$.secondary,it=!1,W="";const tt=h[E],at=E+1<T?h[E+1]:null;tt&&at&&tt[D]!==at[D]&&(it=!0,M=tt[D]===1?$.secondary:$.primary,W=`"${String(E+1)}"`),it?(P[`${String(G)}%`]={opacity:0,content:W,color:M,transform:"scale(0.5)"},P[`${String(G+.05*R)}%`]={opacity:1,content:W,color:M,transform:"scale(1.2)"},P[`${String(G+.1*R)}%`]={opacity:1,content:W,color:M,transform:"scale(1)"},P[`${String(X-.05*R)}%`]={opacity:1,content:W,color:M,transform:"scale(1)"},P[`${String(X)}%`]={opacity:0,content:W,color:M,transform:"scale(0.5)"}):(P[`${String(G)}%`]={opacity:0,content:'""',color:M,transform:"scale(0.5)"},P[`${String(X)}%`]={opacity:0,content:'""',color:M,transform:"scale(0.5)"})}const st=`${z}-input-icon-${String(O)}-${String(D)}`;return{icon:c.jsx(b,{sx:{width:"100%",height:"100%",position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2,"&::after":{content:'""',fontSize:{xs:"0.8rem",sm:"1.2rem"},fontWeight:"bold",filter:zt.DROP,paddingTop:{xs:"0.08rem",sm:"0.15rem"},animation:`${st} ${String(2*T)}s linear infinite`}}}),keyframes:P,keyframeName:st}}})(u,0,"example",r);return c.jsx(ce,{boardStates:e,inputStates:u,dims:t,id:"example",palette:r,children:c.jsx(Z,{container:!0,size:12,spacing:2,sx:{height:"100%"},children:c.jsxs(Z,{container:!0,size:12,wrap:"nowrap",sx:{justifyContent:"center",alignItems:"center",flex:1,height:"100%",overflow:"hidden"},children:[c.jsx(Z,{size:6,sx:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:c.jsxs(b,{sx:{position:"relative",display:"inline-flex"},children:[c.jsx(dt,{size:f,rows:t,cols:t,frontProps:(h,k)=>{const z=w(h,k),$=y(h,k);return{...z,children:c.jsxs(c.Fragment,{children:[z.children,$.icon]}),sx:{...z.sx,position:"relative"}}},backProps:S}),c.jsx(b,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:g?1:0,transform:g?"scale(1)":"scale(0.5)",visibility:g?"visible":"hidden",transition:"all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",pointerEvents:"none",zIndex:10},children:(()=>{const h=e[u.length-1],k=h==null?void 0:h.flat().every(z=>z===1);return c.jsx(Lt,{sx:{fontSize:{xs:"2.5rem",sm:"4rem"},color:k?r.secondary:r.primary}})})()})]})}),c.jsxs(Z,{container:!0,size:6,spacing:2,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[c.jsxs(b,{sx:{mb:2,textAlign:"center"},children:[c.jsx(F,{variant:"subtitle2",sx:{mb:1,color:j.text.secondary},children:"Input"}),c.jsx(Y,{rows:1,cols:t,size:f,cellProps:(h,k)=>{const z=A(h,k),$=_(h,k);return{...z,children:c.jsxs(c.Fragment,{children:[z.children,$.icon]}),sx:{...z.sx,position:"relative"}}},space:0})]}),c.jsxs(b,{sx:{textAlign:"center"},children:[c.jsx(Y,{rows:1,cols:t,size:f,cellProps:B,space:0}),c.jsx(F,{variant:"subtitle2",sx:{mt:1,color:j.text.secondary},children:"Result"})]})]})]})})})}function ce({boardStates:n,inputStates:t,dims:o,id:r,palette:s,children:i}){const l=C.useMemo(()=>[...n.flatMap((a,d)=>Array.from({length:o},(f,e)=>({name:`${r}-board-icon-${String(d)}-${String(e)}`,frames:$t(n,d,e,o,s)}))),...t.flatMap((a,d)=>{const f=`${r}-input-icon-0-${String(d)}`,e={},u=t.length,m=100/u;for(let p=0;p<u;p++){const g=p*m,x=(p+1)*m;let w=!1,S=s.secondary,y="";const v=t[p],I=p+1<u?t[p+1]:null;v&&I&&v[d]!==I[d]&&(w=!0,y=`"${String(p+1)}"`,S=v[d]===1?s.secondary:s.primary),w?(e[`${String(g)}%`]={opacity:0,content:y,color:S,transform:"scale(0.5)"},e[`${String(g+.05*m)}%`]={opacity:1,content:y,color:S,transform:"scale(1.2)"},e[`${String(g+.1*m)}%`]={opacity:1,content:y,color:S,transform:"scale(1)"},e[`${String(x-.05*m)}%`]={opacity:1,content:y,color:S,transform:"scale(1)"},e[`${String(x)}%`]={opacity:0,content:y,color:S,transform:"scale(0.5)"}):(e[`${String(g)}%`]={opacity:0,content:'""',color:S},e[`${String(x)}%`]={opacity:0,content:'""',color:S})}return{name:f,frames:e}})],[n,t,o,r,s]);return c.jsxs(c.Fragment,{children:[c.jsx("style",{children:l.map(a=>`
                @keyframes ${a.name} {
                    ${Object.entries(a.frames).map(([d,f])=>`
                        ${d} {
                            ${Object.entries(f).map(([e,u])=>`${e.replace(/[A-Z]/g,m=>`-${m.toLowerCase()}`)}: ${u};`).join(" ")}
                        }
                    `).join("")}
                }
            `).join("")}),i]})}const le=({children:n})=>c.jsx(F,{variant:"h5",sx:{color:j.text.primary,fontWeight:U.fontWeight.bold,textAlign:"left",fontSize:U.fontSize.h2},children:n}),rt=({Icon:n,title:t,text:o})=>c.jsxs(b,{sx:{px:2},children:[c.jsxs(F,{variant:"h6",sx:{color:j.text.primary,fontWeight:U.fontWeight.semibold,display:"flex",alignItems:"center",mb:1.5,fontSize:U.fontSize.subheading},children:[c.jsx(n,{sx:{mr:2,color:j.primary.main,fontSize:"1.75rem"}}),t]}),c.jsx(F,{variant:"body1",sx:{color:j.text.secondary,lineHeight:1.6,fontSize:U.fontSize.body,ml:6},children:o})]}),de=["Chasing Lights","How It Works","Calculator"],fe=_t;function ue(n){const{rows:t,cols:o,size:r,open:s,palette:i,toggleOpen:l,getFrontProps:a,getBackProps:d}=n,f=Wt("md"),[e,u]=C.useState(0),[m,p]=C.useState(Array(o).fill(0));C.useEffect(()=>{p(Array(o).fill(0))},[o,i]);const g=C.useCallback(h=>{const k=parseInt(h,10);p(z=>{const $=[...z];return $[k]!==void 0&&($[k]^=1),$})},[p]),x=St(m,t,o),{getDragProps:w}=Dt({onAction:g,checkEnabled:()=>e===2,posAttribute:"data-col"}),S=V(m,o,i),y=V(x,o,i),v=(function(h,k){const{getColor:z,getBorder:$}=h;return(O,D)=>{const{front:T,back:P}=z(O,D),R=k(D.toString());return{...R,backgroundColor:T,style:$(O,D),sx:{...R.sx,"&:hover":{cursor:"pointer",color:P}},color:T,children:c.jsx(ft,{})}}})(S,w),I=ot(y),A=()=>{l()},B=`#${Bt.pages.LightsOutResearch}`;let _;return _=f?c.jsx(pt,{component:"a",href:B,size:"small",sx:{color:j.text.secondary},children:c.jsx(ut,{})}):c.jsx(q,{component:"a",href:B,variant:"outlined",size:"small",startIcon:c.jsx(ut,{}),sx:{borderColor:j.border.subtle,color:j.text.secondary,fontSize:"0.75rem",py:.75,px:1.5,"&:hover":{borderColor:j.primary.main,color:j.primary.main,backgroundColor:j.interactive.hover}},children:"Analysis"}),c.jsx(Jt,{open:s,onClose:A,slots:{backdrop:Qt},slotProps:{backdrop:{sx:{backgroundColor:h=>h.palette.mode==="dark"?"hsla(0, 0%, 3%, 0.85)":"hsla(0, 0%, 98%, 0.85)",backdropFilter:"blur(12px) saturate(180%)",transition:"all 0.3s ease-in-out !important"}}},sx:{zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(b,{sx:{outline:"none",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:[c.jsxs(fe,{onClick:h=>{h.stopPropagation()},sx:{width:"100%",maxWidth:"1000px",height:{xs:"630px",sm:"495px"},minHeight:{xs:"630px",sm:"495px"},display:"flex",flexDirection:"column",p:0,overflow:"hidden",position:"relative",m:2},children:[c.jsxs(b,{sx:{flex:1,overflowY:e===1?"hidden":"auto",p:{xs:2.5,md:3},display:"flex",flexDirection:"column"},children:[c.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,px:2},children:[c.jsx(le,{children:de[e]}),c.jsxs(b,{sx:{display:"flex",gap:2,alignItems:"center"},children:[_,c.jsx(pt,{onClick:A,size:"small",sx:{color:j.text.secondary},children:c.jsx(Ut,{})})]})]}),e===0&&c.jsx(b,{sx:{animation:"fadeIn 0.3s ease",flex:1,display:"flex",flexDirection:"column"},children:c.jsxs(b,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:4},children:[c.jsx(rt,{Icon:Ht,title:"Chase to Bottom",text:"Turn off rows from top to bottom by clicking lights in each row to push them down."}),c.jsx(rt,{Icon:Nt,title:"Use Calulator",text:"Enter the remaining lights pattern from the bottom row into the calculator on the last page."}),c.jsx(rt,{Icon:Gt,title:"Chase Again",text:"Apply the solution pattern to the top row, then chase them down again to solve the puzzle."})]})}),e===1&&c.jsx(b,{sx:{flex:1,display:"flex",flexDirection:"column",animation:"fadeIn 0.3s ease"},children:c.jsx(b,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:c.jsx(ae,{dims:3,size:.7*r,start:[1,3,8],palette:i,getFrontProps:a,getBackProps:d})})}),e===2&&c.jsx(b,{sx:{animation:"fadeIn 0.3s ease",textAlign:"center",flex:1,display:"flex",flexDirection:"column"},children:c.jsxs(b,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",gap:3},children:[c.jsxs(b,{children:[c.jsxs(F,{variant:"subtitle2",sx:{mb:1,color:j.text.primary,fontWeight:"bold"},children:["Input"," ",c.jsx(b,{component:"span",sx:{color:j.text.secondary,fontWeight:"normal"},children:"(Bottom Row)"})]}),c.jsx(Y,{space:0,rows:1,cols:o,size:r*(f?.9:.8),cellProps:v})]}),c.jsxs(b,{children:[c.jsxs(F,{variant:"subtitle2",sx:{mb:1,color:j.text.primary,fontWeight:"bold"},children:["Solution"," ",c.jsx(b,{component:"span",sx:{color:j.text.secondary,fontWeight:"normal"},children:"(Top Row)"})]}),c.jsx(Y,{space:0,rows:1,cols:o,size:r*(f?.9:.8),cellProps:I})]}),c.jsx(b,{sx:{display:"flex",justifyContent:"center"},children:c.jsx(q,{variant:"outlined",size:"small",startIcon:c.jsx(Kt,{}),onClick:()=>{p(Array(o).fill(0))},sx:{borderColor:j.border.subtle,color:j.text.secondary},children:"Clear Pattern"})})]})})]}),c.jsxs(b,{sx:{p:2.5,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx(q,{onClick:()=>{e>0&&u(e-1)},disabled:e===0,startIcon:c.jsx(Yt,{}),sx:{visibility:e===0?"hidden":"visible",color:j.text.primary},children:"Back"}),c.jsx(b,{sx:{display:"flex",gap:1},children:[0,1,2].map(h=>c.jsx(b,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:e===h?j.primary.main:j.interactive.disabled,transition:"background-color 0.3s"}},h))}),c.jsx(q,{onClick:()=>{e<2?u(e+1):l()},disabled:e===2,endIcon:c.jsx(Zt,{}),sx:{visibility:e===2?"hidden":"visible",color:j.text.primary},children:"Next"})]})]}),c.jsx("style",{children:`
                    @keyframes fadeIn {
                        from { opacity: 0; transform: translateY(10px); }
                        to { opacity: 1; transform: translateY(0); }
                    }
                `})]})})}const pe=c.jsx(b,{sx:{width:"45%",height:"45%",borderRadius:"50%",backgroundColor:"currentColor"}});function It(n,t){const{getColor:o,getBorder:r}=t;return(s,i)=>{const l=r(s,i),{front:a,back:d}=o(s,i),f=Rt(s,i),e=n(f);return{...e,children:pe,backgroundColor:a,color:a,style:l,sx:{...e.sx,"&:hover":{cursor:"pointer",color:d}}}}}function At(n){return(t,o)=>({backgroundColor:n.getFiller(t,o),transition:nt.FAST})}function xe(n){const t=It(o=>({onMouseDown:()=>{},onMouseEnter:()=>{},onTouchStart:()=>{},"data-pos":o,sx:{touchAction:"none",transition:"none"}}),n);return(o,r)=>({...t(o,r),onMouseDown:void 0,onMouseEnter:void 0,onTouchStart:void 0,sx:{}})}function me(){const{rows:n,cols:t,state:o,dispatch:r,size:s,mobile:i,solved:l,handleNext:a,controlsProps:d}=Tt({storageKeys:{size:se,state:ie},pageTitle:ct.lightsOut,gridConfig:{defaultSize:null,minSize:2,maxSize:10,headerOffset:{mobile:lt.headerHeight.xs,desktop:lt.headerHeight.md},paddingOffset:120,cellSizeReference:{mobile:K.gridSizes.mobile,desktop:K.gridSizes.desktop},mobileRowOffset:-2},boardConfig:{paddingOffset:180,boardMaxWidth:1200,boardSizeFactor:.9,maxCellSize:80,remBase:16},reducer:ne,getInitialState:(y,v)=>({grid:Q(y),score:0,rows:y,cols:v,initialized:!1}),winAnimationDelay:K.timing.winAnimationDelay,isSolved:y=>y.initialized&&y.grid.every(v=>v===0)}),[f,e]=C.useReducer(y=>!y,!1),u=C.useMemo(()=>({primary:j.primary.main,secondary:j.primary.dark}),[]),{getDragProps:m}=Et({onToggle:(y,v)=>{r({type:"adjacent",row:y,col:v})},checkEnabled:()=>!l,touchTimeout:K.timing.interactionDelay,transition:nt.FAST}),p=C.useMemo(()=>o.initialized&&o.grid.every(y=>y===(1<<t)-1),[o.initialized,o.grid,t]),g=mt(o,u),x=Mt(It,m,[g]),w=C.useMemo(()=>At(g),[g]),S=c.jsx(Ft,{...d,children:c.jsx(Pt,{title:"How to Play",Icon:qt,onClick:e})});return c.jsxs(Ot,{title:ct.lightsOut,infoUrl:"https://en.wikipedia.org/wiki/Lights_Out_(game)",showTrophy:l,onReset:a,boardSize:s,iconSizeRatio:re,primaryColor:u.primary,secondaryColor:u.secondary,useSecondaryTrophy:p,boardSx:{marginTop:i?`${String(Ct.MOBILE)}px`:`${String(Ct.DESKTOP)}px`},controls:S,children:[c.jsx(dt,{size:s,rows:n,cols:t,frontProps:x,backProps:w}),f&&c.jsx(ue,{rows:n,cols:t,size:s,open:f,palette:u,toggleOpen:e,getFrontProps:xe,getBackProps:At})]})}export{me as default};
