import{j as e,r}from"./vendor_react-DdkxgTu-.js";import{b as i}from"./ResearchDemo-RrFlO_4r.js";import{B as t,d as o,T as n,I as a,s as l,e as s,F as d,P as c,t as x,A as p}from"./vendor_mui_core-CQ3K-gFd.js";import{s as m,f as h}from"./vendor_mui_icons-BOQsY4SM.js";import{T as b,C as u,S as g}from"./index-DE4mB6m2.js";import{u as f}from"./useWorker-2pb81J1Q.js";import"./PageLayout-CIio_T5I.js";const y=({n:r,loading:d,onNChange:c,onAnalyze:x,onCancel:p})=>e.jsxs(e.Fragment,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(o,{variant:"h6",sx:{color:u.text.primary,fontWeight:b.fontWeight.bold},children:"Solvability Analyzer"}),e.jsx(n,{title:"Analyze the solvability and kernel properties for a square n x n grid.",children:e.jsx(a,{size:"small",sx:{ml:1,color:u.text.secondary},"aria-label":"Solvability analyzer documentation",children:e.jsx(m,{fontSize:"small"})})})]}),e.jsx(t,{sx:{mb:3},children:e.jsx(l,{fullWidth:!0,label:"Grid Size (n)",variant:"outlined",value:r,onChange:e=>{c(e.target.value)},size:"small",sx:{input:{color:u.text.primary}}})}),d?e.jsx(s,{fullWidth:!0,variant:"outlined",onClick:p,startIcon:e.jsx(h,{}),sx:{color:u.text.secondary,borderColor:u.border.subtle,height:i.LAYOUT.BUTTON_HEIGHT,"&:hover":{backgroundColor:i.GLASS.SLIGHT,borderColor:u.text.secondary}},children:"Cancel Analysis"}):e.jsx(s,{fullWidth:!0,variant:"contained",onClick:x,sx:{backgroundColor:u.primary.main,border:"1px solid transparent",height:i.LAYOUT.BUTTON_HEIGHT,"&:hover":{backgroundColor:u.primary.dark}},children:"Analyze Solvability"})]}),S=({nullity:r,solvablePercent:n})=>e.jsx(t,{sx:{p:2.25,pb:0},children:e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,pb:1.5,borderBottom:`1px solid ${i.BORDER.SUBTLE}`},children:[e.jsx(o,{variant:"caption",sx:{color:u.primary.main,fontWeight:b.fontWeight.bold,textTransform:"uppercase",letterSpacing:1},children:"Subspace Analysis"}),e.jsxs(o,{sx:{color:0===r?u.data.green:u.text.primary,fontFamily:"monospace",fontWeight:b.fontWeight.bold,fontSize:i.LAYOUT.FONT_SIZE_SM},children:[n,"% Solvable"]})]})}),j=({imageMapping:r,isFullSubspace:n})=>0===r.length?null:e.jsxs(t,{sx:{minWidth:0,flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(o,{variant:"caption",sx:{color:u.primary.main,fontWeight:b.fontWeight.bold,display:"block",mb:.5,textTransform:"uppercase",letterSpacing:1,fontSize:i.LAYOUT.FONT_SIZE_XS},children:n?"Chasing Table":"Image Basis"}),e.jsxs(t,{sx:{display:"flex",px:1,mb:.5},children:[e.jsx(o,{variant:"caption",sx:{flex:1,color:u.text.secondary,fontSize:"0.55rem",fontWeight:b.fontWeight.bold,letterSpacing:.5},children:"BOTTOM RESIDUAL"}),e.jsx(t,{sx:{width:25}}),e.jsx(o,{variant:"caption",sx:{flex:1,color:u.text.secondary,fontSize:"0.55rem",fontWeight:b.fontWeight.bold,letterSpacing:.5,textAlign:"right"},children:"TOP CORRECTION"})]}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:.5,pr:1},children:[r.map(r=>e.jsxs(t,{sx:{fontFamily:"monospace",fontSize:i.LAYOUT.FONT_SIZE_XS,p:1,px:1.25,backgroundColor:i.GLASS.DARK,borderRadius:i.LAYOUT.CARD_RADIUS,color:u.text.primary,border:`1px solid ${i.BORDER.VERY_SUBTLE}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(t,{component:"span",sx:{color:u.data.green,flex:1,wordBreak:"break-all"},children:r.state}),e.jsx(t,{component:"span",sx:{color:u.text.secondary,mx:1},children:"â†’"}),e.jsx(t,{component:"span",sx:{color:u.primary.main,flex:1,textAlign:"right",wordBreak:"break-all"},children:r.toggle})]},r.state)),!n&&e.jsx(t,{sx:{p:1,textAlign:"center"},children:e.jsx(o,{variant:"caption",sx:{color:u.text.secondary,fontStyle:"italic",fontSize:"0.6rem"},children:"... and other reachable combinations"})})]})]}),T=({quietPatterns:r})=>0===r.length?null:e.jsxs(t,{sx:{minWidth:0,mb:1.5},children:[e.jsx(o,{variant:"caption",sx:{color:u.primary.main,fontWeight:b.fontWeight.bold,display:"block",mb:.5,textTransform:"uppercase",letterSpacing:1,fontSize:i.LAYOUT.FONT_SIZE_XS},children:"Quiet Patterns (Kernel)"}),e.jsx(t,{sx:{display:"flex",flexWrap:"wrap",gap:1,pr:1},children:r.map(r=>e.jsx(t,{sx:{fontFamily:"monospace",fontSize:i.LAYOUT.FONT_SIZE_XS,px:1.25,py:.5,backgroundColor:i.GLASS.DARK,borderRadius:g.borderRadius.xs,color:u.primary.main,letterSpacing:1,border:`1px solid ${i.BORDER.VERY_SUBTLE}`,wordBreak:"break-all"},children:r},r))})]}),A=({result:r})=>e.jsx(d,{in:!0,children:e.jsxs(c,{elevation:0,sx:{height:"100%",backgroundColor:i.GLASS.TRANSPARENT,borderRadius:g.borderRadius.md,border:`1px solid ${x(0===r.nullity?u.data.green:u.primary.main,.2)}`,borderLeft:`4px solid ${0===r.nullity?u.data.green:u.primary.main}`,position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx(S,{nullity:r.nullity,solvablePercent:r.solvablePercent}),e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2.5,flexGrow:1,minHeight:0,overflowY:"auto",p:2.25,pt:0,"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:i.GLASS.MEDIUM,borderRadius:g.borderRadius.xs}},children:[e.jsx(T,{quietPatterns:r.quietPatterns}),e.jsx(j,{imageMapping:r.imageMapping,isFullSubspace:r.isFullSubspace})]}),0===r.quietPatterns.length&&e.jsx(t,{sx:{p:1.5,px:2.25,backgroundColor:i.GREEN.BG_SUBTLE,borderTop:`1px solid ${i.GREEN.BORDER_SUBTLE}`,display:"flex",alignItems:"center"},children:e.jsx(o,{sx:{color:u.data.green,fontFamily:"monospace",fontSize:i.LAYOUT.FONT_SIZE_SM,fontWeight:b.fontWeight.bold,textTransform:"uppercase"},children:"fully solvable (Nullity = 0)"})})]})}),R=()=>{const[n,a]=r.useState("5"),l=r.useCallback(()=>new Worker(new URL("/assets/solvability.worker-QR3PsshB.js",import.meta.url),{type:"module"}),[]),{result:s,loading:d,error:c,run:x,terminate:m,setError:h}=f(l);return e.jsxs(t,{children:[e.jsx(y,{n:n,loading:d,onNChange:a,onAnalyze:()=>{const e=Number.parseInt(n,10);isNaN(e)||e<1?h("Please enter a valid positive integer."):e>100?h("Grid size n > 100 is too computationally intensive."):x({n:e})},onCancel:()=>{m()}}),c&&e.jsx(p,{severity:"error",sx:{mb:2,mt:2},children:c}),e.jsxs(t,{sx:{height:i.LAYOUT.RESULT_CARD_HEIGHT,mt:3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[d&&e.jsxs(t,{sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,border:`1px dashed ${u.border.subtle}`,borderRadius:g.borderRadius.md,backgroundColor:i.GLASS.VERY_SUBTLE},children:[e.jsx(t,{sx:{width:40,height:40,borderRadius:"50%",border:`2px solid ${u.primary.main}22`,borderTopColor:u.primary.main,...i.ANIMATIONS.SPIN}}),e.jsx(o,{variant:"caption",sx:{color:u.text.secondary},children:"Performing Algebraic Matrix Analysis..."})]}),!s&&!c&&!d&&e.jsx(t,{sx:{height:"100%",display:"flex",alignItems:"flex-start",justifyContent:"center",pt:5,px:3,border:`1px dashed ${u.border.subtle}`,borderRadius:g.borderRadius.md,backgroundColor:i.GLASS.VERY_SUBTLE},children:e.jsx(o,{variant:"body2",sx:{color:u.text.secondary,fontStyle:"italic",textAlign:"center"},children:"Select grid dimensions and click analyze to see results"})}),s&&!d&&e.jsx(A,{result:s})]})]})};export{R as SolvabilityAnalyzer};
