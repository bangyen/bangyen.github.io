import{r as z,a as Ae,j as k,__tla as ze}from"./vendor_react-BC_ZxTUy.js";import{A as ee,S as pe,a as $,L as ae,e as te,d as be,__tla as Me}from"./index-C2mTtdK1.js";import{c as Ne,b as he,f as ne,g as me,a as Oe,h as Be,d as Te,G as De,e as He,B as Le}from"./GamePageLayout-CPmPYA2Z.js";import{u as We,C as we}from"./layout-BzfAHCJc.js";import{B as D}from"./vendor_mui_core-BH2K4FI9.js";import{u as Ue,v as Pe,c as Ge,P as Fe}from"./vendor_mui_icons-DLCmcMzz.js";import"./GlobalHeader-CrVnCB88.js";let xe,Ve=Promise.all([(()=>{try{return ze}catch{}})(),(()=>{try{return Me}catch{}})()]).then(async()=>{const Q="32px",Y="48px",ce="130%",le="24px",ye="slant-size",_e="slant-state",Se="slant-ghost-moves",de={WHITE:"#fff"},F={LINE:"0 2px 4px rgba(0,0,0,0.2)",HINT:"0 4px 8px rgba(0,0,0,0.1)"},G={BORDER:"rgba(255, 255, 255, 0.1)",BG_SUBTLE:"rgba(255, 255, 255, 0.02)",BG_HOVER:"rgba(255, 255, 255, 0.1)",DASHED_BORDER:"rgba(255, 255, 255, 0.2)",HINT_BG:"hsl(217, 50%, 8%)",HINT_BORDER:"rgba(255, 255, 255, 0.3)"};function ve(e,t,r){const a=(function(w,l){const g=l(1*w.length,1)>>>0;return K().set(w,g/1),J=w.length,g})(e,N.__wbindgen_malloc),n=J,f=N.find_cycles_wasm(a,n,t,r);var b=(function(w,l){w>>>=0;const g=oe(),c=[];for(let o=w;o<w+4*l;o+=4)c.push(N.__wbindgen_externrefs.get(g.getUint32(o,!0)));return N.__externref_drop_slice(w,l),c})(f[0],f[1]).slice();return N.__wbindgen_free(f[0],4*f[1],4),b}function Ce(){return{__proto__:null,"./slant_wasm_bg.js":{__proto__:null,__wbg___wbindgen_debug_string_0bc8482c6e3508ae:function(e,t){const r=(function(n,f,b){if(b===void 0){const o=q.encode(n),s=f(o.length,1)>>>0;return K().subarray(s,s+o.length).set(o),J=o.length,s}let w=n.length,l=f(w,1)>>>0;const g=K();let c=0;for(;c<w;c++){const o=n.charCodeAt(c);if(o>127)break;g[l+c]=o}if(c!==w){c!==0&&(n=n.slice(c)),l=b(l,w,w=c+3*n.length,1)>>>0;const o=K().subarray(l+c,l+w);c+=q.encodeInto(n,o).written,l=b(l,w,c,1)>>>0}return J=c,l})(re(t),N.__wbindgen_malloc,N.__wbindgen_realloc),a=J;oe().setInt32(e+4,a,!0),oe().setInt32(e+0,r,!0)},__wbg___wbindgen_throw_be289d5034ed271b:function(e,t){throw new Error(ue(e,t))},__wbg_new_361308b2356cecd0:function(){return new Object},__wbg_new_3eb36ae241fe6f44:function(){return new Array},__wbg_set_3f1d0b984ed272ed:function(e,t,r){e[t]=r},__wbg_set_f43e577aea94465b:function(e,t,r){e[t>>>0]=r},__wbindgen_cast_0000000000000001:function(e){return e},__wbindgen_cast_0000000000000002:function(e,t){return ue(e,t)},__wbindgen_init_externref_table:function(){const e=N.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}}}}function re(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const n=e.description;return n==null?"Symbol":`Symbol(${n})`}if(t=="function"){const n=e.name;return typeof n=="string"&&n.length>0?`Function(${n})`:"Function"}if(Array.isArray(e)){const n=e.length;let f="[";n>0&&(f+=re(e[0]));for(let b=1;b<n;b++)f+=", "+re(e[b]);return f+="]",f}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let a;if(!(r&&r.length>1))return toString.call(e);if(a=r[1],a=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:a}let P=null;function oe(){return(P===null||P.buffer.detached===!0||P.buffer.detached===void 0&&P.buffer!==N.memory.buffer)&&(P=new DataView(N.memory.buffer)),P}function ue(e,t){return(function(r,a){return se+=a,se>=$e&&(Z=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Z.decode(),se=a),Z.decode(K().subarray(r,r+a))})(e>>>=0,t)}let V=null;function K(){return V!==null&&V.byteLength!==0||(V=new Uint8Array(N.memory.buffer)),V}let Z=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Z.decode();const $e=2146435072;let se=0;const q=new TextEncoder;"encodeInto"in q||(q.encodeInto=function(e,t){const r=q.encode(e);return t.set(r),{read:e.length,written:r.length}});let N,J=0;const E=1,O=2;try{await(async function(e){if(N!==void 0)return N;e!==void 0&&Object.getPrototypeOf(e)===Object.prototype&&({module_or_path:e}=e),e===void 0&&(e=new URL("/assets/slant_wasm_bg-DKBUSADV.wasm",import.meta.url));const t=Ce();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r}=await(async function(a,n){if(typeof Response=="function"&&a instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(a,n)}catch(b){if(!a.ok||!(function(w){switch(w){case"basic":case"cors":case"default":return!0}return!1})(a.type)||a.headers.get("Content-Type")==="application/wasm")throw b}const f=await a.arrayBuffer();return await WebAssembly.instantiate(f,n)}{const f=await WebAssembly.instantiate(a,n);return f instanceof WebAssembly.Instance?{instance:f,module:a}:f}})(await e,t);return(function(a){return N=a.exports,P=null,V=null,N.__wbindgen_start(),N})(r)})()}catch{}class ie{constructor(t){this.parent=Array.from({length:t},(r,a)=>a)}find(t){const r=this.parent[t];if(r===void 0)throw new Error("Index out of bounds");if(r!==t&&(this.parent[t]=this.find(r)),this.parent[t]===void 0)throw new Error("Parent undefined");return this.parent[t]}union(t,r){const a=this.find(t),n=this.find(r);return a!==n&&(this.parent[a]=n,!0)}connected(t,r){return this.find(t)===this.find(r)}}function B(e,t,r){return e*(r+1)+t}function X(e,t,r){const a=Array.from({length:t+1},()=>Array(r+1).fill(0));for(let n=0;n<t;n++){const f=e[n];if(f)for(let b=0;b<r;b++){const w=f[b];if(w===E){const l=a[n];if(l){const c=l[b+1];c!==void 0&&(l[b+1]=c+1)}const g=a[n+1];if(g){const c=g[b];c!==void 0&&(g[b]=c+1)}}else if(w===O){const l=a[n];if(l){const c=l[b];c!==void 0&&(l[b]=c+1)}const g=a[n+1];if(g){const c=g[b+1];c!==void 0&&(g[b+1]=c+1)}}}}return a}function ke(e,t,r){var w,l,g,c;const a=Array.from({length:t},()=>Array(r).fill(0)),n=new ie((t+1)*(r+1));let f=!0;for(;f;){f=!1;for(let o=0;o<=t;o++)for(let s=0;s<=r;s++){const d=(w=e[o])==null?void 0:w[s];if(d==null)continue;const h=[{gr:o-1,gc:s-1,pt:O},{gr:o-1,gc:s,pt:E},{gr:o,gc:s-1,pt:E},{gr:o,gc:s,pt:O}].filter(({gr:_,gc:u})=>_>=0&&_<t&&u>=0&&u<r);let v=0;const S=[];for(const _ of h){const u=(l=a[_.gr])==null?void 0:l[_.gc];u===0?S.push(_):u===_.pt&&v++}if(v===d&&S.length>0)for(const{gr:_,gc:u,pt:p}of S){const x=a[_];if((x==null?void 0:x[u])===0){const R=p===E?O:E;x[u]=R,f=!0;const T=B(_,R===E?u+1:u,r),H=B(_+1,R===E?u:u+1,r);if(n.connected(T,H))return!1;n.union(T,H)}}else if(v+S.length===d&&S.length>0)for(const{gr:_,gc:u,pt:p}of S){const x=a[_];if((x==null?void 0:x[u])===0){x[u]=p,f=!0;const R=B(_,p===E?u+1:u,r),T=B(_+1,p===E?u:u+1,r);if(n.connected(R,T))return!1;n.union(R,T)}}}if(!f)for(let o=0;o<t;o++)for(let s=0;s<r;s++){const d=a[o];if((d==null?void 0:d[s])!==0)continue;const h=B(o,s+1,r),v=B(o+1,s,r),S=n.connected(h,v),_=B(o,s,r),u=B(o+1,s+1,r),p=n.connected(_,u);if(S&&p)return!1;S?(d[s]=O,f=!0,n.union(_,u)):p&&(d[s]=E,f=!0,n.union(h,v))}}if(!a.every(o=>o.every(s=>s!==0)))return!1;const b=X(a,t,r);for(let o=0;o<=t;o++)for(let s=0;s<=r;s++){const d=(g=e[o])==null?void 0:g[s];if(d!=null&&((c=b[o])==null?void 0:c[s])!==d)return!1}return!0}function Ee(e,t){try{const l=BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)),g=(function(c,o,s){return N.generate_puzzle_wasm(c,o,s)})(e,t,l);return{numbers:g.numbers,solution:g.solution}}catch{}let r=[],a=!1;for(let l=0;l<50&&!a;l++){r=Array.from({length:e},()=>Array(t).fill(0));const g=new ie((e+1)*(t+1)),c=[];for(let s=0;s<e;s++)for(let d=0;d<t;d++)c.push({r:s,c:d});for(let s=c.length-1;s>0;s--){const d=Math.floor(Math.random()*(s+1)),h=c[s],v=c[d];h&&v&&(c[s]=v,c[d]=h)}let o=!1;for(const{r:s,c:d}of c){const h=B(s,d+1,t),v=B(s+1,d,t),S=g.connected(h,v),_=B(s,d,t),u=B(s+1,d+1,t),p=g.connected(_,u);if(S&&p){o=!0;break}const x=r[s];x&&(S?(x[d]=O,g.union(_,u)):p||Math.random()<.5?(x[d]=E,g.union(h,v)):(x[d]=O,g.union(_,u)))}o||(a=!0)}a||(r=Array.from({length:e},(l,g)=>Array(t).fill(g%2==0?E:O)));const n=X(r,e,t).map(l=>[...l]),f=[];for(let l=0;l<=e;l++)for(let g=0;g<=t;g++)f.push({r:l,c:g});for(let l=f.length-1;l>0;l--){const g=Math.floor(Math.random()*(l+1)),c=f[l],o=f[g];c&&o&&(f[l]=o,f[g]=c)}const b=Math.floor((e+1)*(t+1)*0);let w=(e+1)*(t+1);for(const{r:l,c:g}of f){if(w<=b)continue;const c=n[l];if(!c)continue;const o=c[g];o!=null&&(c[g]=null,ke(n,e,t)?w--:c[g]=o)}return{numbers:n,solution:r}}const Re=Ne({getInitialState:fe,customHandler:(e,t)=>{if(t.type==="toggle"){if(e.solved)return e;const{row:r,col:a}=t,n=e.grid.map(o=>[...o]),f=n[r];if(!f)return e;const b=f[a];if(b===void 0)return e;t.reverse?f[a]=b===0?O:b===O?E:0:f[a]=b===0?E:b===E?O:0;let w=!1;if(n.every(o=>o.every(s=>s!==0))){const o=X(n,e.rows,e.cols);e.numbers.every((s,d)=>s.every((h,v)=>{var S;return h==null||h===((S=o[d])==null?void 0:S[v])}))&&!(function(s,d,h){const v=new ie((d+1)*(h+1));for(let S=0;S<d;S++){const _=s[S];if(_)for(let u=0;u<h;u++){const p=_[u];if(p===void 0||p===0)continue;const x=B(S,p===E?u+1:u,h),R=B(S+1,p===E?u:u+1,h);if(!v.union(x,R))return!0}}return!1})(n,e.rows,e.cols)&&(w=!0)}const l=(function(o,s,d,h){var _,u;const v=new Set,S=X(o,d,h);for(let p=0;p<=d;p++)for(let x=0;x<=h;x++){const R=(_=s[p])==null?void 0:_[x];if(R==null)continue;const T=((u=S[p])==null?void 0:u[x])??0;T>R?v.add(`${String(p)},${String(x)}`):T+[{gr:p-1,gc:x-1},{gr:p-1,gc:x},{gr:p,gc:x-1},{gr:p,gc:x}].filter(({gr:H,gc:C})=>{var m;return H>=0&&H<d&&C>=0&&C<h&&((m=o[H])==null?void 0:m[C])===0}).length<R&&v.add(`${String(p)},${String(x)}`)}return v})(n,e.numbers,e.rows,e.cols),g=(function(o,s,d){var x,R,T,H;try{const C=new Uint8Array(s*d);for(let I=0;I<s;I++)for(let i=0;i<d;i++)C[I*d+i]=((x=o[I])==null?void 0:x[i])??0;const m=ve(C,s,d);if(m.length>0)return new Set(m)}catch{}const h=new Map,v=new Set;for(let C=0;C<s;C++)for(let m=0;m<d;m++){const I=(R=o[C])==null?void 0:R[m];if(!I||I===0)continue;const i=B(C,I===E?m+1:m,d),y=B(C+1,I===E?m:m+1,d);h.has(i)||h.set(i,[]),h.has(y)||h.set(y,[]),(T=h.get(i))==null||T.push({node:y,r:C,c:m}),(H=h.get(y))==null||H.push({node:i,r:C,c:m})}const S=new Set,_=new Set,u=[],p=(C,m)=>{S.add(C),_.add(C);const I=h.get(C)??[];for(const{node:i,r:y,c:A}of I)if(i!==m)if(_.has(i)){v.add(`${String(y)},${String(A)}`);for(let j=u.length-1;j>=0;j--){const M=u[j];if(!M||(v.add(`${String(M.r)},${String(M.c)}`),M.u===i||M.v===i))break}}else S.has(i)||(u.push({r:y,c:A,u:C,v:i}),p(i,C),u.pop());_.delete(C)};for(const C of h.keys())S.has(C)||p(C,-1);return v})(n,e.rows,e.cols),c=(function(o,s,d,h){var _,u;const v=new Set,S=X(o,d,h);for(let p=0;p<=d;p++)for(let x=0;x<=h;x++){const R=(_=s[p])==null?void 0:_[x];R!=null&&(((u=S[p])==null?void 0:u[x])??0)===R&&v.add(`${String(p)},${String(x)}`)}return v})(n,e.numbers,e.rows,e.cols);return{...e,grid:n,solved:w,errorNodes:l,cycleCells:g,satisfiedNodes:c}}return e}});function fe(e,t){const{numbers:r,solution:a}=Ee(e,t);return{grid:Array.from({length:e},()=>Array(t).fill(0)),numbers:r,solution:a,rows:e,cols:t,solved:!1,errorNodes:new Set,cycleCells:new Set,satisfiedNodes:new Set}}const Ie=({rows:e,cols:t,numbers:r,size:a,initialMoves:n,onMove:f,onCopy:b,onClear:w,onClose:l})=>{const g=We("sm"),c=n,{getDragProps:o}=he({onToggle:(m,I,i,y,A)=>{const j=`${String(m)},${String(I)}`;if(!A)return void f(j,y);const M=c.get(j);let W;return W=i?M===O?E:M===E?void 0:O:M===E?O:M===O?void 0:E,f(j,W),W},touchTimeout:ne.timing.touchHoldDelay,checkEnabled:()=>!0}),[s,d]=z.useState(new Map),[h,v]=z.useState([]),[S,_]=z.useState(new Set),u=Ae.useRef(null);z.useEffect(()=>{const m=new Worker(new URL("/assets/solverWorker-CPk5TI7V.js",import.meta.url),{type:"module"});return u.current=m,m.onmessage=I=>{const i=I.data;if(i.type==="RESULT"){const{gridState:y,conflicts:A,cycleCells:j}=i.payload;d(y),v(A),_(j)}},()=>{m.terminate()}},[]),z.useEffect(()=>{u.current&&u.current.postMessage({type:"SOLVE",payload:{rows:e,cols:t,numbers:r,userMoves:c}})},[c,r,e,t]);const p=.4*a,x=a-p,R=z.useMemo(()=>new Set(h.filter(m=>m.type==="cell").map(m=>`${String(m.r)},${String(m.c)}`)),[h]),T=z.useMemo(()=>new Set(h.filter(m=>m.type==="node").map(m=>`${String(m.r)},${String(m.c)}`)),[h]),H=z.useCallback((m,I)=>{const i=`${String(m)},${String(I)}`,y=s.get(i),A=(y==null?void 0:y.state)??0,j=y==null?void 0:y.source,M=R.has(i),W=S.has(i),U=o(i);let L=$.text.primary;return M?L=$.data.red:W?L=j==="user"?$.data.red:"#ff9800":j==="user"?L=$.primary.main:j==="propagated"&&(L=$.data.green),{...U,"data-pos":i,"data-type":"cell",sx:{...U.sx,cursor:"pointer",border:`1px solid ${G.BORDER}`,position:"relative",backgroundColor:G.BG_SUBTLE,"&:hover":{backgroundColor:G.BG_HOVER}},children:k.jsxs(D,{sx:{width:"100%",height:"100%",position:"relative"},children:[A===E&&k.jsx(D,{sx:{position:"absolute",width:ce,height:"6px",backgroundColor:L,borderRadius:pe.borderRadius.full,top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-45deg)",boxShadow:F.LINE,transition:ee.transition,pointerEvents:"none"}}),A===O&&k.jsx(D,{sx:{position:"absolute",width:ce,height:"6px",backgroundColor:L,borderRadius:pe.borderRadius.full,top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(45deg)",boxShadow:F.LINE,transition:ee.transition,pointerEvents:"none"}})]})}},[s,R,S,o]),C=z.useCallback((m,I)=>{var A;const i=(A=r[m])==null?void 0:A[I],y=T.has(`${String(m)},${String(I)}`);return{"data-pos":`${String(m)},${String(I)}`,"data-type":"hint",children:k.jsx(D,{children:i??""}),sx:{borderRadius:"50%",backgroundColor:y?$.data.red:G.HINT_BG,border:i!=null?`2px solid ${y?$.data.red:G.HINT_BORDER}`:"none",fontSize:`${String(.5*p)}rem`,fontWeight:"800",color:de.WHITE,zIndex:5,opacity:i!=null?1:0,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",userSelect:"none",WebkitUserSelect:"none",transform:y?"scale(1.1)":"scale(1)",position:"relative",pointerEvents:"none"}}},[r,T,p]);return k.jsxs(D,{sx:{position:"relative",userSelect:"none"},children:[k.jsxs(D,{sx:{position:"relative",padding:g?`calc(${Q} + 16px)`:`calc(${Y} + 24px)`,border:`2px dashed ${G.DASHED_BORDER}`,borderRadius:le},children:[k.jsx(D,{sx:{position:"relative",zIndex:ae.zIndex.base+1},children:k.jsx(we,{size:a,rows:e,cols:t,cellProps:H,space:0,sx:{width:"fit-content"}})}),k.jsx(D,{sx:{position:"absolute",top:g?`calc(${Q} + 16px)`:`calc(${Y} + 24px)`,left:g?`calc(${Q} + 16px)`:`calc(${Y} + 24px)`,transform:`translate(-${String(p/2)}rem, -${String(p/2)}rem)`,zIndex:ae.zIndex.base+2,pointerEvents:"none"},children:k.jsx(we,{size:p,rows:e+1,cols:t+1,cellProps:C,space:x,sx:{width:"fit-content"}})})]}),k.jsxs(D,{sx:{display:"flex",justifyContent:"center",gap:2,position:"absolute",bottom:g?-72:-88,left:0,right:0,pointerEvents:"auto",zIndex:ae.zIndex.base+5,paddingBottom:2},children:[k.jsx(te,{title:"Copy Board",Icon:Ue,onClick:b,sx:{backgroundColor:$.interactive.selected,color:$.primary.main,"&:hover":{backgroundColor:$.interactive.focus}}}),k.jsx(te,{title:"Clear Calculator",Icon:Pe,onClick:w,sx:{backgroundColor:"rgba(255, 68, 68, 0.1)",color:$.data.red,"&:hover":{backgroundColor:"rgba(255, 68, 68, 0.2)"}}}),k.jsx(te,{title:"Close Calculator",Icon:Ge,onClick:l,sx:{backgroundColor:"rgba(255, 193, 7, 0.1)",color:$.data.amber,"&:hover":{backgroundColor:"rgba(255, 193, 7, 0.2)"}}})]})]})},je=(e,t)=>(r,a)=>{var l;const n=(l=t.grid[r])==null?void 0:l[a],f=me(r,a),b=t.cycleCells.has(f),w=e(f);return{...w,sx:{...w.sx,cursor:"pointer",border:`1px solid ${$.border.subtle}`,position:"relative","&:hover":{backgroundColor:$.interactive.hover}},children:k.jsxs(D,{sx:{width:"100%",height:"100%",position:"relative"},children:[n===E&&k.jsx(D,{sx:{position:"absolute",width:"130%",height:"6px",backgroundColor:b?$.data.red:$.text.primary,borderRadius:"99px",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-45deg)",boxShadow:F.LINE,transition:ee.transition,pointerEvents:"none"}}),n===O&&k.jsx(D,{sx:{position:"absolute",width:"130%",height:"6px",backgroundColor:b?$.data.red:$.text.primary,borderRadius:"99px",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(45deg)",boxShadow:F.LINE,transition:ee.transition,pointerEvents:"none"}})]})}};xe=function(){const[e,t]=z.useState(!1),{rows:r,cols:a,state:n,dispatch:f,size:b,mobile:w,handleNext:l,controlsProps:g}=Oe({storageKeys:{size:ye,state:_e},pageTitle:be.slant,gridConfig:{defaultSize:5,minSize:3,headerOffset:ne.layout.headerHeight,paddingOffset:160,widthLimit:1e3,cellSizeReference:4,mobileRowOffset:-2},boardConfig:{paddingOffset:i=>({x:i?128:224,y:100}),boardMaxWidth:1200,boardSizeFactor:.95,maxCellSize:100,remBase:16,rowOffset:1,colOffset:1},reducer:Re,getInitialState:(i,y)=>fe(i,y),winAnimationDelay:ne.timing.winAnimationDelay,isSolved:i=>i.solved,persistence:{enabled:!e,serialize:i=>({...i,errorNodes:Array.from(i.errorNodes),cycleCells:Array.from(i.cycleCells),satisfiedNodes:Array.from(i.satisfiedNodes)}),deserialize:i=>{const y=i;return{...y,errorNodes:new Set(y.errorNodes),cycleCells:new Set(y.cycleCells),satisfiedNodes:new Set(y.satisfiedNodes)}}}}),[c,o]=z.useState(new Map);Be({storageKey:Se,rows:r,cols:a,state:c,onRestore:i=>{o(i)},serialize:i=>Array.from(i.entries()),deserialize:i=>new Map(i)});const s=z.useRef("");z.useEffect(()=>{const i=JSON.stringify(n.numbers);s.current&&s.current!==i&&o(new Map),s.current=i},[n.numbers,n.rows,n.cols]);const d=l,{getDragProps:h}=he({onToggle:(i,y,A)=>{f({type:"toggle",row:i,col:y,reverse:A})},checkEnabled:()=>!n.solved,touchTimeout:ne.timing.touchHoldDelay}),v=.4*b,S=Te(je,h,[n]),_=z.useMemo(()=>((i,y)=>(A,j)=>{var ge;const M=(ge=i.numbers[A])==null?void 0:ge[j],W=me(A,j),U=i.errorNodes.has(W),L=i.satisfiedNodes.has(W);return{sx:{pointerEvents:"none"},children:k.jsx(D,{sx:{borderRadius:"50%",backgroundColor:U?$.data.red:$.surface.background,border:M!=null?`2px solid ${U?$.data.red:L?"transparent":$.border.subtle}`:"none",fontSize:`${String(.5*y)}rem`,fontWeight:"800",color:U?de.WHITE:L?$.interactive.disabledText:$.text.primary,boxShadow:L&&!U?"none":F.HINT,zIndex:5,opacity:M!=null?1:0,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",userSelect:"none",WebkitUserSelect:"none",transform:U?"scale(1.1)":"scale(1)",width:`${String(y)}rem`,height:`${String(y)}rem`},children:M??""})}})(n,v),[n,v]),u=z.useCallback((i,y)=>{o(A=>{const j=new Map(A);return y===void 0?j.delete(i):j.set(i,y),j})},[]),p=z.useCallback(()=>{const i=new Map;n.grid.forEach((y,A)=>{y.forEach((j,M)=>{j!==0&&i.set(`${String(A)},${String(M)}`,j)})}),o(i)},[n.grid]),x=z.useCallback(()=>{o(new Map)},[]),R=z.useCallback(()=>{t(!1)},[]),T=z.useCallback(i=>{i.stopPropagation()},[]),H=z.useMemo(()=>({background:`radial-gradient(circle at 50% 50%, ${$.surface.elevated} 0%, ${$.surface.background} 100%)`,padding:w?"1rem":"2rem"}),[w]),C=z.useMemo(()=>({userSelect:"none",padding:w?Q:Y,border:"2px solid transparent",borderRadius:le}),[w]),m=e?k.jsx(k.Fragment,{}):k.jsx(He,{...g,disabled:e,children:k.jsx(te,{title:"Open Calculator",Icon:Fe,onClick:()=>{t(!e)},sx:{color:"default"}})}),I=e?k.jsx(Ie,{rows:r,cols:a,numbers:n.numbers,size:b,initialMoves:c,onMove:u,onCopy:p,onClear:x,onClose:R}):k.jsx(Le,{size:b,rows:r+1,cols:a+1,frontProps:_,backProps:S,frontLayerSx:{pointerEvents:"none"}});return k.jsx(De,{title:be.slant,infoUrl:"https://en.wikipedia.org/wiki/Gokigen_Naname",paddingBottom:{xs:"180px",md:"150px"},controls:m,contentSx:H,showTrophy:!e&&n.solved,onReset:d,boardSize:b,iconSizeRatio:.8,primaryColor:$.primary.main,secondaryColor:$.primary.main,boardSx:C,children:k.jsx(D,{onClick:T,children:I})})}});export{Ve as __tla,xe as default};
