{"version":3,"file":"static/js/26.b59804fe.chunk.js","mappings":"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","sources":["components/common/GlassCard.tsx","components/Layout.tsx","Pages/Home.tsx","Pages/Error.tsx","utils/calculate.ts","hooks/useSize.ts","hooks/useWindow.ts","hooks/useContainer.ts","hooks/useMobile.ts","hooks/useTimer.ts","hooks/useKeys.ts","hooks/useCache.ts","hooks/useQuizEngine.ts","components/common/CustomGrid.tsx","Pages/Snake.tsx","Pages/Board.tsx","Pages/Lights/boardHandlers.ts","Pages/Lights/matrices.ts","Pages/Lights/chaseHandlers.ts","Pages/Lights/Example.tsx","Pages/Lights/Info.tsx","Pages/Lights/LightsOut.tsx","components/ResearchDemo.tsx","Pages/ZSharp.tsx","Pages/Oligopoly.tsx","Interpreters/EditorContext.ts","Interpreters/components/Text.tsx","Interpreters/Display.tsx","Interpreters/Toolbar.tsx","Interpreters/components/TextArea.tsx","Interpreters/Editor.tsx","Interpreters/Text/TextEditor.tsx","Interpreters/Text/StunStep.tsx","Interpreters/Text/Suffolk.tsx","Interpreters/components/GridArea.tsx","Interpreters/Grid/eventHandlers.ts","Interpreters/Grid/GridEditor.tsx","Interpreters/Grid/WII2D.tsx","Interpreters/Grid/Back.tsx","Interpreters/index.ts","components/InterpreterNavigation.tsx","Pages/Interpreters.tsx","components/Quiz/QuizLayout.tsx","components/Quiz/QuizSettingsView.tsx","components/Quiz/QuizSummaryView.tsx","components/Quiz/QuizGameView.tsx","components/Quiz/SkippedBadge.tsx","utils/quizUtils.ts","config/quizConfig.tsx","components/Quiz/QuizGame.tsx","Pages/WikipediaQuizPage.tsx","hooks/useQuizFilter.ts","Pages/index.ts"],"sourcesContent":["import React, { forwardRef, ReactNode } from 'react';\nimport { Box } from '../mui';\nimport { SPACING, COMPONENT_VARIANTS } from '../../config/theme';\nimport type { SxProps, Theme } from '@mui/material/styles';\n\ninterface GlassCardProps {\n    children: ReactNode;\n    padding?: number | string;\n    sx?: SxProps<Theme>;\n    className?: string;\n    interactive?: boolean;\n    [key: string]: any;\n}\n\nexport const GlassCard = forwardRef<HTMLDivElement, GlassCardProps>(\n    function GlassCard(\n        {\n            children,\n            padding = SPACING.padding.md,\n            sx,\n            className,\n            interactive = false,\n            ...props\n        },\n        ref\n    ) {\n        return (\n            <Box\n                ref={ref}\n                className={`glass-card ${className || ''}`}\n                sx={{\n                    ...(interactive\n                        ? COMPONENT_VARIANTS.interactiveCard\n                        : COMPONENT_VARIANTS.card),\n                    padding,\n                    ...sx,\n                }}\n                {...props}\n            >\n                {children}\n            </Box>\n        );\n    }\n);\n","import React from 'react';\nimport { Container, Box } from '../components/mui';\nimport { SPACING, COMPONENT_VARIANTS, COLORS } from '../config/theme';\n\ninterface SectionProps {\n    children: React.ReactNode;\n    id?: string;\n    paddingY?: string;\n    paddingX?: string;\n    maxWidth?: string;\n    sx?: Record<string, unknown>;\n    [key: string]: unknown;\n}\n\ninterface BackgroundBoxProps {\n    children: React.ReactNode;\n    sx?: Record<string, unknown>;\n    [key: string]: unknown;\n}\n\ninterface HeroContainerProps {\n    children: React.ReactNode;\n    paddingBottom?: string;\n    maxWidth?: string;\n    sx?: Record<string, unknown>;\n    [key: string]: unknown;\n}\n\ninterface PageLayoutProps {\n    children: React.ReactNode;\n    sx?: Record<string, unknown>;\n    [key: string]: unknown;\n}\n\n/**\n * Section component provides consistent section layout with proper spacing\n * and responsive padding for improved maintainability.\n */\nexport function Section({\n    children,\n    id,\n    paddingY = SPACING.padding.lg,\n    paddingX = SPACING.padding.lg,\n    maxWidth = SPACING.maxWidth.lg,\n    ...props\n}: SectionProps) {\n    return (\n        <Container\n            maxWidth={false}\n            id={id}\n            sx={{\n                paddingY,\n                paddingX,\n                ...(props.sx as Record<string, unknown>),\n            }}\n            {...props}\n        >\n            <Box sx={{ maxWidth, margin: '0 auto' }}>{children}</Box>\n        </Container>\n    );\n}\n\n/**\n * BackgroundBox component provides consistent background positioning\n * for page background elements.\n */\nexport function BackgroundBox({ children, ...props }: BackgroundBoxProps) {\n    return (\n        <Box\n            sx={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                background: COLORS.surface.background,\n                zIndex: -1,\n                ...(props.sx as Record<string, unknown>),\n            }}\n            {...props}\n        >\n            {children}\n        </Box>\n    );\n}\n\n/**\n * HeroContainer component provides consistent hero section layout\n * with centered content and responsive padding.\n */\nexport function HeroContainer({\n    children,\n    paddingBottom = '4rem',\n    maxWidth = SPACING.maxWidth.lg,\n    ...props\n}: HeroContainerProps) {\n    return (\n        <Container\n            maxWidth={false}\n            sx={{\n                flex: 1,\n                ...COMPONENT_VARIANTS.flexCenter,\n                paddingTop: 0,\n                paddingBottom,\n                paddingX: {\n                    xs: SPACING.padding.sm,\n                    md: SPACING.padding.lg,\n                },\n                maxWidth: '100%',\n                overflowX: 'hidden',\n                ...(props.sx as Record<string, unknown>),\n            }}\n            {...props}\n        >\n            <Box sx={{ maxWidth, margin: '0 auto' }}>{children}</Box>\n        </Container>\n    );\n}\n\n/**\n * PageLayout component provides consistent page layout with background,\n * full height, and proper positioning for improved maintainability.\n */\nexport function PageLayout({ children, ...props }: PageLayoutProps) {\n    return (\n        <Box\n            sx={{\n                minHeight: '100vh',\n                position: 'relative',\n                background: COLORS.surface.background,\n                boxSizing: 'border-box',\n                width: '100%',\n                maxWidth: '100vw',\n                overflowX: 'hidden',\n                ...(props.sx as Record<string, unknown>),\n            }}\n            {...props}\n        >\n            {children}\n        </Box>\n    );\n}\n\n","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n    Grid,\n    Typography,\n    Box,\n    Menu,\n    MenuItem,\n    Fade,\n    Button,\n} from '../components/mui';\n\nimport { GlassCard } from '../components/common/GlassCard';\nimport { TooltipButton, ICON_MAP } from '../components/common/Controls';\nimport { Section, HeroContainer } from '../components/Layout';\nimport {\n    PERSONAL_INFO,\n    URLS,\n    SKILLS,\n    PUBLICATIONS,\n    PROJECTS,\n    PAGE_TITLES,\n} from '../config/constants';\nimport {\n    COLORS,\n    SPACING,\n    TYPOGRAPHY,\n    ANIMATIONS,\n    COMPONENT_VARIANTS,\n    SHADOWS,\n} from '../config/theme';\n\nimport {\n    GitHub,\n    Work,\n    LocationOn,\n    OpenInNew,\n    ArrowForward,\n    Code,\n    Psychology,\n    GamepadRounded,\n    ViewModuleRounded,\n} from '../components/icons';\n\ninterface ProjectInfo {\n    path: string;\n    description: string;\n    technology: string;\n}\n\ninterface ProjectCategory {\n    title: string;\n    icon: React.ElementType;\n    color: string;\n    projects: Record<string, ProjectInfo>;\n}\n\nconst PROJECT_CATEGORIES: Record<string, ProjectCategory> = {\n    research: {\n        title: 'Research',\n        icon: Psychology,\n        color: COLORS.data.green,\n        projects: {\n            ZSharp: {\n                path: '/ZSharp',\n                description: 'ML optimization method',\n                technology: 'PyTorch',\n            },\n            Oligopoly: {\n                path: '/Oligopoly',\n                description: 'Market simulation model',\n                technology: 'FastAPI',\n            },\n        },\n    },\n    games: {\n        title: 'Games',\n        icon: GamepadRounded,\n        color: COLORS.primary.main,\n        projects: {\n            Snake: {\n                path: '/Snake',\n                description: 'Retro arcade gameplay',\n                technology: 'JavaScript',\n            },\n            Lights_Out: {\n                path: '/Lights_Out',\n                description: 'Grid-based logic puzzle',\n                technology: 'JavaScript',\n            },\n        },\n    },\n    collections: {\n        title: 'Collections',\n        icon: Code,\n        color: COLORS.data.amber,\n        projects: {\n            Interpreters: {\n                path: '/Interpreters',\n                description: 'Esoteric language demos',\n                technology: 'JavaScript',\n            },\n            Wikipedia: {\n                path: '/wikipedia',\n                description: 'Geography and trivia hub',\n                technology: 'React',\n            },\n        },\n    },\n};\n\nfunction ProjectDropdown(): React.ReactElement {\n    return (\n        <Box sx={{ padding: '16px 16px 0 16px' }}>\n            {Object.entries(PROJECT_CATEGORIES).map(\n                ([categoryKey, category]) => {\n                    const IconComponent = category.icon;\n                    return (\n                        <Box key={categoryKey} sx={{ marginBottom: 2 }}>\n                            <Box\n                                sx={{\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: 1,\n                                    padding: '8px 0 4px 0',\n                                    marginBottom: 0.5,\n                                    position: 'relative',\n                                    '&::after': {\n                                        content: '\"\"',\n                                        position: 'absolute',\n                                        bottom: 0,\n                                        left: 0,\n                                        right: 0,\n                                        height: '1px',\n                                        backgroundColor:\n                                            COLORS.interactive.disabled,\n                                    },\n                                }}\n                            >\n                                <IconComponent\n                                    sx={{\n                                        color: COLORS.primary.main,\n                                        fontSize: '14px',\n                                        opacity: 0.7,\n                                    }}\n                                />\n                                <Typography\n                                    sx={{\n                                        color: COLORS.text.secondary,\n                                        fontSize: '10px',\n                                        fontWeight: 500,\n                                        textTransform: 'uppercase',\n                                        letterSpacing: '0.14em',\n                                        fontFamily:\n                                            'ui-monospace, SFMono-Regular, \"SF Mono\", Consolas, \"Liberation Mono\", Menlo, monospace',\n                                    }}\n                                >\n                                    {category.title}\n                                </Typography>\n                            </Box>\n\n                            {Object.entries(category.projects).map(\n                                ([projectName, project]) => (\n                                    <MenuItem\n                                        key={projectName}\n                                        component={Link}\n                                        to={project.path}\n                                        sx={{\n                                            padding: '10px 12px',\n                                            borderRadius: '8px',\n                                            margin: '0',\n                                            minHeight: '40px',\n                                            transition: 'all 120ms ease',\n                                            display: 'flex',\n                                            flexDirection: 'column',\n                                            alignItems: 'flex-start',\n                                            gap: '6px',\n                                            '&:hover': {\n                                                backgroundColor:\n                                                    COLORS.interactive.hover,\n                                                transform: 'translateY(-1px)',\n                                            },\n                                            '&:active': {\n                                                backgroundColor:\n                                                    COLORS.interactive.selected,\n                                            },\n                                            '&:focus-visible': {\n                                                outline: 'none',\n                                                ring: `1px solid ${COLORS.interactive.focus}`,\n                                                ringOffset: '0',\n                                            },\n                                        }}\n                                    >\n                                        <Typography\n                                            sx={{\n                                                fontWeight: 600,\n                                                fontSize: '15px',\n                                                lineHeight: 1.6,\n                                                color: COLORS.text.primary,\n                                            }}\n                                        >\n                                            {projectName.replace('_', ' ')}\n                                        </Typography>\n                                        <Typography\n                                            sx={{\n                                                color: COLORS.text.secondary,\n                                                fontSize: '12px',\n                                                lineHeight: 1.4,\n                                            }}\n                                        >\n                                            {project.description}\n                                        </Typography>\n                                    </MenuItem>\n                                )\n                            )}\n                        </Box>\n                    );\n                }\n            )}\n        </Box>\n    );\n}\n\nfunction clickHandler(setAnchor: (anchor: HTMLElement | null) => void) {\n    return (event: React.MouseEvent<HTMLElement>) => {\n        setAnchor(event.currentTarget);\n    };\n}\n\nfunction closeHandler(setAnchor: (anchor: null) => void) {\n    return () => {\n        setAnchor(null);\n    };\n}\n\nfunction MenuButton(): React.ReactElement {\n    const [anchor, setAnchor] = useState<HTMLElement | null>(null);\n    const handleClick = clickHandler(setAnchor);\n    const handleClose = closeHandler(setAnchor);\n    const open = Boolean(anchor);\n\n    const define = (value: string | undefined) => {\n        return open ? value : undefined;\n    };\n\n    return (\n        <Box>\n            <TooltipButton\n                title=\"Projects Menu\"\n                id=\"projects-menu-button\"\n                Icon={ViewModuleRounded}\n                aria-controls={define('projects-menu')}\n                aria-expanded={define('true')}\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n                sx={{\n                    '&:hover': {\n                        backgroundColor: COLORS.interactive.hover,\n                        transform: 'scale(1.05)',\n                    },\n                }}\n            />\n            <Menu\n                id=\"projects-menu\"\n                open={open}\n                anchorEl={anchor}\n                disableAutoFocusItem={true}\n                BackdropProps={{\n                    sx: {\n                        backgroundColor: 'transparent',\n                        backdropFilter: 'none',\n                    },\n                }}\n                sx={{\n                    marginLeft: 1,\n                    marginTop: 1,\n                    '& .MuiPaper-root': {\n                        width: 'auto',\n                        maxWidth: '300px',\n                        height: 'auto !important',\n                        backgroundColor: COLORS.surface.glass,\n                        backdropFilter: 'blur(8px)',\n                        border: `1px solid ${COLORS.border.subtle}`,\n                        borderRadius: '16px',\n                        padding: 0,\n                        boxShadow: SHADOWS.lg,\n                        transition: 'all 140ms cubic-bezier(0.2, 0.8, 0.2, 1)',\n                        transform: open\n                            ? 'translateY(0) scale(1)'\n                            : 'translateY(8px) scale(0.98)',\n                        opacity: open ? 1 : 0,\n                    },\n                }}\n                onClose={handleClose}\n                MenuListProps={{\n                    'aria-labelledby': 'projects-menu-button',\n                    sx: {\n                        padding: 0,\n                        height: 'auto',\n                    },\n                }}\n                transformOrigin={{ horizontal: 'left', vertical: 'top' }}\n                anchorOrigin={{ horizontal: 'left', vertical: 'bottom' }}\n            >\n                <ProjectDropdown />\n            </Menu>\n        </Box>\n    );\n}\n\nexport default function Home(): React.ReactElement {\n    useEffect(() => {\n        document.title = PAGE_TITLES.home;\n    }, []);\n\n    return (\n        <Grid\n            container\n            minHeight=\"100vh\"\n            flexDirection=\"column\"\n            sx={{\n                position: 'relative',\n                background: COLORS.surface.background,\n                boxSizing: 'border-box',\n                width: '100%',\n                maxWidth: '100vw',\n                overflowX: 'hidden',\n            }}\n        >\n            <Box\n                sx={{\n                    position: 'relative',\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    padding: { xs: '0.5rem', md: '1.5rem' },\n                    zIndex: 1000,\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    maxWidth: '100%',\n                    overflowX: 'hidden',\n                }}\n            >\n                <MenuButton />\n                <TooltipButton\n                    component=\"a\"\n                    href={URLS.githubProfile}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    title=\"GitHub Profile\"\n                    Icon={GitHub}\n                />\n            </Box>\n\n            <Box\n                sx={{\n                    height: { xs: '2rem', md: '5rem' },\n                }}\n            />\n\n            <HeroContainer>\n                <Grid container spacing={{ xs: 4, md: 8 }} alignItems=\"center\">\n                    <Grid size={{ xs: 12, md: 6 }}>\n                        <Fade in timeout={800}>\n                            <Box>\n                                <Typography\n                                    sx={{\n                                        color: COLORS.primary.main,\n                                        fontSize: TYPOGRAPHY.fontSize.body,\n                                        fontWeight:\n                                            TYPOGRAPHY.fontWeight.semibold,\n                                        textTransform: 'uppercase',\n                                        letterSpacing: '0.025em',\n                                        marginBottom: 3,\n                                    }}\n                                >\n                                    Hello, I&apos;m\n                                </Typography>\n\n                                <Typography\n                                    sx={{\n                                        color: COLORS.text.primary,\n                                        fontWeight: TYPOGRAPHY.fontWeight.bold,\n                                        fontSize: {\n                                            xs: 'clamp(2rem, 8vw, 2.5rem)',\n                                            md: 'clamp(3rem, 6vw, 5rem)',\n                                        },\n                                        lineHeight: 1.4,\n                                        letterSpacing: '0',\n                                        marginBottom: 2,\n                                        wordBreak: 'keep-all',\n                                        hyphens: 'none',\n                                    }}\n                                >\n                                    {PERSONAL_INFO.name}\n                                </Typography>\n\n                                <Typography\n                                    sx={{\n                                        color: COLORS.text.secondary,\n                                        fontSize: {\n                                            xs: 'clamp(0.875rem, 4vw, 1.125rem)',\n                                            md: 'clamp(1.125rem, 2.5vw, 1.5rem)',\n                                        },\n                                        fontWeight:\n                                            TYPOGRAPHY.fontWeight.semibold,\n                                        marginBottom: 4,\n                                        lineHeight: 1.4,\n                                        wordBreak: 'keep-all',\n                                        hyphens: 'none',\n                                    }}\n                                >\n                                    {PERSONAL_INFO.title}\n                                </Typography>\n\n                                <Box\n                                    sx={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        gap: 2,\n                                        marginBottom: 4,\n                                    }}\n                                >\n                                    <LocationOn\n                                        sx={{\n                                            color: COLORS.text.secondary,\n                                            fontSize: '1.25rem',\n                                        }}\n                                    />\n                                    <Typography\n                                        sx={{\n                                            color: COLORS.text.secondary,\n                                            fontSize: TYPOGRAPHY.fontSize.body,\n                                            fontWeight:\n                                                TYPOGRAPHY.fontWeight.medium,\n                                        }}\n                                    >\n                                        {PERSONAL_INFO.location}\n                                    </Typography>\n                                </Box>\n\n                                <Box\n                                    sx={{\n                                        display: 'flex',\n                                        gap: 2,\n                                        flexWrap: 'wrap',\n                                    }}\n                                >\n                                    <Box\n                                        onClick={() => {\n                                            const element =\n                                                document.getElementById(\n                                                    'featured-work'\n                                                );\n                                            if (element) {\n                                                element.scrollIntoView({\n                                                    behavior: 'smooth',\n                                                    block: 'start',\n                                                    inline: 'nearest',\n                                                });\n                                            }\n                                        }}\n                                        sx={{\n                                            display: 'flex',\n                                            alignItems: 'center',\n                                            gap: 1,\n                                            padding: '12px 20px',\n                                            backgroundColor:\n                                                COLORS.interactive.selected,\n                                            borderRadius:\n                                                SPACING.borderRadius.full,\n                                            transition: ANIMATIONS.transition,\n                                            cursor: 'pointer',\n                                            '&:hover': {\n                                                backgroundColor:\n                                                    COLORS.interactive.focus,\n                                                transform:\n                                                    'scale(1.02) translateY(-1px)',\n                                                boxShadow: SHADOWS.text,\n                                            },\n                                        }}\n                                    >\n                                        <Typography\n                                            sx={{\n                                                color: COLORS.primary.main,\n                                                fontWeight:\n                                                    TYPOGRAPHY.fontWeight\n                                                        .semibold,\n                                                fontSize:\n                                                    TYPOGRAPHY.fontSize.body,\n                                            }}\n                                        >\n                                            View Work\n                                        </Typography>\n                                        <ArrowForward\n                                            sx={{\n                                                color: COLORS.primary.main,\n                                                fontSize: '1rem',\n                                            }}\n                                        />\n                                    </Box>\n                                </Box>\n                            </Box>\n                        </Fade>\n                    </Grid>\n\n                    <Grid size={{ xs: 12, md: 6 }}>\n                        <Fade in timeout={1000}>\n                            <Box\n                                sx={{\n                                    display: 'flex',\n                                    flexDirection: 'column',\n                                    gap: 4,\n                                }}\n                            >\n                                <GlassCard>\n                                    <Typography\n                                        sx={{\n                                            color: COLORS.primary.main,\n                                            fontSize:\n                                                TYPOGRAPHY.fontSize.subheading,\n                                            fontWeight:\n                                                TYPOGRAPHY.fontWeight.semibold,\n                                            marginBottom: 3,\n                                        }}\n                                    >\n                                        Tech Stack\n                                    </Typography>\n\n                                    <Box\n                                        sx={{\n                                            display: 'grid',\n                                            gridTemplateColumns: {\n                                                xs: '1fr',\n                                                md: 'repeat(3, 1fr)',\n                                            },\n                                            gap: {\n                                                xs: 1.5,\n                                                md: 2,\n                                            },\n                                            marginBottom: 3,\n                                        }}\n                                    >\n                                        {SKILLS.map((skill, index) => {\n                                            const IconComponent =\n                                                ICON_MAP[skill.icon] || Work;\n\n                                            return (\n                                                <Fade\n                                                    in\n                                                    timeout={1200 + index * 150}\n                                                    key={skill.name}\n                                                >\n                                                    <Box\n                                                        sx={{\n                                                            backgroundColor:\n                                                                COLORS\n                                                                    .interactive\n                                                                    .selected,\n                                                            border: `1px solid ${COLORS.interactive.selected}`,\n                                                            borderRadius:\n                                                                SPACING\n                                                                    .borderRadius\n                                                                    .md,\n                                                            padding: {\n                                                                xs: '12px',\n                                                                md: '16px',\n                                                            },\n                                                            display: 'flex',\n                                                            alignItems:\n                                                                'center',\n                                                            gap: {\n                                                                xs: 1,\n                                                                md: 1.5,\n                                                            },\n                                                            transition:\n                                                                ANIMATIONS.transition,\n                                                            cursor: 'pointer',\n                                                            minWidth: 0,\n                                                            overflow: 'hidden',\n                                                            '&:hover': {\n                                                                backgroundColor:\n                                                                    COLORS\n                                                                        .interactive\n                                                                        .hover,\n                                                                transform:\n                                                                    'translateY(-2px) scale(1.01)',\n                                                            },\n                                                        }}\n                                                    >\n                                                        <IconComponent\n                                                            sx={{\n                                                                color: COLORS\n                                                                    .primary\n                                                                    .main,\n                                                                fontSize:\n                                                                    TYPOGRAPHY\n                                                                        .fontSize\n                                                                        .body,\n                                                            }}\n                                                        />\n                                                        <Typography\n                                                            sx={{\n                                                                color: COLORS\n                                                                    .primary\n                                                                    .main,\n                                                                fontSize:\n                                                                    TYPOGRAPHY\n                                                                        .fontSize\n                                                                        .body,\n                                                                fontWeight:\n                                                                    TYPOGRAPHY\n                                                                        .fontWeight\n                                                                        .medium,\n                                                                whiteSpace:\n                                                                    'nowrap',\n                                                                overflow:\n                                                                    'hidden',\n                                                                textOverflow:\n                                                                    'ellipsis',\n                                                                flexShrink: 1,\n                                                            }}\n                                                        >\n                                                            {skill.name}\n                                                        </Typography>\n                                                    </Box>\n                                                </Fade>\n                                            );\n                                        })}\n                                    </Box>\n                                </GlassCard>\n\n                                <GlassCard>\n                                    <Typography\n                                        sx={{\n                                            color: COLORS.primary.main,\n                                            fontSize:\n                                                TYPOGRAPHY.fontSize.subheading,\n                                            fontWeight:\n                                                TYPOGRAPHY.fontWeight.semibold,\n                                            marginBottom: 3,\n                                        }}\n                                    >\n                                        Let&apos;s Connect\n                                    </Typography>\n\n                                    <Typography\n                                        sx={{\n                                            color: COLORS.text.secondary,\n                                            fontSize: TYPOGRAPHY.fontSize.body,\n                                            lineHeight: 1.5,\n                                            marginBottom: 4,\n                                        }}\n                                    >\n                                        Open to opportunities in backend\n                                        development, ML engineering, and\n                                        research collaboration.\n                                    </Typography>\n\n                                    <Box\n                                        sx={{\n                                            display: 'flex',\n                                            flexDirection: 'column',\n                                            gap: 2,\n                                        }}\n                                    >\n                                        <Button\n                                            component=\"a\"\n                                            href={URLS.githubProfile}\n                                            target=\"_blank\"\n                                            rel=\"noopener noreferrer\"\n                                            variant=\"outlined\"\n                                            startIcon={<GitHub />}\n                                            sx={{\n                                                textDecoration: 'none',\n                                            }}\n                                        >\n                                            View GitHub\n                                        </Button>\n\n                                        <Button\n                                            component=\"a\"\n                                            href=\"mailto:bangyenp@gmail.com?subject=Project%20Collaboration\"\n                                            variant=\"text\"\n                                            endIcon={<ArrowForward />}\n                                            sx={{\n                                                textDecoration: 'none',\n                                                color: COLORS.text.secondary,\n                                                '&:hover': {\n                                                    color: COLORS.text.primary,\n                                                    backgroundColor:\n                                                        COLORS.interactive\n                                                            .hover,\n                                                },\n                                            }}\n                                        >\n                                            Available for Projects\n                                        </Button>\n                                    </Box>\n                                </GlassCard>\n                            </Box>\n                        </Fade>\n                    </Grid>\n                </Grid>\n            </HeroContainer>\n\n            <Section id=\"featured-work\">\n                <Fade in timeout={1400}>\n                    <Box>\n                        <Typography\n                            sx={{\n                                color: COLORS.text.primary,\n                                fontSize: TYPOGRAPHY.fontSize.h2,\n                                fontWeight: TYPOGRAPHY.fontWeight.semibold,\n                                textAlign: 'center',\n                                marginBottom: 6,\n                            }}\n                        >\n                            Featured Work\n                        </Typography>\n\n                        <Box\n                            sx={{\n                                display: 'grid',\n                                gridTemplateColumns: {\n                                    xs: '1fr',\n                                    md: 'repeat(2, 1fr)',\n                                },\n                                gap: 4,\n                            }}\n                        >\n                            {PUBLICATIONS.map((publication, index) => (\n                                <Fade\n                                    in\n                                    timeout={1600 + index * 200}\n                                    key={publication.title}\n                                >\n                                    <Box\n                                        component=\"a\"\n                                        href={publication.url}\n                                        target=\"_blank\"\n                                        rel=\"noopener noreferrer\"\n                                        sx={{\n                                            textDecoration: 'none',\n                                            position: 'relative',\n                                            overflow: 'hidden',\n                                            ...COMPONENT_VARIANTS.interactiveCard,\n                                            '&:hover .glass-card': {\n                                                backgroundColor:\n                                                    COLORS.interactive.selected,\n                                            },\n                                        }}\n                                    >\n                                        <GlassCard\n                                            sx={{\n                                                border: 'none',\n                                                height: '100%',\n                                            }}\n                                        >\n                                            <Box\n                                                sx={{\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    justifyContent:\n                                                        'space-between',\n                                                    marginBottom: 3,\n                                                }}\n                                            >\n                                                <Typography\n                                                    sx={{\n                                                        color: COLORS.primary\n                                                            .main,\n                                                        fontSize:\n                                                            TYPOGRAPHY.fontSize\n                                                                .caption,\n                                                        fontWeight:\n                                                            TYPOGRAPHY\n                                                                .fontWeight\n                                                                .medium,\n                                                        textTransform:\n                                                            'uppercase',\n                                                        letterSpacing:\n                                                            '0.025em',\n                                                    }}\n                                                >\n                                                    Research\n                                                </Typography>\n                                                <OpenInNew\n                                                    sx={{\n                                                        color: COLORS.primary\n                                                            .main,\n                                                    }}\n                                                />\n                                            </Box>\n\n                                            <Typography\n                                                sx={{\n                                                    color: COLORS.text.primary,\n                                                    fontWeight:\n                                                        TYPOGRAPHY.fontWeight\n                                                            .semibold,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .subheading,\n                                                    lineHeight: 1.4,\n                                                    marginBottom: 2,\n                                                }}\n                                            >\n                                                {publication.title}\n                                            </Typography>\n\n                                            <Box sx={{ marginBottom: 3 }}>\n                                                <Box\n                                                    sx={{\n                                                        borderRadius:\n                                                            SPACING.borderRadius\n                                                                .full,\n                                                        fontSize:\n                                                            'clamp(0.7rem, 0.8vw, 0.75rem)',\n                                                        fontWeight: 500,\n                                                        padding: '4px 12px',\n                                                        minHeight:\n                                                            SPACING.padding.sm,\n                                                        display: 'inline-flex',\n                                                        alignItems: 'center',\n                                                        transition:\n                                                            'all 150ms cubic-bezier(0.4, 0, 0.2, 1)',\n                                                        backgroundColor:\n                                                            'hsla(141, 64%, 49%, 0.1)',\n                                                        color: 'hsl(141, 64%, 49%)',\n                                                        border: '1px solid hsla(141, 64%, 49%, 0.2)',\n                                                    }}\n                                                >\n                                                    {publication.conference}\n                                                </Box>\n                                            </Box>\n\n                                            <Typography\n                                                sx={{\n                                                    color: COLORS.text\n                                                        .secondary,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    lineHeight: 1.5,\n                                                    flex: 1,\n                                                }}\n                                            >\n                                                {publication.description}\n                                            </Typography>\n                                        </GlassCard>\n                                    </Box>\n                                </Fade>\n                            ))}\n\n                            {PROJECTS.map((project, index) => (\n                                <Fade\n                                    in\n                                    timeout={1600 + (index + 2) * 200}\n                                    key={project.title}\n                                >\n                                    <Box\n                                        component=\"a\"\n                                        href={project.url}\n                                        target=\"_blank\"\n                                        rel=\"noopener noreferrer\"\n                                        sx={{\n                                            textDecoration: 'none',\n                                            position: 'relative',\n                                            overflow: 'hidden',\n                                            ...COMPONENT_VARIANTS.interactiveCard,\n                                            '&:hover .glass-card': {\n                                                backgroundColor:\n                                                    COLORS.interactive.selected,\n                                            },\n                                        }}\n                                    >\n                                        <GlassCard\n                                            sx={{\n                                                border: 'none',\n                                                height: '100%',\n                                            }}\n                                        >\n                                            <Box\n                                                sx={{\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    justifyContent:\n                                                        'space-between',\n                                                    marginBottom: 3,\n                                                }}\n                                            >\n                                                <Typography\n                                                    sx={{\n                                                        color: COLORS.primary\n                                                            .main,\n                                                        fontSize:\n                                                            TYPOGRAPHY.fontSize\n                                                                .caption,\n                                                        fontWeight:\n                                                            TYPOGRAPHY\n                                                                .fontWeight\n                                                                .medium,\n                                                        textTransform:\n                                                            'uppercase',\n                                                        letterSpacing:\n                                                            '0.025em',\n                                                    }}\n                                                >\n                                                    Project\n                                                </Typography>\n                                                <GitHub\n                                                    sx={{\n                                                        color: COLORS.primary\n                                                            .main,\n                                                    }}\n                                                />\n                                            </Box>\n\n                                            <Typography\n                                                sx={{\n                                                    color: COLORS.text.primary,\n                                                    fontWeight:\n                                                        TYPOGRAPHY.fontWeight\n                                                            .semibold,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .subheading,\n                                                    lineHeight: 1.4,\n                                                    marginBottom: 2,\n                                                }}\n                                            >\n                                                {project.title}\n                                            </Typography>\n\n                                            <Box sx={{ marginBottom: 3 }}>\n                                                <Box\n                                                    sx={{\n                                                        borderRadius:\n                                                            SPACING.borderRadius\n                                                                .full,\n                                                        fontSize:\n                                                            'clamp(0.7rem, 0.8vw, 0.75rem)',\n                                                        fontWeight: 500,\n                                                        padding: '4px 12px',\n                                                        minHeight:\n                                                            SPACING.padding.sm,\n                                                        display: 'inline-flex',\n                                                        alignItems: 'center',\n                                                        transition:\n                                                            'all 150ms cubic-bezier(0.4, 0, 0.2, 1)',\n                                                        backgroundColor:\n                                                            'hsla(217, 91%, 60%, 0.1)',\n                                                        color: COLORS.primary\n                                                            .main,\n                                                        border: '1px solid hsla(217, 91%, 60%, 0.2)',\n                                                    }}\n                                                >\n                                                    {project.technology}\n                                                </Box>\n                                            </Box>\n\n                                            <Typography\n                                                sx={{\n                                                    color: COLORS.text\n                                                        .secondary,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    lineHeight: 1.5,\n                                                    flex: 1,\n                                                }}\n                                            >\n                                                {project.description}\n                                            </Typography>\n                                        </GlassCard>\n                                    </Box>\n                                </Fade>\n                            ))}\n                        </Box>\n                    </Box>\n                </Fade>\n            </Section>\n\n            <Box\n                sx={{\n                    height: { xs: '2rem', md: '5rem' },\n                }}\n            />\n        </Grid>\n    );\n}\n","import React from 'react';\nimport { Grid, Typography, Box, Fade, Button } from '../components/mui';\nimport { HomeButton } from '../components/common/Controls';\nimport { HomeRounded } from '../components/icons';\nimport { Link } from 'react-router-dom';\nimport { PAGE_TITLES } from '../config/constants';\nimport {\n    COLORS,\n    SPACING,\n    TYPOGRAPHY,\n    COMPONENT_VARIANTS,\n} from '../config/theme';\n\nexport default function Error(): React.ReactElement {\n    document.title = PAGE_TITLES.error;\n    return (\n        <Grid\n            container\n            minHeight=\"100vh\"\n            flexDirection=\"column\"\n            sx={{\n                position: 'relative',\n                padding: { xs: '0.5rem', md: '1.5rem' },\n                boxSizing: 'border-box',\n            }}\n        >\n            {/* Background Elements */}\n            <Box\n                sx={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0,\n                    background: COLORS.surface.background,\n                    zIndex: -2,\n                }}\n            />\n\n            {/* Main Content */}\n            <Grid\n                flex={1}\n                sx={{\n                    ...COMPONENT_VARIANTS.flexCenter,\n                    flexDirection: 'column',\n                    zIndex: 1,\n                    padding: {\n                        xs: '0.5rem 0',\n                        md: `${SPACING.padding.md} 0`,\n                    },\n                    minHeight: 0,\n                }}\n            >\n                <Fade in timeout={1000}>\n                    <Box\n                        sx={{\n                            textAlign: 'center',\n                            maxWidth: '24rem',\n                            width: '100%',\n                            padding: {\n                                xs: '0 1rem',\n                                md: '0 2rem',\n                            },\n                            boxSizing: 'border-box',\n                        }}\n                    >\n                        <Typography\n                            variant=\"h1\"\n                            sx={{\n                                color: COLORS.text.primary,\n                                fontWeight: TYPOGRAPHY.fontWeight.bold,\n                                marginBottom: 2,\n                                fontSize: TYPOGRAPHY.fontSize.display,\n                            }}\n                        >\n                            404\n                        </Typography>\n\n                        <Typography\n                            variant=\"h3\"\n                            sx={{\n                                color: COLORS.text.secondary,\n                                fontWeight: TYPOGRAPHY.fontWeight.medium,\n                                marginBottom: 4,\n                                fontSize: TYPOGRAPHY.fontSize.h2,\n                            }}\n                        >\n                            Page Not Found\n                        </Typography>\n\n                        <Typography\n                            sx={{\n                                color: COLORS.text.secondary,\n                                fontSize: TYPOGRAPHY.fontSize.body,\n                                lineHeight: 1.5,\n                                marginBottom: 4,\n                            }}\n                        >\n                            The page you&apos;re looking for doesn&apos;t exist\n                            or has been moved.\n                        </Typography>\n\n                        <Button\n                            component={Link}\n                            to=\"/\"\n                            variant=\"outlined\"\n                            startIcon={<HomeRounded />}\n                            sx={{\n                                borderRadius: SPACING.borderRadius.full,\n                                padding: '10px 24px',\n                                textTransform: 'none',\n                                fontWeight: TYPOGRAPHY.fontWeight.semibold,\n                                fontSize: TYPOGRAPHY.fontSize.body,\n                                border: `1px solid ${COLORS.primary.main}`,\n                                color: COLORS.primary.main,\n                                '&:hover': {\n                                    backgroundColor: `${COLORS.primary.main}10`,\n                                    border: `1px solid ${COLORS.primary.main}`,\n                                },\n                            }}\n                        >\n                            Back to Home\n                        </Button>\n                    </Box>\n                </Fade>\n            </Grid>\n        </Grid>\n    );\n}\n","import { CALCULATION } from '../config/constants';\n\n/**\n * Calculates space value from size using a divisor constant\n * @param size - The size value to calculate from\n * @returns The calculated space value\n */\nexport function getSpace(size: number): number {\n    return size / CALCULATION.spaceDivisor;\n}\n\n/**\n * Converts pixel dimensions to grid rows and columns\n * @param size - Grid cell size\n * @param height - Container height in pixels\n * @param width - Container width in pixels\n * @returns Object containing rows and cols properties\n */\nexport function convertPixels(\n    size: number,\n    height: number,\n    width: number\n): { rows: number; cols: number } {\n    const space = getSpace(size);\n    const pixel = CALCULATION.pixelMultiplier * (size + space);\n    const rows = Math.floor(height / pixel);\n    const cols = Math.floor(width / pixel);\n\n    return { rows, cols };\n}\n\n/**\n * Gets direction value from arrow key or WASD key input\n * @param arrow - String representing arrow key or WASD key\n * @returns Direction value (-2 for up, 2 for down, -1 for left, 1 for right, 0 for invalid)\n */\nexport function getDirection(arrow: string): number {\n    switch (arrow.toLowerCase()) {\n        case 'arrowup':\n        case 'w':\n            return -2;\n        case 'arrowdown':\n        case 's':\n            return 2;\n        case 'arrowleft':\n        case 'a':\n            return -1;\n        case 'arrowright':\n        case 'd':\n            return 1;\n        default:\n            return 0;\n    }\n}\n\n/**\n * Moves grid position based on direction\n * @param start - Starting position index\n * @param arrow - Direction value (-2, 2, -1, 1)\n * @param rows - Number of rows in grid\n * @param cols - Number of columns in grid\n * @returns New position index after movement\n */\nexport function gridMove(\n    start: number,\n    arrow: number,\n    rows: number,\n    cols: number\n): number {\n    const jump = cols - 1;\n    const max = rows * cols;\n\n    switch (arrow) {\n        case 2:\n            start += cols;\n            break;\n        case -2:\n            start -= cols;\n            break;\n        case 1:\n            if (start % cols === jump) start -= jump;\n            else start += 1;\n            break;\n        case -1:\n            if (start % cols === 0) start += jump;\n            else start -= 1;\n            break;\n        default:\n            break;\n    }\n\n    return (start + max) % max;\n}\n","import { useState, useEffect } from 'react';\n\nexport interface Size {\n    width: number;\n    height: number;\n}\n\nexport interface RefObject<T> {\n    current: T | null;\n}\n\nexport function getWindow(): Size {\n    const { innerWidth: width, innerHeight: height } = window;\n\n    return { width, height };\n}\n\nexport function getContainer(container: RefObject<HTMLElement> | null): Size {\n    if (!container || !container.current) return { width: 0, height: 0 };\n\n    const { offsetHeight: height, offsetWidth: width } = container.current;\n\n    return { width, height };\n}\n\nexport function useSize(getSize: () => Size) {\n    const [size, setSize] = useState<Size>(getSize());\n\n    const { addEventListener: addEvent, removeEventListener: removeEvent } =\n        window;\n\n    useEffect(() => {\n        function handleResize() {\n            setSize(getSize());\n        }\n\n        addEvent('resize', handleResize);\n\n        return () => removeEvent('resize', handleResize);\n    }, [getSize, addEvent, removeEvent]);\n\n    return { size, setSize };\n}\n","import { Size, useSize, getWindow } from './useSize';\n\nexport function useWindow(): Size {\n    const { size } = useSize(getWindow);\n\n    return size;\n}\n","import { useState, useRef, useEffect } from 'react';\nimport { Size, RefObject, getContainer } from './useSize';\n\nexport function useContainer(container: RefObject<HTMLElement> | null): Size {\n    const initialSize = getContainer(container);\n    const [size, setSize] = useState<Size>(initialSize);\n    const prevSizeRef = useRef<Size>(initialSize);\n\n    useEffect(() => {\n        const newSize = getContainer(container);\n        // Only update if values actually changed\n        if (\n            newSize.width !== prevSizeRef.current.width ||\n            newSize.height !== prevSizeRef.current.height\n        ) {\n            prevSizeRef.current = newSize;\n            setSize(newSize);\n        }\n    }, [container]);\n\n    useEffect(() => {\n        function handleResize() {\n            const newSize = getContainer(container);\n            setSize(prevSize => {\n                // Only update if values actually changed\n                if (\n                    newSize.width !== prevSize.width ||\n                    newSize.height !== prevSize.height\n                ) {\n                    return newSize;\n                }\n                return prevSize;\n            });\n        }\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, [container]);\n\n    return size;\n}\n","import { useMediaQuery } from '../components/mui';\n\nexport function useMobile(size: string): boolean {\n    return useMediaQuery((theme: unknown) => {\n        const muiTheme = theme as {\n            breakpoints: { down: (size: string) => string };\n        };\n        return muiTheme.breakpoints.down(size);\n    });\n}\n","import { useRef, useCallback, useEffect } from 'react';\n\n// Global timer reference to handle React StrictMode multiple instances\nlet globalTimer: NodeJS.Timeout | null = null;\nlet globalRepeat: (() => void) | null = null;\nlet globalSpeed = 200;\n\ninterface TimerConfig {\n    repeat?: (() => void) | null;\n    speed?: number;\n}\n\nexport function useTimer(delay: number) {\n    const repeat = useRef<(() => void) | null>(null);\n    const speed = useRef<number>(delay);\n\n    const create = useCallback(\n        ({ repeat: newRepeat, speed: newSpeed }: TimerConfig) => {\n            // Clear any existing timer first\n            if (globalTimer !== null) {\n                clearInterval(globalTimer);\n            }\n\n            globalRepeat = newRepeat || globalRepeat;\n            globalSpeed = newSpeed || globalSpeed;\n            repeat.current = globalRepeat;\n            speed.current = globalSpeed;\n\n            // Only create timer if we have a valid repeat function\n            if (globalRepeat) {\n                globalTimer = setInterval(globalRepeat, globalSpeed);\n            }\n        },\n        []\n    );\n\n    const clear = useCallback(() => {\n        if (globalTimer !== null) {\n            clearInterval(globalTimer);\n            globalTimer = null;\n        }\n    }, []);\n\n    useEffect(() => {\n        return () => {\n            if (globalTimer !== null) {\n                clearInterval(globalTimer);\n                globalTimer = null;\n            }\n        };\n    }, []);\n\n    return { create, clear };\n}\n","import { useRef, useCallback, useEffect } from 'react';\n\nexport function useKeys() {\n    const oldHandler = useRef<((event: KeyboardEvent) => void) | null>(null);\n\n    const create = useCallback((handler: (event: KeyboardEvent) => void) => {\n        oldHandler.current = handler;\n\n        document.addEventListener('keydown', handler);\n    }, []);\n\n    const clear = useCallback((handler?: (event: KeyboardEvent) => void) => {\n        const targetHandler = handler || oldHandler.current;\n\n        if (targetHandler) {\n            document.removeEventListener('keydown', targetHandler);\n        }\n    }, []);\n\n    useEffect(() => {\n        return () => {\n            if (oldHandler.current) {\n                document.removeEventListener('keydown', oldHandler.current);\n            }\n        };\n    }, []);\n\n    return { create, clear };\n}\n","import { useRef, useEffect, useCallback } from 'react';\nimport { PROCESSING } from '../config/constants';\n\ninterface CacheAction {\n    type: 'next' | 'prev' | 'clear';\n    payload: unknown;\n}\n\nexport function useCache(getState: (state: unknown) => unknown) {\n    const cache = useRef<unknown[]>([]);\n    const index = useRef<number>(0);\n    const processingRef = useRef<boolean>(false);\n    const getStateRef = useRef(getState);\n\n    // Update the ref whenever getState changes\n    useEffect(() => {\n        getStateRef.current = getState;\n    }, [getState]);\n\n    return useCallback(({ type, payload }: CacheAction): unknown => {\n        const states = cache.current;\n\n        switch (type) {\n            case 'next':\n                // Prevent double processing in React StrictMode\n                if (\n                    PROCESSING.doubleProcessingPrevention &&\n                    processingRef.current\n                ) {\n                    return { ...(states[index.current] as object) };\n                }\n\n                if (PROCESSING.doubleProcessingPrevention) {\n                    processingRef.current = true;\n                }\n\n                const curr = index.current;\n\n                if (curr + 1 === states.length) {\n                    const state = states[curr];\n                    const next = getStateRef.current(state);\n\n                    if (next === state) {\n                        // No change, stay at current position\n                    } else {\n                        // Add new state and move to it\n                        states.push(next);\n                        index.current++;\n                    }\n                } else {\n                    index.current++;\n                }\n\n                const result = { ...(states[index.current] as object) };\n\n                // Reset processing flag after a short delay\n                if (PROCESSING.doubleProcessingPrevention) {\n                    setTimeout(() => {\n                        processingRef.current = false;\n                    }, PROCESSING.resetDelay);\n                }\n\n                return result;\n            case 'prev':\n                // Prevent double processing in React StrictMode\n                if (\n                    PROCESSING.doubleProcessingPrevention &&\n                    processingRef.current\n                ) {\n                    return { ...(states[index.current] as object) };\n                }\n\n                if (PROCESSING.doubleProcessingPrevention) {\n                    processingRef.current = true;\n                }\n\n                if (index.current) index.current--;\n\n                const prevResult = { ...(states[index.current] as object) };\n\n                // Reset processing flag after a short delay\n                if (PROCESSING.doubleProcessingPrevention) {\n                    setTimeout(() => {\n                        processingRef.current = false;\n                    }, PROCESSING.resetDelay);\n                }\n\n                return prevResult;\n            case 'clear':\n                cache.current = [{ ...(payload as object) }];\n                index.current = 0;\n\n                break;\n            default:\n                break;\n        }\n\n        return payload;\n    }, []);\n}\n","import { useState, useEffect, useRef, useCallback } from 'react';\nimport { QuizSettings, Question } from '../types/quiz';\n\ninterface QuizEngineProps<T> {\n    initialPool: T[];\n    settings: QuizSettings;\n    onEndGame: (history: Question<T>[], score: number) => void;\n    checkAnswer: (\n        input: string,\n        item: T,\n        settings: QuizSettings\n    ) => {\n        isCorrect: boolean;\n        expected: string;\n        points: number;\n    };\n    advanceDelay?: {\n        correct: number;\n        incorrect: number;\n    };\n}\n\nexport const useQuizEngine = <T>({\n    initialPool,\n    settings,\n    onEndGame,\n    checkAnswer,\n    advanceDelay = { correct: 1000, incorrect: 3000 },\n}: QuizEngineProps<T>) => {\n    const [hasInitialized, setHasInitialized] = useState(false);\n    const [history, setHistory] = useState<Question<T>[]>([]);\n    const [pool, setPool] = useState<T[]>([]);\n    const [currentQuestion, setCurrentQuestion] = useState<T | null>(null);\n    const [totalQuestions, setTotalQuestions] = useState(0);\n    const [inputValue, setInputValue] = useState('');\n    const [showFeedback, setShowFeedback] = useState(false);\n    const [feedbackMessage, setFeedbackMessage] = useState('');\n    const [isCorrect, setIsCorrect] = useState<boolean | null>(null);\n    const [showHint, setShowHint] = useState(false);\n    const [score, setScore] = useState(0);\n\n    const historyRef = useRef(history);\n    const scoreRef = useRef(score);\n    const advanceTimerRef = useRef<NodeJS.Timeout | null>(null);\n\n    useEffect(() => {\n        historyRef.current = history;\n    }, [history]);\n    useEffect(() => {\n        scoreRef.current = score;\n    }, [score]);\n\n    const initialize = useCallback((newPool: T[]) => {\n        const shuffled = [...newPool].sort(() => Math.random() - 0.5);\n        return {\n            currentQuestion: shuffled.length > 0 ? shuffled[0] : null,\n            pool: shuffled.length > 0 ? shuffled.slice(1) : [],\n            totalQuestions: shuffled.length,\n        };\n    }, []);\n\n    useEffect(() => {\n        const init = initialize(initialPool);\n        setCurrentQuestion(init.currentQuestion);\n        setPool(init.pool);\n        setTotalQuestions(init.totalQuestions);\n        setHistory([]);\n        setScore(0);\n        setInputValue('');\n        setShowFeedback(false);\n        setShowHint(false);\n        setIsCorrect(null);\n        setHasInitialized(true);\n    }, [initialPool, initialize]);\n\n    const nextQuestion = useCallback(() => {\n        setPool(prevPool => {\n            if (prevPool.length === 0) {\n                onEndGame(historyRef.current, scoreRef.current);\n                return [];\n            }\n\n            if (advanceTimerRef.current) {\n                clearTimeout(advanceTimerRef.current);\n                advanceTimerRef.current = null;\n            }\n\n            const next = prevPool[0];\n            setCurrentQuestion(next);\n            setInputValue('');\n            setShowFeedback(false);\n            setShowHint(false);\n            setIsCorrect(null);\n            return prevPool.slice(1);\n        });\n    }, [onEndGame]);\n\n    const submitAnswer = useCallback(\n        (value: string) => {\n            if (!currentQuestion || showFeedback) return;\n\n            const {\n                isCorrect: correct,\n                expected,\n                points,\n            } = checkAnswer(value, currentQuestion, settings);\n\n            const newQuestion: Question<T> = {\n                item: currentQuestion,\n                userAnswer: value,\n                isCorrect: correct,\n                pointsEarned: points,\n            };\n\n            setHistory(prev => [...prev, newQuestion]);\n            if (correct) {\n                setScore(prev => prev + points);\n                setFeedbackMessage('Correct!');\n                setIsCorrect(true);\n            } else {\n                setFeedbackMessage(expected);\n                setIsCorrect(false);\n            }\n\n            setShowFeedback(true);\n            advanceTimerRef.current = setTimeout(\n                nextQuestion,\n                correct ? advanceDelay.correct : advanceDelay.incorrect\n            );\n        },\n        [\n            currentQuestion,\n            showFeedback,\n            checkAnswer,\n            settings,\n            nextQuestion,\n            advanceDelay,\n        ]\n    );\n\n    const handleSkip = useCallback(() => {\n        if (!currentQuestion) return;\n\n        if (showFeedback) {\n            nextQuestion();\n            return;\n        }\n\n        const { expected } = checkAnswer('', currentQuestion, settings);\n\n        const newQuestion: Question<T> = {\n            item: currentQuestion,\n            userAnswer: '',\n            isCorrect: false,\n            pointsEarned: 0,\n        };\n\n        setHistory(prev => [...prev, newQuestion]);\n        setFeedbackMessage(expected);\n        setIsCorrect(false);\n        setShowFeedback(true);\n\n        advanceTimerRef.current = setTimeout(\n            nextQuestion,\n            advanceDelay.incorrect\n        );\n    }, [\n        currentQuestion,\n        showFeedback,\n        nextQuestion,\n        checkAnswer,\n        settings,\n        advanceDelay.incorrect,\n    ]);\n\n    const handleSubmit = useCallback(\n        (e?: React.FormEvent) => {\n            e?.preventDefault();\n            submitAnswer(inputValue);\n        },\n        [inputValue, submitAnswer]\n    );\n\n    const toggleHint = useCallback(() => {\n        setShowHint(prev => !prev);\n    }, []);\n\n    return {\n        state: {\n            history,\n            currentQuestion,\n            inputValue,\n            showFeedback,\n            feedbackMessage,\n            isCorrect,\n            totalQuestions,\n            showHint,\n            score,\n            currentIndex: history.length,\n            hasInitialized,\n        },\n        actions: {\n            setInputValue,\n            handleSubmit,\n            handleSkip,\n            toggleHint,\n            nextQuestion,\n            submitAnswer,\n        },\n    };\n};\n","import React, { useCallback, ReactNode } from 'react';\nimport { Box, Grid } from '../mui';\nimport { getSpace } from '../../utils/calculate';\nimport { CELL_SIZE } from '../../config/constants';\nimport { TYPOGRAPHY, ANIMATIONS, COMPONENT_VARIANTS } from '../../config/theme';\n\ninterface CellProps {\n    size: number;\n    children: ReactNode;\n    [key: string]: any;\n}\n\nfunction Cell({ size, children, ...rest }: CellProps) {\n    const remSize = `${size}rem`;\n    const radius = `${size / CELL_SIZE.divisor}rem`;\n\n    const props = {\n        ...COMPONENT_VARIANTS.flexCenter,\n        borderRadius: radius,\n        height: remSize,\n        width: remSize,\n        fontSize: `${size * CELL_SIZE.fontSizeMultiplier}rem`,\n        fontWeight: TYPOGRAPHY.fontWeight.semibold,\n        fontFamily: 'monospace',\n        transition: ANIMATIONS.transition,\n    };\n\n    const combined = {\n        ...props,\n        ...rest,\n    };\n\n    return <Box {...combined}>{children}</Box>;\n}\n\ninterface RowProps {\n    cols: number;\n    size: number;\n    index: number;\n    spacing: string;\n    cellProps: (row: number, col: number) => any;\n}\n\nfunction Row({ cols, size, index, spacing, cellProps }: RowProps) {\n    const WrappedCell = (_: any, j: number) => (\n        <Cell {...cellProps(index, j)} key={`${index}_${j}`} size={size} />\n    );\n\n    return (\n        <Grid container size={12} spacing={spacing} justifyContent=\"center\">\n            {Array.from({ length: cols }, WrappedCell)}\n        </Grid>\n    );\n}\n\ninterface CustomGridProps {\n    size: number;\n    rows: number;\n    cols: number;\n    cellProps: (row: number, col: number) => any;\n    space?: number;\n    [key: string]: any;\n}\n\nexport function CustomGrid({\n    size,\n    rows,\n    cols,\n    cellProps,\n    ...rest\n}: CustomGridProps) {\n    const auto = getSpace(size);\n    const { space = auto } = rest;\n    const rem = `${space}rem`;\n\n    const getRow = useCallback(\n        (_: any, i: number) => (\n            <Row\n                index={i}\n                cols={cols}\n                size={size}\n                spacing={rem}\n                key={`row_${i}`}\n                cellProps={cellProps}\n            />\n        ),\n        [cols, size, rem, cellProps]\n    );\n\n    return (\n        <Grid\n            container\n            size={12}\n            spacing={rem}\n            alignItems=\"center\"\n            role=\"grid\"\n            aria-label={`Grid with ${rows} rows and ${cols} columns`}\n            {...rest}\n        >\n            {Array.from({ length: rows }, getRow)}\n        </Grid>\n    );\n}\n","import React, {\n    useMemo,\n    useCallback,\n    useReducer,\n    useEffect,\n    useState,\n    useRef,\n} from 'react';\nimport { Grid } from '../components/mui';\n\nimport { convertPixels, gridMove, getDirection } from '../utils/calculate';\nimport { useWindow, useTimer, useKeys } from '../hooks';\nimport { CustomGrid } from '../components/common/CustomGrid';\nimport { Controls, ArrowsButton } from '../components/common/Controls';\nimport { PAGE_TITLES, GAME_CONSTANTS } from '../config/constants';\nimport { COLORS, COMPONENT_VARIANTS } from '../config/theme';\n\ninterface Board {\n    [key: number]: number;\n}\n\ninterface SnakeState {\n    velocity: number;\n    buffer: number[];\n    length: number;\n    rows: number;\n    cols: number;\n    head: number;\n    board: Board;\n}\n\ninterface Action {\n    type: string;\n    payload?: any;\n}\n\nfunction getRandom(max: number): number {\n    return Math.floor(Math.random() * max);\n}\n\nfunction addNext(max: number, exclude: Board): Board {\n    let pos = getRandom(max);\n\n    while (pos in exclude) if (++pos >= max) pos = 0;\n\n    return {\n        ...exclude,\n        [pos]: -1,\n    };\n}\n\nfunction mapBoard(board: Board, change: number): Board {\n    const newBoard: Board = {};\n\n    for (const cell in board) {\n        const value = board[cell];\n\n        if (value + change > 0) newBoard[cell] = value + change;\n        else if (value < 0) newBoard[cell] = value;\n    }\n\n    return newBoard;\n}\n\nfunction handleResize(\n    state: SnakeState,\n    rows: number,\n    cols: number\n): SnakeState {\n    const max = rows * cols;\n    const head = getRandom(max);\n    let next = getRandom(max);\n\n    if (head === next) next = ++next % max;\n\n    return {\n        ...state,\n        rows,\n        cols,\n        head,\n        board: {\n            [head]: state.length,\n            [next]: -1,\n        },\n    };\n}\n\nfunction reduceBoard(state: SnakeState): SnakeState {\n    let { board, length, head, velocity, buffer } = state;\n    const { rows, cols } = state;\n\n    const max = rows * cols;\n\n    board = mapBoard(board, -1);\n    head = gridMove(head, velocity, rows, cols);\n\n    if (head in board) {\n        const value = board[head];\n        board[head] = length;\n\n        if (value > 0) {\n            board = mapBoard(board, -value);\n        } else {\n            board = mapBoard(board, 1);\n            board = addNext(max, board);\n        }\n\n        length = board[head];\n    } else {\n        board[head] = length;\n    }\n\n    if (buffer.length) {\n        const [first, ...rest] = buffer;\n        buffer = rest;\n\n        if (velocity + first) velocity = first;\n    }\n\n    return {\n        ...state,\n        length,\n        board,\n        head,\n        velocity,\n        buffer,\n    };\n}\n\nfunction handleAction(state: SnakeState, action: Action): SnakeState {\n    const { type, payload } = action;\n\n    switch (type) {\n        case 'resize':\n            const { rows, cols } = payload;\n            return handleResize(state, rows, cols);\n        case 'steer':\n            const velocity = getDirection(payload.key);\n            let { buffer } = state;\n\n            if (velocity) buffer = [...buffer, velocity];\n\n            return {\n                ...state,\n                buffer,\n            };\n        case 'move':\n            return reduceBoard(state);\n        default:\n            return state;\n    }\n}\n\nexport default function Snake(): React.ReactElement {\n    const { create: createTimer } = useTimer(0);\n    const { create: createKeys } = useKeys();\n\n    const { height, width } = useWindow();\n    const length = GAME_CONSTANTS.snake.initialLength;\n    const size = GAME_CONSTANTS.snake.segmentSize;\n\n    const [randomMovesEnabled, setRandomMovesEnabled] = useState(false);\n    const randomMovesRef = useRef(false);\n\n    const [showArrows, setShowArrows] = useState(false);\n\n    const { rows, cols } = useMemo(\n        () => convertPixels(size, height, width),\n        [size, height, width]\n    );\n\n    const initial = useMemo(\n        () => ({\n            velocity: GAME_CONSTANTS.snake.initialVelocity,\n            buffer: [],\n            length,\n            rows: 0,\n            cols: 0,\n            head: 0,\n            board: {},\n        }),\n        [length]\n    );\n\n    const [state, dispatch] = useReducer(\n        handleAction,\n        handleResize(initial, rows, cols)\n    );\n\n    const controlHandler = useCallback(\n        (event: string) => () => {\n            const key = GAME_CONSTANTS.controls.arrowPrefix + event;\n\n            dispatch({\n                type: 'steer',\n                payload: { key },\n            });\n        },\n        []\n    );\n\n    const chooseColor = useCallback(\n        (row: number, col: number) => {\n            const index = row * cols + col;\n            const board = state.board;\n            let color = 'inherit';\n\n            if (index in board) {\n                if (board[index] > 0) color = COLORS.primary.main;\n                else color = COLORS.primary.dark;\n            }\n\n            return {\n                backgroundColor: color,\n                boxShadow:\n                    color !== 'inherit' ? `0 0 1.25rem ${color}40` : 'none',\n                border:\n                    color !== 'inherit' ? `0.0625rem solid ${color}` : 'none',\n            };\n        },\n        [state, cols]\n    );\n\n    useEffect(() => {\n        const wrapDispatch = () => {\n            const directions = 'wasd';\n            const index = getRandom(4);\n            const key = directions[index];\n\n            dispatch({\n                type: 'move',\n            });\n\n            if (getRandom(2) && randomMovesRef.current) {\n                dispatch({\n                    type: 'steer',\n                    payload: { key },\n                });\n            }\n        };\n\n        const wrapDirection = (event: any) =>\n            dispatch({\n                type: 'steer',\n                payload: event,\n            });\n\n        createTimer({ repeat: wrapDispatch, speed: 100 });\n        createKeys(wrapDirection);\n    }, [createTimer, createKeys]);\n\n    useEffect(() => {\n        randomMovesRef.current = randomMovesEnabled;\n    }, [randomMovesEnabled]);\n\n    useEffect(() => {\n        dispatch({\n            type: 'resize',\n            payload: { rows, cols },\n        });\n    }, [rows, cols]);\n\n    useEffect(() => {\n        document.title = PAGE_TITLES.snake;\n    }, []);\n\n    return (\n        <Grid\n            container\n            minHeight=\"100vh\"\n            flexDirection=\"column\"\n            position=\"relative\"\n            sx={{\n                background: COLORS.surface.background,\n                overflow: 'hidden',\n            }}\n        >\n            <Grid\n                flex={1}\n                sx={{\n                    ...COMPONENT_VARIANTS.flexCenter,\n                    zIndex: 1,\n                }}\n            >\n                <CustomGrid\n                    size={size}\n                    rows={rows}\n                    cols={cols}\n                    cellProps={chooseColor}\n                />\n            </Grid>\n            <Controls\n                handler={controlHandler}\n                onRandom={() => setRandomMovesEnabled(!randomMovesEnabled)}\n                randomEnabled={randomMovesEnabled}\n                hide={showArrows}\n                size=\"inherit\"\n            >\n                <ArrowsButton\n                    show={showArrows}\n                    setShow={setShowArrows}\n                    handler={controlHandler}\n                />\n            </Controls>\n        </Grid>\n    );\n}\n","import React, { useMemo, useCallback } from 'react';\nimport { Grid } from '../components/mui';\n\nimport { CustomGrid } from '../components/common/CustomGrid';\nimport { COLORS } from '../config/theme';\n\ninterface BoardProps {\n    frontProps: (row: number, col: number) => Record<string, unknown>;\n    backProps: (row: number, col: number) => Record<string, unknown>;\n    size: number;\n    rows: number;\n    cols: number;\n}\n\ninterface CenteredProps {\n    children: React.ReactNode;\n}\n\ninterface Palette {\n    primary: string;\n    secondary: string;\n}\n\ninterface Getters {\n    getColor: (row: number, col: number) => { front: string; back: string };\n    getBorder: (row: number, col: number) => Record<string, unknown>;\n    getFiller: (row: number, col: number) => string;\n}\n\ninterface GridState {\n    grid: number[][];\n    rows: number;\n    cols: number;\n}\n\nexport function Board(props: BoardProps): React.ReactElement {\n    const { frontProps, backProps, size, rows, cols } = props;\n\n    return (\n        <Centered>\n            <CustomGrid\n                space={0}\n                size={size}\n                rows={rows - 1}\n                cols={cols - 1}\n                cellProps={backProps}\n            />\n            <Centered>\n                <CustomGrid\n                    space={0}\n                    size={size}\n                    rows={rows}\n                    cols={cols}\n                    cellProps={frontProps}\n                />\n            </Centered>\n        </Centered>\n    );\n}\n\nfunction Centered({ children }: CenteredProps): React.ReactElement {\n    const style = {\n        transform: 'translate(-50%, -50%)',\n    };\n\n    return (\n        <Grid\n            sx={{\n                top: '50%',\n                left: '50%',\n                width: '100%',\n                position: 'absolute',\n                ...style,\n            }}\n        >\n            {children}\n        </Grid>\n    );\n}\n\nfunction borderHandler(\n    row: number,\n    col: number,\n    getColor: (row: number, col: number) => unknown\n): Record<string, unknown> {\n    const self = getColor(row, col);\n    const up = getColor(row - 1, col);\n    const down = getColor(row + 1, col);\n    const left = getColor(row, col - 1);\n    const right = getColor(row, col + 1);\n    const props: Record<string, unknown> = {};\n\n    const upCheck = self === up;\n    const downCheck = self === down;\n    const leftCheck = self === left;\n    const rightCheck = self === right;\n\n    if (upCheck || leftCheck) props.borderTopLeftRadius = 0;\n    if (upCheck || rightCheck) props.borderTopRightRadius = 0;\n    if (downCheck || leftCheck) props.borderBottomLeftRadius = 0;\n    if (downCheck || rightCheck) props.borderBottomRightRadius = 0;\n\n    return props;\n}\n\nfunction fillerHandler(\n    row: number,\n    col: number,\n    getColor: (row: number, col: number) => unknown\n): boolean {\n    const topLeft = getColor(row, col);\n    const topRight = getColor(row, col + 1);\n    const botLeft = getColor(row + 1, col);\n    const botRight = getColor(row + 1, col + 1);\n    let color = true;\n\n    const total =\n        Number(topLeft) + Number(topRight) + Number(botLeft) + Number(botRight);\n\n    if ((!topLeft || !botRight) && total < 3) color = false;\n\n    return color;\n}\n\nexport function usePalette(score: number): Palette {\n    const palette = useMemo(() => {\n        const primary = COLORS.primary.main;\n        const secondary = COLORS.primary.dark;\n\n        return { primary, secondary };\n    }, []);\n\n    return palette;\n}\n\nexport function useGetters(\n    getTile: (row: number, col: number) => unknown,\n    palette: Palette\n): Getters {\n    const getColor = useCallback(\n        (row: number, col: number) => {\n            const value = getTile(row, col);\n\n            const front = value ? palette.primary : palette.secondary;\n            const back = value ? palette.secondary : palette.primary;\n\n            return { front, back };\n        },\n        [getTile, palette]\n    );\n\n    const getBorder = useCallback(\n        (row: number, col: number) => {\n            return borderHandler(row, col, getTile);\n        },\n        [getTile]\n    );\n\n    const getFiller = useCallback(\n        (row: number, col: number) => {\n            const value = fillerHandler(row, col, getTile);\n\n            return value ? palette.primary : palette.secondary;\n        },\n        [getTile, palette]\n    );\n\n    return {\n        getColor,\n        getBorder,\n        getFiller,\n    };\n}\n\nexport function useHandler(state: GridState, palette: Palette): Getters {\n    const { grid, rows, cols } = state;\n\n    const getTile = useCallback(\n        (row: number, col: number) => {\n            if (row < 0 || col < 0 || row >= rows || col >= cols) return -1;\n\n            return grid[row][col];\n        },\n        [grid, rows, cols]\n    );\n\n    return useGetters(getTile, palette);\n}\n","export function getGrid(rows: number, cols: number): number[][] {\n    return [...Array(rows)].map(() => Array(cols).fill(0));\n}\n\nexport function flipAdj(\n    row: number,\n    col: number,\n    grid: number[][]\n): number[][] {\n    const cols = grid[0].length;\n    const rows = grid.length;\n\n    const newGrid = grid.map(row => [...row]);\n    newGrid[row][col] ^= 1;\n\n    if (row > 0) newGrid[row - 1][col] ^= 1;\n    if (row < rows - 1) newGrid[row + 1][col] ^= 1;\n\n    if (col > 0) newGrid[row][col - 1] ^= 1;\n    if (col < cols - 1) newGrid[row][col + 1] ^= 1;\n\n    return newGrid;\n}\n\nfunction randomize(rows: number, cols: number): number[][] {\n    let grid = getGrid(rows, cols);\n\n    for (let r = 0; r < rows; r++) {\n        for (let c = 0; c < cols; c++) {\n            const random = Math.random();\n\n            if (random > 0.5) grid = flipAdj(r, c, grid);\n        }\n    }\n\n    return grid;\n}\n\n// Memoization for solver tables: \"rows,cols\" -> map of \"bottomRowStr\" -> \"topRowIndices\"\nconst solverCache: Record<string, Record<string, number[]>> = {};\n\nfunction solveLastRow(\n    rows: number,\n    cols: number,\n    lastRow: number[]\n): number[] | null {\n    const key = `${rows},${cols}`;\n\n    if (!solverCache[key]) {\n        // Build the lookup table for this grid size\n        const map: Record<string, number[]> = {};\n        const max = 1 << cols;\n\n        for (let i = 0; i < max; i++) {\n            // Create a board with top row set to 'i'\n            let grid = getGrid(rows, cols);\n            const topRowIndices: number[] = [];\n\n            for (let c = 0; c < cols; c++) {\n                if ((i >> c) & 1) {\n                    grid = flipAdj(0, c, grid); // Toggle to set initial state correctly?\n                    // Actually, we want to simulate \"clicking\" the top row.\n                    // But flipAdj toggles neighbors too.\n                    // The standard algorithm says: \"Clicking top row buttons induces a state at the bottom\".\n                    // So yes, we just simulate clicks.\n                    topRowIndices.push(c);\n                }\n            }\n\n            // Chase down\n            for (let r = 0; r < rows - 1; r++) {\n                for (let c = 0; c < cols; c++) {\n                    if (grid[r][c] === 1) {\n                        grid = flipAdj(r + 1, c, grid);\n                    }\n                }\n            }\n\n            // Record resulting bottom row\n            const bottomStr = grid[rows - 1].join('');\n            if (!map[bottomStr]) {\n                map[bottomStr] = topRowIndices;\n            }\n        }\n        solverCache[key] = map;\n    }\n\n    const currentBottomStr = lastRow.join('');\n    const result = solverCache[key][currentBottomStr] || null;\n    return result;\n}\n\nexport function getNextMove(\n    grid: number[][]\n): { row: number; col: number }[] | null {\n    const rows = grid.length;\n    const cols = grid[0].length;\n\n    // Phase 1: Chase lights down\n    for (let r = 0; r < rows - 1; r++) {\n        for (let c = 0; c < cols; c++) {\n            if (grid[r][c] === 1) {\n                // Return as single-item array\n                return [{ row: r + 1, col: c }];\n            }\n        }\n    }\n\n    // Phase 2: Check last row\n    const lastRow = grid[rows - 1];\n    if (lastRow.some(cell => cell === 1)) {\n        // Phase 3: Solve last row\n        const solution = solveLastRow(rows, cols, lastRow);\n        if (solution && solution.length > 0) {\n            return solution.map(col => ({ row: 0, col }));\n        }\n    }\n\n    return null;\n}\n\ninterface BoardState {\n    grid: number[][];\n    score: number;\n    rows: number;\n    cols: number;\n    auto: boolean;\n}\n\ninterface BoardAction {\n    type: string;\n    row?: number;\n    col?: number;\n    moves?: { row: number; col: number }[];\n    newRows?: number;\n    newCols?: number;\n}\n\nexport function handleBoard(\n    state: BoardState,\n    action: BoardAction\n): BoardState {\n    const { type, row, col, moves } = action;\n\n    let { grid, score, rows, cols, auto } = state;\n\n    switch (type) {\n        case 'auto':\n            auto = !auto;\n            break;\n        case 'adjacent':\n            if (row !== undefined && col !== undefined) {\n                grid = flipAdj(row, col, grid);\n                // Check win condition...\n                const flat = grid.flatMap(r => r);\n                const done = !flat.includes(1) || !flat.includes(0);\n                if (done) {\n                    grid = randomize(rows, cols);\n                    score += 1;\n                }\n            }\n            break;\n        case 'multi_adjacent':\n            if (moves) {\n                moves.forEach(m => {\n                    grid = flipAdj(m.row, m.col, grid);\n                });\n                // Check win condition...\n                const flat = grid.flatMap(r => r);\n                const done = !flat.includes(1) || !flat.includes(0);\n                if (done) {\n                    grid = randomize(rows, cols);\n                    score += 1;\n                }\n            }\n            break;\n        case 'random':\n            grid = randomize(rows, cols);\n            auto = false;\n            break;\n        case 'randomize':\n            grid = randomize(rows, cols);\n            auto = false;\n            break;\n        case 'resize':\n            const { newRows, newCols } = action;\n            if (newRows !== undefined && newCols !== undefined) {\n                rows = newRows;\n                cols = newCols;\n                grid = randomize(rows, cols);\n                auto = false;\n            }\n            break;\n        case 'reset':\n            grid = getGrid(rows, cols);\n            score = 0;\n            auto = false;\n            break;\n        default:\n            break;\n    }\n\n    return { grid, score, rows, cols, auto };\n}\n","function getMatrix(cols: number): number[] {\n    const first = 7 << (cols - 2);\n    const matrix = [first];\n\n    for (let k = 1; k < cols; k++) {\n        const prev = matrix[k - 1];\n        const next = prev >> 1;\n        matrix.push(next);\n    }\n\n    matrix[0] -= 2 ** cols;\n    return matrix;\n}\n\nfunction countBits(num: number): number {\n    let count = 0;\n\n    while (num) {\n        num &= num - 1;\n        count++;\n    }\n\n    return count;\n}\n\nfunction multiplySym(matrixA: number[], matrixB: number[]): number[] {\n    const size = matrixA.length;\n    const output: number[] = [];\n\n    for (let r = 0; r < size; r++) {\n        const rowA = matrixA[r];\n        let outputRow = 0;\n\n        for (let c = 0; c < size; c++) {\n            const colB = matrixB[c];\n            const value = rowA & colB;\n            const count = countBits(value);\n\n            outputRow <<= 1;\n            outputRow += count & 1;\n        }\n\n        output.push(outputRow);\n    }\n\n    return output;\n}\n\nfunction getIdentity(size: number): number[] {\n    const output = Array(size).fill(1);\n\n    for (let r = 0; r < size; r++) output[r] <<= size - r - 1;\n\n    return output;\n}\n\nfunction symmetricPow(matrix: number[], power: number): number[] {\n    const size = matrix.length;\n    let output = getIdentity(size);\n\n    for (let k = 0; k < power; k++) output = multiplySym(output, matrix);\n\n    return output;\n}\n\nfunction addSym(matrixA: number[], matrixB: number[]): number[] {\n    const size = matrixA.length;\n    const output: number[] = [];\n\n    for (let r = 0; r < size; r++) {\n        const rowA = matrixA[r];\n        const rowB = matrixB[r];\n        const outputRow = rowA ^ rowB;\n        output.push(outputRow);\n    }\n\n    return output;\n}\n\nfunction getPolynomial(index: number): number {\n    const output = [0, 1];\n\n    for (let k = 1; k < index; k++) {\n        const curr = output[k];\n        const prev = output[k - 1];\n        const double = curr << 1;\n\n        output.push(double ^ prev);\n    }\n\n    return output[index];\n}\n\nfunction evalPolynomial(matrix: number[], poly: number): number[] {\n    const size = matrix.length;\n    let output = Array(size).fill(0);\n    let degree = 0;\n\n    while (poly) {\n        if (poly & 1) {\n            const power = symmetricPow(matrix, degree);\n\n            output = addSym(output, power);\n        }\n\n        poly >>= 1;\n        degree++;\n    }\n\n    return output;\n}\n\nfunction sortMatrices(matrix: number[], identity: number[]): [number[], number[]] {\n    const size = matrix.length;\n    const sorted = [...Array(size).keys()].sort(\n        (a, b) => matrix[b] - matrix[a]\n    );\n\n    const original = sorted.map(row => matrix[row]);\n    const inverted = sorted.map(row => identity[row]);\n\n    return [original, inverted];\n}\n\nfunction invertMatrix(matrix: number[]): number[] {\n    const size = matrix.length;\n    const identity = getIdentity(size);\n\n    let original = matrix;\n    let inverted = identity;\n\n    for (let c = 0; c < size; c++) {\n        const pow = 1 << (size - c - 1);\n\n        [original, inverted] = sortMatrices(original, inverted);\n\n        for (let r = 0; r < size; r++) {\n            const alt = original[r];\n\n            if (r === c) continue;\n\n            if (alt & pow) {\n                original[r] ^= original[c];\n                inverted[r] ^= inverted[c];\n            }\n        }\n    }\n\n    return inverted;\n}\n\n/*\n    https://math.stackexchange.com/questions/2237467\n    https://en.wikipedia.org/wiki/Fibonacci_polynomials\n    https://graphics.stanford.edu/~seander/bithacks.html#:~:text=Brian%20Kernighan\n*/\nexport function getProduct(input: number[], rows: number, cols: number): number[] {\n    const matrix = getMatrix(cols);\n    const weights = getPolynomial(rows + 1);\n    const product = evalPolynomial(matrix, weights);\n    const inverse = invertMatrix(product);\n\n    const binary = parseInt(input.join(''), 2);\n\n    const getParity = (row: number): number => {\n        const value = row & binary;\n        const count = countBits(value);\n        return count & 1;\n    };\n\n    return inverse.map(getParity);\n}\n\n","import { getGrid, flipAdj } from './boardHandlers';\nimport { getProduct } from './matrices';\n\nfunction chaseLights(states: number[][][], dims: number): number[][][] {\n    const newStates = [...states];\n    let prev = states.at(-1);\n\n    if (!prev) return newStates;\n\n    for (let r = 1; r < dims; r++) {\n        for (let c = 0; c < dims; c++) {\n            if (!prev[r - 1][c]) continue;\n\n            const next = flipAdj(r, c, prev);\n\n            newStates.push(next);\n            prev = next;\n        }\n    }\n\n    return newStates;\n}\n\nfunction fillRow(row: number[], dims: number): {\n    input: number[][];\n    output: number[][];\n} {\n    const blank = Array(dims).fill(0);\n\n    const inputStates: number[][] = [blank];\n    const outputStates: number[][] = [blank];\n    const last = [...blank];\n\n    for (let c = 0; c < dims; c++) {\n        if (!row[c]) continue;\n\n        last[c] = 1;\n\n        const input = [...last];\n        const output = getProduct(input, dims, dims);\n\n        inputStates.push(input);\n        outputStates.push(output);\n    }\n\n    return {\n        input: inputStates,\n        output: outputStates,\n    };\n}\n\nfunction extendBack(states: number[][], size: number): number[][] {\n    const back = states.at(-1);\n    if (!back) return states;\n    \n    const extend = [...states];\n    \n    while (extend.length < size) extend.push([...back]);\n    \n    return extend;\n}\n\nfunction extendFront(states: number[][], size: number): number[][] {\n    const extend = [...states];\n    const front = states[0];\n    \n    while (extend.length < size) extend.unshift([...front]);\n    \n    return extend;\n}\n\nexport function getStates(grid: number[], dims: number): { boardStates: number[][][]; inputStates: number[][]; outputStates: number[][]; } {\n    let board = getGrid(dims, dims);\n    \n    for (const index of grid) {\n        const row = Math.floor(index / dims);\n        const col = index % dims;\n        \n        board = flipAdj(row, col, board);\n    }\n    \n    let states = chaseLights([board], dims);\n    const last = states.at(-1);\n    if (!last) return { boardStates: [], inputStates: [], outputStates: [] };\n    \n    const row = last.at(-1);\n    if (!row) return { boardStates: [], inputStates: [], outputStates: [] };\n    \n    let { input, output } = fillRow(row, dims);\n    \n    const before = states.length + input.length - 1;\n    \n    const top = output.at(-1);\n    if (!top) return { boardStates: [], inputStates: [], outputStates: [] };\n    \n    let state = [...last];\n    \n    for (let i = 0; i < before - states.length; i++) {\n        states.push([...last]);\n    }\n    for (let i = 0; i < before - input.length; i++) {\n        input.unshift([...input[0]]);\n    }\n    for (let i = 0; i < before - output.length; i++) {\n        output.unshift([...output[0]]);\n    }\n    \n    for (let k = 0; k < dims; k++) {\n        if (top[k]) {\n            state = flipAdj(0, k, state);\n            states.push([...state]);\n        }\n    }\n    \n    const boardStates = chaseLights(states, dims);\n    const after = boardStates.length;\n    \n    const inputStates = extendBack(input, after);\n    const outputStates = extendBack(output, after);\n    \n    return {\n        boardStates,\n        inputStates,\n        outputStates,\n    };\n}\n\nexport function handleChase(state: unknown, action: unknown): unknown {\n    const { type, dims, grid } = action as { type: string; dims: number; grid: number[] };\n\n    if (type === 'chase') {\n        return getStates(grid, dims);\n    }\n\n    return state;\n}\n\nexport function getCalculator(rows: number, cols: number, dims: number) {\n    return (row: number[]): { boardStates: number[][][]; inputStates: number[][]; outputStates: number[][]; } => {\n        const { input, output } = fillRow(row, dims);\n\n        const inputStates = extendBack(input, rows);\n        const outputStates = extendBack(output, rows);\n\n        const states = getStates(outputStates.flat(), dims);\n\n        return states;\n    };\n}\n\n","import React from 'react';\nimport { Typography, Grid } from '../../components/mui';\n\nimport { getStates } from './chaseHandlers';\nimport { CustomGrid } from '../../components/common/CustomGrid';\nimport { useMobile } from '../../hooks';\nimport { TYPOGRAPHY } from '../../config/theme';\n\ninterface Frame {\n    backgroundColor: string;\n}\n\ninterface GetStatesResult {\n    [key: number]: unknown;\n}\n\ninterface Palette {\n    primary: string;\n    secondary: string;\n}\n\nfunction getFrames(states: unknown[], palette: Palette): Record<string, Frame> {\n    const newStates = [-1, ...states, -1];\n    const length = states.length;\n    const frames: Record<string, Frame> = {};\n\n    for (let k = 0; k < length + 1; k++) {\n        const state = newStates[k];\n        const next = newStates[k + 1];\n\n        const value = (state as number) + 1 ? state : next;\n        const color = value ? palette.primary : palette.secondary;\n\n        const percent = (100 * k) / length;\n        const floor = Math.floor(percent);\n\n        frames[`${floor}%`] = {\n            backgroundColor: color,\n        };\n    }\n\n    return frames;\n}\n\nfunction propHandler(\n    states: unknown[],\n    getter: (states: unknown[], row: number, col: number) => unknown[],\n    palette: Palette,\n    id: string\n) {\n    return (row: number, col: number): Record<string, unknown> => {\n        const state = getter(states, row, col);\n        const frames = getFrames(state as unknown[], palette);\n        const length = states.length;\n\n        const name = `${id}-${row}-${col}`;\n        const index = `@keyframes ${name}`;\n\n        const animation = `\n            ${name}\n            ${length * 2}s\n            steps(1, start)\n            infinite\n        `;\n\n        const style: Record<string, unknown> = {\n            [index]: frames,\n            animation,\n        };\n\n        return { sx: style };\n    };\n}\n\ninterface ExampleProps {\n    states?: unknown[];\n    getter?: (states: unknown[], row: number, col: number) => unknown[];\n    palette: Palette;\n    id?: string;\n    rows?: number;\n    cols?: number;\n    size: number;\n    dims?: number;\n    start?: unknown[];\n}\n\nfunction getRange(dims: number): number[] {\n    const keys = Array(dims).keys();\n    return [...keys];\n}\n\nfunction gridTiles(states: number[][][], dims: number): number[][][] {\n    const length = states.length;\n    const dRange = getRange(dims);\n    const lRange = getRange(length);\n\n    return dRange.map(r => dRange.map(c => lRange.map(k => states[k][r][c])));\n}\n\nfunction rowTiles(states: number[][], dims: number): number[][] {\n    const length = states.length;\n    const dRange = getRange(dims);\n    const lRange = getRange(length);\n\n    return dRange.map(r => lRange.map(k => states[k][r]));\n}\n\nfunction Bifold({ children }: { children: React.ReactNode }) {\n    return <Grid size={6}>{children}</Grid>;\n}\n\nfunction Title({ children }: { children: React.ReactNode }) {\n    return (\n        <Bifold>\n            <Typography\n                variant=\"h6\"\n                sx={{\n                    textAlign: 'center',\n                    fontWeight: 'semibold',\n                    fontSize: TYPOGRAPHY.fontSize.body,\n                    lineHeight: '1.2',\n                    letterSpacing: '-0.025em',\n                }}\n            >\n                {children}\n            </Typography>\n        </Bifold>\n    );\n}\n\nexport default function Example({\n    start = [],\n    dims = 3,\n    size,\n    palette,\n}: ExampleProps): React.ReactElement {\n    const mobile = useMobile('lg');\n    const states = getStates(start as number[], dims);\n    const width = mobile ? size / 2 : size;\n\n    const { boardStates, inputStates, outputStates } = states;\n\n    const boardTiles = gridTiles(boardStates, dims);\n    const inputTiles = rowTiles(inputStates, dims);\n    const outputTiles = rowTiles(outputStates, dims);\n\n    const getGrid = (s: unknown[], r: number, c: number) => {\n        const states = s as number[][][];\n        return states.map(state => state[r][c]);\n    };\n    const getRow = (s: unknown[], r: number, c: number) => {\n        const states = s as number[][];\n        return states.map(state => state[c]);\n    };\n\n    const getBoard = propHandler(\n        boardTiles as unknown[],\n        getGrid,\n        palette,\n        'board'\n    );\n    const getInput = propHandler(\n        inputTiles as unknown[],\n        getRow,\n        palette,\n        'input'\n    );\n    const getOutput = propHandler(\n        outputTiles as unknown[],\n        getRow,\n        palette,\n        'output'\n    );\n\n    return (\n        <Grid container size={12} spacing={4}>\n            <Grid container size={12}>\n                <Bifold>\n                    <CustomGrid\n                        size={width}\n                        rows={dims}\n                        cols={dims}\n                        cellProps={getBoard}\n                    />\n                </Bifold>\n                <Grid container size={6}>\n                    <CustomGrid\n                        rows={1}\n                        cols={dims}\n                        size={width}\n                        cellProps={getInput}\n                    />\n                    <CustomGrid\n                        rows={1}\n                        cols={dims}\n                        size={width}\n                        cellProps={getOutput}\n                    />\n                </Grid>\n            </Grid>\n            <Grid container size={12}>\n                <Title>Animation Demo</Title>\n                <Title>Pattern Input</Title>\n            </Grid>\n        </Grid>\n    );\n}\n","import React, { useState, useCallback, useEffect } from 'react';\nimport { Backdrop, Typography, Box, Grid } from '../../components/mui';\nimport {\n    CircleRounded,\n    KeyboardArrowDown,\n    Calculate,\n    Replay,\n} from '../../components/icons';\nimport {\n    SPACING,\n    COLORS,\n    TYPOGRAPHY,\n    COMPONENT_VARIANTS,\n} from '../../config/theme';\nimport { GlassCard } from '../../components/common/GlassCard';\nimport { CustomGrid } from '../../components/common/CustomGrid';\nimport { getProduct } from './matrices';\nimport { useGetters } from '../Board';\nimport { useMobile } from '../../hooks';\nimport Example from './Example';\n\n// Type assertion for GlassCard component\nconst TypedGlassCard = GlassCard as React.ComponentType<{\n    children?: React.ReactNode;\n    sx?: Record<string, unknown>;\n}>;\n\ninterface Getters {\n    getColor: (row: number, col: number) => { front: string; back: string };\n    getBorder: (row: number, col: number) => Record<string, unknown>;\n}\n\ninterface Palette {\n    primary: string;\n    secondary: string;\n}\n\ninterface InfoProps {\n    rows: number;\n    cols: number;\n    size: number;\n    open: boolean;\n    palette: Palette;\n    toggleOpen: () => void;\n}\n\nfunction getInput(\n    getters: Getters,\n    toggleTile: (col: number) => (event: React.MouseEvent) => void\n) {\n    const { getColor, getBorder } = getters;\n\n    return (r: number, c: number) => {\n        const { front, back } = getColor(r, c);\n\n        return {\n            backgroundColor: front,\n            style: getBorder(r, c),\n            onClick: toggleTile(c),\n            sx: {\n                '&:hover': {\n                    cursor: 'pointer',\n                    color: back,\n                },\n            },\n            color: front,\n            children: <CircleRounded />,\n        };\n    };\n}\n\nfunction getOutput({ getColor, getBorder }: Getters) {\n    return (r: number, c: number) => {\n        const { front } = getColor(r, c);\n\n        return {\n            backgroundColor: front,\n            style: getBorder(r, c),\n        };\n    };\n}\n\nfunction useHandler(row: number[], size: number, palette: Palette) {\n    const getTile = useCallback(\n        (r: number, c: number) => {\n            if (r !== 0 || c < 0 || c >= size) return -1;\n\n            return row[c];\n        },\n        [row, size]\n    );\n\n    return useGetters(getTile, palette);\n}\n\nexport default function Info(props: InfoProps): React.ReactElement {\n    const { rows, cols, size, open, palette, toggleOpen } = props;\n    const isMobile = useMobile('md');\n    const isLargeScreen = useMobile('lg');\n\n    const [row, setRow] = useState<number[]>(Array(cols).fill(0));\n\n    useEffect(() => {\n        const newRow = Array(cols).fill(0);\n\n        setRow(newRow);\n    }, [cols, palette]);\n\n    const res = getProduct(row, rows, cols);\n\n    const toggleTile = (col: number) => (event: React.MouseEvent) => {\n        event.stopPropagation();\n\n        const newRow = [...row];\n        newRow[col] ^= 1;\n        setRow(newRow);\n    };\n\n    const inputGetters = useHandler(row, cols, palette);\n    const outputGetters = useHandler(res, cols, palette);\n    const inputProps = getInput(inputGetters, toggleTile);\n    const outputProps = getOutput(outputGetters);\n\n    return (\n        <Backdrop\n            open={open}\n            onClick={toggleOpen}\n            sx={{\n                ...COMPONENT_VARIANTS.card,\n                backgroundColor: 'hsla(0, 0%, 3%, 0.85)',\n                transition: 'all 200ms cubic-bezier(0.4, 0, 0.2, 1)',\n                border: 'none',\n            }}\n        >\n            <Box\n                sx={{\n                    maxWidth: '80vw',\n                    height: 'fit-content',\n                    maxHeight: '90vh',\n                    overflow: 'auto',\n                    mx: 'auto',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    transition: 'all 200ms cubic-bezier(0.4, 0, 0.2, 1)',\n                    padding: 0,\n                    backgroundColor: COLORS.surface.elevated,\n                    borderRadius: SPACING.borderRadius.lg,\n                    border: `1px solid ${COLORS.border.subtle}`,\n                }}\n            >\n                <Box\n                    sx={{\n                        pt: '1rem',\n                        pb: '1rem',\n                        px: '1.25rem',\n                        height: 'fit-content',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        minHeight: 0,\n                    }}\n                >\n                    <Grid\n                        container\n                        spacing={isMobile ? 1.5 : 2}\n                        sx={{ flex: 1, minHeight: 0 }}\n                    >\n                        {/* Top section: Instructions on left, animations on right */}\n                        <Grid\n                            container\n                            size={12}\n                            spacing={2}\n                            sx={{\n                                flex: 1,\n                                minHeight: 0,\n                                maxWidth: {\n                                    xs: '100%',\n                                    lg: SPACING.maxWidth.lg,\n                                },\n                                mx: 'auto',\n                            }}\n                        >\n                            {/* Left half: Algorithm instructions */}\n                            <Grid\n                                size={{ xs: 12, lg: isMobile ? 12 : 6 }}\n                                sx={{\n                                    display: 'flex',\n                                    flexDirection: 'column',\n                                    height: isLargeScreen ? '100%' : 'auto',\n                                }}\n                            >\n                                <Box sx={{ flex: 1, overflow: 'auto' }}>\n                                    <TypedGlassCard\n                                        sx={{\n                                            height: !isLargeScreen\n                                                ? '100%'\n                                                : 'auto',\n                                            display: 'flex',\n                                            flexDirection: 'column',\n                                            transition:\n                                                'all 300ms cubic-bezier(0.4, 0, 0.2, 1)',\n                                        }}\n                                    >\n                                        <Typography\n                                            variant=\"h5\"\n                                            gutterBottom\n                                            sx={{\n                                                color: COLORS.text.primary,\n                                                fontWeight:\n                                                    TYPOGRAPHY.fontWeight\n                                                        .semibold,\n                                                mb: 2,\n                                                textAlign: isMobile\n                                                    ? 'center'\n                                                    : 'left',\n                                                fontSize:\n                                                    TYPOGRAPHY.fontSize.h2,\n                                                lineHeight: 1.4,\n                                                letterSpacing: '0',\n                                            }}\n                                        >\n                                            Chasing Lights Algorithm\n                                        </Typography>\n                                        {/* Step 1 */}\n                                        <Box sx={{ mb: 2 }}>\n                                            <Typography\n                                                variant=\"subtitle1\"\n                                                sx={{\n                                                    color: COLORS.text.primary,\n                                                    fontWeight:\n                                                        TYPOGRAPHY.fontWeight\n                                                            .semibold,\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    mb: 1,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    letterSpacing: '0',\n                                                }}\n                                            >\n                                                <KeyboardArrowDown\n                                                    sx={{\n                                                        mr: 1.5,\n                                                        color: COLORS.primary\n                                                            .main,\n                                                        fontSize: '1.5rem',\n                                                    }}\n                                                />\n                                                Chase to Bottom\n                                            </Typography>\n                                            <Typography\n                                                variant=\"body1\"\n                                                sx={{\n                                                    color: COLORS.text\n                                                        .secondary,\n                                                    lineHeight: 1.5,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    ml: 4,\n                                                }}\n                                            >\n                                                Turn off rows from top to bottom\n                                                by clicking lights in each row\n                                                to eliminate all lights above\n                                                the bottom row.\n                                            </Typography>\n                                        </Box>\n\n                                        {/* Step 2 */}\n                                        <Box sx={{ mb: 2 }}>\n                                            <Typography\n                                                variant=\"subtitle1\"\n                                                sx={{\n                                                    color: COLORS.text.primary,\n                                                    fontWeight:\n                                                        TYPOGRAPHY.fontWeight\n                                                            .semibold,\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    mb: 1,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    letterSpacing: '0',\n                                                }}\n                                            >\n                                                <Calculate\n                                                    sx={{\n                                                        mr: 1.5,\n                                                        color: COLORS.data\n                                                            .amber,\n                                                        fontSize: '1.5rem',\n                                                    }}\n                                                />\n                                                Use the Calculator\n                                            </Typography>\n                                            <Typography\n                                                variant=\"body1\"\n                                                sx={{\n                                                    color: COLORS.text\n                                                        .secondary,\n                                                    lineHeight: 1.5,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    ml: 4,\n                                                }}\n                                            >\n                                                Enter the remaining lights\n                                                pattern in the bottom row using\n                                                the interactive calculator\n                                                below.\n                                            </Typography>\n                                        </Box>\n\n                                        {/* Step 3 */}\n                                        <Box sx={{ mb: 1 }}>\n                                            <Typography\n                                                variant=\"subtitle1\"\n                                                sx={{\n                                                    color: COLORS.text.primary,\n                                                    fontWeight:\n                                                        TYPOGRAPHY.fontWeight\n                                                            .semibold,\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    mb: 1,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    letterSpacing: '0',\n                                                }}\n                                            >\n                                                <Replay\n                                                    sx={{\n                                                        mr: 1.5,\n                                                        color: COLORS.data\n                                                            .green,\n                                                        fontSize: '1.5rem',\n                                                    }}\n                                                />\n                                                Chase Again\n                                            </Typography>\n                                            <Typography\n                                                variant=\"body1\"\n                                                sx={{\n                                                    color: COLORS.text\n                                                        .secondary,\n                                                    lineHeight: 1.5,\n                                                    fontSize:\n                                                        TYPOGRAPHY.fontSize\n                                                            .body,\n                                                    ml: 4,\n                                                }}\n                                            >\n                                                Apply the calculated solution\n                                                pattern to the top row, then\n                                                chase downward to solve the\n                                                entire puzzle.\n                                            </Typography>\n                                        </Box>\n                                    </TypedGlassCard>\n                                </Box>\n                            </Grid>\n\n                            {/* Right half: Animations */}\n                            {!isLargeScreen && (\n                                <Grid\n                                    size={{ xs: 12, lg: 6 }}\n                                    sx={{\n                                        ...COMPONENT_VARIANTS.flexCenter,\n                                    }}\n                                >\n                                    <TypedGlassCard\n                                        sx={{\n                                            width: '100%',\n                                            height: '100%',\n                                            ...COMPONENT_VARIANTS.flexCenter,\n                                            transition:\n                                                'all 300ms cubic-bezier(0.4, 0, 0.2, 1)',\n                                        }}\n                                    >\n                                        <Example\n                                            dims={3}\n                                            size={size * 0.6}\n                                            start={[1, 3, 8]}\n                                            palette={palette}\n                                        />\n                                    </TypedGlassCard>\n                                </Grid>\n                            )}\n                        </Grid>\n\n                        {/* Bottom section: Lights Out Calculator (full width) */}\n                        <Grid container size={12} spacing={2}>\n                            <Grid size={12}>\n                                <TypedGlassCard\n                                    sx={{\n                                        textAlign: 'center',\n                                        paddingBottom: '2rem',\n                                    }}\n                                >\n                                    <Typography\n                                        variant=\"h6\"\n                                        sx={{\n                                            color: COLORS.text.primary,\n                                            fontWeight:\n                                                TYPOGRAPHY.fontWeight.semibold,\n                                            fontSize:\n                                                TYPOGRAPHY.fontSize.subheading,\n                                            lineHeight: 1.4,\n                                            letterSpacing: '0',\n                                            mb: 2,\n                                        }}\n                                    >\n                                        Interactive Calculator\n                                    </Typography>\n\n                                    {/* Input Pattern */}\n                                    <Box sx={{ mb: 2 }}>\n                                        <CustomGrid\n                                            space={0}\n                                            rows={1}\n                                            cols={cols}\n                                            size={size * 0.7}\n                                            cellProps={inputProps}\n                                        />\n                                    </Box>\n\n                                    {/* Solution Pattern */}\n                                    <Box>\n                                        <CustomGrid\n                                            space={0}\n                                            rows={1}\n                                            cols={cols}\n                                            size={size * 0.7}\n                                            cellProps={outputProps}\n                                        />\n                                    </Box>\n                                </TypedGlassCard>\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                </Box>\n            </Box>\n        </Backdrop>\n    );\n}\n","import React, { useMemo, useEffect, useReducer } from 'react';\nimport { Grid } from '../../components/mui';\nimport {\n    InfoRounded,\n    CircleRounded,\n    PlayArrowRounded,\n    PauseRounded,\n} from '../../components/icons';\n\nimport {\n    Controls,\n    TooltipButton,\n    RandomButton,\n} from '../../components/common/Controls';\nimport { Board, useHandler, usePalette } from '../Board';\nimport { PAGE_TITLES, GAME_CONSTANTS } from '../../config/constants';\nimport { COLORS } from '../../config/theme';\nimport { getGrid, handleBoard, getNextMove } from './boardHandlers';\nimport { useWindow, useMobile } from '../../hooks';\nimport { convertPixels } from '../../utils/calculate';\nimport Info from './Info';\n\ninterface Getters {\n    getColor: (row: number, col: number) => { front: string; back: string };\n    getBorder: (row: number, col: number) => React.CSSProperties;\n    getFiller: (row: number, col: number) => string;\n}\n\ninterface FrontProps {\n    onClick: () => void;\n    children: React.ReactElement;\n    backgroundColor: string;\n    color: string;\n    style: React.CSSProperties;\n    sx: {\n        '&:hover': {\n            cursor: string;\n            color: string;\n        };\n    };\n}\n\nfunction getFrontProps(getters: Getters, dispatch: (action: any) => void) {\n    const { getColor, getBorder } = getters;\n\n    const flipAdj = (row: number, col: number) => {\n        dispatch({\n            type: 'adjacent',\n            row,\n            col,\n        });\n    };\n\n    return (row: number, col: number): FrontProps => {\n        const style = getBorder(row, col);\n        const { front, back } = getColor(row, col);\n\n        return {\n            onClick: () => flipAdj(row, col),\n            children: <CircleRounded />,\n            backgroundColor: front,\n            color: front,\n            style,\n            sx: {\n                '&:hover': {\n                    cursor: 'pointer',\n                    color: back,\n                },\n            },\n        };\n    };\n}\n\nexport default function LightsOut(): React.ReactElement {\n    const { height, width } = useWindow();\n    const mobile = useMobile('sm');\n    const size = mobile\n        ? GAME_CONSTANTS.gridSizes.mobile\n        : GAME_CONSTANTS.gridSizes.desktop;\n\n    let { rows, cols } = useMemo(\n        () => convertPixels(size, height, width),\n        [size, height, width]\n    );\n\n    rows -= 1;\n    cols -= 1;\n\n    if (mobile) rows -= 2;\n\n    const initial = {\n        grid: getGrid(rows, cols),\n        score: 0,\n        rows,\n        cols,\n        auto: false,\n    };\n\n    const [state, dispatch] = useReducer(handleBoard, initial);\n\n    const [open, toggleOpen] = useReducer((open: boolean) => !open, false);\n\n    const palette = usePalette(state.score);\n\n    useEffect(() => {\n        document.title = PAGE_TITLES.lightsOut;\n    }, []);\n\n    useEffect(() => {\n        dispatch({\n            type: 'resize',\n            newRows: rows,\n            newCols: cols,\n        });\n    }, [rows, cols]);\n\n    const [moveQueue, setMoveQueue] = React.useState<\n        { row: number; col: number }[]\n    >([]);\n\n    useEffect(() => {\n        if (!state.auto) {\n            if (moveQueue.length > 0) setMoveQueue([]);\n            return;\n        }\n\n        const timeout = setTimeout(() => {\n            if (moveQueue.length > 0) {\n                const [nextMove, ...remaining] = moveQueue;\n                dispatch({\n                    type: 'adjacent',\n                    row: nextMove.row,\n                    col: nextMove.col,\n                });\n                setMoveQueue(remaining);\n            } else {\n                const moves = getNextMove(state.grid);\n                if (moves && moves.length > 0) {\n                    if (moves.length === 1) {\n                        dispatch({\n                            type: 'adjacent',\n                            row: moves[0].row,\n                            col: moves[0].col,\n                        });\n                    } else {\n                        setMoveQueue(moves);\n                    }\n                } else {\n                    dispatch({ type: 'auto' });\n                }\n            }\n        }, 300);\n        return () => clearTimeout(timeout);\n    }, [state.auto, state.grid, moveQueue]);\n\n    const getters = useHandler(state, palette);\n\n    const frontProps = getFrontProps(getters, dispatch);\n\n    const backProps = (row: number, col: number) => {\n        return {\n            backgroundColor: getters.getFiller(row, col),\n        };\n    };\n\n    return (\n        <Grid\n            container\n            minHeight=\"100vh\"\n            sx={{\n                background: COLORS.surface.background,\n                position: 'relative',\n            }}\n        >\n            <Board\n                size={size}\n                rows={rows}\n                cols={cols}\n                frontProps={frontProps as any}\n                backProps={backProps}\n            />\n            <Controls\n                handler={() => () => undefined} // No directional controls for Lights Out\n                size=\"inherit\"\n            >\n                <TooltipButton\n                    title={state.auto ? 'Pause' : 'Auto Play'}\n                    Icon={state.auto ? PauseRounded : PlayArrowRounded}\n                    onClick={() => dispatch({ type: 'auto' })}\n                />\n                <RandomButton\n                    title=\"New Game\"\n                    onClick={() => dispatch({ type: 'random' })}\n                    size=\"inherit\"\n                />\n                <TooltipButton\n                    title=\"Info\"\n                    Icon={InfoRounded}\n                    onClick={toggleOpen}\n                />\n            </Controls>\n            {(Info as any)({\n                rows,\n                cols,\n                size,\n                open,\n                palette,\n                score: state.score,\n                toggleOpen,\n            })}\n        </Grid>\n    );\n}\n","import React from 'react';\nimport {\n    Box,\n    Typography,\n    IconButton,\n    Button,\n    Grid,\n    ToggleButton,\n    ToggleButtonGroup,\n} from './mui';\nimport { GitHub, HomeRounded as Home, Refresh, SettingsRounded } from './icons';\nimport { CHART_DIMENSIONS, CHART_FORMATTING } from '../config/constants';\nimport {\n    COLORS,\n    SPACING,\n    TYPOGRAPHY,\n    COMPONENT_VARIANTS,\n    SHADOWS,\n} from '../config/theme';\nimport { GlassCard } from './common/GlassCard';\nimport {\n    LineChart,\n    Line,\n    XAxis,\n    YAxis,\n    CartesianGrid,\n    Tooltip as RechartsTooltip,\n    ResponsiveContainer,\n} from 'recharts';\n\ninterface ChartConfig {\n    type: string;\n    lines: Array<{\n        dataKey: string;\n        name: string;\n        color: string;\n        yAxisId?: string;\n    }>;\n    xAxisKey: string;\n    yAxisFormatter: (value: number) => string;\n    yAxisDomain: string[];\n    dualYAxis?: boolean;\n    rightYAxisFormatter?: (value: number) => string;\n    rightYAxisDomain?: string[];\n    tooltipLabelFormatter: (value: number) => string;\n    tooltipFormatter: (value: number, name: string) => [string, string];\n}\n\ninterface ViewType {\n    key: string;\n    label: string;\n    icon: React.ElementType;\n    chartTitle: string;\n    dataProcessor: (data: any[]) => any[];\n    chartConfig: ChartConfig;\n}\n\ninterface ControlOption {\n    value: number;\n    label: string;\n}\n\ninterface Control {\n    label: string;\n    icon?: React.ElementType;\n    color?: string;\n    hoverColor?: string;\n    value: number;\n    onChange: (value: number) => void;\n    options: ControlOption[];\n}\n\ninterface ResearchDemoProps {\n    title: string;\n    subtitle: string;\n    githubUrl: string;\n    chartData?: any[];\n    chartConfig?: ChartConfig;\n    viewTypes?: ViewType[];\n    currentViewType?: string;\n    onViewTypeChange?: (value: string) => void;\n    controls?: Control[];\n    loading?: boolean;\n    loadingMessage?: string;\n    onReset?: () => void;\n    resetLabel?: string;\n    chartTitle?: string | null;\n}\n\nconst ResearchDemo: React.FC<ResearchDemoProps> = ({\n    title,\n    subtitle,\n    githubUrl,\n    chartData = [],\n    chartConfig = {\n        type: 'line',\n        lines: [],\n        xAxisKey: 'x',\n        yAxisFormatter: (value: number) => value.toFixed(2),\n        yAxisDomain: ['dataMin - 0.05', 'dataMax + 0.05'],\n        dualYAxis: false,\n        rightYAxisFormatter: (value: number) => value.toFixed(2),\n        rightYAxisDomain: ['dataMin - 0.05', 'dataMax + 0.05'],\n        tooltipLabelFormatter: (value: number) => `Round ${value}`,\n        tooltipFormatter: (value: number, name: string) => [\n            value.toFixed(2),\n            name,\n        ],\n    },\n    viewTypes = [],\n    currentViewType = 'default',\n    onViewTypeChange = () => undefined,\n    controls = [],\n    loading = false,\n    loadingMessage = 'Loading data...',\n    onReset = null,\n    resetLabel = 'Reset',\n    chartTitle = null,\n}) => {\n    const getCurrentChartData = () => {\n        if (!chartData || chartData.length === 0) return [];\n\n        if (!viewTypes.length) return chartData;\n\n        const currentView = viewTypes.find(\n            view => view.key === currentViewType\n        );\n        if (!currentView || !currentView.dataProcessor) return chartData;\n\n        return currentView.dataProcessor(chartData);\n    };\n\n    const currentData = getCurrentChartData();\n    const currentChartConfig =\n        viewTypes.find(view => view.key === currentViewType)?.chartConfig ||\n        chartConfig;\n\n    return (\n        <Grid\n            container={true}\n            minHeight=\"100vh\"\n            flexDirection=\"column\"\n            sx={{\n                position: 'relative',\n                padding: SPACING.padding.md,\n                paddingBottom: {\n                    xs: SPACING.padding.md,\n                    md: 0,\n                },\n                boxSizing: 'border-box',\n                width: '100%',\n                maxWidth: '100vw',\n                overflowX: 'hidden',\n            }}\n        >\n            <Box\n                sx={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0,\n                    background: COLORS.surface.background,\n                    zIndex: -1,\n                }}\n            />\n\n            <Grid\n                size={12}\n                flex={1}\n                sx={{\n                    ...COMPONENT_VARIANTS.flexCenter,\n                    flexDirection: 'column',\n                    zIndex: 1,\n                    padding: 0,\n                    minHeight: 0,\n                }}\n            >\n                <Box\n                    sx={{\n                        textAlign: 'center',\n                        maxWidth: SPACING.maxWidth.md,\n                        width: '100%',\n                        padding: {\n                            xs: '0 0.5rem',\n                            md: '0 2rem',\n                        },\n                        boxSizing: 'border-box',\n                        overflow: 'hidden',\n                    }}\n                >\n                    <Grid\n                        container={true}\n                        alignItems=\"center\"\n                        justifyContent=\"space-between\"\n                        sx={{ marginBottom: 2 }}\n                    >\n                        <Grid size=\"auto\">\n                            <Typography\n                                variant=\"h1\"\n                                sx={{\n                                    color: COLORS.text.primary,\n                                    fontWeight: TYPOGRAPHY.fontWeight.bold,\n                                    fontSize: TYPOGRAPHY.fontSize.h2,\n                                }}\n                            >\n                                {title}\n                            </Typography>\n                        </Grid>\n                        <Grid size=\"auto\" sx={{ display: 'flex', gap: 1 }}>\n                            <IconButton\n                                href={githubUrl}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                            >\n                                <GitHub\n                                    sx={{\n                                        fontSize: {\n                                            xs: TYPOGRAPHY.fontSize.h2,\n                                            md: '2rem',\n                                        },\n                                    }}\n                                />\n                            </IconButton>\n                            <IconButton component=\"a\" href=\"/\">\n                                <Home\n                                    sx={{\n                                        fontSize: {\n                                            xs: TYPOGRAPHY.fontSize.h2,\n                                            md: '2rem',\n                                        },\n                                    }}\n                                />\n                            </IconButton>\n                        </Grid>\n                    </Grid>\n\n                    <Typography\n                        variant=\"h5\"\n                        sx={{\n                            color: COLORS.text.secondary,\n                            marginTop: 2,\n                            marginBottom: 4,\n                            fontWeight: TYPOGRAPHY.fontWeight.normal,\n                            fontSize: TYPOGRAPHY.fontSize.subheading,\n                        }}\n                    >\n                        {subtitle}\n                    </Typography>\n\n                    <GlassCard\n                        sx={{\n                            marginBottom: 3,\n                            width: '100%',\n                            boxSizing: 'border-box',\n                            overflow: 'hidden',\n                        }}\n                    >\n                        <Typography\n                            variant=\"subtitle1\"\n                            sx={{\n                                color: COLORS.text.secondary,\n                                marginBottom: 2,\n                                textAlign: 'center',\n                                fontWeight: TYPOGRAPHY.fontWeight.medium,\n                                fontSize: TYPOGRAPHY.fontSize.subheading,\n                            }}\n                        >\n                            {chartTitle ||\n                                (viewTypes.length\n                                    ? viewTypes.find(\n                                          view => view.key === currentViewType\n                                      )?.chartTitle || 'Data Visualization'\n                                    : 'Data Visualization')}\n                        </Typography>\n                        <Box sx={{ height: CHART_DIMENSIONS.height }}>\n                            {loading ? (\n                                <Box\n                                    sx={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                        height: '100%',\n                                        color: COLORS.text.secondary,\n                                    }}\n                                >\n                                    <Typography>{loadingMessage}</Typography>\n                                </Box>\n                            ) : (\n                                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                                    <LineChart data={currentData}>\n                                        <CartesianGrid\n                                            strokeDasharray={\n                                                CHART_FORMATTING.lines\n                                                    .strokeDashArray\n                                            }\n                                            stroke={COLORS.border.subtle}\n                                        />\n                                        <XAxis\n                                            dataKey={\n                                                currentChartConfig.xAxisKey\n                                            }\n                                            stroke={COLORS.text.secondary}\n                                            tick={{\n                                                fill: COLORS.text.secondary,\n                                            }}\n                                        />\n                                        <YAxis\n                                            yAxisId=\"left\"\n                                            stroke={COLORS.text.secondary}\n                                            tick={{\n                                                fill: COLORS.text.secondary,\n                                            }}\n                                            tickFormatter={\n                                                currentChartConfig.yAxisFormatter\n                                            }\n                                            domain={\n                                                currentChartConfig.yAxisDomain\n                                            }\n                                        />\n                                        {currentChartConfig.dualYAxis && (\n                                            <YAxis\n                                                yAxisId=\"right\"\n                                                orientation=\"right\"\n                                                stroke={COLORS.text.secondary}\n                                                tick={{\n                                                    fill: COLORS.text.secondary,\n                                                }}\n                                                tickFormatter={\n                                                    currentChartConfig.rightYAxisFormatter\n                                                }\n                                                domain={\n                                                    currentChartConfig.rightYAxisDomain\n                                                }\n                                            />\n                                        )}\n                                        <RechartsTooltip\n                                            contentStyle={{\n                                                backgroundColor:\n                                                    COLORS.surface.elevated,\n                                                border: `1px solid ${COLORS.border.subtle}`,\n                                                borderRadius:\n                                                    SPACING.borderRadius.lg,\n                                                color: COLORS.text.primary,\n                                            }}\n                                            labelFormatter={\n                                                currentChartConfig.tooltipLabelFormatter\n                                            }\n                                            formatter={\n                                                currentChartConfig.tooltipFormatter as any\n                                            }\n                                        />\n                                        {currentChartConfig.lines.map(\n                                            (line, index) => (\n                                                <Line\n                                                    key={line.dataKey}\n                                                    yAxisId={\n                                                        line.yAxisId || 'left'\n                                                    }\n                                                    type=\"monotone\"\n                                                    dataKey={line.dataKey}\n                                                    stroke={line.color}\n                                                    strokeWidth={\n                                                        CHART_DIMENSIONS.strokeWidth\n                                                    }\n                                                    name={line.name}\n                                                    dot={{\n                                                        fill: line.color,\n                                                        strokeWidth:\n                                                            CHART_FORMATTING\n                                                                .lines\n                                                                .defaultStrokeWidth,\n                                                        r: CHART_DIMENSIONS.dotRadius,\n                                                    }}\n                                                />\n                                            )\n                                        )}\n                                    </LineChart>\n                                </ResponsiveContainer>\n                            )}\n                        </Box>\n                    </GlassCard>\n\n                    {viewTypes.length > 1 && (\n                        <GlassCard\n                            sx={{\n                                marginBottom: 3,\n                                width: '100%',\n                                boxSizing: 'border-box',\n                                overflow: 'hidden',\n                                paddingBottom: SPACING.padding.md,\n                            }}\n                        >\n                            <Box\n                                sx={{\n                                    display: 'flex',\n                                    justifyContent: 'space-between',\n                                    alignItems: 'center',\n                                    marginBottom: 2,\n                                }}\n                            >\n                                <Box\n                                    sx={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        gap: 1,\n                                    }}\n                                >\n                                    <SettingsRounded\n                                        sx={{\n                                            color: COLORS.primary.light,\n                                            fontSize: '1.25rem',\n                                        }}\n                                    />\n                                    <Typography\n                                        variant=\"body1\"\n                                        sx={{\n                                            color: COLORS.primary.light,\n                                            fontWeight:\n                                                TYPOGRAPHY.fontWeight.semibold,\n                                        }}\n                                    >\n                                        Chart Views\n                                    </Typography>\n                                </Box>\n                            </Box>\n\n                            <Box\n                                sx={{\n                                    display: 'grid',\n                                    gridTemplateColumns: {\n                                        xs: 'repeat(2, minmax(0, 1fr))',\n                                        md: `repeat(${Math.min(viewTypes.length, 4)}, 1fr)`,\n                                    },\n                                    gap: 1.5,\n                                    width: '100%',\n                                    margin: 0,\n                                }}\n                            >\n                                {viewTypes.map(viewType => {\n                                    const IconComponent = viewType.icon;\n                                    return (\n                                        <Button\n                                            key={viewType.key}\n                                            variant=\"outlined\"\n                                            size=\"small\"\n                                            startIcon={\n                                                IconComponent ? (\n                                                    <IconComponent />\n                                                ) : null\n                                            }\n                                            onClick={() =>\n                                                onViewTypeChange(viewType.key)\n                                            }\n                                            sx={{\n                                                width: '100%',\n                                                color:\n                                                    currentViewType ===\n                                                    viewType.key\n                                                        ? COLORS.text.primary\n                                                        : COLORS.text.secondary,\n                                                backgroundColor:\n                                                    currentViewType ===\n                                                    viewType.key\n                                                        ? COLORS.primary.main\n                                                        : 'transparent',\n                                                borderColor:\n                                                    COLORS.border.subtle,\n                                                borderWidth: '1px',\n                                                borderStyle: 'solid',\n                                                borderRadius:\n                                                    SPACING.borderRadius.lg,\n                                                minHeight: '36px',\n                                                padding: '0.4rem 0.8rem',\n                                                fontSize: '0.8rem',\n                                                fontWeight:\n                                                    TYPOGRAPHY.fontWeight\n                                                        .medium,\n                                                transition:\n                                                    'transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease',\n                                                '&:hover': {\n                                                    backgroundColor:\n                                                        currentViewType ===\n                                                        viewType.key\n                                                            ? COLORS.primary\n                                                                  .dark\n                                                            : COLORS.interactive\n                                                                  .hover,\n                                                    transform:\n                                                        'translateY(-1px)',\n                                                    boxShadow: SHADOWS.sm,\n                                                },\n                                            }}\n                                        >\n                                            {viewType.label}\n                                        </Button>\n                                    );\n                                })}\n                            </Box>\n                        </GlassCard>\n                    )}\n\n                    {controls.length > 0 && (\n                        <GlassCard\n                            sx={{\n                                marginBottom: 0,\n                                width: '100%',\n                                boxSizing: 'border-box',\n                                overflow: 'hidden',\n                                paddingBottom: SPACING.padding.md,\n                            }}\n                        >\n                            <Box\n                                sx={{\n                                    display: 'flex',\n                                    justifyContent: 'space-between',\n                                    alignItems: 'center',\n                                    marginBottom: 2,\n                                }}\n                            >\n                                <Box\n                                    sx={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        gap: 1,\n                                    }}\n                                >\n                                    <SettingsRounded\n                                        sx={{\n                                            color: COLORS.primary.light,\n                                            fontSize: '1.25rem',\n                                        }}\n                                    />\n                                    <Typography\n                                        variant=\"body1\"\n                                        sx={{\n                                            color: COLORS.primary.light,\n                                            fontWeight:\n                                                TYPOGRAPHY.fontWeight.semibold,\n                                        }}\n                                    >\n                                        Parameters\n                                    </Typography>\n                                </Box>\n                                {onReset && (\n                                    <Button\n                                        variant=\"outlined\"\n                                        size=\"small\"\n                                        startIcon={<Refresh />}\n                                        onClick={onReset}\n                                        sx={{\n                                            color: COLORS.text.secondary,\n                                            borderColor: COLORS.border.subtle,\n                                            borderRadius:\n                                                SPACING.borderRadius.lg,\n                                            padding: '0.25rem 1rem',\n                                            fontSize: '0.875rem',\n                                            fontWeight:\n                                                TYPOGRAPHY.fontWeight.medium,\n                                            transition: 'all 0.2s ease-in-out',\n                                            '&:hover': {\n                                                borderColor:\n                                                    COLORS.primary.main,\n                                                backgroundColor:\n                                                    COLORS.interactive.hover,\n                                                transform: 'translateY(-1px)',\n                                                boxShadow: SHADOWS.sm,\n                                            },\n                                        }}\n                                    >\n                                        {resetLabel}\n                                    </Button>\n                                )}\n                            </Box>\n\n                            <Grid container={true} spacing={2.5}>\n                                {controls.map((control, index) => (\n                                    <Grid key={index} size={{ xs: 12, md: 4 }}>\n                                        <Box\n                                            sx={{\n                                                marginBottom: 0,\n                                                padding: '1rem',\n                                                backgroundColor:\n                                                    COLORS.interactive.disabled,\n                                                borderRadius:\n                                                    SPACING.borderRadius.lg,\n                                                border: `1px solid ${COLORS.border.subtle}`,\n                                            }}\n                                        >\n                                            <Box\n                                                sx={{\n                                                    display: 'flex',\n                                                    alignItems: 'center',\n                                                    gap: 1,\n                                                    mb: 2,\n                                                }}\n                                            >\n                                                {control.icon && (\n                                                    <control.icon\n                                                        sx={{\n                                                            color:\n                                                                control.color ||\n                                                                COLORS.primary\n                                                                    .light,\n                                                            fontSize: '1.1rem',\n                                                        }}\n                                                    />\n                                                )}\n                                                <Typography\n                                                    variant=\"body2\"\n                                                    sx={{\n                                                        color: COLORS.text\n                                                            .secondary,\n                                                        fontWeight:\n                                                            TYPOGRAPHY\n                                                                .fontWeight\n                                                                .medium,\n                                                    }}\n                                                >\n                                                    {control.label}\n                                                </Typography>\n                                            </Box>\n                                            <ToggleButtonGroup\n                                                value={control.value}\n                                                exclusive\n                                                onChange={(e, newValue) => {\n                                                    if (newValue !== null) {\n                                                        control.onChange(\n                                                            newValue\n                                                        );\n                                                    }\n                                                }}\n                                                size=\"small\"\n                                                sx={{\n                                                    width: '100%',\n                                                    borderRadius:\n                                                        SPACING.borderRadius.lg,\n                                                    overflow: 'hidden',\n                                                    border: `1px solid ${COLORS.border.subtle}`,\n                                                    '& .MuiToggleButtonGroup-grouped':\n                                                        {\n                                                            margin: 0,\n                                                            border: 0,\n                                                            borderRadius: 0,\n                                                            '&:not(:first-of-type)':\n                                                                {\n                                                                    borderLeft: `1px solid ${COLORS.border.subtle}`,\n                                                                },\n                                                        },\n                                                    '& .MuiToggleButton-root': {\n                                                        color: COLORS.text\n                                                            .secondary,\n                                                        borderColor:\n                                                            COLORS.border\n                                                                .subtle,\n                                                        padding:\n                                                            '0.6rem 0.8rem',\n                                                        flex: 1,\n                                                        fontSize: '0.85rem',\n                                                        fontWeight:\n                                                            TYPOGRAPHY\n                                                                .fontWeight\n                                                                .medium,\n                                                        borderRadius: 0,\n                                                        transition:\n                                                            'all 0.2s ease-in-out',\n                                                        '&.Mui-selected': {\n                                                            backgroundColor:\n                                                                control.color ||\n                                                                COLORS.primary\n                                                                    .main,\n                                                            color: COLORS.text\n                                                                .primary,\n                                                            borderColor:\n                                                                control.color ||\n                                                                COLORS.primary\n                                                                    .main,\n                                                            '&:hover': {\n                                                                backgroundColor:\n                                                                    control.hoverColor ||\n                                                                    (control.color ===\n                                                                    COLORS\n                                                                        .primary\n                                                                        .main\n                                                                        ? COLORS\n                                                                              .primary\n                                                                              .dark\n                                                                        : control.color ===\n                                                                            COLORS\n                                                                                .data\n                                                                                .green\n                                                                          ? 'hsl(141, 64%, 39%)'\n                                                                          : control.color ===\n                                                                              COLORS\n                                                                                  .data\n                                                                                  .amber\n                                                                            ? 'hsl(34, 95%, 48%)'\n                                                                            : control.color ||\n                                                                              COLORS\n                                                                                  .primary\n                                                                                  .dark),\n                                                                borderColor:\n                                                                    control.hoverColor ||\n                                                                    (control.color ===\n                                                                    COLORS\n                                                                        .primary\n                                                                        .main\n                                                                        ? COLORS\n                                                                              .primary\n                                                                              .dark\n                                                                        : control.color ===\n                                                                            COLORS\n                                                                                .data\n                                                                                .green\n                                                                          ? 'hsl(141, 64%, 39%)'\n                                                                          : control.color ===\n                                                                              COLORS\n                                                                                  .data\n                                                                                  .amber\n                                                                            ? 'hsl(34, 95%, 48%)'\n                                                                            : control.color ||\n                                                                              COLORS\n                                                                                  .primary\n                                                                                  .dark),\n                                                                transform:\n                                                                    'translateY(-1px)',\n                                                                boxShadow:\n                                                                    SHADOWS.sm,\n                                                            },\n                                                        },\n                                                        '&:hover': {\n                                                            backgroundColor:\n                                                                COLORS\n                                                                    .interactive\n                                                                    .hover,\n                                                            transform:\n                                                                'translateY(-1px)',\n                                                        },\n                                                    },\n                                                }}\n                                            >\n                                                {control.options.map(option => (\n                                                    <ToggleButton\n                                                        key={option.value}\n                                                        value={option.value}\n                                                    >\n                                                        {option.label}\n                                                    </ToggleButton>\n                                                ))}\n                                            </ToggleButtonGroup>\n                                        </Box>\n                                    </Grid>\n                                ))}\n                            </Grid>\n                        </GlassCard>\n                    )}\n                </Box>\n            </Grid>\n        </Grid>\n    );\n};\n\nexport default ResearchDemo;\n","import React, { useState, useEffect } from 'react';\nimport {\n    BarChartRounded,\n    TrendingUpRounded,\n    ShowChartRounded,\n    AnalyticsRounded,\n} from '../components/icons';\nimport {\n    URLS,\n    PAGE_TITLES,\n    ZSHARP_DEFAULTS,\n    PERCENTAGE,\n} from '../config/constants';\nimport { COLORS } from '../config/theme';\nimport ResearchDemo from '../components/ResearchDemo';\n\ninterface DataPoint {\n    epoch: number;\n    sgd: number;\n    zsharp: number;\n    sgdLoss: number;\n    zsharpLoss: number;\n}\n\ninterface ProcessedDataPoint {\n    epoch: number;\n    sgd?: number;\n    zsharp?: number;\n    gap?: number;\n}\n\ninterface RealData {\n    'SGD Baseline'?: {\n        train_accuracies?: number[];\n        train_losses?: number[];\n    };\n    'ZSharp'?: {\n        train_accuracies?: number[];\n        train_losses?: number[];\n    };\n}\n\ninterface ViewType {\n    key: string;\n    label: string;\n    icon: React.ElementType;\n    chartTitle: string;\n    dataProcessor: (data: DataPoint[]) => ProcessedDataPoint[];\n    chartConfig: {\n        type: string;\n        xAxisKey: string;\n        yAxisFormatter: (value: number) => string;\n        yAxisDomain: string[];\n        tooltipLabelFormatter: (value: number) => string;\n        tooltipFormatter: (value: number, name: string) => [string, string];\n        lines: Array<{\n            dataKey: string;\n            name: string;\n            color: string;\n        }>;\n    };\n}\n\nconst loadRealZSharpData = async (): Promise<DataPoint[]> => {\n    try {\n        if (typeof DecompressionStream === 'undefined') {\n            throw new Error('DecompressionStream not supported');\n        }\n\n        const response = await fetch('/zsharp_data.json.gz');\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const compressedData = await response.arrayBuffer();\n        const decompressedData = await new Response(\n            new ReadableStream({\n                start(controller) {\n                    const decompressionStream = new DecompressionStream('gzip');\n                    const writer = decompressionStream.writable.getWriter();\n                    const reader = decompressionStream.readable.getReader();\n\n                    writer.write(compressedData).then(() => writer.close());\n\n                    function pump(): Promise<void> {\n                        return reader.read().then(({ done, value }: { done: boolean; value: Uint8Array | undefined }) => {\n                            if (done) {\n                                controller.close();\n                                return;\n                            }\n                            controller.enqueue(value);\n                            return pump();\n                        });\n                    }\n                    return pump();\n                },\n            })\n        ).text();\n        const realData: RealData = JSON.parse(decompressedData);\n\n        const data: DataPoint[] = [];\n        const sgdAccuracies = realData['SGD Baseline']?.train_accuracies || [];\n        const zsharpAccuracies = realData['ZSharp']?.train_accuracies || [];\n        const sgdLosses = realData['SGD Baseline']?.train_losses || [];\n        const zsharpLosses = realData['ZSharp']?.train_losses || [];\n\n        const maxEpochs = Math.max(\n            sgdAccuracies.length,\n            zsharpAccuracies.length\n        );\n\n        for (let i = 0; i < maxEpochs; i++) {\n            data.push({\n                epoch: i + 1,\n                sgd: (sgdAccuracies[i] || 0) / PERCENTAGE.divisor,\n                zsharp: (zsharpAccuracies[i] || 0) / PERCENTAGE.divisor,\n                sgdLoss: sgdLosses[i] || 0,\n                zsharpLoss: zsharpLosses[i] || 0,\n            });\n        }\n\n        return data;\n    } catch (error) {\n        return generateFallbackData();\n    }\n};\n\nconst generateFallbackData = (): DataPoint[] => {\n    const data: DataPoint[] = [];\n    for (let i = 0; i <= ZSHARP_DEFAULTS.maxEpochs; i++) {\n        const sgdAccuracy =\n            ZSHARP_DEFAULTS.baseAccuracy +\n            (i / ZSHARP_DEFAULTS.maxEpochs) *\n                (ZSHARP_DEFAULTS.maxAccuracy - ZSHARP_DEFAULTS.baseAccuracy);\n        const zsharpAccuracy = sgdAccuracy + ZSHARP_DEFAULTS.improvement;\n        const sgdLoss =\n            ZSHARP_DEFAULTS.baseLoss -\n            (i / ZSHARP_DEFAULTS.maxEpochs) *\n                (ZSHARP_DEFAULTS.baseLoss - ZSHARP_DEFAULTS.minLoss);\n        const zsharpLoss = sgdLoss - ZSHARP_DEFAULTS.lossReduction;\n\n        data.push({\n            epoch: i + 1,\n            sgd: sgdAccuracy,\n            zsharp: zsharpAccuracy,\n            sgdLoss: sgdLoss,\n            zsharpLoss: zsharpLoss,\n        });\n    }\n    return data;\n};\n\nconst ZSharp: React.FC = () => {\n    const [chartData, setChartData] = useState<DataPoint[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [viewType, setViewType] = useState<string>('accuracy');\n\n    useEffect(() => {\n        document.title = PAGE_TITLES.zsharp;\n\n        const loadData = async () => {\n            setLoading(true);\n            try {\n                const data = await loadRealZSharpData();\n                setChartData(data);\n            } catch (error) {\n                console.error('Error loading ZSharp data in component:', error);\n                setChartData(generateFallbackData());\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadData();\n    }, []);\n\n    const viewTypes: ViewType[] = [\n        {\n            key: 'accuracy',\n            label: 'Accuracy',\n            icon: BarChartRounded,\n            chartTitle: 'Performance Comparison',\n            dataProcessor: (data: DataPoint[]) => data,\n            chartConfig: {\n                type: 'line',\n                xAxisKey: 'epoch',\n                yAxisFormatter: (value: number) =>\n                    `${(value * PERCENTAGE.multiplier).toFixed(1)}%`,\n                yAxisDomain: ['dataMin - 0.05', 'dataMax + 0.05'],\n                tooltipLabelFormatter: (value: number) => `Epoch ${value}`,\n                tooltipFormatter: (value: number, name: string) => [\n                    `${(value * PERCENTAGE.multiplier).toFixed(1)}%`,\n                    name,\n                ],\n                lines: [\n                    { dataKey: 'sgd', name: 'SGD', color: COLORS.primary.main },\n                    {\n                        dataKey: 'zsharp',\n                        name: 'ZSharp',\n                        color: COLORS.data.green,\n                    },\n                ],\n            },\n        },\n        {\n            key: 'loss',\n            label: 'Loss',\n            icon: TrendingUpRounded,\n            chartTitle: 'Loss Evaluation',\n            dataProcessor: (data: DataPoint[]) =>\n                data.map((point): ProcessedDataPoint => ({\n                    epoch: point.epoch,\n                    sgd: point.sgdLoss,\n                    zsharp: point.zsharpLoss,\n                })),\n            chartConfig: {\n                type: 'line',\n                xAxisKey: 'epoch',\n                yAxisFormatter: (value: number) => value.toFixed(3),\n                yAxisDomain: ['dataMin - 0.1', 'dataMax + 0.1'],\n                tooltipLabelFormatter: (value: number) => `Epoch ${value}`,\n                tooltipFormatter: (value: number, name: string) => [value.toFixed(3), name],\n                lines: [\n                    {\n                        dataKey: 'sgd',\n                        name: 'SGD Loss',\n                        color: COLORS.primary.main,\n                    },\n                    {\n                        dataKey: 'zsharp',\n                        name: 'ZSharp Loss',\n                        color: COLORS.data.green,\n                    },\n                ],\n            },\n        },\n        {\n            key: 'learning_curve',\n            label: 'Learning Gap',\n            icon: ShowChartRounded,\n            chartTitle: 'Learning Progress',\n            dataProcessor: (data: DataPoint[]) =>\n                data.map((point): ProcessedDataPoint => ({\n                    epoch: point.epoch,\n                    gap: point.zsharp - point.sgd,\n                })),\n            chartConfig: {\n                type: 'line',\n                xAxisKey: 'epoch',\n                yAxisFormatter: (value: number) =>\n                    `${(value * PERCENTAGE.multiplier).toFixed(1)}%`,\n                yAxisDomain: ['dataMin - 0.005', 'dataMax + 0.005'],\n                tooltipLabelFormatter: (value: number) => `Epoch ${value}`,\n                tooltipFormatter: (value: number, name: string) => [\n                    `${(value * PERCENTAGE.multiplier).toFixed(2)}%`,\n                    name,\n                ],\n                lines: [\n                    {\n                        dataKey: 'gap',\n                        name: 'Accuracy Gap',\n                        color: COLORS.data.amber,\n                    },\n                ],\n            },\n        },\n        {\n            key: 'convergence',\n            label: 'Convergence',\n            icon: AnalyticsRounded,\n            chartTitle: 'Convergence Analysis',\n            dataProcessor: (data: DataPoint[]) =>\n                data.map((point, index): ProcessedDataPoint => {\n                    if (index === 0)\n                        return { epoch: point.epoch, sgd: 0, zsharp: 0 };\n                    const prevPoint = data[index - 1];\n                    return {\n                        epoch: point.epoch,\n                        sgd: point.sgd - prevPoint.sgd,\n                        zsharp: point.zsharp - prevPoint.zsharp,\n                    };\n                }),\n            chartConfig: {\n                type: 'line',\n                xAxisKey: 'epoch',\n                yAxisFormatter: (value: number) =>\n                    `${(value * PERCENTAGE.multiplier).toFixed(1)}%`,\n                yAxisDomain: ['dataMin - 0.005', 'dataMax + 0.005'],\n                tooltipLabelFormatter: (value: number) => `Epoch ${value}`,\n                tooltipFormatter: (value: number, name: string) => [\n                    `${(value * PERCENTAGE.multiplier).toFixed(3)}%`,\n                    name,\n                ],\n                lines: [\n                    {\n                        dataKey: 'sgd',\n                        name: 'SGD Rate',\n                        color: COLORS.primary.main,\n                    },\n                    {\n                        dataKey: 'zsharp',\n                        name: 'ZSharp Rate',\n                        color: COLORS.data.green,\n                    },\n                ],\n            },\n        },\n    ];\n\n    return (\n        <ResearchDemo\n            title=\"ZSharp\"\n            subtitle=\"Neural Network Optimization Research\"\n            githubUrl={URLS.zsharpRepo}\n            chartData={chartData as any}\n            viewTypes={viewTypes as any}\n            currentViewType={viewType}\n            onViewTypeChange={setViewType as any}\n            loading={loading}\n            loadingMessage=\"Loading real experiment data...\"\n        />\n    );\n};\n\nexport default ZSharp;\n\n","import React, { useState, useEffect } from 'react';\nimport { URLS, PAGE_TITLES, GAME_CONSTANTS } from '../config/constants';\nimport { COLORS } from '../config/theme';\nimport {\n    BusinessRounded,\n    TrendingUpRounded,\n    AttachMoneyRounded,\n} from '../components/icons';\nimport ResearchDemo from '../components/ResearchDemo';\n\ninterface MatrixItem {\n    round: number;\n    price: number;\n    hhi: number;\n    collusion?: boolean;\n    num_firms?: number;\n    model_type?: string;\n    demand_elasticity?: number;\n    base_price?: number;\n    collusion_enabled?: boolean;\n}\n\ninterface MarketDataPoint {\n    round: number;\n    price: number;\n    hhi: number;\n    collusion?: boolean;\n}\n\ninterface ControlOption {\n    value: number;\n    label: string;\n}\n\ninterface Control {\n    label: string;\n    icon: React.ElementType;\n    color: string;\n    value: number;\n    onChange: (value: number) => void;\n    options: ControlOption[];\n}\n\nconst loadRealSimulationMatrix = async (): Promise<MatrixItem[]> => {\n    try {\n        const response = await fetch('/oligopoly_data.json.gz');\n        if (!response.ok) {\n            throw new Error(\n                `HTTP error! status: ${response.status} - Failed to load Oligopoly data`\n            );\n        }\n\n        if (typeof DecompressionStream === 'undefined') {\n            throw new Error(\n                'DecompressionStream not supported in this browser'\n            );\n        }\n\n        const compressedData = await response.arrayBuffer();\n        const decompressedData = await new Response(\n            new ReadableStream({\n                start(controller) {\n                    const decompressionStream = new DecompressionStream('gzip');\n                    const writer = decompressionStream.writable.getWriter();\n                    const reader = decompressionStream.readable.getReader();\n\n                    writer.write(compressedData).then(() => writer.close());\n\n                    function pump(): Promise<void> {\n                        return reader.read().then(({ done, value }: { done: boolean; value: Uint8Array | undefined }) => {\n                            if (done) {\n                                controller.close();\n                                return;\n                            }\n                            controller.enqueue(value);\n                            return pump();\n                        });\n                    }\n                    return pump();\n                },\n            })\n        ).text();\n        const matrixData: MatrixItem[] = JSON.parse(decompressedData);\n\n        if (!Array.isArray(matrixData)) {\n            throw new Error('Invalid data format: expected array');\n        }\n\n        return matrixData;\n    } catch (error) {\n        console.error('Error loading Oligopoly data:', error);\n        return [];\n    }\n};\n\nconst filterMatrixData = (\n    matrixData: MatrixItem[],\n    numFirms: number,\n    modelType: string,\n    demandElasticity: number,\n    basePrice: number,\n    collusionEnabled: boolean\n): MarketDataPoint[] => {\n    if (!matrixData || matrixData.length === 0) {\n        return generateFallbackOligopolyData();\n    }\n\n    const filtered = matrixData.filter(\n        item =>\n            item.num_firms === numFirms &&\n            item.model_type === modelType &&\n            item.demand_elasticity === demandElasticity &&\n            item.base_price === basePrice &&\n            item.collusion_enabled === collusionEnabled\n    );\n\n    if (filtered.length === 0) {\n        const closest = matrixData.filter(\n            item => item.num_firms === numFirms && item.model_type === modelType\n        );\n        const sorted = closest.sort((a, b) => a.round - b.round);\n        return sorted.slice(0, GAME_CONSTANTS.oligopoly.maxRounds);\n    }\n\n    const sorted = filtered.sort((a, b) => a.round - b.round);\n    return sorted.slice(0, 15);\n};\n\nconst generateFallbackOligopolyData = (): MarketDataPoint[] => {\n    const data: MarketDataPoint[] = [];\n    for (let i = 1; i <= GAME_CONSTANTS.oligopoly.maxRounds; i++) {\n        const sim = GAME_CONSTANTS.oligopoly.simulation;\n        data.push({\n            round: i,\n            price:\n                sim.fallbackPrice +\n                Math.sin(i * sim.priceFrequency) * sim.priceAmplitude,\n            hhi:\n                sim.fallbackHHI +\n                Math.sin(i * sim.hhiFrequency) * sim.hhiAmplitude,\n            collusion: i > sim.collusionStart && i < sim.collusionEnd,\n        });\n    }\n    return data;\n};\n\nconst Oligopoly: React.FC = () => {\n    const [numFirms, setNumFirms] = useState(\n        GAME_CONSTANTS.oligopoly.defaultFirms\n    );\n    const [demandElasticity, setDemandElasticity] = useState(\n        GAME_CONSTANTS.oligopoly.defaultElasticity\n    );\n    const [basePrice, setBasePrice] = useState(\n        GAME_CONSTANTS.oligopoly.defaultBasePrice\n    );\n    const [marketData, setMarketData] = useState<MarketDataPoint[]>([]);\n    const [matrixData, setMatrixData] = useState<MatrixItem[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    const modelType = GAME_CONSTANTS.modelTypes.cournot;\n    const collusionEnabled = false;\n\n    useEffect(() => {\n        document.title = PAGE_TITLES.oligopoly;\n\n        const loadData = async () => {\n            setLoading(true);\n            try {\n                const data = await loadRealSimulationMatrix();\n                setMatrixData(data);\n                const initialData = filterMatrixData(\n                    data,\n                    numFirms,\n                    modelType,\n                    demandElasticity,\n                    basePrice,\n                    collusionEnabled\n                );\n                setMarketData(initialData);\n            } catch (error) {\n                console.error(\n                    'Error loading Oligopoly data in component:',\n                    error\n                );\n                setMarketData(generateFallbackOligopolyData());\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadData();\n    }, [numFirms, demandElasticity, basePrice, collusionEnabled, modelType]);\n\n    useEffect(() => {\n        if (matrixData.length > 0) {\n            const filteredData = filterMatrixData(\n                matrixData,\n                numFirms,\n                modelType,\n                demandElasticity,\n                basePrice,\n                collusionEnabled\n            );\n            setMarketData(filteredData);\n        }\n    }, [\n        numFirms,\n        demandElasticity,\n        basePrice,\n        matrixData,\n        modelType,\n        collusionEnabled,\n    ]);\n\n    const resetToDefaults = () => {\n        setNumFirms(GAME_CONSTANTS.oligopoly.defaultFirms);\n        setDemandElasticity(GAME_CONSTANTS.oligopoly.defaultElasticity);\n        setBasePrice(GAME_CONSTANTS.oligopoly.defaultBasePrice);\n    };\n\n    const controls: Control[] = [\n        {\n            label: 'Number of Firms',\n            icon: BusinessRounded,\n            color: COLORS.primary.main,\n            value: numFirms,\n            onChange: setNumFirms,\n            options: [\n                { value: 2, label: '2' },\n                { value: 3, label: '3' },\n                { value: 4, label: '4' },\n                { value: 5, label: '5' },\n            ],\n        },\n        {\n            label: 'Demand Elasticity',\n            icon: TrendingUpRounded,\n            color: COLORS.data.green,\n            value: demandElasticity,\n            onChange: setDemandElasticity,\n            options: [\n                { value: 1.5, label: '1.5' },\n                { value: 2.0, label: '2.0' },\n                { value: 2.5, label: '2.5' },\n            ],\n        },\n        {\n            label: 'Base Price',\n            icon: AttachMoneyRounded,\n            color: COLORS.data.amber,\n            value: basePrice,\n            onChange: setBasePrice,\n            options: [\n                { value: 30, label: '$30' },\n                { value: 40, label: '$40' },\n                { value: 50, label: '$50' },\n            ],\n        },\n    ];\n\n    const chartConfig = {\n        type: 'line',\n        xAxisKey: 'round',\n        yAxisFormatter: (value: number) => `$${value.toFixed(2)}`,\n        yAxisDomain: ['dataMin - 5', 'dataMax + 5'],\n        dualYAxis: true,\n        rightYAxisFormatter: (value: number) => value.toFixed(2),\n        rightYAxisDomain: ['dataMin - 0.05', 'dataMax + 0.05'],\n        tooltipLabelFormatter: (value: number) => `Round ${value}`,\n        tooltipFormatter: (value: number, name: string) => [\n            name === 'Market Price' ? `$${value.toFixed(2)}` : value.toFixed(2),\n            name,\n        ],\n        lines: [\n            {\n                dataKey: 'price',\n                name: 'Market Price',\n                color: COLORS.primary.main,\n                yAxisId: 'left',\n            },\n            {\n                dataKey: 'hhi',\n                name: 'HHI Concentration',\n                color: COLORS.data.amber,\n                yAxisId: 'right',\n            },\n        ],\n    };\n\n    return (\n        <ResearchDemo\n            title=\"Oligopoly\"\n            subtitle=\"Agent-Based Economic Competition Analysis\"\n            githubUrl={URLS.oligopolyRepo}\n            chartData={marketData as any}\n            chartConfig={chartConfig as any}\n            chartTitle=\"Market Dynamics\"\n            controls={controls as any}\n            loading={loading}\n            loadingMessage=\"Loading Cournot simulation data...\"\n            onReset={resetToDefaults}\n            resetLabel=\"Reset\"\n        />\n    );\n};\n\nexport default Oligopoly;\n\n","import { createContext } from 'react';\n\nexport interface EditorContextType {\n    name: string;\n    tapeFlag: boolean;\n    outFlag: boolean;\n    regFlag: boolean;\n    code: string[] | undefined;\n    index: number;\n    tape: number[];\n    pointer: number;\n    output: string[] | string;\n    register: number;\n    height: number;\n    size: number;\n    dispatch: (action: string | { type: string; payload: unknown }) => void;\n    fastForward: boolean;\n    pause: boolean;\n}\n\nexport const EditorContext = createContext<EditorContextType | null>(null);\n","import React from 'react';\nimport { Typography } from '../../components/mui';\nimport type { SxProps, Theme } from '@mui/material/styles';\n\nexport interface TextProps {\n    text: string | number;\n    sx?: SxProps<Theme>;\n    [key: string]: unknown;\n}\n\nexport function Text({ text, ...props }: TextProps) {\n    return (\n        <Typography\n            {...props}\n            sx={{\n                fontSize: 'inherit',\n                fontWeight: 'inherit',\n                fontFamily: 'inherit',\n                userSelect: 'none',\n                lineHeight: 1,\n                display: 'inline',\n                ...props.sx,\n            }}\n        >\n            {text}\n        </Typography>\n    );\n}\n","import React, { useContext, memo } from 'react';\nimport { Box, Typography, Chip, IconButton } from '../components/mui';\nimport { EditorContext } from './EditorContext';\nimport { Text } from './components/Text';\nimport { COLORS, TYPOGRAPHY } from '../config/theme';\nimport { GlassCard } from '../components/common/GlassCard';\n\nimport {\n    CodeRounded,\n    DataArrayRounded,\n    TextFieldsRounded,\n    PlusOneRounded,\n    ViewModuleRounded,\n    ViewListRounded,\n} from '../components/icons';\n\n// Type assertion for GlassCard component\nconst TypedGlassCard = GlassCard as React.ComponentType<{\n    children?: React.ReactNode;\n    sx?: Record<string, unknown>;\n}>;\n\ninterface DisplayProps {\n    Icon: React.ElementType;\n    title: string;\n    data: (string | number)[];\n    pointer?: number;\n    children?: React.ReactNode;\n}\n\ninterface CompactDisplayProps {\n    Icon: React.ElementType;\n    title: string;\n    data: (string | number)[];\n    pointer?: number;\n}\n\ninterface DisplayModeToggleProps {\n    compactMode: boolean;\n    setCompactMode: (value: boolean) => void;\n}\n\ninterface ProgramProps {\n    compact?: boolean;\n}\n\ninterface TapeProps {\n    compact?: boolean;\n}\n\ninterface OutputProps {\n    compact?: boolean;\n}\n\ninterface RegisterProps {\n    compact?: boolean;\n}\n\nexport const Program = memo(function Program({\n    compact = false,\n}: ProgramProps) {\n    const editorContext = useContext(EditorContext);\n    if (!editorContext) return null;\n\n    const { code, index } = editorContext;\n\n    if (code === undefined) return null;\n\n    if (compact) {\n        return (\n            <CompactDisplay\n                Icon={CodeRounded}\n                title=\"Program\"\n                data={[...code]}\n                pointer={index}\n            />\n        );\n    }\n\n    return (\n        <Display\n            Icon={CodeRounded}\n            title=\"Program\"\n            data={[...code]}\n            pointer={index}\n        >\n            <Text text={'\\xA0'} />\n        </Display>\n    );\n});\n\nexport const Tape = memo(function Tape({ compact = false }: TapeProps) {\n    const editorContext = useContext(EditorContext);\n    if (!editorContext) return null;\n\n    const { tape, pointer, tapeFlag } = editorContext;\n\n    if (!tapeFlag) return null;\n\n    if (compact) {\n        return (\n            <CompactDisplay\n                Icon={DataArrayRounded}\n                title=\"Tape\"\n                data={tape}\n                pointer={pointer}\n            />\n        );\n    }\n\n    return (\n        <Display\n            Icon={DataArrayRounded}\n            title=\"Tape\"\n            data={tape}\n            pointer={pointer}\n        >\n            <Text text={'\\xA0'} />\n        </Display>\n    );\n});\n\nexport const Output = memo(function Output({ compact = false }: OutputProps) {\n    const editorContext = useContext(EditorContext);\n    if (!editorContext) return null;\n\n    const { output, outFlag } = editorContext;\n\n    if (!outFlag) return null;\n\n    // Normalize output to array of strings or numbers\n    const outputArray = Array.isArray(output) ? output : [output];\n\n    if (compact) {\n        return (\n            <CompactDisplay\n                Icon={TextFieldsRounded}\n                title=\"Output\"\n                data={outputArray}\n            />\n        );\n    }\n\n    return (\n        <Display Icon={TextFieldsRounded} title=\"Output\" data={outputArray}>\n            <Text text={'\\xA0'} />\n        </Display>\n    );\n});\n\nexport const Register = memo(function Register({\n    compact = false,\n}: RegisterProps) {\n    const editorContext = useContext(EditorContext);\n    if (!editorContext) return null;\n\n    const { register, regFlag } = editorContext;\n\n    if (!regFlag) return null;\n\n    if (compact) {\n        return (\n            <CompactDisplay\n                Icon={PlusOneRounded}\n                title=\"Register\"\n                data={[register]}\n            />\n        );\n    }\n\n    return (\n        <Display Icon={PlusOneRounded} title=\"Register\" data={[register]}>\n            <Text text={'\\xA0'} />\n        </Display>\n    );\n});\n\nfunction Display({ Icon, title, data, pointer, children }: DisplayProps) {\n    const values = data.map((val, ind) => {\n        const color = pointer === ind ? 'info' : 'inherit';\n\n        return (\n            <Text\n                key={title + ind}\n                color={color}\n                text={val}\n                sx={{\n                    fontSize: TYPOGRAPHY.fontSize.body,\n                    fontWeight: TYPOGRAPHY.fontWeight.semibold,\n                    fontFamily: 'monospace',\n                }}\n            />\n        );\n    });\n\n    return (\n        <Box sx={{ height: '100%' }}>\n            <Box\n                sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                    marginBottom: 1,\n                }}\n            >\n                <Icon sx={{ color: COLORS.primary.main }} />\n                <Typography\n                    variant=\"subtitle2\"\n                    sx={{\n                        color: COLORS.primary.main,\n                        fontWeight: TYPOGRAPHY.fontWeight.semibold,\n                        fontSize: TYPOGRAPHY.fontSize.body,\n                    }}\n                >\n                    {title}\n                </Typography>\n            </Box>\n            <Scrollable>\n                {values}\n                {children}\n            </Scrollable>\n        </Box>\n    );\n}\n\nfunction CompactDisplay({ Icon, title, data, pointer }: CompactDisplayProps) {\n    const values = data.map((val, ind) => {\n        const color = pointer === ind ? 'info' : 'inherit';\n        return (\n            <Chip\n                key={title + ind}\n                label={String(val)}\n                size=\"small\"\n                sx={{\n                    backgroundColor:\n                        color === 'info'\n                            ? COLORS.primary.main\n                            : COLORS.surface.glass,\n                    color:\n                        color === 'info'\n                            ? COLORS.text.primary\n                            : COLORS.text.primary,\n                    fontFamily: 'monospace',\n                    fontSize: TYPOGRAPHY.fontSize.caption,\n                    height: '32px',\n                    border: `1px solid ${COLORS.border.subtle}`,\n                    backdropFilter: 'blur(24px) saturate(180%)',\n                }}\n            />\n        );\n    });\n\n    return (\n        <TypedGlassCard\n            sx={{\n                height: '100%',\n                minHeight: '24rem',\n            }}\n        >\n            <Box\n                sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                    marginBottom: 1,\n                }}\n            >\n                <Icon\n                    sx={{\n                        color: COLORS.primary.main,\n                        fontSize: TYPOGRAPHY.fontSize.body,\n                    }}\n                />\n                <Typography\n                    variant=\"caption\"\n                    sx={{\n                        color: COLORS.primary.main,\n                        fontWeight: TYPOGRAPHY.fontWeight.semibold,\n                        fontSize: TYPOGRAPHY.fontSize.caption,\n                    }}\n                >\n                    {title}\n                </Typography>\n            </Box>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                {values}\n            </Box>\n        </TypedGlassCard>\n    );\n}\n\nexport function DisplayModeToggle({\n    compactMode,\n    setCompactMode,\n}: DisplayModeToggleProps) {\n    return (\n        <Box\n            sx={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: 1,\n                marginBottom: 2,\n            }}\n        >\n            <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\n                Display Mode:\n            </Typography>\n            <IconButton onClick={() => setCompactMode(!compactMode)}>\n                {compactMode ? <ViewListRounded /> : <ViewModuleRounded />}\n            </IconButton>\n        </Box>\n    );\n}\n\nfunction Scrollable({ children }: { children: React.ReactNode }) {\n    return (\n        <GlassCard\n            sx={{\n                overflowX: 'auto',\n                width: '100%',\n                maxWidth: '100%',\n                height: '60px',\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'center',\n                padding: 2,\n            }}\n        >\n            <Box\n                sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 1,\n                    width: 'max-content',\n                    minWidth: 0,\n                }}\n            >\n                {children}\n            </Box>\n        </GlassCard>\n    );\n}\n","import React, { useContext, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { TooltipButton } from '../components/common/Controls';\nimport { EditorContext } from './EditorContext';\nimport { useMobile } from '../hooks';\nimport { TIMER } from '../config/constants';\n\nimport {\n    NavigateBeforeRounded,\n    NavigateNextRounded,\n    PlayArrowRounded,\n    FirstPageRounded,\n    LastPageRounded,\n    PauseRounded,\n    InfoRounded,\n    HomeRounded,\n} from '../components/icons';\n\ninterface ButtonData {\n    icon: React.ElementType;\n    action?: string;\n    flag?: boolean;\n    props?: Record<string, unknown>;\n}\n\ninterface ToolbarPayload {\n    dispatch: (action: { type: string; payload: unknown }) => void;\n    nextIter: (action: {\n        type: string;\n        payload: unknown;\n    }) => Record<string, unknown>;\n    create: (config: { repeat: () => void; speed: number }) => void;\n    clear: () => void;\n    start: Record<string, unknown>;\n}\n\nexport interface ToolbarState {\n    end?: boolean;\n    pause?: boolean;\n    [key: string]: unknown;\n}\n\nexport interface ToolbarAction {\n    type: string;\n    payload: ToolbarPayload;\n}\n\nexport function Toolbar(): React.ReactElement[] {\n    const editorContext = useContext(EditorContext);\n    const notMobile = !useMobile('sm');\n\n    const link = editorContext\n        ? 'https://esolangs.org/wiki/' + editorContext.name.replace(' ', '_')\n        : '';\n    const pause = editorContext?.pause || false;\n    const dispatch = editorContext?.dispatch || (() => undefined);\n    const fastForward = editorContext?.fastForward || false;\n\n    const TimerButton = useMemo(\n        () =>\n            pause ? (\n                <TooltipButton\n                    key=\"Run\"\n                    title=\"Run\"\n                    onClick={dispatch('run')}\n                    Icon={PlayArrowRounded}\n                />\n            ) : (\n                <TooltipButton\n                    key=\"Pause\"\n                    title=\"Pause\"\n                    onClick={dispatch('stop')}\n                    Icon={PauseRounded}\n                />\n            ),\n        [dispatch, pause]\n    );\n\n    if (!editorContext) return [];\n\n    const buttonData: Record<string, ButtonData> = {\n        Reset: {\n            icon: FirstPageRounded,\n            action: 'reset',\n            flag: true,\n        },\n        'Fast Forward': {\n            icon: LastPageRounded,\n            flag: fastForward,\n            action: 'ff',\n        },\n        Previous: {\n            icon: NavigateBeforeRounded,\n            flag: notMobile,\n            action: 'prev',\n        },\n        Next: {\n            icon: NavigateNextRounded,\n            flag: notMobile,\n            action: 'next',\n        },\n        Info: {\n            icon: InfoRounded,\n            props: { href: link },\n        },\n        Home: {\n            icon: HomeRounded,\n            props: {\n                component: Link,\n                to: '/',\n            },\n        },\n    };\n\n    const buttons: React.ReactElement[] = [];\n    const ffData = buttonData['Fast Forward'];\n\n    // Primary Playback Controls: Run/Pause, Reset, Fast Forward\n    buttons.push(TimerButton);\n    buttons.push(\n        <TooltipButton\n            key=\"Reset\"\n            title=\"Reset\"\n            Icon={FirstPageRounded}\n            onClick={dispatch('reset')}\n        />\n    );\n    buttons.push(\n        <TooltipButton\n            key=\"Fast Forward\"\n            title=\"Fast Forward\"\n            Icon={ffData.icon}\n            onClick={ffData.flag ? dispatch('ff') : undefined}\n            disabled={!ffData.flag}\n            sx={{\n                opacity: ffData.flag ? 1 : 0.3,\n                // Ensure visibility even when disabled\n                '&.Mui-disabled': {\n                    color: 'inherit',\n                    opacity: 0.3,\n                },\n            }}\n        />\n    );\n\n    // Secondary Controls: Previous, Next, Info, Home\n    const secondaryKeys = ['Previous', 'Next', 'Info', 'Home'];\n    secondaryKeys.forEach(key => {\n        const { icon, flag, action, props } = buttonData[key];\n\n        if (action && flag) {\n            buttons.push(\n                <TooltipButton\n                    key={key}\n                    title={key}\n                    Icon={icon}\n                    onClick={dispatch(action)}\n                />\n            );\n        } else if (props) {\n            buttons.push(\n                <TooltipButton key={key} title={key} Icon={icon} {...props} />\n            );\n        }\n    });\n\n    return buttons;\n}\n\nfunction updateHandler(payload: ToolbarPayload) {\n    return (type: string, flag: boolean) => {\n        const { nextIter, clear } = payload;\n\n        if (flag) clear();\n\n        const result = nextIter({ type, payload });\n\n        return {\n            ...result,\n            select: null,\n        };\n    };\n}\n\nexport function handleToolbar(\n    state: ToolbarState,\n    action: ToolbarAction\n): ToolbarState {\n    const { type, payload } = action;\n    let newState: ToolbarState = {};\n\n    const { dispatch, nextIter, create, clear, start } = payload;\n\n    const update = updateHandler(payload);\n\n    const repeat = () => {\n        dispatch({\n            type: 'timer',\n            payload,\n        });\n    };\n\n    const pauseStateMap: Record<string, boolean> = {\n        run: false,\n        stop: true,\n        reset: true,\n        prev: true,\n    };\n\n    switch (type) {\n        case 'run':\n            create({ repeat, speed: TIMER.defaultSpeed });\n            newState.pause = pauseStateMap.run;\n            break;\n        case 'timer':\n            const newType = state.end ? 'stop' : 'next';\n\n            dispatch({\n                type: newType,\n                payload,\n            });\n            break;\n        case 'stop':\n            clear();\n            newState.pause = pauseStateMap.stop;\n            break;\n        case 'reset':\n            clear();\n\n            // For text editors, preserve the code and text, only reset execution state\n            const resetPayload = { ...state, ...start };\n\n            // Preserve text and code if they exist (for text editors)\n            if ('text' in state && 'code' in state) {\n                resetPayload.text = state.text;\n                resetPayload.code = state.code;\n            }\n\n            newState = nextIter({\n                type: 'clear',\n                payload: resetPayload,\n            }) as ToolbarState;\n            newState.pause = pauseStateMap.reset;\n            break;\n        case 'prev':\n            newState = update('prev', true) as ToolbarState;\n            newState.pause = pauseStateMap.prev;\n            break;\n        case 'next':\n            newState = update('next', false) as ToolbarState;\n            break;\n        default:\n            break;\n    }\n\n    return newState;\n}\n","import React, { useContext } from 'react';\nimport { TextField } from '../../components/mui';\nimport { EditorContext } from '../EditorContext';\nimport { COLORS, SPACING } from '../../config/theme';\n\nexport interface TextAreaProps {\n    value?: string;\n    readOnly?: boolean;\n    infoLabel?: string;\n    fillValue?: string;\n    placeholder?: string;\n    handleChange?: (\n        event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n    ) => void;\n}\n\nexport function TextArea({\n    value,\n    readOnly = false,\n    infoLabel = 'Program code',\n    fillValue = 'Hello, World!',\n    placeholder,\n    handleChange,\n}: TextAreaProps) {\n    const editorContext = useContext(EditorContext);\n    if (!editorContext) {\n        throw new Error('TextArea must be used within EditorContext.Provider');\n    }\n\n    const { height } = editorContext;\n    const rows = Math.floor(height / 32);\n\n    const isControlled = value !== undefined && value !== null;\n    const textFieldProps = isControlled\n        ? {\n              value: value || '',\n              onChange: handleChange,\n          }\n        : {\n              defaultValue: fillValue,\n              onChange: handleChange,\n          };\n\n    return (\n        <TextField\n            variant=\"outlined\"\n            label={infoLabel}\n            placeholder={placeholder}\n            slotProps={{\n                inputLabel: { shrink: true },\n                htmlInput: { readOnly },\n            }}\n            fullWidth\n            multiline\n            rows={rows}\n            {...textFieldProps}\n            sx={{\n                '& .MuiInputBase-root': {\n                    alignItems: 'flex-start',\n                    backgroundColor: COLORS.surface.glass,\n                    backdropFilter: 'blur(24px) saturate(180%)',\n                    borderRadius: SPACING.borderRadius.md,\n                    border: `1px solid ${COLORS.border.subtle}`,\n                },\n                '& .MuiInputBase-input': {\n                    fontFamily: 'monospace',\n                    color: 'text.primary',\n                    '&::placeholder': {\n                        opacity: 0.6,\n                        color: 'text.secondary',\n                    },\n                },\n                '& .MuiOutlinedInput-notchedOutline': {\n                    borderColor: COLORS.border.subtle,\n                },\n                '&:hover .MuiOutlinedInput-notchedOutline': {\n                    borderColor: COLORS.border.subtle,\n                },\n                '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\n                    borderColor: 'primary.light',\n                },\n                '& .MuiInputLabel-root': {\n                    color: 'text.secondary',\n                },\n                '& .MuiInputLabel-root.Mui-focused': {\n                    color: 'primary.light',\n                },\n            }}\n        />\n    );\n}\n","import React, {\n    createContext,\n    useContext,\n    useMemo,\n    ReactNode,\n    RefObject,\n} from 'react';\nimport { Program, Output, Tape, Register } from './Display';\nimport { Grid, Typography, Box } from '../components/mui';\nimport { Toolbar } from './Toolbar';\nimport { COLORS, SPACING, TYPOGRAPHY } from '../config/theme';\nimport { EditorContext } from './EditorContext';\nimport { TextArea, TextAreaProps } from './components/TextArea';\nimport { GridArea } from './components/GridArea';\n\ninterface EditorProps {\n    container?: RefObject<HTMLDivElement | null>;\n    sideProps?: TextAreaProps;\n    hide?: boolean;\n    navigation?: ReactNode;\n    children: ReactNode;\n}\n\nexport default function Editor({\n    container,\n    sideProps = {},\n    hide = false,\n    navigation,\n    children,\n}: EditorProps) {\n    const editorContext = useContext(EditorContext);\n    if (!editorContext) {\n        throw new Error('Editor must be used within EditorContext.Provider');\n    }\n\n    const { name, tapeFlag, outFlag, regFlag, code } = editorContext;\n\n    const rightProps = { xs: 6, md: 4 };\n    let display: string, leftProps: number | { xs: number; md: number };\n\n    if (hide) {\n        display = 'none';\n        leftProps = 12;\n    } else {\n        leftProps = { xs: 6, md: 8 };\n        display = 'flex';\n    }\n\n    const titleProps = {\n        sx: {\n            display: {\n                xs: 'none',\n                lg: 'block',\n            },\n        },\n    };\n\n    const contentProps = {\n        flex: 1,\n        spacing: 2,\n        ref: container,\n        container: true,\n        display: 'flex',\n        alignItems: 'center',\n        sx: { overflowY: 'hidden' },\n    };\n\n    return (\n        <Grid\n            container\n            spacing={2}\n            height=\"100vh\"\n            display=\"flex\"\n            flexDirection=\"column\"\n            padding=\"5vh 5vw 5vh 5vw\"\n            sx={{\n                background: COLORS.surface.background,\n                position: 'relative',\n            }}\n        >\n            <Grid\n                container\n                alignItems=\"center\"\n                justifyContent=\"space-between\"\n                sx={{ mb: { xs: 2, md: 0 } }}\n            >\n                <Grid {...titleProps} size={{ lg: 'auto' }}>\n                    <Typography\n                        variant=\"h4\"\n                        sx={{\n                            fontSize: TYPOGRAPHY.fontSize.h2,\n                            fontWeight: TYPOGRAPHY.fontWeight.semibold,\n                        }}\n                    >\n                        Interpreters\n                    </Typography>\n                </Grid>\n                {navigation && (\n                    <Grid\n                        size={{ xs: 12, md: 'auto' }}\n                        display=\"flex\"\n                        justifyContent=\"center\"\n                    >\n                        {navigation}\n                    </Grid>\n                )}\n                <Grid\n                    display=\"flex\"\n                    alignItems=\"center\"\n                    gap={1}\n                    size={{ xs: 12, md: 'auto' }}\n                    justifyContent={{ xs: 'center', md: 'flex-end' }}\n                >\n                    <Toolbar />\n                </Grid>\n            </Grid>\n            <Grid {...contentProps}>\n                <Grid size={leftProps}>{children}</Grid>\n                <Grid display={display} size={rightProps}>\n                    <TextArea {...sideProps} />\n                </Grid>\n            </Grid>\n            <Box\n                sx={{\n                    width: '100%',\n                    // Ensure space for up to 2 rows of fields to prevent layout shift\n                    // when switching between interpreters with 1-2 vs 3-4 fields.\n                    minHeight:\n                        [code !== undefined, tapeFlag, outFlag, regFlag].filter(\n                            Boolean\n                        ).length > 0\n                            ? { xs: 'auto', md: '210px' }\n                            : 0,\n                }}\n            >\n                <Grid\n                    container\n                    spacing={2}\n                    sx={{ width: '100%', maxWidth: '100%' }}\n                >\n                    {(() => {\n                        const fields: ReactNode[] = [];\n                        const fieldCount = [\n                            code !== undefined,\n                            tapeFlag,\n                            outFlag,\n                            regFlag,\n                        ].filter(Boolean).length;\n                        const gridSize = { xs: 12, md: 6 };\n\n                        if (code !== undefined) {\n                            fields.push(\n                                <Grid\n                                    key=\"program\"\n                                    size={gridSize}\n                                    sx={{\n                                        width: '100%',\n                                        maxWidth: '100%',\n                                        overflow: 'hidden',\n                                    }}\n                                >\n                                    <Program />\n                                </Grid>\n                            );\n                        }\n                        if (tapeFlag) {\n                            fields.push(\n                                <Grid\n                                    key=\"tape\"\n                                    size={gridSize}\n                                    sx={{\n                                        width: '100%',\n                                        maxWidth: '100%',\n                                        overflow: 'hidden',\n                                    }}\n                                >\n                                    <Tape />\n                                </Grid>\n                            );\n                        }\n                        if (outFlag) {\n                            fields.push(\n                                <Grid\n                                    key=\"output\"\n                                    size={gridSize}\n                                    sx={{\n                                        width: '100%',\n                                        maxWidth: '100%',\n                                        overflow: 'hidden',\n                                    }}\n                                >\n                                    <Output />\n                                </Grid>\n                            );\n                        }\n                        if (regFlag) {\n                            fields.push(\n                                <Grid\n                                    key=\"register\"\n                                    size={gridSize}\n                                    sx={{\n                                        width: '100%',\n                                        maxWidth: '100%',\n                                        overflow: 'hidden',\n                                    }}\n                                >\n                                    <Register />\n                                </Grid>\n                            );\n                        }\n\n                        return fields;\n                    })()}\n                </Grid>\n            </Box>\n        </Grid>\n    );\n}\n","import React, { useEffect, useCallback, useReducer, useMemo } from 'react';\nimport Editor from '../Editor';\nimport { EditorContext } from '../EditorContext';\nimport { TextArea } from '../components/TextArea';\nimport { useTimer, useCache, useContainer } from '../../hooks';\nimport {\n    handleToolbar,\n    type ToolbarState,\n    type ToolbarAction,\n} from '../Toolbar';\nimport { PAGE_TITLES } from '../../config/constants';\n\nlet textCache: { height: number } | null = null;\n\ninterface TextEditorProps {\n    name: string;\n    start: Record<string, unknown>;\n    runner: (state: Record<string, unknown>) => Record<string, unknown>;\n    clean: (text: string) => string;\n    tape?: boolean;\n    output?: boolean;\n    register?: boolean;\n    navigation?: React.ReactNode;\n}\n\ninterface TextState extends ToolbarState {\n    text: string;\n    code: string;\n    tape?: number[];\n    output?: string;\n}\n\ninterface TextActionPayload {\n    nextIter: (action: {\n        type: string;\n        payload: unknown;\n    }) => Record<string, unknown>;\n    clear: () => void;\n    create: (config: { repeat: () => void; speed: number }) => void;\n    dispatch: (action: { type: string; payload: TextActionPayload }) => void;\n    start?: Record<string, unknown>;\n    newText?: string;\n    clean?: (text: string) => string;\n}\n\nfunction handleAction(\n    state: TextState,\n    action: { type: string; payload: TextActionPayload }\n): TextState {\n    const { type, payload } = action;\n    const { nextIter, clear, create, dispatch } = payload;\n    let newState: Partial<TextState> = {};\n\n    switch (type) {\n        case 'ff':\n            const repeat = () => dispatch({ type: 'timer', payload });\n\n            if (state.pause) {\n                newState = { pause: false };\n                create({ repeat, speed: 50 });\n            } else {\n                clear();\n                newState = { pause: false };\n                create({ repeat, speed: 10 });\n            }\n            break;\n        case 'edit':\n            const { newText, clean } = payload;\n\n            if (newText !== undefined && clean) {\n                newState = {\n                    ...state,\n                    text: newText,\n                    code: clean(newText),\n                };\n\n                clear();\n                nextIter({\n                    type: 'clear',\n                    payload: newState,\n                });\n                newState.pause = true;\n            }\n            break;\n        default:\n            newState = handleToolbar(state, action as unknown as ToolbarAction);\n            break;\n    }\n\n    return {\n        ...state,\n        ...newState,\n    } as TextState;\n}\n\nexport default function TextEditor({\n    name,\n    start,\n    runner,\n    clean,\n    tape,\n    output,\n    register,\n    navigation,\n}: TextEditorProps): React.ReactElement {\n    const containerRef = React.useRef<HTMLDivElement>(null);\n    const container = useContainer(containerRef);\n    const [state, dispatch] = useReducer(handleAction, {\n        ...start,\n        pause: true,\n        text: '',\n        code: '',\n    } as TextState);\n\n    const { create, clear } = useTimer(200);\n    const nextIter = useCache(runner as (state: unknown) => unknown);\n\n    useEffect(() => {\n        document.title = PAGE_TITLES.interpreter(name);\n    }, [name]);\n\n    const handleChange = useCallback(\n        (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n            dispatch({\n                type: 'edit',\n                payload: {\n                    newText: event.target.value,\n                    clean,\n                    nextIter: nextIter as unknown as (action: {\n                        type: string;\n                        payload: unknown;\n                    }) => Record<string, unknown>,\n                    clear,\n                    create,\n                    dispatch: dispatch as unknown as (action: {\n                        type: string;\n                        payload: TextActionPayload;\n                    }) => void,\n                },\n            });\n        },\n        [clean, nextIter, clear, create, dispatch]\n    );\n\n    const handleChangeWrapper = useCallback(\n        (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n            handleChange(event as React.ChangeEvent<HTMLTextAreaElement>);\n        },\n        [handleChange]\n    );\n\n    const wrapDispatch = useCallback(\n        (type: string | { type: string; payload: unknown }) => {\n            if (typeof type === 'string') {\n                return () => {\n                    dispatch({\n                        type,\n                        payload: {\n                            start,\n                            nextIter: nextIter as unknown as (action: {\n                                type: string;\n                                payload: unknown;\n                            }) => Record<string, unknown>,\n                            dispatch,\n                            create,\n                            clear,\n                        },\n                    });\n                };\n            } else {\n                dispatch({\n                    type: type.type,\n                    payload: {\n                        ...(type.payload as TextActionPayload),\n                        start,\n                        nextIter: nextIter as unknown as (action: {\n                            type: string;\n                            payload: unknown;\n                        }) => Record<string, unknown>,\n                        dispatch,\n                        create,\n                        clear,\n                    },\n                });\n            }\n        },\n        [start, nextIter, create, clear, dispatch]\n    );\n\n    const context = useMemo(() => {\n        let { height } = container;\n\n        if (height === 0 && textCache !== null) {\n            height = textCache.height;\n        }\n\n        return {\n            name,\n            tapeFlag: tape || false,\n            outFlag: output || false,\n            regFlag: register || false,\n            code: state.code ? [...state.code] : [],\n            index: (state.index as number) || 0,\n            tape: state.tape || [],\n            pointer: (state.pointer as number) || 0,\n            output: state.output || '',\n            register: (state.register as number) || 0,\n            height,\n            size: 0,\n            dispatch: wrapDispatch,\n            fastForward: true,\n            pause: state.pause || false,\n        };\n    }, [\n        name,\n        tape,\n        output,\n        register,\n        state.code,\n        state.index,\n        state.tape,\n        state.pointer,\n        state.output,\n        state.register,\n        state.pause,\n        container.height,\n        wrapDispatch,\n    ]);\n\n    useEffect(() => {\n        if (container.height > 0) {\n            textCache = { height: container.height };\n        }\n    }, [container.height]);\n\n    const sideProps = {\n        readOnly: true,\n        infoLabel: 'RISC-V Equivalent',\n        fillValue: 'addi x0, x0, 0',\n        value: '',\n    };\n\n    return (\n        <EditorContext.Provider value={context}>\n            <Editor\n                hide\n                container={containerRef}\n                sideProps={sideProps}\n                navigation={navigation}\n            >\n                <TextArea\n                    value={state.text}\n                    placeholder=\"Enter your code here...\"\n                    handleChange={handleChangeWrapper}\n                />\n            </Editor>\n        </EditorContext.Provider>\n    );\n}\n","import TextEditor from './TextEditor';\nimport React, { useCallback } from 'react';\n\ninterface StunStepState {\n    pointer: number;\n    index: number;\n    tape: number[];\n    end: boolean;\n    code: string;\n}\n\ninterface StunStepStart {\n    pointer: number;\n    index: number;\n    tape: number[];\n    end: boolean;\n    code: string;\n}\n\nfunction clean(input: string): string {\n    let code = '';\n\n    for (const char of input) if ('+-><'.includes(char)) code += char;\n\n    return code;\n}\n\nfunction getState(state: StunStepState): StunStepState {\n    let { pointer, index, tape, end } = state;\n    const { code } = state;\n\n    if (end) {\n        if (!tape[pointer]) return state;\n        else end = false;\n    }\n\n    if (index === code.length)\n        return {\n            ...state,\n            index: 0,\n            end: true,\n        };\n\n    const char = code[index++];\n    tape = [...tape];\n\n    if (char === '+') {\n        tape[pointer]++;\n    } else if (tape[pointer]) {\n        if (char === '-') {\n            tape[pointer]--;\n        } else if (char === '>') {\n            if (tape.length === ++pointer) tape.push(1);\n        } else if (pointer) {\n            pointer--;\n        }\n    }\n\n    return {\n        pointer,\n        index,\n        code,\n        tape,\n        end,\n    };\n}\n\nexport default function Editor({\n    navigation,\n}: {\n    navigation?: React.ReactNode;\n}): React.ReactElement {\n    const start: StunStepStart = {\n        pointer: 0,\n        index: 0,\n        tape: [0],\n        end: false,\n        code: '',\n    };\n\n    const memoizedRunner = useCallback(\n        (state: Record<string, unknown>) =>\n            getState(state as unknown as StunStepState) as unknown as Record<\n                string,\n                unknown\n            >,\n        []\n    );\n\n    const memoizedClean = useCallback((text: string) => clean(text), []);\n\n    return (\n        <TextEditor\n            name=\"Stun Step\"\n            start={start as unknown as Record<string, unknown>}\n            runner={memoizedRunner}\n            clean={memoizedClean}\n            tape\n            navigation={navigation}\n        />\n    );\n}\n","import TextEditor from './TextEditor';\nimport React, { useCallback } from 'react';\n\ninterface SuffolkState {\n    register: number;\n    pointer: number;\n    output: string;\n    index: number;\n    tape: number[];\n    end: boolean;\n    code: string;\n}\n\ninterface SuffolkStart {\n    register: number;\n    pointer: number;\n    output: string;\n    index: number;\n    tape: number[];\n    end: boolean;\n    code: string;\n}\n\nfunction cleanInput(input: string): string {\n    let code = '';\n\n    for (const char of input) if ('><!,.'.includes(char)) code += char;\n\n    return code;\n}\n\nfunction getState(state: SuffolkState): SuffolkState {\n    let { register, pointer, output, index, tape, end } = state;\n    const { code } = state;\n\n    if (end) end = false;\n\n    if (index === code.length)\n        return {\n            ...state,\n            index: 0,\n            end: true,\n        };\n\n    const char = code[index++];\n    tape = [...tape];\n\n    switch (char) {\n        case '>':\n            if (tape.length === ++pointer) tape.push(0);\n            break;\n        case '<':\n            register += tape[pointer];\n            pointer = 0;\n            break;\n        case '!':\n            tape[pointer] -= register - 1;\n\n            if (tape[pointer] < 0) tape[pointer] = 0;\n\n            register = 0;\n            pointer = 0;\n            break;\n        case ',':\n            const input = prompt('Input: ');\n\n            if (input && input.length) register = input.charCodeAt(0);\n            else register = 0;\n            break;\n        case '.':\n            if (register > 0) output += String.fromCharCode(register - 1);\n            break;\n        default:\n            break;\n    }\n\n    return {\n        register,\n        pointer,\n        output,\n        index,\n        code,\n        tape,\n        end,\n    };\n}\n\nexport default function Editor({\n    navigation,\n}: {\n    navigation?: React.ReactNode;\n}): React.ReactElement {\n    const start: SuffolkStart = {\n        register: 0,\n        pointer: 0,\n        output: '',\n        index: 0,\n        tape: [0],\n        end: false,\n        code: '',\n    };\n\n    const memoizedRunner = useCallback(\n        (state: Record<string, unknown>) =>\n            getState(state as unknown as SuffolkState) as unknown as Record<\n                string,\n                unknown\n            >,\n        []\n    );\n\n    const memoizedClean = useCallback((text: string) => cleanInput(text), []);\n\n    return (\n        <TextEditor\n            name=\"Suffolk\"\n            start={start as unknown as Record<string, unknown>}\n            runner={memoizedRunner}\n            clean={memoizedClean}\n            tape\n            output\n            register\n            navigation={navigation}\n        />\n    );\n}\n","import React, { useContext, useMemo } from 'react';\nimport { EditorContext } from '../EditorContext';\nimport { CustomGrid } from '../../components/common/CustomGrid';\nimport { Text } from './Text';\nimport { COLORS, SPACING } from '../../config/theme';\n\nexport interface GridAreaProps {\n    handleClick: (pos: number) => () => void;\n    chooseColor: (pos: number) => string;\n    options: string[];\n    rows: number;\n    cols: number;\n}\n\nexport function GridArea({\n    handleClick,\n    chooseColor,\n    options,\n    rows,\n    cols,\n}: GridAreaProps) {\n    const editorContext = useContext(EditorContext);\n    if (!editorContext) {\n        throw new Error('GridArea must be used within EditorContext.Provider');\n    }\n\n    const { size } = editorContext;\n\n    const cellStyles = useMemo(\n        () => ({\n            primary: {\n                bg: COLORS.surface.glass,\n                text: COLORS.primary.main,\n                border: `1px solid ${COLORS.primary.main}`,\n                hover: COLORS.interactive.selected,\n            },\n            info: {\n                bg: COLORS.interactive.focus,\n                text: COLORS.text.primary,\n                border: `1px solid ${COLORS.primary.main}`,\n                hover: COLORS.interactive.hover,\n            },\n            secondary: {\n                bg: COLORS.surface.glass,\n                text: COLORS.text.secondary,\n                border: `1px solid ${COLORS.border.subtle}`,\n                hover: COLORS.interactive.selected,\n            },\n        }),\n        []\n    );\n\n    const getCellStyles = useMemo(\n        () => (color: string) => {\n            return (\n                (cellStyles as Record<string, typeof cellStyles.secondary>)[\n                    color\n                ] || cellStyles.secondary\n            );\n        },\n        [cellStyles]\n    );\n\n    const cellProps = (row: number, col: number) => {\n        const pos = cols * row + col;\n        const color = chooseColor(pos);\n        const value = options[pos] || ' ';\n\n        const cellStyle = getCellStyles(color);\n\n        return {\n            color: cellStyle.text,\n            backgroundColor: cellStyle.bg,\n            onClick: handleClick(pos),\n            children: <Text text={value} />,\n            sx: {\n                borderRadius: SPACING.borderRadius.md,\n                border: cellStyle.border,\n                cursor: 'pointer',\n                transition: 'all 200ms cubic-bezier(0.4, 0, 0.2, 1)',\n                backdropFilter: 'blur(24px) saturate(180%)',\n                '&:hover': {\n                    backgroundColor: cellStyle.hover,\n                },\n            },\n        };\n    };\n\n    return (\n        <CustomGrid cellProps={cellProps} size={size} rows={rows} cols={cols} />\n    );\n}\n","import { gridMove, getDirection } from '../../utils/calculate';\nimport {\n    handleToolbar,\n    type ToolbarState,\n    type ToolbarAction,\n} from '../Toolbar';\n\ninterface GridState {\n    grid: string;\n    select: number | null;\n    rows: number;\n    cols: number;\n    pause?: boolean;\n}\n\ninterface KeysPayload {\n    key: string;\n    resetState: (grid: string) => void;\n}\n\ninterface ResizePayload {\n    resetState: (grid: string) => void;\n    rows?: number;\n    cols?: number;\n}\n\nfunction handleKeys(\n    state: GridState,\n    payload: KeysPayload\n): Partial<GridState> {\n    let { grid, select } = state;\n    let value: string;\n\n    const { key, resetState } = payload;\n\n    if (select === null) return {};\n\n    if (key.includes('Arrow')) {\n        const arrow = getDirection(key);\n        const { rows, cols } = state;\n\n        select = gridMove(select, arrow, rows, cols);\n        return { select };\n    }\n\n    if (key === 'Backslash' || key === '\\\\') {\n        value = '\\\\';\n    } else if (key.length === 1) {\n        value = key;\n    } else if (key === 'Backspace' || key === 'Delete') {\n        value = ' ';\n    } else {\n        return {};\n    }\n\n    const before = grid.slice(0, select);\n    const after = grid.slice(select + 1);\n\n    grid = before + value + after;\n    resetState(grid);\n\n    return { grid, pause: true };\n}\n\nfunction handleResize(\n    state: GridState,\n    payload: ResizePayload\n): Partial<GridState> {\n    const { resetState, ...rest } = payload;\n    let { grid } = state;\n    const { rows, cols } = state;\n    let resize = '';\n\n    const { rows: newRows, cols: newCols } = rest;\n\n    if (newRows !== undefined && newRows > rows) {\n        const diff = newRows - rows;\n        const prod = diff * cols;\n\n        grid += ' '.repeat(prod);\n    }\n\n    const finalRows = newRows !== undefined ? newRows : rows;\n    const finalCols = newCols !== undefined ? newCols : cols;\n\n    for (let k = 0; k < finalRows; k++) {\n        const start = k * cols;\n        let end = start;\n\n        if (newCols !== undefined && newCols > cols) end += cols;\n        else end += newCols !== undefined ? newCols : cols;\n\n        resize += grid.substring(start, end).padEnd(finalCols, ' ');\n    }\n\n    resetState(resize);\n\n    return {\n        ...rest,\n        grid: resize,\n        pause: true,\n    };\n}\n\nexport function handleAction(\n    state: GridState,\n    action: { type: string; payload: unknown }\n) {\n    const { type, payload } = action;\n    let newState = {};\n\n    switch (type) {\n        case 'edit':\n            newState = handleKeys(state, payload as KeysPayload);\n            break;\n        case 'resize':\n            newState = handleResize(state, payload as ResizePayload);\n            break;\n        case 'click':\n            const { select } = payload as { select: number };\n            newState = select === state.select ? { select: null } : { select };\n            break;\n        default:\n            newState = handleToolbar(\n                state as unknown as ToolbarState,\n                action as ToolbarAction\n            );\n            break;\n    }\n\n    return {\n        ...state,\n        ...newState,\n    };\n}\n\n// Export both for compatibility\nexport { handleAction as handleGrid };\n","import React, {\n    useRef,\n    useEffect,\n    useReducer,\n    useCallback,\n    useMemo,\n} from 'react';\nimport Editor from '../Editor';\nimport { EditorContext } from '../EditorContext';\nimport { GridArea } from '../components/GridArea';\nimport { convertPixels } from '../../utils/calculate';\nimport { handleAction } from './eventHandlers';\nimport { PAGE_TITLES } from '../../config/constants';\n\nimport {\n    useContainer,\n    useTimer,\n    useKeys,\n    useCache,\n    useMobile,\n} from '../../hooks';\n\nlet gridCache: { rows: number; cols: number } | null = null;\n\ninterface GridEditorProps {\n    name: string;\n    start: any;\n    runner: (state: any) => any;\n    tape?: boolean;\n    output?: boolean;\n    register?: boolean;\n    navigation?: React.ReactNode;\n}\n\ninterface GridState {\n    grid: string;\n    select: number | null;\n    pause: boolean;\n    rows: number;\n    cols: number;\n    position?: number | null;\n    [key: string]: unknown;\n}\n\ninterface WrapperPayload {\n    start: any;\n    resetState: (grid: string) => any;\n    nextIter: (action: any) => any;\n    dispatch: (action: { type: string; payload?: unknown }) => void;\n    create: (config: { repeat: () => void; speed: number }) => void;\n    clear: () => void;\n}\n\nfunction useWrappers(\n    state: GridState,\n    props: GridEditorProps,\n    dispatch: (action: any) => void\n) {\n    const { runner, start } = props;\n    const { rows, cols } = state;\n\n    const { create, clear } = useTimer(200);\n    const nextIter = useCache(runner);\n\n    const resetState = useCallback(\n        (grid: string) => {\n            clear();\n\n            return nextIter({\n                type: 'clear',\n                payload: {\n                    ...start,\n                    grid,\n                    rows,\n                    cols,\n                },\n            });\n        },\n        [start, clear, nextIter, rows, cols]\n    );\n\n    const handleClick = useCallback(\n        (select: number) => () => {\n            dispatch({\n                type: 'click',\n                payload: { select },\n            });\n        },\n        [dispatch]\n    );\n\n    const chooseColor = useCallback(\n        (square: number) => {\n            const { position, select } = state;\n\n            if (square === select) return 'primary';\n            if (position !== null && square === position) return 'info';\n\n            return 'secondary';\n        },\n        [state]\n    );\n\n    const wrapDispatch = useCallback(\n        (type: string) => () => {\n            const payload: WrapperPayload = {\n                start,\n                resetState,\n                nextIter,\n                dispatch,\n                create,\n                clear,\n            };\n\n            dispatch({ type, payload });\n        },\n        [resetState, nextIter, dispatch, create, clear, start]\n    );\n\n    return {\n        resetState,\n        handleClick,\n        chooseColor,\n        wrapDispatch,\n    };\n}\n\nexport default function GridEditor(props: GridEditorProps): React.ReactElement {\n    const { create: createKeys, clear: clearKeys } = useKeys();\n\n    const { name, start, tape, output, register, navigation } = props;\n\n    const container = useRef<HTMLDivElement>(null);\n    let { height, width } = useContainer(container);\n\n    const mobile = useMobile('sm');\n    const size = mobile ? 4 : 6;\n    const hide = true;\n\n    height = (height || 400) * 0.8;\n    width = (width || 600) * 0.95;\n\n    if (!hide) {\n        if (mobile) width /= 2;\n        else width /= 1.5;\n    }\n\n    // Module-level cache for grid dimensions to prevent flash triggers\n    // on interpreter switch. This assumes the layout size for grid editors\n    // is consistent across different interpreters.\n    const { rows, cols } = useMemo(() => {\n        if (!container.current && gridCache) {\n            return gridCache;\n        }\n        return convertPixels(size, height, width);\n    }, [size, height, width]);\n\n    useEffect(() => {\n        if (container.current && rows > 0 && cols > 0) {\n            gridCache = { rows, cols };\n        }\n    }, [rows, cols]);\n\n    const initial: GridState = {\n        ...start,\n        grid: ' '.repeat(rows * cols),\n        select: null,\n        pause: true,\n        rows,\n        cols,\n    };\n\n    const [state, dispatch] = useReducer(handleAction as any, initial);\n\n    const { resetState, handleClick, chooseColor, wrapDispatch } = useWrappers(\n        state,\n        props,\n        dispatch\n    );\n\n    useEffect(() => {\n        dispatch({\n            type: 'resize',\n            payload: {\n                rows,\n                cols,\n                resetState,\n            },\n        });\n    }, [rows, cols, resetState]);\n\n    useEffect(() => {\n        document.title = PAGE_TITLES.interpreter(name);\n\n        const wrapper = (event: KeyboardEvent) => {\n            dispatch({\n                type: 'edit',\n                payload: {\n                    key: event.key,\n                    resetState,\n                },\n            });\n        };\n\n        createKeys(wrapper);\n\n        return () => clearKeys();\n    }, [name, createKeys, resetState, clearKeys]);\n\n    const context = {\n        name,\n        size,\n        ...state,\n        dispatch: wrapDispatch,\n        tapeFlag: tape || false,\n        outFlag: output || false,\n        regFlag: register || false,\n        height: height / 0.8,\n        index: 0,\n        tape: [],\n        pointer: 0,\n        output: '',\n        register: 0,\n        code: undefined,\n        fastForward: false,\n        pause: state.pause || false,\n    };\n\n    return (\n        <EditorContext.Provider value={context as any}>\n            <Editor hide={hide} container={container} navigation={navigation}>\n                <GridArea\n                    rows={rows}\n                    cols={cols}\n                    options={state.grid?.split('') || []}\n                    handleClick={handleClick}\n                    chooseColor={chooseColor}\n                />\n            </Editor>\n        </EditorContext.Provider>\n    );\n}\n","import { gridMove } from '../../utils/calculate';\nimport GridEditor from './GridEditor';\nimport React from 'react';\n\ninterface WII2DState {\n    position: number | null;\n    velocity: number;\n    output: string;\n    register: number;\n    end: boolean;\n    grid: string;\n    rows: number;\n    cols: number;\n}\n\ninterface WII2DStart {\n    position: null;\n    velocity: number;\n    end: boolean;\n    output: string;\n    register: number;\n}\n\nfunction getDistance(x: number, y: number, cols: number): number {\n    let xPos = x;\n    let yPos = y;\n    const xWidth = xPos % cols;\n    const yWidth = yPos % cols;\n    xPos -= xWidth;\n    yPos -= yWidth;\n\n    const differ = Math.abs(xPos - yPos);\n    const height = Math.floor(differ / cols);\n    const width = Math.abs(xWidth - yWidth);\n\n    return height + width;\n}\n\nfunction getComparison(position: number, cols: number) {\n    return (x: number, y: number) =>\n        getDistance(position, x, cols) - getDistance(position, y, cols);\n}\n\nfunction getClosest(position: number, grid: string, cols: number): number {\n    const warp: number[] = [];\n\n    for (let k = 0; k < grid.length; k++) if (grid[k] === '@') warp.push(k);\n\n    if (warp.length === 1) return position;\n\n    const compare = getComparison(position, cols);\n\n    warp.sort(compare);\n    return warp[1];\n}\n\nfunction getState(state: WII2DState): WII2DState {\n    const arrows = '^<>v';\n\n    let { position, velocity, output, register, end } = state;\n    const { grid, rows, cols } = state;\n\n    if (end) return state;\n\n    if (position === null) {\n        const index = grid.indexOf('!');\n        const double = grid.lastIndexOf('!');\n\n        if (index === -1 || index !== double) return { ...state, end: true };\n\n        position = index;\n    }\n\n    const char = grid[position];\n\n    if (arrows.includes(char)) {\n        const index = arrows.indexOf(char);\n        velocity = (index % 2) + 1;\n\n        if (index < 2) velocity -= 3;\n    } else if (+char) {\n        register = +char;\n    }\n\n    switch (char) {\n        case '|':\n            velocity *= -1;\n            break;\n        case '@':\n            position = getClosest(position, grid, cols);\n            position -= cols;\n\n            if (position < 0) position += rows * cols;\n            break;\n        case '+':\n            register++;\n            break;\n        case '-':\n            register--;\n            break;\n        case '*':\n            register *= 2;\n            break;\n        case 's':\n            register *= register;\n            break;\n        case '/':\n            register = Math.floor(register / 2);\n            break;\n        case '~':\n            output += String.fromCharCode(register);\n            break;\n        case '?':\n            const rand = Math.random() * 4;\n            const floor = Math.floor(rand);\n            velocity = floor - 2 + (floor > 1 ? 1 : 0);\n            break;\n        case '.':\n            position = null;\n            end = true;\n            break;\n        default:\n            break;\n    }\n\n    if (position !== null && char !== '@')\n        position = gridMove(position, velocity, rows, cols);\n\n    return {\n        position,\n        velocity,\n        grid,\n        output,\n        register,\n        end,\n        rows,\n        cols,\n    };\n}\n\nexport default function Editor({\n    navigation,\n}: {\n    navigation?: React.ReactNode;\n}): React.ReactElement {\n    const start: WII2DStart = {\n        position: null,\n        velocity: -2,\n        end: false,\n        output: '',\n        register: 0,\n    };\n\n    return (\n        <GridEditor\n            name=\"WII2D\"\n            start={start}\n            runner={getState}\n            output\n            register\n            navigation={navigation}\n        />\n    );\n}\n","import { gridMove } from '../../utils/calculate';\nimport GridEditor from './GridEditor';\nimport React from 'react';\n\ninterface BackState {\n    velocity: number;\n    position: number | null;\n    pointer: number;\n    tape: number[];\n    end: boolean;\n    grid: string;\n    rows: number;\n    cols: number;\n}\n\ninterface BackStart {\n    velocity: number;\n    pointer: number;\n    position: number;\n    tape: number[];\n    end: boolean;\n}\n\nfunction getState(state: BackState): BackState {\n    let { velocity, position, pointer, tape, end } = state;\n    const { grid, rows, cols } = state;\n\n    if (end || position === null) return state;\n\n    const sum = velocity > 0 ? 3 : -3;\n    const char = grid[position];\n    tape = [...tape];\n\n    switch (char) {\n        case '\\\\':\n            velocity = sum - velocity;\n            break;\n        case '/':\n            velocity -= sum;\n            break;\n        case '<':\n            if (pointer) pointer--;\n            break;\n        case '>':\n            if (++pointer === tape.length) tape.push(0);\n            break;\n        case '-':\n            tape[pointer] ^= 1;\n            break;\n        case '+':\n            let next: string;\n\n            if (!tape[pointer])\n                do {\n                    position = gridMove(position, velocity, rows, cols);\n\n                    next = grid[position];\n                } while (!'\\\\/<>-+*'.includes(next));\n            break;\n        case '*':\n            position = null;\n            end = true;\n            break;\n        default:\n            break;\n    }\n\n    if (position !== null) position = gridMove(position, velocity, rows, cols);\n\n    return {\n        velocity,\n        position,\n        pointer,\n        grid,\n        tape,\n        rows,\n        cols,\n        end,\n    };\n}\n\nexport default function Editor({\n    navigation,\n}: {\n    navigation?: React.ReactNode;\n}): React.ReactElement {\n    const start: BackStart = {\n        velocity: 1,\n        pointer: 0,\n        position: 0,\n        tape: [0],\n        end: false,\n    };\n\n    return (\n        <GridEditor\n            name=\"Back\"\n            start={start}\n            runner={getState}\n            tape\n            navigation={navigation}\n        />\n    );\n}\n","import { ROUTES } from '../config/constants';\n\nexport { default as Stun_Step } from './Text/StunStep';\nexport { default as Suffolk } from './Text/Suffolk';\nexport { default as WII2D } from './Grid/WII2D';\nexport { default as Back } from './Grid/Back';\n\nexport const interpreters = ROUTES.interpreters;\n\n","import React from 'react';\nimport { ToggleButton, ToggleButtonGroup } from './mui';\nimport { COLORS, SPACING, SHADOWS } from '../config/theme';\n\ninterface InterpreterNavigationProps {\n    active: string;\n    onChange: (newValue: string) => void;\n}\n\nexport const InterpreterNavigation: React.FC<InterpreterNavigationProps> = ({\n    active,\n    onChange,\n}) => {\n    const handleChange = (\n        _event: React.MouseEvent<HTMLElement>,\n        newAlignment: string | null\n    ) => {\n        if (newAlignment !== null) {\n            onChange(newAlignment);\n        }\n    };\n\n    return (\n        <ToggleButtonGroup\n            value={active}\n            exclusive\n            onChange={handleChange}\n            aria-label=\"interpreter selector\"\n            sx={{\n                backgroundColor: COLORS.interactive.disabled,\n                borderRadius: SPACING.borderRadius.full,\n                p: 0.5,\n                '& .MuiToggleButton-root': {\n                    borderRadius: SPACING.borderRadius.full,\n                    border: 'none',\n                    color: COLORS.text.secondary,\n                    fontSize: '0.85rem',\n                    fontWeight: 'medium',\n                    textTransform: 'none',\n                    px: { xs: 1.5, sm: 3 },\n                    py: 0.5,\n                    '&.Mui-selected': {\n                        backgroundColor: COLORS.primary.main,\n                        color: COLORS.text.primary,\n                        boxShadow: SHADOWS.md,\n                        '&:hover': {\n                            backgroundColor: COLORS.primary.light,\n                        },\n                    },\n                    '&:hover': {\n                        backgroundColor: COLORS.interactive.hover,\n                    },\n                },\n            }}\n        >\n            <ToggleButton value=\"Stun_Step\">Stun Step</ToggleButton>\n            <ToggleButton value=\"Suffolk\">Suffolk</ToggleButton>\n            <ToggleButton value=\"WII2D\">WII2D</ToggleButton>\n            <ToggleButton value=\"Back\">Back</ToggleButton>\n        </ToggleButtonGroup>\n    );\n};\n","import React, { useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { Box } from '../components/mui';\nimport { Stun_Step, Suffolk, WII2D, Back } from '../Interpreters';\nimport { InterpreterNavigation } from '../components/InterpreterNavigation';\nimport { PAGE_TITLES } from '../config/constants';\nimport { COLORS } from '../config/theme';\n\nexport default function Interpreters(): React.ReactElement {\n    const [searchParams, setSearchParams] = useSearchParams();\n    const active = searchParams.get('type') || 'Stun_Step';\n\n    useEffect(() => {\n        document.title = PAGE_TITLES.interpreters;\n    }, []);\n\n    const handleChange = (newValue: string) => {\n        setSearchParams({ type: newValue });\n    };\n\n    const renderInterpreter = () => {\n        const navigation = (\n            <InterpreterNavigation active={active} onChange={handleChange} />\n        );\n\n        switch (active) {\n            case 'Stun_Step':\n                return <Stun_Step navigation={navigation} />;\n            case 'Suffolk':\n                return <Suffolk navigation={navigation} />;\n            case 'WII2D':\n                return <WII2D navigation={navigation} />;\n            case 'Back':\n                return <Back navigation={navigation} />;\n            default:\n                return <Stun_Step navigation={navigation} />;\n        }\n    };\n\n    return (\n        <Box\n            sx={{\n                minHeight: '100vh',\n                background: COLORS.surface.background,\n            }}\n        >\n            {renderInterpreter()}\n        </Box>\n    );\n}\n","import React from 'react';\nimport { Box, Typography, Grid, IconButton } from '@mui/material';\nimport {\n    InfoRounded as InfoIcon,\n    HomeRounded as HomeIcon,\n} from '@mui/icons-material';\nimport { Grid as MuiGrid } from '../mui';\nimport { COLORS, TYPOGRAPHY } from '../../config/theme';\n\ninterface QuizLayoutProps {\n    title: string;\n    subtitle?: string;\n    infoUrl: string;\n    children: React.ReactNode;\n}\n\nconst QuizLayout: React.FC<QuizLayoutProps> = ({\n    title,\n    subtitle,\n    infoUrl,\n    children,\n}) => {\n    return (\n        <Grid\n            container\n            minHeight=\"100vh\"\n            flexDirection=\"column\"\n            alignItems=\"center\"\n            sx={{\n                background: COLORS.surface.background,\n                py: 8,\n                px: 2,\n                width: '100%',\n            }}\n        >\n            <Box\n                sx={{\n                    mb: 6,\n                    textAlign: 'center',\n                    width: '100%',\n                    maxWidth: 800,\n                    mx: 'auto',\n                    marginBottom: 0,\n                }}\n            >\n                <MuiGrid\n                    container={true}\n                    alignItems=\"center\"\n                    justifyContent=\"space-between\"\n                    sx={{ marginBottom: 4 }}\n                >\n                    <MuiGrid size=\"auto\">\n                        <Typography\n                            variant=\"h1\"\n                            sx={{\n                                color: COLORS.text.primary,\n                                fontWeight: TYPOGRAPHY.fontWeight.bold,\n                                fontSize: TYPOGRAPHY.fontSize.h2,\n                            }}\n                        >\n                            {title}\n                        </Typography>\n                    </MuiGrid>\n                    <MuiGrid size=\"auto\" sx={{ display: 'flex', gap: 1 }}>\n                        <IconButton\n                            href={infoUrl}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                        >\n                            <InfoIcon\n                                sx={{\n                                    fontSize: {\n                                        xs: TYPOGRAPHY.fontSize.h2,\n                                        md: '2rem',\n                                    },\n                                }}\n                            />\n                        </IconButton>\n                        <IconButton component=\"a\" href=\"/\">\n                            <HomeIcon\n                                sx={{\n                                    fontSize: {\n                                        xs: TYPOGRAPHY.fontSize.h2,\n                                        md: '2rem',\n                                    },\n                                }}\n                            />\n                        </IconButton>\n                    </MuiGrid>\n                </MuiGrid>\n\n                {subtitle && (\n                    <Typography\n                        variant=\"h5\"\n                        sx={{\n                            color: COLORS.text.secondary,\n                            marginTop: 2,\n                            marginBottom: 4,\n                            fontWeight: TYPOGRAPHY.fontWeight.normal,\n                            fontSize: TYPOGRAPHY.fontSize.subheading,\n                        }}\n                    >\n                        {subtitle}\n                    </Typography>\n                )}\n            </Box>\n\n            {children}\n        </Grid>\n    );\n};\n\nexport default QuizLayout;\n","import React from 'react';\nimport {\n    Typography,\n    Grid,\n    Button,\n    TextField,\n    MenuItem,\n    Select,\n    FormControl,\n    InputLabel,\n    Card,\n} from '@mui/material';\nimport { COLORS, SPACING, COMPONENT_VARIANTS } from '../../config/theme';\nimport { QuizSettings } from '../../types/quiz';\n\ninterface QuizSettingsProps<S extends QuizSettings> {\n    settings: S;\n    onUpdate: (s: S) => void;\n    onStart: () => void;\n    children?: React.ReactNode;\n    title?: string;\n    maxQuestionOptions: number[];\n}\n\nconst QuizSettingsView = <S extends QuizSettings>({\n    settings,\n    onUpdate,\n    onStart,\n    children,\n    title = 'Game Settings',\n    maxQuestionOptions,\n}: QuizSettingsProps<S>) => {\n    return (\n        <Card\n            sx={{\n                ...COMPONENT_VARIANTS.card,\n                p: 3,\n                mb: 4,\n                width: '100%',\n                maxWidth: SPACING.maxWidth.sm,\n                mx: 'auto',\n            }}\n        >\n            <Typography variant=\"h5\" sx={{ mb: 3, textAlign: 'center' }}>\n                {title}\n            </Typography>\n            <Grid container spacing={3}>\n                {children}\n            </Grid>\n        </Card>\n    );\n};\n\nexport default QuizSettingsView;\n","import React from 'react';\nimport {\n    Box,\n    Typography,\n    Button,\n    Fade,\n    Chip,\n    Stack,\n    Card,\n} from '@mui/material';\nimport {\n    ArrowBackRounded as ArrowBackIcon,\n    RefreshRounded as RefreshIcon,\n    CheckCircleRounded as CheckCircleIcon,\n    CancelRounded as CancelIcon,\n} from '@mui/icons-material';\nimport { COLORS, SPACING, COMPONENT_VARIANTS } from '../../config/theme';\nimport { Question } from '../../types/quiz';\n\ninterface QuizSummaryViewProps<T> {\n    score: number;\n    history: Question<T>[];\n    onRestart: () => void;\n    onBackToMenu: () => void;\n    renderHistoryItem: (q: Question<T>, index: number) => React.ReactNode;\n}\n\nconst QuizSummaryView = <T,>({\n    score,\n    history,\n    onRestart,\n    onBackToMenu,\n    renderHistoryItem,\n}: QuizSummaryViewProps<T>) => {\n    return (\n        <Fade in>\n            <Box\n                sx={{\n                    width: '100%',\n                    maxWidth: SPACING.maxWidth.sm,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    mx: 'auto',\n                }}\n            >\n                <Card\n                    sx={{\n                        ...COMPONENT_VARIANTS.card,\n                        p: 4,\n                        mb: 4,\n                        width: '100%',\n                    }}\n                >\n                    <Typography\n                        variant=\"h4\"\n                        sx={{ mb: 2, textAlign: 'center' }}\n                    >\n                        Quiz Complete!\n                    </Typography>\n                    <Typography\n                        variant=\"h2\"\n                        sx={{\n                            color: COLORS.primary.main,\n                            mb: 4,\n                            textAlign: 'center',\n                        }}\n                    >\n                        {score} / {history.length}\n                    </Typography>\n\n                    <Box\n                        sx={{\n                            display: 'flex',\n                            justifyContent: 'center',\n                            gap: 2,\n                        }}\n                    >\n                        <Button\n                            variant=\"contained\"\n                            startIcon={<RefreshIcon />}\n                            onClick={onRestart}\n                            sx={{ flex: 1 }}\n                        >\n                            Replay\n                        </Button>\n                        <Button\n                            variant=\"outlined\"\n                            startIcon={<ArrowBackIcon />}\n                            onClick={onBackToMenu}\n                            sx={{ flex: 1 }}\n                        >\n                            Menu\n                        </Button>\n                    </Box>\n                </Card>\n\n                <Typography\n                    variant=\"h6\"\n                    align=\"center\"\n                    sx={{ mb: 2, width: '100%' }}\n                >\n                    History\n                </Typography>\n                <Stack\n                    spacing={2}\n                    sx={{\n                        width: '100%',\n                    }}\n                >\n                    {history.map((q, i) => renderHistoryItem(q, i))}\n                </Stack>\n            </Box>\n        </Fade>\n    );\n};\n\nexport default QuizSummaryView;\n","import React from 'react';\nimport {\n    Box,\n    Typography,\n    Button,\n    Fade,\n    TextField,\n    Stack,\n    LinearProgress,\n    Card,\n} from '@mui/material';\nimport { ArrowBackRounded as ArrowBackIcon } from '@mui/icons-material';\nimport {\n    COLORS,\n    SPACING,\n    COMPONENT_VARIANTS,\n    SHADOWS,\n} from '../../config/theme';\n\ninterface QuizGameViewProps {\n    gameState: {\n        history: any[];\n        currentQuestion: any;\n        inputValue: string;\n        showFeedback: boolean;\n        feedbackMessage: string;\n        isCorrect: boolean | null;\n        totalQuestions: number;\n        showHint: boolean;\n        score: number;\n        hasInitialized: boolean;\n    };\n    actions: {\n        setInputValue: (val: string) => void;\n        handleSubmit: (e?: React.FormEvent) => void;\n        handleSkip: () => void;\n        toggleHint: () => void;\n    };\n    onBackToMenu: () => void;\n    renderQuestionPrompt: () => string;\n    renderQuestionContent: (item: any) => React.ReactNode;\n    renderHint: (item: any) => React.ReactNode;\n    renderFeedbackFlag?: (item: any) => React.ReactNode;\n    renderFeedbackOrigin?: (item: any) => React.ReactNode;\n    inputPlaceholder?: string;\n    inputRef?: React.RefObject<HTMLInputElement | null>;\n    nextButtonRef?: React.RefObject<HTMLButtonElement | null>;\n    modeLabel: string;\n    hideInput?: boolean;\n    hideHint?: boolean;\n    renderCustomActions?: (gameState: any, actions: any) => React.ReactNode;\n    onKeyDown?: (e: KeyboardEvent) => void;\n}\n\nconst QuizGameView: React.FC<QuizGameViewProps> = ({\n    gameState,\n    actions,\n    onBackToMenu,\n    renderQuestionPrompt,\n    renderQuestionContent,\n    renderHint,\n    renderFeedbackFlag,\n    renderFeedbackOrigin,\n    inputPlaceholder = 'Type answer...',\n    inputRef,\n    nextButtonRef,\n    modeLabel,\n    hideInput = false,\n    hideHint = false,\n    renderCustomActions,\n    onKeyDown,\n}) => {\n    const {\n        history,\n        currentQuestion,\n        inputValue,\n        showFeedback,\n        feedbackMessage,\n        isCorrect,\n        totalQuestions,\n        showHint,\n        score,\n    } = gameState;\n\n    const { setInputValue, handleSubmit, handleSkip, toggleHint } = actions;\n\n    React.useEffect(() => {\n        const handleGlobalKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'Enter') {\n                e.preventDefault();\n\n                if (showFeedback) {\n                    handleSkip();\n                } else if (hideInput || !inputValue.trim()) {\n                    handleSkip();\n                } else {\n                    handleSubmit();\n                }\n                return;\n            }\n\n            // Quiz-specific handlers\n            if (onKeyDown) {\n                onKeyDown(e);\n            }\n        };\n\n        window.addEventListener('keydown', handleGlobalKeyDown);\n        return () => window.removeEventListener('keydown', handleGlobalKeyDown);\n    }, [\n        showFeedback,\n        hideInput,\n        inputValue,\n        handleSkip,\n        handleSubmit,\n        onKeyDown,\n    ]);\n\n    const feedbackColor = isCorrect ? COLORS.data.green : COLORS.data.amber;\n\n    return (\n        <Box\n            sx={{\n                width: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                mt: 4,\n            }}\n        >\n            <Box\n                sx={{\n                    width: '100%',\n                    maxWidth: SPACING.maxWidth.sm,\n                    mx: 'auto',\n                }}\n            >\n                <Box\n                    sx={{\n                        mb: 4,\n                        display: 'flex',\n                        flexDirection: 'column',\n                        width: '100%',\n                        maxWidth: SPACING.maxWidth.sm,\n                        mx: 'auto',\n                    }}\n                >\n                    <Box\n                        sx={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            mb: 1,\n                        }}\n                    >\n                        <Typography\n                            variant=\"caption\"\n                            color=\"textSecondary\"\n                            sx={{\n                                letterSpacing: '0.1em',\n                                textTransform: 'uppercase',\n                                fontWeight: 'bold',\n                                opacity: 0.6,\n                            }}\n                        >\n                            {modeLabel}\n                        </Typography>\n                        <Button\n                            size=\"small\"\n                            variant=\"text\"\n                            startIcon={<ArrowBackIcon />}\n                            onClick={onBackToMenu}\n                            sx={{\n                                color: COLORS.text.secondary,\n                                opacity: 0.6,\n                                '&:hover': {\n                                    opacity: 1,\n                                    backgroundColor: 'transparent',\n                                    color: COLORS.primary.main,\n                                },\n                                fontSize: '0.75rem',\n                                textTransform: 'none',\n                                p: 0,\n                            }}\n                        >\n                            Quit Quiz\n                        </Button>\n                    </Box>\n                    <Box\n                        sx={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                            alignItems: 'baseline',\n                            mb: 1.5,\n                        }}\n                    >\n                        <Typography variant=\"h6\" sx={{ fontWeight: 'medium' }}>\n                            Question{' '}\n                            {Math.min(history.length + 1, totalQuestions)} of{' '}\n                            {totalQuestions}\n                        </Typography>\n                        <Typography\n                            variant=\"h5\"\n                            sx={{\n                                fontWeight: 'bold',\n                                color: COLORS.primary.main,\n                            }}\n                        >\n                            {score}{' '}\n                            <Typography\n                                component=\"span\"\n                                variant=\"caption\"\n                                color=\"textSecondary\"\n                                sx={{ fontWeight: 'normal' }}\n                            >\n                                PTS\n                            </Typography>\n                        </Typography>\n                    </Box>\n                    {gameState.hasInitialized && (\n                        <LinearProgress\n                            variant=\"determinate\"\n                            value={\n                                totalQuestions > 0\n                                    ? (Math.min(\n                                          history.length,\n                                          totalQuestions\n                                      ) /\n                                          totalQuestions) *\n                                      100\n                                    : 0\n                            }\n                            sx={{\n                                height: 4,\n                                borderRadius: 2,\n                                backgroundColor: COLORS.interactive.hover,\n                                '& .MuiLinearProgress-bar': {\n                                    borderRadius: 2,\n                                    background: `linear-gradient(90deg, ${COLORS.primary.main}, ${COLORS.primary.light})`,\n                                },\n                            }}\n                        />\n                    )}\n                </Box>\n\n                <Card\n                    sx={{\n                        ...COMPONENT_VARIANTS.card,\n                        p: 4,\n                        pt: 6,\n                        pb: 3,\n                        mb: 4,\n                        minHeight: 360,\n                        width: '100%',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'flex-start',\n                        flexDirection: 'column',\n                    }}\n                >\n                    <Typography\n                        variant=\"body1\"\n                        color=\"textSecondary\"\n                        sx={{ mb: 2 }}\n                    >\n                        {renderQuestionPrompt()}\n                    </Typography>\n\n                    <Fade in key={JSON.stringify(currentQuestion)}>\n                        <Box\n                            sx={{\n                                display: 'flex',\n                                flexDirection: 'column',\n                                alignItems: 'center',\n                                mb: 4,\n                            }}\n                        >\n                            {currentQuestion ? (\n                                renderQuestionContent(currentQuestion)\n                            ) : (\n                                <Typography variant=\"h4\" color=\"textSecondary\">\n                                    Loading...\n                                </Typography>\n                            )}\n                        </Box>\n                    </Fade>\n\n                    <Box\n                        component=\"form\"\n                        onSubmit={handleSubmit}\n                        sx={{\n                            width: '100%',\n                            display: 'flex',\n                            flexDirection: 'column',\n                            alignItems: 'center',\n                        }}\n                    >\n                        {!hideInput && (\n                            <TextField\n                                inputRef={inputRef}\n                                value={inputValue}\n                                onChange={e => setInputValue(e.target.value)}\n                                placeholder={inputPlaceholder}\n                                disabled={showFeedback}\n                                autoComplete=\"off\"\n                                sx={{\n                                    input: {\n                                        textAlign: 'center',\n                                        fontSize: '1.2rem',\n                                    },\n                                    width: '100%',\n                                    maxWidth: 450,\n                                    '& .MuiOutlinedInput-root': {\n                                        '& fieldset': {\n                                            borderColor: COLORS.border.subtle,\n                                        },\n                                        '&:hover fieldset': {\n                                            borderColor: COLORS.primary.main,\n                                        },\n                                        '&.Mui-focused fieldset': {\n                                            borderColor: COLORS.primary.main,\n                                        },\n                                        '&.Mui-disabled fieldset': {\n                                            borderColor: `${COLORS.border.subtle} !important`,\n                                        },\n                                    },\n                                }}\n                                variant=\"outlined\"\n                            />\n                        )}\n                        <Stack\n                            direction=\"row\"\n                            spacing={2}\n                            sx={{\n                                mt: 4,\n                                justifyContent: 'center',\n                                width: '100%',\n                                maxWidth: 450,\n                            }}\n                        >\n                            <Button\n                                ref={nextButtonRef}\n                                variant=\"outlined\"\n                                sx={{\n                                    py: 1.5,\n                                    flex: 1,\n                                    borderColor: COLORS.border.subtle,\n                                    color: COLORS.text.secondary,\n                                    whiteSpace: 'nowrap',\n                                    fontSize: '0.8rem',\n                                    '&.Mui-disabled': {\n                                        borderColor: COLORS.border.subtle,\n                                        opacity: 0.6,\n                                    },\n                                }}\n                                onClick={handleSkip}\n                            >\n                                {showFeedback ? 'Next' : 'Skip'}\n                            </Button>\n                            {renderCustomActions?.(gameState, actions)}\n                            {!hideHint && (\n                                <Button\n                                    variant=\"outlined\"\n                                    onClick={toggleHint}\n                                    disabled={showFeedback}\n                                    sx={{\n                                        py: 1.5,\n                                        flex: 1,\n                                        borderColor: COLORS.border.subtle,\n                                        whiteSpace: 'nowrap',\n                                        fontSize: '0.8rem',\n                                        '&.Mui-disabled': {\n                                            borderColor: COLORS.border.subtle,\n                                            opacity: 0.6,\n                                        },\n                                    }}\n                                >\n                                    {showHint ? 'Hide Hint' : 'Show Hint'}\n                                </Button>\n                            )}\n                            {!hideInput && (\n                                <Button\n                                    type=\"submit\"\n                                    variant=\"contained\"\n                                    sx={{\n                                        py: 1.5,\n                                        flex: 2,\n                                        whiteSpace: 'nowrap',\n                                        fontSize: '0.8rem',\n                                        '&.Mui-disabled': {\n                                            backgroundColor:\n                                                COLORS.interactive.disabled,\n                                            color: COLORS.interactive\n                                                .disabledText,\n                                            borderColor: 'transparent',\n                                        },\n                                    }}\n                                    disabled={!inputValue || showFeedback}\n                                >\n                                    Submit\n                                </Button>\n                            )}\n                        </Stack>\n                    </Box>\n\n                    {showHint && !showFeedback && (\n                        <Fade in>\n                            <Box\n                                sx={{\n                                    mt: 3,\n                                    p: 2,\n                                    borderRadius: 1,\n                                    border: `1px dashed ${COLORS.primary.main}40`,\n                                    width: '100%',\n                                    maxWidth: 450,\n                                }}\n                            >\n                                {currentQuestion && renderHint(currentQuestion)}\n                            </Box>\n                        </Fade>\n                    )}\n\n                    {showFeedback && (\n                        <Fade in={showFeedback}>\n                            <Box sx={{ mt: 3, width: '100%' }}>\n                                <Box\n                                    sx={{\n                                        display: 'flex',\n                                        justifyContent: 'center',\n                                        alignItems: 'center',\n                                        gap: 1.5,\n                                    }}\n                                >\n                                    {currentQuestion &&\n                                        renderFeedbackFlag?.(currentQuestion)}\n                                    <Typography\n                                        variant=\"h5\"\n                                        noWrap\n                                        sx={{\n                                            color: feedbackColor,\n                                            fontWeight: 'bold',\n                                            textShadow: SHADOWS.text,\n                                            maxWidth: '100%',\n                                            overflow: 'hidden',\n                                            textOverflow: 'ellipsis',\n                                        }}\n                                    >\n                                        {feedbackMessage}\n                                    </Typography>\n                                </Box>\n                                {(() => {\n                                    const feedbackContent =\n                                        isCorrect === false &&\n                                        currentQuestion &&\n                                        renderFeedbackOrigin?.(currentQuestion);\n\n                                    return feedbackContent ? (\n                                        <Box\n                                            sx={{\n                                                textAlign: 'center',\n                                                mt: 1,\n                                            }}\n                                        >\n                                            {feedbackContent}\n                                        </Box>\n                                    ) : null;\n                                })()}\n                            </Box>\n                        </Fade>\n                    )}\n                </Card>\n            </Box>\n        </Box>\n    );\n};\n\nexport default QuizGameView;\n","import React from 'react';\nimport { Chip } from '@mui/material';\nimport { COLORS } from '../../config/theme';\n\nconst SkippedBadge: React.FC = () => (\n    <Chip\n        label=\"Skipped\"\n        size=\"small\"\n        variant=\"outlined\"\n        sx={{\n            height: 20,\n            fontSize: '0.75rem',\n            borderColor: COLORS.surface.error,\n            color: COLORS.data.red,\n            fontWeight: 'medium',\n            '& .MuiChip-label': { px: 1 },\n        }}\n    />\n);\n\nexport default SkippedBadge;\n","/**\n * Normalizes a string for comparison.\n * Removes accents, clears \"st.\" to \"saint\", removes leading \"the\",\n * and strips non-alphanumeric characters (keeps dots).\n */\nexport const normalize = (str: string) => {\n    return str\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '') // Remove accents/diacritics\n        .replace(/\\bst\\.(?=\\s|$)/g, 'saint')\n        .replace(/^the\\s+/g, '')\n        .replace(/[^\\w\\s\\.]/g, '') // Keep dots for .codes\n        .trim();\n};\n\n/**\n * Checks if the user input matches the expected string using smart matching rules.\n */\nexport const isSmartMatch = (\n    input: string,\n    expected: string,\n    aliases: Record<string, string[]> = {}\n) => {\n    const ni = normalize(input);\n    const ne = normalize(expected);\n\n    // 1. Exact normalized match\n    if (ni === ne) return true;\n\n    // 2. Predefined Aliases\n    if (aliases[ne]?.map(a => normalize(a)).includes(ni)) return true;\n\n    // 3. Parentheses handling: \"Cocos (Keeling) Islands\" -> \"Cocos Islands\"\n    const withoutParens = normalize(\n        expected.replace(/\\s*\\(.*?\\)\\s*/g, ' ').replace(/\\s+/g, ' ')\n    );\n    if (ni === withoutParens) return true;\n\n    // Also check first part before parens\n    const firstPartParens = normalize(expected.split('(')[0]);\n    if (ni === firstPartParens) return true;\n\n    // 4. \"And\" handling: Match the first part before \"and\"\n    if (ne.includes(' and ')) {\n        const firstPart = normalize(expected.split(' and ')[0]);\n        if (ni === firstPart) return true;\n    }\n\n    return false;\n};\n","import React from 'react';\nimport { Typography, Box } from '@mui/material';\nimport { CCTLD_ALIASES, GAME_CONSTANTS } from './constants';\nimport { normalize, isSmartMatch } from '../utils/quizUtils';\nimport {\n    QuizType,\n    GameMode,\n    QuizSettings,\n    QuizItem,\n    CCTLD,\n    DrivingSide,\n    TelephoneCode,\n    VehicleCode,\n} from '../types/quiz';\n\n// Data imports\nimport cctldsData from '../data/cctlds_enhanced.json';\nimport drivingSideData from '../data/driving_sides.json';\nimport telephoneData from '../data/telephone_codes.json';\nimport vehicleData from '../data/vehicle_registration_codes.json';\n\nexport const QUIZ_CONFIGS: Record<\n    QuizType,\n    {\n        title: string;\n        subtitle: string;\n        infoUrl: string;\n        data: QuizItem[];\n        defaultSettings: QuizSettings;\n        hasModeSelect: boolean;\n        modes?: { value: GameMode; label: string }[];\n        maxQuestionOptions: number[];\n        renderQuestionPrompt: (mode: string) => string;\n        renderQuestionContent: (item: any, mode: string) => React.ReactNode;\n        checkAnswer: (\n            input: string,\n            item: any,\n            settings: QuizSettings\n        ) => { isCorrect: boolean; expected: string; points: number };\n        renderFeedbackOrigin?: (item: any) => React.ReactNode;\n        customGameRender?: (props: any) => React.ReactNode; // For driving side special buttons\n    }\n> = {\n    cctld: {\n        title: 'Internet Domain Quiz',\n        subtitle: 'Test your knowledge of Internet country codes',\n        infoUrl: 'https://en.wikipedia.org/wiki/Country_code_top-level_domain',\n        data: cctldsData as CCTLD[],\n        defaultSettings: {\n            mode: 'toCountry',\n            allowRepeats: false,\n            filterLetter: '',\n            filterLanguage: 'All',\n            maxQuestions: 'All',\n        },\n        hasModeSelect: true,\n        modes: [\n            { value: 'toCountry', label: 'Guess Country (from Code)' },\n            { value: 'toCode', label: 'Guess Code (from Country)' },\n        ],\n        maxQuestionOptions: GAME_CONSTANTS.cctld.questionOptions,\n        renderQuestionPrompt: mode =>\n            mode === 'toCountry'\n                ? 'What country belongs to:'\n                : 'What is the ccTLD for:',\n        renderQuestionContent: (item: CCTLD, mode) => (\n            <Typography\n                variant=\"h1\"\n                sx={{\n                    fontWeight: 'bold',\n                    textAlign: 'center',\n                    fontSize: { xs: '3rem', sm: '4rem' },\n                }}\n            >\n                {mode === 'toCountry' ? item.code : item.country}\n            </Typography>\n        ),\n        checkAnswer: (input, item: CCTLD, settings) => {\n            let correct = false;\n            let expected = '';\n            if (settings.mode === 'toCountry') {\n                expected = item.country;\n                correct = isSmartMatch(input, expected, CCTLD_ALIASES);\n            } else {\n                expected = item.code;\n                let normalizedInput = input.trim();\n                if (!normalizedInput.startsWith('.'))\n                    normalizedInput = '.' + normalizedInput;\n                correct = normalize(normalizedInput) === normalize(expected);\n            }\n            return { isCorrect: correct, expected, points: correct ? 1 : 0 };\n        },\n        renderFeedbackOrigin: (item: CCTLD) => (\n            <Typography\n                variant=\"body2\"\n                color=\"textSecondary\"\n                sx={{ fontStyle: 'italic' }}\n            >\n                Origin:{' '}\n                <Box\n                    component=\"span\"\n                    dangerouslySetInnerHTML={{ __html: item.explanation || '' }}\n                />\n            </Typography>\n        ),\n    },\n    driving_side: {\n        title: 'Driving Side Quiz',\n        subtitle: 'Test your knowledge of global road rules',\n        infoUrl: 'https://en.wikipedia.org/wiki/Left-_and_right-hand_traffic',\n        data: drivingSideData as DrivingSide[],\n        defaultSettings: {\n            mode: 'guessing',\n            allowRepeats: false,\n            filterLetter: '',\n            filterSwitch: 'All',\n            maxQuestions: 'All',\n        },\n        hasModeSelect: false,\n        maxQuestionOptions: GAME_CONSTANTS.cctld.questionOptions, // Using same options\n        renderQuestionPrompt: () => 'They drive on the...',\n        renderQuestionContent: (item: DrivingSide) => (\n            <Box sx={{ textAlign: 'center' }}>\n                <Typography variant=\"h2\" sx={{ fontWeight: 'bold', mb: 2 }}>\n                    {item.country}\n                </Typography>\n                {item.flag && (\n                    <Box\n                        component=\"img\"\n                        src={item.flag}\n                        alt={`Flag of ${item.country} `}\n                        sx={{\n                            height: 80,\n                            width: 'auto',\n                            borderRadius: 1,\n                            boxShadow: 3,\n                            mb: 2,\n                        }}\n                    />\n                )}\n            </Box>\n        ),\n        checkAnswer: (input, item: DrivingSide) => {\n            const normalizedInput = normalize(input);\n            const normalizedCorrect = normalize(item.side);\n            const isCorrect = normalizedInput === normalizedCorrect;\n            return {\n                isCorrect,\n                expected: item.side,\n                points: isCorrect ? 1 : 0,\n            };\n        },\n        renderFeedbackOrigin: (item: DrivingSide) => {\n            const cleanExplanation = (item.explanation || '')\n                .replace(/^Drives on the <b>(Left|Right)<\\/b>\\.?\\s*/i, '')\n                .trim();\n            if (!cleanExplanation) return null;\n            return (\n                <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    sx={{ fontStyle: 'italic' }}\n                >\n                    <Box\n                        component=\"span\"\n                        dangerouslySetInnerHTML={{ __html: cleanExplanation }}\n                    />\n                </Typography>\n            );\n        },\n    },\n    telephone: {\n        title: 'Telephone Code Quiz',\n        subtitle: \"Master the world's calling codes\",\n        infoUrl:\n            'https://en.wikipedia.org/wiki/List_of_telephone_country_codes',\n        data: telephoneData as TelephoneCode[],\n        defaultSettings: {\n            mode: 'toCountry',\n            allowRepeats: false,\n            filterLetter: '',\n            filterZone: 'All',\n            maxQuestions: 'All',\n        },\n        hasModeSelect: true,\n        modes: [\n            { value: 'toCountry', label: 'Guess Country (from Code)' },\n            { value: 'toCode', label: 'Guess Code (from Country)' },\n        ],\n        maxQuestionOptions: GAME_CONSTANTS.telephone.questionOptions,\n        renderQuestionPrompt: mode =>\n            mode === 'toCountry'\n                ? 'What country belongs to:'\n                : 'What is the telephone code for:',\n        renderQuestionContent: (item: TelephoneCode, mode) => (\n            <Typography\n                variant=\"h1\"\n                sx={{\n                    fontWeight: 'bold',\n                    textAlign: 'center',\n                    fontSize: { xs: '2.5rem', sm: '3.5rem' },\n                    wordBreak: 'break-word',\n                }}\n            >\n                {mode === 'toCountry' ? item.code : item.country}\n            </Typography>\n        ),\n        checkAnswer: (input, item: TelephoneCode, settings) => {\n            let correct = false;\n            let expected = '';\n            if (settings.mode === 'toCountry') {\n                expected = item.country;\n                correct = isSmartMatch(input, expected, CCTLD_ALIASES);\n            } else {\n                expected = item.code;\n                let normalizedInput = input.trim();\n                if (!normalizedInput.startsWith('+'))\n                    normalizedInput = '+' + normalizedInput;\n                const norm = (s: string) => s.replace(/[^0-9+]/g, '');\n                correct = norm(normalizedInput) === norm(expected);\n            }\n            return { isCorrect: correct, expected, points: correct ? 1 : 0 };\n        },\n    },\n    vehicle: {\n        title: 'License Plate Quiz',\n        subtitle: 'Identify international vehicle registration codes',\n        infoUrl:\n            'https://en.wikipedia.org/wiki/International_vehicle_registration_code',\n        data: vehicleData as VehicleCode[],\n        defaultSettings: {\n            mode: 'toCountry',\n            allowRepeats: false,\n            filterLetter: '',\n            filterConvention: 'All',\n            maxQuestions: 'All',\n        },\n        hasModeSelect: true,\n        modes: [\n            { value: 'toCountry', label: 'Guess Country (from Code)' },\n            { value: 'toCode', label: 'Guess Code (from Country)' },\n        ],\n        maxQuestionOptions: GAME_CONSTANTS.vehicleRegistration.questionOptions,\n        renderQuestionPrompt: mode =>\n            mode === 'toCountry'\n                ? 'What country belongs to:'\n                : 'What is the vehicle registration code for:',\n        renderQuestionContent: (item: VehicleCode, mode) => (\n            <Typography\n                variant=\"h1\"\n                sx={{\n                    fontWeight: 'bold',\n                    textAlign: 'center',\n                    fontSize: { xs: '2.5rem', sm: '3.5rem' },\n                    wordBreak: 'break-word',\n                }}\n            >\n                {mode === 'toCountry' ? item.code : item.country}\n            </Typography>\n        ),\n        checkAnswer: (input, item: VehicleCode, settings) => {\n            let correct = false;\n            let expected = '';\n            if (settings.mode === 'toCountry') {\n                expected = item.country;\n                correct = isSmartMatch(input, expected, CCTLD_ALIASES);\n            } else {\n                expected = item.code;\n                const norm = (s: string) =>\n                    s\n                        .trim()\n                        .toUpperCase()\n                        .replace(/[^A-Z0-9]/g, '');\n                correct = norm(input) === norm(expected);\n            }\n            return { isCorrect: correct, expected, points: correct ? 1 : 0 };\n        },\n    },\n};\n","import React, { useEffect, useRef } from 'react';\nimport { Button, Typography } from '@mui/material';\nimport { useQuizEngine } from '../../hooks/useQuizEngine';\nimport QuizGameView from './QuizGameView';\nimport { CCTLD, QuizType, QuizSettings, Question } from '../../types/quiz';\nimport { QUIZ_CONFIGS } from '../../config/quizConfig';\nimport { COLORS, SHADOWS } from '../../config/theme';\n\ninterface QuizGameProps {\n    quizType: QuizType;\n    settings: QuizSettings;\n    initialPool: any[];\n    onEndGame: (history: Question<any>[], score: number) => void;\n    onBackToMenu: () => void;\n}\n\nconst QuizGame: React.FC<QuizGameProps> = ({\n    quizType,\n    settings,\n    initialPool,\n    onEndGame,\n    onBackToMenu,\n}) => {\n    const config = QUIZ_CONFIGS[quizType];\n    const { state, actions } = useQuizEngine<any>({\n        initialPool,\n        settings,\n        onEndGame,\n        checkAnswer: config.checkAnswer,\n    });\n\n    const { currentQuestion, showFeedback } = state;\n\n    const inputRef = useRef<HTMLInputElement>(null);\n    const nextButtonRef = useRef<HTMLButtonElement>(null);\n\n    useEffect(() => {\n        if (showFeedback) {\n            nextButtonRef.current?.focus();\n        } else {\n            requestAnimationFrame(() => {\n                inputRef.current?.focus();\n            });\n        }\n    }, [showFeedback, currentQuestion]);\n\n    // Special handling for Driving Side which uses custom component inputs\n    if (quizType === 'driving_side') {\n        return (\n            <QuizGameView\n                gameState={state}\n                actions={actions}\n                onBackToMenu={onBackToMenu}\n                modeLabel=\"Which Side?\"\n                hideInput={true}\n                hideHint={true}\n                renderQuestionPrompt={() =>\n                    config.renderQuestionPrompt(settings.mode)\n                }\n                onKeyDown={e => {\n                    if (state.showFeedback) return;\n                    if (e.key === 'ArrowLeft') {\n                        e.preventDefault();\n                        actions.submitAnswer('Left');\n                    } else if (e.key === 'ArrowRight') {\n                        e.preventDefault();\n                        actions.submitAnswer('Right');\n                    }\n                }}\n                renderQuestionContent={item =>\n                    config.renderQuestionContent(item, settings.mode)\n                }\n                renderCustomActions={(state, actions) => (\n                    <>\n                        <Button\n                            variant=\"contained\"\n                            onClick={() => actions.submitAnswer('Left')}\n                            disabled={state.showFeedback}\n                            sx={{\n                                flex: 1,\n                                py: 1.5,\n                                whiteSpace: 'nowrap',\n                                '&.Mui-disabled': {\n                                    backgroundColor:\n                                        COLORS.interactive.disabled,\n                                    color: COLORS.interactive.disabledText,\n                                    borderColor: 'transparent',\n                                },\n                            }}\n                        >\n                            Left\n                        </Button>\n                        <Button\n                            variant=\"contained\"\n                            onClick={() => actions.submitAnswer('Right')}\n                            disabled={state.showFeedback}\n                            sx={{\n                                flex: 1,\n                                py: 1.5,\n                                whiteSpace: 'nowrap',\n                                '&.Mui-disabled': {\n                                    backgroundColor:\n                                        COLORS.interactive.disabled,\n                                    color: COLORS.interactive.disabledText,\n                                    borderColor: 'transparent',\n                                },\n                            }}\n                        >\n                            Right\n                        </Button>\n                    </>\n                )}\n                renderHint={() => (\n                    <Typography variant=\"body2\">\n                        Think about the region and historical influences.\n                    </Typography>\n                )}\n                renderFeedbackOrigin={config.renderFeedbackOrigin}\n            />\n        );\n    }\n\n    return (\n        <QuizGameView\n            gameState={state}\n            actions={actions}\n            onBackToMenu={onBackToMenu}\n            inputRef={inputRef}\n            nextButtonRef={nextButtonRef}\n            modeLabel={\n                settings.mode === 'toCountry'\n                    ? 'Guessing Country'\n                    : 'Guessing Code'\n            }\n            inputPlaceholder={\n                settings.mode === 'toCountry'\n                    ? 'Type country name...'\n                    : 'Type answer...'\n            }\n            renderQuestionPrompt={() =>\n                config.renderQuestionPrompt(settings.mode)\n            }\n            renderQuestionContent={item =>\n                config.renderQuestionContent(item, settings.mode)\n            }\n            renderHint={item =>\n                quizType === 'cctld' ? (\n                    <Typography\n                        variant=\"body2\"\n                        color=\"textSecondary\"\n                        sx={{\n                            textAlign: 'center',\n                            fontStyle: 'italic',\n                        }}\n                    >\n                        Hint: {(item as CCTLD).language} origin\n                    </Typography>\n                ) : (\n                    <Typography variant=\"body2\" color=\"textSecondary\">\n                        Hint functionality coming soon...\n                    </Typography>\n                )\n            }\n            hideHint={quizType !== 'cctld'}\n            renderFeedbackFlag={item =>\n                item.flag && (\n                    <img\n                        src={item.flag}\n                        alt={`Flag of ${item.country} `}\n                        style={{\n                            height: '24px',\n                            width: 'auto',\n                            borderRadius: '2px',\n                            boxShadow: SHADOWS.sm,\n                        }}\n                    />\n                )\n            }\n            renderFeedbackOrigin={config.renderFeedbackOrigin}\n        />\n    );\n};\n\nexport default QuizGame;\n","import React, { useState, useMemo, useEffect, useRef } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport {\n    Box,\n    Typography,\n    Grid,\n    Button,\n    Fade,\n    TextField,\n    Chip,\n    Card,\n    MenuItem,\n    Select,\n    FormControl,\n    InputLabel,\n    ToggleButtonGroup,\n    ToggleButton,\n    Stack,\n    useTheme,\n    alpha,\n} from '@mui/material';\nimport {\n    CheckCircleRounded as CheckCircleIcon,\n    CancelRounded as CancelIcon,\n    ArrowBackRounded as ArrowBackIcon,\n} from '@mui/icons-material';\nimport { COLORS, SPACING, SHADOWS } from '../config/theme';\nimport {\n    CCTLD_LANGUAGES,\n    TELEPHONE_ZONES,\n    VEHICLE_CONVENTIONS,\n    DRIVING_SIDE_FILTERS,\n} from '../config/constants';\nimport {\n    GameState,\n    QuizSettings,\n    Question as GenericQuestion,\n    QuizType,\n    QuizItem,\n    CCTLD,\n} from '../types/quiz';\nimport { useQuizFilter } from '../hooks/useQuizFilter';\nimport QuizLayout from '../components/Quiz/QuizLayout';\nimport QuizSettingsView from '../components/Quiz/QuizSettingsView';\nimport QuizGameView from '../components/Quiz/QuizGameView';\nimport QuizSummaryView from '../components/Quiz/QuizSummaryView';\nimport { SkippedBadge } from '../components/Quiz';\nimport QuizGame from '../components/Quiz/QuizGame';\n\n// Config import\nimport { QUIZ_CONFIGS } from '../config/quizConfig';\n\n// --- Types ---\ntype Question = GenericQuestion<QuizItem>;\n\n// --- Types ---\n\n// Types moved to ../types/quiz.ts\n\n// --- Constants ---\n\n// QUIZ_CONFIGS moved to ../config/quizConfig.ts\n\n// --- Components ---\n\nconst commonSelectProps = {\n    MenuProps: {\n        BackdropProps: {\n            sx: { backdropFilter: 'none', backgroundColor: 'transparent' },\n        },\n    },\n};\n\nconst WikipediaQuizPage: React.FC = () => {\n    const [searchParams, setSearchParams] = useSearchParams();\n\n    // Derive selected quiz from URL\n    const selectedQuiz = useMemo((): QuizType => {\n        const type = searchParams.get('type');\n        if (type && QUIZ_CONFIGS[type as QuizType]) {\n            return type as QuizType;\n        }\n        return 'cctld';\n    }, [searchParams]);\n\n    const [gameState, setGameState] = useState<GameState>('menu');\n\n    // Initialize settings based on selected quiz\n    const [settings, setSettings] = useState<QuizSettings>(\n        QUIZ_CONFIGS[selectedQuiz].defaultSettings\n    );\n\n    const [lastScore, setLastScore] = useState(0);\n    const [lastHistory, setLastHistory] = useState<Question[]>([]);\n\n    // Reset settings and game state when quiz type changes (via URL)\n    useEffect(() => {\n        setGameState('menu');\n        setSettings(QUIZ_CONFIGS[selectedQuiz].defaultSettings);\n    }, [selectedQuiz]);\n\n    // URL sync\n    const handleQuizChange = (\n        _event: React.MouseEvent<HTMLElement>,\n        newQuiz: QuizType | null\n    ) => {\n        if (newQuiz !== null) {\n            setSearchParams({ type: newQuiz });\n        }\n    };\n\n    const activeConfig = QUIZ_CONFIGS[selectedQuiz];\n\n    // Update document title\n    useEffect(() => {\n        document.title = `${activeConfig.title} | Bangyen`;\n    }, [activeConfig.title]);\n\n    const filteredPool = useQuizFilter({\n        data: activeConfig.data,\n        quizType: selectedQuiz,\n        settings,\n    });\n\n    const handleStart = () => {\n        if (filteredPool.length > 0) {\n            setGameState('playing');\n        }\n    };\n\n    const handleEndGame = (history: Question[], score: number) => {\n        setLastHistory(history);\n        setLastScore(score);\n        setGameState('summary');\n    };\n\n    const handleBackToMenu = () => {\n        setGameState('menu');\n    };\n\n    return (\n        <QuizLayout title=\"Wikipedia Quizzes\" infoUrl={activeConfig.infoUrl}>\n            {gameState === 'menu' && (\n                <Fade in>\n                    <Box\n                        sx={{\n                            width: '100%',\n                            display: 'flex',\n                            flexDirection: 'column',\n                            alignItems: 'center',\n                        }}\n                    >\n                        {/* Quiz Type Selector Above */}\n                        <Box\n                            sx={{\n                                mb: 4,\n                                width: '100%',\n                                display: 'flex',\n                                justifyContent: 'center',\n                                overflowX: 'auto',\n                                pb: 1, // Add padding for scrollbar spacing if needed\n                            }}\n                        >\n                            <ToggleButtonGroup\n                                value={selectedQuiz}\n                                exclusive\n                                onChange={handleQuizChange}\n                                aria-label=\"quiz selection\"\n                                sx={{\n                                    backgroundColor:\n                                        COLORS.interactive.disabled,\n                                    borderRadius: SPACING.borderRadius.full,\n                                    p: 0.5,\n                                    '& .MuiToggleButton-root': {\n                                        borderRadius: SPACING.borderRadius.full,\n                                        px: { xs: 2, sm: 3 },\n                                        py: 1,\n                                        border: 'none',\n                                        color: COLORS.text.secondary,\n                                        fontSize: {\n                                            xs: '0.8rem',\n                                            sm: '0.9rem',\n                                        },\n                                        whiteSpace: 'nowrap',\n                                        fontWeight: 'medium',\n                                        textTransform: 'none',\n                                        '&.Mui-selected': {\n                                            backgroundColor:\n                                                COLORS.primary.main,\n                                            color: COLORS.text.primary,\n                                            boxShadow: SHADOWS.md,\n                                            '&:hover': {\n                                                backgroundColor:\n                                                    COLORS.primary.light,\n                                            },\n                                        },\n                                        '&:hover': {\n                                            backgroundColor:\n                                                COLORS.interactive.disabled,\n                                        },\n                                    },\n                                }}\n                            >\n                                <ToggleButton value=\"cctld\">\n                                    Domains\n                                </ToggleButton>\n                                <ToggleButton value=\"driving_side\">\n                                    Driving Side\n                                </ToggleButton>\n                                <ToggleButton value=\"telephone\">\n                                    Telephone\n                                </ToggleButton>\n                                <ToggleButton value=\"vehicle\">\n                                    Plates\n                                </ToggleButton>\n                            </ToggleButtonGroup>\n                        </Box>\n\n                        <QuizSettingsView\n                            settings={settings}\n                            onUpdate={setSettings}\n                            onStart={handleStart}\n                            maxQuestionOptions={activeConfig.maxQuestionOptions}\n                            title=\"Quiz Settings\"\n                        >\n                            {/* Slot 1: Specialized Filters (Row 1 Left) */}\n                            {selectedQuiz === 'cctld' && (\n                                <Grid item xs={12} md={6}>\n                                    <FormControl fullWidth>\n                                        <InputLabel>Language Filter</InputLabel>\n                                        <Select\n                                            value={settings.filterLanguage}\n                                            label=\"Language Filter\"\n                                            onChange={e =>\n                                                setSettings({\n                                                    ...settings,\n                                                    filterLanguage:\n                                                        e.target.value,\n                                                })\n                                            }\n                                            sx={{\n                                                color: COLORS.text.primary,\n                                                '.MuiOutlinedInput-notchedOutline':\n                                                    {\n                                                        borderColor:\n                                                            COLORS.border\n                                                                .subtle,\n                                                    },\n                                            }}\n                                            {...commonSelectProps}\n                                        >\n                                            {CCTLD_LANGUAGES.map(lang => (\n                                                <MenuItem\n                                                    key={lang}\n                                                    value={lang}\n                                                >\n                                                    {lang}\n                                                </MenuItem>\n                                            ))}\n                                        </Select>\n                                    </FormControl>\n                                </Grid>\n                            )}\n\n                            {selectedQuiz === 'telephone' && (\n                                <Grid item xs={12} md={6}>\n                                    <FormControl fullWidth>\n                                        <InputLabel>Zone Filter</InputLabel>\n                                        <Select\n                                            value={settings.filterZone || 'All'}\n                                            label=\"Zone Filter\"\n                                            onChange={e =>\n                                                setSettings({\n                                                    ...settings,\n                                                    filterZone: e.target.value,\n                                                })\n                                            }\n                                            sx={{\n                                                color: COLORS.text.primary,\n                                                '.MuiOutlinedInput-notchedOutline':\n                                                    {\n                                                        borderColor:\n                                                            COLORS.border\n                                                                .subtle,\n                                                    },\n                                            }}\n                                            {...commonSelectProps}\n                                        >\n                                            {TELEPHONE_ZONES.map(zone => (\n                                                <MenuItem\n                                                    key={zone.value}\n                                                    value={zone.value}\n                                                >\n                                                    {zone.label}\n                                                </MenuItem>\n                                            ))}\n                                        </Select>\n                                    </FormControl>\n                                </Grid>\n                            )}\n\n                            {selectedQuiz === 'vehicle' && (\n                                <Grid item xs={12} md={6}>\n                                    <FormControl fullWidth>\n                                        <InputLabel>\n                                            Convention Filter\n                                        </InputLabel>\n                                        <Select\n                                            value={\n                                                settings.filterConvention ||\n                                                'All'\n                                            }\n                                            label=\"Convention Filter\"\n                                            onChange={e =>\n                                                setSettings({\n                                                    ...settings,\n                                                    filterConvention:\n                                                        e.target.value,\n                                                })\n                                            }\n                                            sx={{\n                                                color: COLORS.text.primary,\n                                                '.MuiOutlinedInput-notchedOutline':\n                                                    {\n                                                        borderColor:\n                                                            COLORS.border\n                                                                .subtle,\n                                                    },\n                                            }}\n                                            {...commonSelectProps}\n                                        >\n                                            {VEHICLE_CONVENTIONS.map(conv => (\n                                                <MenuItem\n                                                    key={conv.value}\n                                                    value={conv.value}\n                                                >\n                                                    {conv.label}\n                                                </MenuItem>\n                                            ))}\n                                        </Select>\n                                    </FormControl>\n                                </Grid>\n                            )}\n\n                            {selectedQuiz === 'driving_side' && (\n                                <Grid item xs={12} md={6}>\n                                    <FormControl fullWidth>\n                                        <InputLabel>Switch Filter</InputLabel>\n                                        <Select\n                                            value={\n                                                settings.filterSwitch || 'All'\n                                            }\n                                            label=\"Switch Filter\"\n                                            onChange={e =>\n                                                setSettings({\n                                                    ...settings,\n                                                    filterSwitch:\n                                                        e.target.value,\n                                                })\n                                            }\n                                            sx={{\n                                                color: COLORS.text.primary,\n                                                '.MuiOutlinedInput-notchedOutline':\n                                                    {\n                                                        borderColor:\n                                                            COLORS.border\n                                                                .subtle,\n                                                    },\n                                            }}\n                                            {...commonSelectProps}\n                                        >\n                                            {DRIVING_SIDE_FILTERS.map(f => (\n                                                <MenuItem\n                                                    key={f.value}\n                                                    value={f.value}\n                                                >\n                                                    {f.label}\n                                                </MenuItem>\n                                            ))}\n                                        </Select>\n                                    </FormControl>\n                                </Grid>\n                            )}\n\n                            {/* Slot 2: Question Limit (Row 1 Right) */}\n                            <Grid item xs={12} md={6}>\n                                <FormControl fullWidth>\n                                    <InputLabel>Question Limit</InputLabel>\n                                    <Select\n                                        value={settings.maxQuestions}\n                                        label=\"Question Limit\"\n                                        onChange={e =>\n                                            setSettings({\n                                                ...settings,\n                                                maxQuestions: e.target.value as\n                                                    | number\n                                                    | 'All',\n                                            })\n                                        }\n                                        sx={{\n                                            color: COLORS.text.primary,\n                                            '.MuiOutlinedInput-notchedOutline':\n                                                {\n                                                    borderColor:\n                                                        COLORS.border.subtle,\n                                                },\n                                        }}\n                                        {...commonSelectProps}\n                                    >\n                                        <MenuItem value=\"All\">All</MenuItem>\n                                        {activeConfig.maxQuestionOptions.map(\n                                            opt => (\n                                                <MenuItem key={opt} value={opt}>\n                                                    {opt}\n                                                </MenuItem>\n                                            )\n                                        )}\n                                    </Select>\n                                </FormControl>\n                            </Grid>\n\n                            {/* Slot 3: Letter Filter (Row 2 Left) */}\n                            <Grid item xs={12} md={6}>\n                                <TextField\n                                    fullWidth\n                                    label=\"Filter by Letter(s)\"\n                                    value={settings.filterLetter}\n                                    onChange={e =>\n                                        setSettings({\n                                            ...settings,\n                                            filterLetter: e.target.value,\n                                        })\n                                    }\n                                    helperText=\"Comma separated (e.g. a, b)\"\n                                    InputLabelProps={{\n                                        style: { color: COLORS.text.secondary },\n                                    }}\n                                    onKeyDown={e => {\n                                        if (e.key === 'Enter') {\n                                            handleStart();\n                                        }\n                                    }}\n                                    sx={{\n                                        input: { color: COLORS.text.primary },\n                                        label: { color: COLORS.text.secondary },\n                                        '& .MuiOutlinedInput-root': {\n                                            '& fieldset': {\n                                                borderColor:\n                                                    COLORS.border.subtle,\n                                            },\n                                            '&:hover fieldset': {\n                                                borderColor:\n                                                    COLORS.primary.main,\n                                            },\n                                        },\n                                    }}\n                                />\n                            </Grid>\n\n                            {/* Slot 4: Game Mode (Row 2 Right - Optional) */}\n                            {activeConfig.hasModeSelect &&\n                            activeConfig.modes ? (\n                                <Grid item xs={12} md={6}>\n                                    <FormControl fullWidth>\n                                        <InputLabel>Game Mode</InputLabel>\n                                        <Select\n                                            value={settings.mode}\n                                            label=\"Game Mode\"\n                                            onChange={e =>\n                                                setSettings({\n                                                    ...settings,\n                                                    mode: e.target.value as any,\n                                                })\n                                            }\n                                            sx={{\n                                                color: COLORS.text.primary,\n                                                '.MuiOutlinedInput-notchedOutline':\n                                                    {\n                                                        borderColor:\n                                                            COLORS.border\n                                                                .subtle,\n                                                    },\n                                            }}\n                                            {...commonSelectProps}\n                                        >\n                                            {activeConfig.modes.map(m => (\n                                                <MenuItem\n                                                    key={m.value}\n                                                    value={m.value}\n                                                >\n                                                    {m.label}\n                                                </MenuItem>\n                                            ))}\n                                        </Select>\n                                    </FormControl>\n                                </Grid>\n                            ) : (\n                                <Grid\n                                    item\n                                    xs={12}\n                                    md={6}\n                                    sx={{\n                                        display: { xs: 'none', md: 'block' },\n                                    }}\n                                >\n                                    <Box sx={{ height: 56 }} />\n                                </Grid>\n                            )}\n                        </QuizSettingsView>\n                        <Box\n                            sx={{\n                                display: 'flex',\n                                justifyContent: 'center',\n                                mt: 2,\n                            }}\n                        >\n                            <Button\n                                variant=\"contained\"\n                                size=\"large\"\n                                onClick={handleStart}\n                                disabled={filteredPool.length === 0}\n                                sx={{\n                                    px: 8,\n                                    py: 1.5,\n                                    fontSize: '1.2rem',\n                                    borderRadius: SPACING.borderRadius.full,\n                                    fontWeight: 'bold',\n                                    letterSpacing: '0.05em',\n                                    minWidth: 300,\n                                    whiteSpace: 'nowrap',\n                                    '&.Mui-disabled': {\n                                        backgroundColor:\n                                            COLORS.interactive.disabled,\n                                        color: COLORS.interactive.disabledText,\n                                    },\n                                }}\n                            >\n                                {filteredPool.length === 0\n                                    ? 'No Questions Found'\n                                    : `Start Quiz (${filteredPool.length})`}\n                            </Button>\n                        </Box>\n                    </Box>\n                </Fade>\n            )}\n\n            {gameState === 'playing' && (\n                <QuizGame\n                    quizType={selectedQuiz}\n                    settings={settings}\n                    initialPool={filteredPool}\n                    onEndGame={handleEndGame}\n                    onBackToMenu={handleBackToMenu}\n                />\n            )}\n\n            {gameState === 'summary' && (\n                <QuizSummaryView<any>\n                    score={lastScore}\n                    history={lastHistory}\n                    onRestart={handleStart}\n                    onBackToMenu={handleBackToMenu}\n                    renderHistoryItem={(q, i) => (\n                        <Card\n                            key={i}\n                            sx={{\n                                p: 2,\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'flex-start',\n                                bgcolor:\n                                    q.pointsEarned === 1\n                                        ? COLORS.surface.success\n                                        : q.pointsEarned === 0.5\n                                          ? COLORS.surface.warning\n                                          : COLORS.surface.error,\n                                border: `1px solid ${COLORS.border.subtle} `,\n                                flexShrink: 0,\n                            }}\n                        >\n                            <Box\n                                sx={{ textAlign: 'left', flex: 1, minWidth: 0 }}\n                            >\n                                <Box\n                                    sx={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        gap: 1,\n                                        mb: 1,\n                                    }}\n                                >\n                                    {q.item.flag && (\n                                        <img\n                                            src={q.item.flag}\n                                            alt={`Flag of ${q.item.country} `}\n                                            style={{\n                                                height: '16px',\n                                                width: 'auto',\n                                                borderRadius: '1px',\n                                            }}\n                                        />\n                                    )}\n                                    <Typography\n                                        variant=\"body1\"\n                                        fontWeight=\"bold\"\n                                        noWrap\n                                    >\n                                        {selectedQuiz === 'driving_side'\n                                            ? q.item.country\n                                            : settings.mode === 'toCountry'\n                                              ? q.item.code\n                                              : q.item.country}\n                                    </Typography>\n                                </Box>\n                                <Typography\n                                    variant=\"body2\"\n                                    color=\"textSecondary\"\n                                    noWrap\n                                >\n                                    Answer:{' '}\n                                    {selectedQuiz === 'driving_side'\n                                        ? q.item.side\n                                        : settings.mode === 'toCountry'\n                                          ? q.item.country\n                                          : q.item.code}\n                                </Typography>\n                                {activeConfig.renderFeedbackOrigin && (\n                                    <Box sx={{ mt: 0.5, opacity: 0.8 }}>\n                                        {activeConfig.renderFeedbackOrigin(\n                                            q.item\n                                        )}\n                                    </Box>\n                                )}\n                            </Box>\n\n                            <Box\n                                sx={{\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'flex-end',\n                                    gap: 1,\n                                    flexShrink: 0,\n                                    ml: 2,\n                                }}\n                            >\n                                <Typography\n                                    variant=\"body2\"\n                                    sx={{\n                                        color:\n                                            q.pointsEarned === 1\n                                                ? COLORS.data.green\n                                                : q.pointsEarned === 0.5\n                                                  ? COLORS.data.amber\n                                                  : COLORS.data.red,\n                                        fontWeight:\n                                            q.pointsEarned > 0\n                                                ? 'bold'\n                                                : 'normal',\n                                        maxWidth: '150px',\n                                        whiteSpace: 'nowrap',\n                                        overflow: 'hidden',\n                                        textOverflow: 'ellipsis',\n                                        display: 'block',\n                                        fontSize: '0.75rem',\n                                    }}\n                                >\n                                    {(() => {\n                                        const answer = q.userAnswer?.trim();\n                                        if (!answer) return <SkippedBadge />;\n\n                                        let normalizedAnswer = answer;\n                                        if (selectedQuiz === 'cctld') {\n                                            if (settings.mode === 'toCode') {\n                                                normalizedAnswer = (\n                                                    normalizedAnswer.startsWith(\n                                                        '.'\n                                                    )\n                                                        ? normalizedAnswer\n                                                        : '.' + normalizedAnswer\n                                                ).toLowerCase();\n                                            } else {\n                                                normalizedAnswer =\n                                                    normalizedAnswer.toUpperCase();\n                                            }\n                                        } else if (\n                                            selectedQuiz === 'telephone'\n                                        ) {\n                                            if (settings.mode === 'toCode') {\n                                                normalizedAnswer =\n                                                    normalizedAnswer.startsWith(\n                                                        '+'\n                                                    )\n                                                        ? normalizedAnswer.toUpperCase()\n                                                        : '+' +\n                                                          normalizedAnswer.toUpperCase();\n                                            } else {\n                                                normalizedAnswer =\n                                                    normalizedAnswer.toUpperCase();\n                                            }\n                                        } else if (selectedQuiz === 'vehicle') {\n                                            normalizedAnswer =\n                                                normalizedAnswer.toUpperCase();\n                                        } else if (\n                                            selectedQuiz === 'driving_side'\n                                        ) {\n                                            normalizedAnswer =\n                                                normalizedAnswer.toUpperCase();\n                                        }\n\n                                        return (\n                                            <Typography\n                                                component=\"span\"\n                                                variant=\"inherit\"\n                                            >\n                                                {normalizedAnswer}\n                                                {q.pointsEarned === 0.5 &&\n                                                    ' (0.5 pts)'}\n                                            </Typography>\n                                        );\n                                    })()}\n                                </Typography>\n                                {q.pointsEarned === 1 ? (\n                                    <CheckCircleIcon\n                                        fontSize=\"small\"\n                                        color=\"success\"\n                                    />\n                                ) : q.pointsEarned === 0.5 ? (\n                                    <CheckCircleIcon\n                                        fontSize=\"small\"\n                                        sx={{\n                                            color: COLORS.data.amber,\n                                        }}\n                                    />\n                                ) : (\n                                    q.userAnswer?.trim() && (\n                                        <CancelIcon\n                                            fontSize=\"small\"\n                                            color=\"error\"\n                                        />\n                                    )\n                                )}\n                            </Box>\n                        </Card>\n                    )}\n                />\n            )}\n        </QuizLayout>\n    );\n};\n\nexport default WikipediaQuizPage;\n","import { useMemo } from 'react';\nimport { QuizType, QuizSettings, QuizItem } from '../types/quiz';\n\ninterface UseQuizFilterProps {\n    data: QuizItem[];\n    quizType: QuizType;\n    settings: QuizSettings;\n}\n\nexport const useQuizFilter = ({\n    data,\n    quizType,\n    settings,\n}: UseQuizFilterProps) => {\n    const filteredPool = useMemo(() => {\n        let filtered = data;\n\n        // Language Filter (only valid for cctld really, but generic check)\n        if (\n            settings.filterLanguage &&\n            settings.filterLanguage !== 'All' &&\n            quizType === 'cctld'\n        ) {\n            if (settings.filterLanguage === 'Non-English') {\n                filtered = filtered.filter(\n                    (item: any) => item.language !== 'English'\n                );\n            } else {\n                filtered = filtered.filter(\n                    (item: any) => item.language === settings.filterLanguage\n                );\n            }\n        }\n\n        // Zone Filter (Telephone only)\n        if (\n            settings.filterZone &&\n            settings.filterZone !== 'All' &&\n            quizType === 'telephone'\n        ) {\n            const zones = settings.filterZone.split(',');\n            filtered = filtered.filter((item: any) =>\n                zones.some((z: string) => item.code.startsWith(`+${z}`))\n            );\n        }\n\n        // Vehicle Convention Filter\n        if (\n            settings.filterConvention &&\n            settings.filterConvention !== 'All' &&\n            quizType === 'vehicle'\n        ) {\n            filtered = filtered.filter(\n                (item: any) =>\n                    item.conventions &&\n                    item.conventions.includes(Number(settings.filterConvention))\n            );\n        }\n\n        // Driving Side Switch Filter\n        if (\n            settings.filterSwitch &&\n            settings.filterSwitch !== 'All' &&\n            quizType === 'driving_side'\n        ) {\n            filtered = filtered.filter((item: any) =>\n                settings.filterSwitch === 'Switched'\n                    ? item.switched\n                    : !item.switched\n            );\n        }\n\n        // Letter Filter\n        if (settings.filterLetter) {\n            let letters = settings.filterLetter\n                .toLowerCase()\n                .split(',')\n                .map((l: string) => l.trim())\n                .filter((l: string) => l);\n\n            // Special handling for legacy split (spaces) if singular comma usage\n            if (letters.length <= 1 && !settings.filterLetter.includes(',')) {\n                const spaceSplit = settings.filterLetter\n                    .toLowerCase()\n                    .split(/\\s+/)\n                    .filter((l: string) => l);\n                if (spaceSplit.length > 1) {\n                    letters = spaceSplit;\n                } else {\n                    letters = settings.filterLetter\n                        .toLowerCase()\n                        .split('')\n                        .filter((l: string) => l.trim());\n                }\n            }\n\n            if (letters.length > 0) {\n                filtered = filtered.filter((item: any) => {\n                    let text = '';\n                    if (quizType === 'cctld') {\n                        text =\n                            settings.mode === 'toCountry'\n                                ? item.code.toLowerCase().replace('.', '')\n                                : item.country.toLowerCase();\n                    } else if (quizType === 'driving_side') {\n                        text = item.country.toLowerCase();\n                    } else if (quizType === 'telephone') {\n                        text = item.country.toLowerCase();\n                    } else if (quizType === 'vehicle') {\n                        text =\n                            settings.mode === 'toCountry'\n                                ? item.code.toLowerCase()\n                                : item.country.toLowerCase();\n                    }\n                    return letters.some((l: string) => text.startsWith(l));\n                });\n            }\n        }\n\n        if (settings.maxQuestions !== 'All') {\n            return [...filtered]\n                .sort(() => Math.random() - 0.5)\n                .slice(0, settings.maxQuestions as number);\n        }\n        return filtered;\n    }, [data, quizType, settings]);\n\n    return filteredPool;\n};\n","import { ROUTES } from '../config/constants';\n\nexport { default as Home } from './Home';\nexport { default as Error } from './Error';\nexport { default as Snake } from './Snake';\nexport { default as Lights_Out } from './Lights/LightsOut';\nexport { default as ZSharp } from './ZSharp';\nexport { default as Oligopoly } from './Oligopoly';\nexport { default as Interpreters } from './Interpreters';\nexport { default as WikipediaQuiz } from './WikipediaQuizPage';\n\nexport const pages = ROUTES.pages;\n"],"names":["GlassCard","forwardRef","_ref","ref","children","padding","SPACING","md","sx","className","interactive","props","_objectWithoutProperties","_excluded","_jsx","Box","_objectSpread","concat","COMPONENT_VARIANTS","interactiveCard","card","Section","id","paddingY","lg","paddingX","maxWidth","Container","margin","HeroContainer","_ref3","paddingBottom","_excluded3","flex","flexCenter","paddingTop","xs","sm","overflowX","PROJECT_CATEGORIES","research","title","icon","Psychology","color","COLORS","data","green","projects","ZSharp","path","description","technology","Oligopoly","games","GamepadRounded","primary","main","Snake","Lights_Out","collections","Code","amber","Interpreters","Wikipedia","ProjectDropdown","Object","entries","map","categoryKey","category","IconComponent","_jsxs","marginBottom","display","alignItems","gap","position","content","bottom","left","right","height","backgroundColor","disabled","fontSize","opacity","Typography","text","secondary","fontWeight","textTransform","letterSpacing","fontFamily","_ref2","projectName","project","MenuItem","component","Link","to","borderRadius","minHeight","transition","flexDirection","hover","transform","selected","outline","ring","focus","ringOffset","lineHeight","replace","MenuButton","anchor","setAnchor","useState","handleClick","event","currentTarget","clickHandler","handleClose","closeHandler","open","Boolean","define","value","undefined","TooltipButton","Icon","ViewModuleRounded","onClick","Menu","anchorEl","disableAutoFocusItem","BackdropProps","backdropFilter","marginLeft","marginTop","width","surface","glass","border","subtle","boxShadow","SHADOWS","onClose","MenuListProps","transformOrigin","horizontal","vertical","anchorOrigin","Home","useEffect","document","PAGE_TITLES","home","Grid","container","background","boxSizing","top","zIndex","justifyContent","href","URLS","githubProfile","target","rel","GitHub","spacing","size","Fade","in","timeout","TYPOGRAPHY","body","semibold","bold","wordBreak","hyphens","PERSONAL_INFO","name","LocationOn","medium","location","flexWrap","element","getElementById","scrollIntoView","behavior","block","inline","full","ANIMATIONS","cursor","ArrowForward","subheading","gridTemplateColumns","SKILLS","skill","index","ICON_MAP","Work","minWidth","overflow","whiteSpace","textOverflow","flexShrink","Button","variant","startIcon","textDecoration","endIcon","h2","textAlign","PUBLICATIONS","publication","url","caption","OpenInNew","conference","PROJECTS","Error","error","HomeRounded","getSpace","CALCULATION","spaceDivisor","convertPixels","space","pixel","pixelMultiplier","rows","Math","floor","cols","getDirection","arrow","toLowerCase","gridMove","start","jump","max","getWindow","innerWidth","innerHeight","window","getContainer","current","offsetHeight","offsetWidth","useWindow","getSize","setSize","addEventListener","addEvent","removeEventListener","removeEvent","handleResize","useSize","useContainer","initialSize","prevSizeRef","useRef","newSize","prevSize","useMobile","useMediaQuery","theme","breakpoints","down","globalTimer","globalRepeat","globalSpeed","useTimer","delay","repeat","speed","create","useCallback","newRepeat","newSpeed","clearInterval","setInterval","clear","useKeys","oldHandler","handler","targetHandler","useCache","getState","cache","processingRef","getStateRef","type","payload","states","PROCESSING","doubleProcessingPrevention","curr","length","state","next","push","result","setTimeout","resetDelay","prevResult","Cell","rest","remSize","radius","CELL_SIZE","divisor","fontSizeMultiplier","combined","Row","cellProps","Array","from","WrappedCell","_","j","_createElement","key","CustomGrid","_excluded2","auto","rem","getRow","i","role","getRandom","random","mapBoard","board","change","newBoard","cell","head","reduceBoard","velocity","buffer","exclude","pos","addNext","first","handleAction","action","createTimer","createKeys","GAME_CONSTANTS","snake","initialLength","segmentSize","randomMovesEnabled","setRandomMovesEnabled","randomMovesRef","showArrows","setShowArrows","useMemo","initial","initialVelocity","dispatch","useReducer","controlHandler","controls","arrowPrefix","chooseColor","row","col","dark","wrapDispatch","Controls","onRandom","randomEnabled","hide","ArrowsButton","show","setShow","Board","frontProps","backProps","Centered","useGetters","getTile","palette","getColor","front","back","getBorder","self","upCheck","downCheck","leftCheck","rightCheck","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","borderHandler","getFiller","topLeft","topRight","botLeft","botRight","total","Number","fillerHandler","getGrid","fill","flipAdj","grid","newGrid","randomize","r","c","solverCache","getNextMove","lastRow","some","solution","topRowIndices","bottomStr","join","currentBottomStr","solveLastRow","handleBoard","moves","score","flat","flatMap","includes","forEach","m","newRows","newCols","countBits","num","count","multiplySym","matrixA","matrixB","output","rowA","outputRow","getIdentity","symmetricPow","matrix","power","k","addSym","sortMatrices","identity","sorted","keys","sort","a","b","getProduct","input","getMatrix","product","poly","degree","evalPolynomial","prev","double","getPolynomial","inverse","original","inverted","pow","alt","invertMatrix","binary","parseInt","chaseLights","dims","newStates","at","fillRow","blank","inputStates","outputStates","last","extendBack","extend","getStates","boardStates","before","unshift","after","propHandler","getter","frames","percent","getFrames","animation","getRange","rowTiles","dRange","lRange","Bifold","Title","Example","mobile","boardTiles","gridTiles","inputTiles","outputTiles","s","getBoard","getInput","getOutput","TypedGlassCard","useHandler","Info","toggleOpen","isMobile","isLargeScreen","setRow","newRow","res","inputGetters","outputGetters","inputProps","getters","toggleTile","style","CircleRounded","stopPropagation","outputProps","Backdrop","maxHeight","mx","elevated","pt","pb","px","gutterBottom","mb","KeyboardArrowDown","mr","ml","Calculate","Replay","getFrontProps","LightsOut","gridSizes","desktop","lightsOut","moveQueue","setMoveQueue","React","nextMove","remaining","clearTimeout","PauseRounded","PlayArrowRounded","RandomButton","InfoRounded","_viewTypes$find","_viewTypes$find2","subtitle","githubUrl","chartData","chartConfig","lines","xAxisKey","yAxisFormatter","toFixed","yAxisDomain","dualYAxis","rightYAxisFormatter","rightYAxisDomain","tooltipLabelFormatter","tooltipFormatter","viewTypes","currentViewType","onViewTypeChange","loading","loadingMessage","onReset","resetLabel","chartTitle","currentData","getCurrentChartData","currentView","find","view","dataProcessor","currentChartConfig","IconButton","normal","CHART_DIMENSIONS","ResponsiveContainer","LineChart","CartesianGrid","strokeDasharray","CHART_FORMATTING","strokeDashArray","stroke","XAxis","dataKey","tick","YAxis","yAxisId","tickFormatter","domain","orientation","RechartsTooltip","contentStyle","labelFormatter","formatter","line","Line","strokeWidth","dot","defaultStrokeWidth","dotRadius","SettingsRounded","light","min","viewType","borderColor","borderWidth","borderStyle","label","Refresh","control","ToggleButtonGroup","exclusive","onChange","e","newValue","borderLeft","hoverColor","options","option","ToggleButton","generateFallbackData","ZSHARP_DEFAULTS","maxEpochs","sgdAccuracy","baseAccuracy","maxAccuracy","zsharpAccuracy","improvement","sgdLoss","baseLoss","minLoss","zsharpLoss","lossReduction","epoch","sgd","zsharp","setChartData","setLoading","setViewType","async","_realData$SGDBaselin","_realData$ZSharp","_realData$SGDBaselin2","_realData$ZSharp2","DecompressionStream","response","fetch","ok","status","compressedData","arrayBuffer","decompressedData","Response","ReadableStream","controller","decompressionStream","writer","writable","getWriter","reader","readable","getReader","write","then","close","pump","read","done","enqueue","realData","JSON","parse","sgdAccuracies","train_accuracies","zsharpAccuracies","sgdLosses","train_losses","zsharpLosses","PERCENTAGE","loadRealZSharpData","console","loadData","BarChartRounded","multiplier","TrendingUpRounded","point","ShowChartRounded","AnalyticsRounded","prevPoint","ResearchDemo","zsharpRepo","filterMatrixData","matrixData","numFirms","modelType","demandElasticity","basePrice","collusionEnabled","generateFallbackOligopolyData","filtered","filter","item","num_firms","model_type","demand_elasticity","base_price","collusion_enabled","round","slice","oligopoly","maxRounds","sim","simulation","price","fallbackPrice","sin","priceFrequency","priceAmplitude","hhi","fallbackHHI","hhiFrequency","hhiAmplitude","collusion","collusionStart","collusionEnd","setNumFirms","defaultFirms","setDemandElasticity","defaultElasticity","setBasePrice","defaultBasePrice","marketData","setMarketData","setMatrixData","modelTypes","cournot","isArray","loadRealSimulationMatrix","initialData","filteredData","BusinessRounded","AttachMoneyRounded","oligopolyRepo","resetToDefaults","EditorContext","createContext","Text","userSelect","Program","memo","compact","editorContext","useContext","code","CompactDisplay","CodeRounded","pointer","Display","Tape","tape","tapeFlag","DataArrayRounded","Output","outFlag","outputArray","TextFieldsRounded","Register","_ref4","register","regFlag","PlusOneRounded","_ref5","values","val","ind","Scrollable","_ref6","Chip","String","_ref8","Toolbar","notMobile","link","pause","fastForward","TimerButton","buttonData","Reset","FirstPageRounded","flag","LastPageRounded","Previous","NavigateBeforeRounded","Next","NavigateNextRounded","buttons","ffData","handleToolbar","newState","nextIter","update","select","updateHandler","pauseStateMap","TIMER","defaultSpeed","newType","end","resetPayload","TextArea","readOnly","infoLabel","fillValue","placeholder","handleChange","textFieldProps","defaultValue","TextField","slotProps","inputLabel","shrink","htmlInput","fullWidth","multiline","Editor","sideProps","navigation","leftProps","contentProps","overflowY","fields","gridSize","textCache","newText","clean","TextEditor","runner","containerRef","interpreter","handleChangeWrapper","context","Provider","memoizedRunner","char","memoizedClean","prompt","charCodeAt","fromCharCode","cleanInput","GridArea","cellStyles","bg","info","getCellStyles","cellStyle","resetState","handleKeys","resize","finalRows","finalCols","substring","padEnd","gridCache","GridEditor","_state$grid","clearKeys","square","useWrappers","split","getDistance","x","y","xPos","yPos","xWidth","yWidth","differ","abs","getClosest","warp","compare","getComparison","arrows","indexOf","lastIndexOf","rand","sum","ROUTES","interpreters","InterpreterNavigation","active","_event","newAlignment","p","py","searchParams","setSearchParams","useSearchParams","get","renderInterpreter","Stun_Step","Suffolk","WII2D","Back","infoUrl","MuiGrid","InfoIcon","HomeIcon","settings","onUpdate","onStart","maxQuestionOptions","Card","history","onRestart","onBackToMenu","renderHistoryItem","RefreshIcon","ArrowBackIcon","align","Stack","q","gameState","actions","renderQuestionPrompt","renderQuestionContent","renderHint","renderFeedbackFlag","renderFeedbackOrigin","inputPlaceholder","inputRef","nextButtonRef","modeLabel","hideInput","hideHint","renderCustomActions","onKeyDown","currentQuestion","inputValue","showFeedback","feedbackMessage","isCorrect","totalQuestions","showHint","setInputValue","handleSubmit","handleSkip","toggleHint","handleGlobalKeyDown","preventDefault","trim","feedbackColor","mt","hasInitialized","LinearProgress","stringify","onSubmit","autoComplete","direction","disabledText","noWrap","textShadow","feedbackContent","SkippedBadge","red","normalize","str","isSmartMatch","expected","_aliases$ne","aliases","arguments","ni","ne","QUIZ_CONFIGS","cctld","cctldsData","defaultSettings","mode","allowRepeats","filterLetter","filterLanguage","maxQuestions","hasModeSelect","modes","questionOptions","country","checkAnswer","correct","CCTLD_ALIASES","normalizedInput","startsWith","points","fontStyle","dangerouslySetInnerHTML","__html","explanation","driving_side","drivingSideData","filterSwitch","src","side","cleanExplanation","telephone","telephoneData","filterZone","norm","vehicle","vehicleData","filterConvention","vehicleRegistration","toUpperCase","quizType","initialPool","onEndGame","config","advanceDelay","incorrect","setHasInitialized","setHistory","pool","setPool","setCurrentQuestion","setTotalQuestions","setShowFeedback","setFeedbackMessage","setIsCorrect","setShowHint","setScore","historyRef","scoreRef","advanceTimerRef","initialize","newPool","shuffled","init","nextQuestion","prevPool","submitAnswer","newQuestion","userAnswer","pointsEarned","currentIndex","useQuizEngine","_nextButtonRef$curren","requestAnimationFrame","_inputRef$current","QuizGameView","_Fragment","language","commonSelectProps","MenuProps","WikipediaQuizPage","selectedQuiz","setGameState","setSettings","lastScore","setLastScore","lastHistory","setLastHistory","activeConfig","filteredPool","zones","z","conventions","switched","letters","l","spaceSplit","useQuizFilter","handleStart","handleBackToMenu","QuizLayout","handleQuizChange","newQuiz","QuizSettingsView","FormControl","InputLabel","Select","CCTLD_LANGUAGES","lang","TELEPHONE_ZONES","zone","VEHICLE_CONVENTIONS","conv","DRIVING_SIDE_FILTERS","f","opt","helperText","InputLabelProps","QuizGame","handleEndGame","QuizSummaryView","_q$userAnswer2","bgcolor","success","warning","_q$userAnswer","answer","normalizedAnswer","CheckCircleIcon","CancelIcon","pages"],"sourceRoot":""}